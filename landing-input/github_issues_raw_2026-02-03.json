[{"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11617", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11617/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11617/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11617/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11617", "id": 3851349613, "node_id": "I_kwDOBiS_IM7lju5t", "number": 11617, "title": "PySpark DataFrame validation fails with AttributeError: 'DataFrame' object has no attribute 'reset_index'", "user": {"login": "sonlac", "id": 5931124, "node_id": "MDQ6VXNlcjU5MzExMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5931124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sonlac", "html_url": "https://github.com/sonlac", "followers_url": "https://api.github.com/users/sonlac/followers", "following_url": "https://api.github.com/users/sonlac/following{/other_user}", "gists_url": "https://api.github.com/users/sonlac/gists{/gist_id}", "starred_url": "https://api.github.com/users/sonlac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sonlac/subscriptions", "organizations_url": "https://api.github.com/users/sonlac/orgs", "repos_url": "https://api.github.com/users/sonlac/repos", "events_url": "https://api.github.com/users/sonlac/events{/privacy}", "received_events_url": "https://api.github.com/users/sonlac/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2026-01-24T14:39:13Z", "updated_at": "2026-01-27T19:03:06Z", "closed_at": "2026-01-27T15:22:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Description\n\nWhen validating PySpark DataFrames with result formats that extract sample data (`SUMMARY`, `COMPLETE`), validation fails with:\n\n```\nAttributeError: 'DataFrame' object has no attribute 'reset_index'\n```\n\n### Environment\n\n- **GX Version:** 1.11.2 (latest as of 2026-01-24)\n- **PySpark:** 3.1.3\n- **Python:** 3.10\n\n### Root Cause\n\n**File:** `great_expectations/validator/metrics_calculator.py`\n**Method:** `head()`\n**Line:** ~620\n\nThe `head()` method unconditionally calls `.reset_index()` (a pandas-only method) on the DataFrame returned by `get_metric()`, which can be a PySpark DataFrame:\n\n```python\ndef head(self, n_rows: int = 5, ...) -> pd.DataFrame:\n    df: pd.DataFrame = self.get_metric(...)\n    return df.reset_index(drop=True, inplace=False)  # \u274c Fails if df is PySpark\n```\n\n### Minimal Reproduction\n\n```python\nfrom pyspark.sql import SparkSession\nimport great_expectations as gx\n\nspark = SparkSession.builder.appName(\"test\").getOrCreate()\nsdf = spark.createDataFrame([(\"user1\", 25), (\"user1\", 25)], [\"name\", \"age\"])\n\ncontext = gx.get_context(mode=\"ephemeral\")\nds = context.data_sources.add_pandas(name=\"ds\")\nasset = ds.add_dataframe_asset(name=\"asset\")\nbatch = asset.add_batch_definition_whole_dataframe(\"batch\")\n\nvalidator = context.get_validator(batch_definition=batch, dataframe=sdf.toPandas())\n\n# \u274c This fails when extracting partial_unexpected_list\nresult = validator.expect_compound_columns_to_be_unique(\n    column_list=[\"name\", \"age\"],\n    result_format=\"SUMMARY\"  # Triggers head() call\n)\n```\n\n**Error:**\n```\nAttributeError: 'DataFrame' object has no attribute 'reset_index'\n```\n\n### Expected Behavior\n\n`head()` should handle both pandas and PySpark DataFrames, as GX claims Spark support.\n\n### Proposed Fix\n\nAdd type check before calling pandas-specific methods:\n\n```python\ndef head(self, n_rows: int = 5, ...) -> pd.DataFrame:\n    df = self.get_metric(...)\n\n    # Convert PySpark to pandas if needed\n    if hasattr(df, 'toPandas'):\n        df = df.toPandas()\n\n    return df.reset_index(drop=True, inplace=False)\n```\n\n**Why this is optimal:**\n- \u2705 Single method change (3 lines)\n- \u2705 Maintains backward compatibility\n- \u2705 Honors type hint contract (`-> pd.DataFrame`)\n- \u2705 Defensive - handles unexpected types gracefully\n\n### Current Workaround\n\nAvoid result fields that trigger `head()`:\n\n```python\n# Use BASIC format (no sample extraction)\nresult_format=\"BASIC\"\n\n# Or remove fields that call head()\ndefault_extract_fields=[\n    \"element_count\",\n    \"unexpected_count\",\n    \"unexpected_percent\",\n    # Don't use: \"partial_unexpected_list\"\n]\n```\n\n### Impact\n\n- **Severity:** High\n- **Affected:** Any PySpark validation using `SUMMARY`/`COMPLETE` result formats\n- **Features broken:** `partial_unexpected_list`, `unexpected_index_list`\n\n### Related Issues\n\n- #3716 - Similar issue, acknowledged as pandas-only limitation (closed without fix)\n- #3195 - Different issue (about primary key columns, not reset_index bug)\n\n### Notes\n\nThis bug has existed across all GX versions (0.x \u2192 1.11.2). The `head()` method in 1.11.2 still has the same issue - verified in source: https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/validator/metrics_calculator.py\n\nGreat Expectations **advertises Spark support** but this implementation bug breaks PySpark validation when extracting samples.\n", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11617/reactions", "total_count": 3, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 1, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11617/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11610", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11610/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11610/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11610/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11610", "id": 3841305377, "node_id": "I_kwDOBiS_IM7k9ash", "number": 11610, "title": "sql server connection schema does not exists", "user": {"login": "asifhasanoff55-tech", "id": 255876472, "node_id": "U_kgDOD0BdeA", "avatar_url": "https://avatars.githubusercontent.com/u/255876472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asifhasanoff55-tech", "html_url": "https://github.com/asifhasanoff55-tech", "followers_url": "https://api.github.com/users/asifhasanoff55-tech/followers", "following_url": "https://api.github.com/users/asifhasanoff55-tech/following{/other_user}", "gists_url": "https://api.github.com/users/asifhasanoff55-tech/gists{/gist_id}", "starred_url": "https://api.github.com/users/asifhasanoff55-tech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asifhasanoff55-tech/subscriptions", "organizations_url": "https://api.github.com/users/asifhasanoff55-tech/orgs", "repos_url": "https://api.github.com/users/asifhasanoff55-tech/repos", "events_url": "https://api.github.com/users/asifhasanoff55-tech/events{/privacy}", "received_events_url": "https://api.github.com/users/asifhasanoff55-tech/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 10101733103, "node_id": "LA_kwDOBiS_IM8AAAACWhw27w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/pending", "name": "pending", "color": "aaaaaa", "default": false, "description": null}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2026-01-22T05:30:56Z", "updated_at": "2026-01-30T19:28:17Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "\nI\u2019ve found a potential bug in Great Expectations when using SQL Server with pymssql in sql_datasource.py.\nIssue:\n When connecting to SQL Server via pymssql, if the schema is not dbo and the schema name contains uppercase letters, Great Expectations raises a \u201cschema does not exist\u201d error, even though the schema actually exists in the database.\nThis seems to be caused by a case-sensitivity mismatch during schema validation.\nCurrent behavior (problematic):\n \n if self.schema_name not in inspector.get_schema_names():\n     ...\nProposed fix:\n Compare schema names in a case-insensitive way:\n \n if self.schema_name.lower() not in [s.lower() for s in inspector.get_schema_names()]:\n     ...\nAfter applying this change, the datasource works correctly with non-dbo schemas that use uppercase or mixed-case names.\nHas anyone else encountered this issue? I just wanted to report this issue in case it helps the team.\nIf you have any questions or need more details, I\u2019d be happy to help.\nThanks! ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11610/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11610/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11609", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11609/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11609/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11609/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11609", "id": 3841188705, "node_id": "I_kwDOBiS_IM7k8-Nh", "number": 11609, "title": "Expect_compound_columns_to_be_unique does not return the unexpected_index_query in the results", "user": {"login": "rishabh-oswal-opensc", "id": 180185578, "node_id": "U_kgDOCr1p6g", "avatar_url": "https://avatars.githubusercontent.com/u/180185578?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabh-oswal-opensc", "html_url": "https://github.com/rishabh-oswal-opensc", "followers_url": "https://api.github.com/users/rishabh-oswal-opensc/followers", "following_url": "https://api.github.com/users/rishabh-oswal-opensc/following{/other_user}", "gists_url": "https://api.github.com/users/rishabh-oswal-opensc/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabh-oswal-opensc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabh-oswal-opensc/subscriptions", "organizations_url": "https://api.github.com/users/rishabh-oswal-opensc/orgs", "repos_url": "https://api.github.com/users/rishabh-oswal-opensc/repos", "events_url": "https://api.github.com/users/rishabh-oswal-opensc/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabh-oswal-opensc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 10101733103, "node_id": "LA_kwDOBiS_IM8AAAACWhw27w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/pending", "name": "pending", "color": "aaaaaa", "default": false, "description": null}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2026-01-22T04:30:25Z", "updated_at": "2026-01-30T19:33:54Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen we run the expectation ExpectCompoundColumnsToBeUnique with the result format, firstly it returns only 200 rows in the unexpected_list and not all failures and secondly if I want to fetch the complete failed rows I don't have the unexpected_index_query.\n\n```\nresult_format = {\n            \"result_format\": \"COMPLETE\",\n            \"unexpected_index_query\": True,\n            \"return_unexpected_index_query\": True,\n            \"unexpected_index_column_names\": [<column list passed to the expectation>]\n}\n```\n\n**To Reproduce**\n```\nimport great_expectations as gx\n\n# Connection details\npostgres_connection_string = \"postgresql+psycopg2://user:password@host:port/database\"\ntable_name = \"your_table\"\nschema_name = \"public\"\n\n# Define expectations\nexpectations = [\n    gx.expectations.ExpectCompoundColumnsToBeUnique(column_list=[\"part_1\", \"part_2\"]),\n]\n\n# Create GX context\ncontext = gx.get_context(mode=\"file\")\n\n# Create expectation suite\nsuite_name = f\"{table_name}_expectations\"\nexpectation_suite = gx.core.expectation_suite.ExpectationSuite(name=suite_name)\nfor expectation in expectations:\n    expectation_suite.add_expectation(expectation)\n\n# Add data source\ndata_source = context.data_sources.add_or_update_postgres(\n    name=f\"postgres_ds_{schema_name}\",\n    connection_string=postgres_connection_string,\n)\ndata_source.test_connection()\n\n# Add table asset\nasset_name = f\"{schema_name}_{table_name}\"\ndata_asset = data_source.add_table_asset(\n        name=asset_name,\n        schema_name=schema_name,\n        table_name=table_name,\n)\n\n# Add batch definition\nbatch_definition = data_asset.add_batch_definition_whole_table(batch_def_name)\n\n# Add suite to context\ncontext.suites.add_or_update(expectation_suite)\n\n# Create validation definition\nvalidation_def_name = f\"{table_name}_validation_{suite_name}\"\nvalidation_definition = context.validation_definitions.add_or_update(\n    gx.core.validation_definition.ValidationDefinition(\n        name=validation_def_name,\n        data=batch_definition,\n        suite=expectation_suite,\n    )\n)\n\n# Run validation\nresult_format = {\n    \"result_format\": \"COMPLETE\",\n    \"unexpected_index_query\": True,\n    \"return_unexpected_index_query\": True,\n    \"unexpected_index_column_names\": [\"part_1\", \"part_2\"]\n}\nvalidation_result = validation_definition.run(result_format=result_format)\n\n# Print results\nprint(validation_result.describe())\n```\n\n**Expected behavior**\nLike how other expectations: ExpectColumnValuesToBeUnique, ExpectColumnValuesToNotBeNull return the `unexpected_index_query` this one should too.\n\n**Environment (please complete the following information):**\n - Operating System: Linux\n - Great Expectations Version: 1.10.0\n - Data Source: Postgres\n - Cloud environment: Docker container running pytests / Dagster / Local ,etc\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11609/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11609/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11603", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11603/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11603/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11603/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11603", "id": 3829631324, "node_id": "I_kwDOBiS_IM7kQ4lc", "number": 11603, "title": "Expectations found in great_expectations.expectations but not in Expectations Gallery", "user": {"login": "zaros", "id": 738805, "node_id": "MDQ6VXNlcjczODgwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/738805?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaros", "html_url": "https://github.com/zaros", "followers_url": "https://api.github.com/users/zaros/followers", "following_url": "https://api.github.com/users/zaros/following{/other_user}", "gists_url": "https://api.github.com/users/zaros/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaros/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaros/subscriptions", "organizations_url": "https://api.github.com/users/zaros/orgs", "repos_url": "https://api.github.com/users/zaros/repos", "events_url": "https://api.github.com/users/zaros/events{/privacy}", "received_events_url": "https://api.github.com/users/zaros/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 10101733103, "node_id": "LA_kwDOBiS_IM8AAAACWhw27w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/pending", "name": "pending", "color": "aaaaaa", "default": false, "description": null}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2026-01-19T12:59:33Z", "updated_at": "2026-01-30T19:36:21Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello,\n\nI have analysed the available expectations in `great_expectations.expectations` module, and found several expectations that are not listed in the Expectations Gallery. \n\nThey are found in [this list](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/__init__.py):\n\n- ExpectColumnValuesToBeDateutilParseable\n- ExpectColumnValuesToBeDecreasing\n- ExpectColumnValuesToBeIncreasing\n- ExpectColumnValuesToBeJsonParseable\n- ExpectColumnValuesToMatchJsonSchema\n- ExpectColumnValuesToMatchStrftimeFormat\n- ExpectMulticolumnValuesToBeUnique\n\nCould I have some clarification why these items are not in the Expectations Gallery (such as they are deprecated, or left out accidentally), and if they are safe to be used?\n\nThank you", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11603/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11597", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11597/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11597/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11597/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11597", "id": 3809584865, "node_id": "I_kwDOBiS_IM7jEabh", "number": 11597, "title": "[Bug] Following the row_condition documentation results in an error.", "user": {"login": "konnor-b", "id": 243644943, "node_id": "U_kgDODoW6Dw", "avatar_url": "https://avatars.githubusercontent.com/u/243644943?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konnor-b", "html_url": "https://github.com/konnor-b", "followers_url": "https://api.github.com/users/konnor-b/followers", "following_url": "https://api.github.com/users/konnor-b/following{/other_user}", "gists_url": "https://api.github.com/users/konnor-b/gists{/gist_id}", "starred_url": "https://api.github.com/users/konnor-b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konnor-b/subscriptions", "organizations_url": "https://api.github.com/users/konnor-b/orgs", "repos_url": "https://api.github.com/users/konnor-b/repos", "events_url": "https://api.github.com/users/konnor-b/events{/privacy}", "received_events_url": "https://api.github.com/users/konnor-b/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2026-01-13T16:18:34Z", "updated_at": "2026-02-02T18:39:57Z", "closed_at": "2026-02-02T18:39:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "# **Describe the bug**\nAdding a row_condition parameter to supported expectations in accordance to the docs results in an error. \n\n# **To Reproduce**\n\n**Documentation Sample Code:**\n\n```\nimport great_expectations as gx\n\ncontext = gx.get_context()\n\nfrom great_expectations.expectations.row_conditions import Column\n\n# Create condition statements with column references and Python comparisons.\nstatement_1 = Column(\"tenure\") > 2\nstatement_2 = Column(\"salary\") <= 50000\nstatement_3 = Column(\"department\") == \"Sales\"\n\n# Combine condition statements with an AND relationship into condition blocks.\nblock_1 = statement_1 & statement_2\nblock_2 = statement_3\n\n# Combine condition blocks with OR.\nrow_condition = block_1 | block_2\n\n# Add the `row_condition` parameter alongside the Expectation's other arguments.\nexpectation = gx.expectations.ExpectColumnValuesToBeBetween(\n    column=\"bonus\", min_value=5000, max_value=10000, row_condition=row_condition\n)\n```\n\n**My Code:**\n```\n\nimport great_expectations as gx\nfrom great_expectations import expectations as gxe\nfrom great_expectations.expectations.row_conditions import Column\n\ncontext = gx.get_context()\n\n\ndatasource_name = \"test\"\n\nmy_connection_string = **REDACTED**\n\nasset_name = \"oracle_asset\"\nasset_query = \"SELECT * FROM TEST_TABLE\"\n\ndata_asset = data_source.add_table_asset(\n    name=\"test_table_asset\", table_name=\"TEST_TABLE\"\n)\n\nasset = data_asset.add_batch_definition_whole_table(name=\"batch_def_name\")\n\nquery_data_asset = data_source.add_query_asset(query=asset_query, name=asset_name)\n\nvalidator = context.get_validator(\n    datasource_name=datasource_name,\n    data_asset_name=asset_name,\n)\n\nexpected_values = [1]\n\nstatement_1 = Column(\"COLUMN1\").is_not_null()\n\nvalidator.expect_column_values_to_be_in_set(column=\"COLUMN1\", row_condition=statement_1, value_set=[\"ValueA\"])\n\nresults = validator.validate()\nprint(results)\n\n```\n**Output:**\n```\n\nfoo/lib/python3.12/site-packages/great_expectations/validator/util.py\", line 128, in _recursively_convert_to_json_serializable\n    raise TypeError(  # noqa: TRY003 # FIXME CoP\nTypeError: type='nullity' column=Column(name='COLUMN1') is_null=False is of type NullityCondition which cannot be serialized.\n```\n\n# **Workaround:**\n\nPass the Condition object as a dictionary in the expectation's row_condition parameter. \n\n```\nvalidator.expect_column_values_to_be_in_set(column=\"COLUMN1\", row_condition=statement_1.dict(), value_set=[\"ValueA\"])\n```\n# **Expected behavior**\nThe docs should reflect the functionality of the code or the code should be updated to reflect the syntax of the docs. \n\n# **Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: >= 1.9.0\n - Data Source: Oracle, Postgres\n - Cloud environment: N/A\n\n", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11597/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11597/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11592", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11592/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11592/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11592/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11592", "id": 3794637296, "node_id": "I_kwDOBiS_IM7iLZHw", "number": 11592, "title": "`unexpected_index_column_names` on `ValidationDefinition` level when using `Checkpoint`", "user": {"login": "oleksandr-kinship", "id": 104092395, "node_id": "U_kgDOBjRS6w", "avatar_url": "https://avatars.githubusercontent.com/u/104092395?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oleksandr-kinship", "html_url": "https://github.com/oleksandr-kinship", "followers_url": "https://api.github.com/users/oleksandr-kinship/followers", "following_url": "https://api.github.com/users/oleksandr-kinship/following{/other_user}", "gists_url": "https://api.github.com/users/oleksandr-kinship/gists{/gist_id}", "starred_url": "https://api.github.com/users/oleksandr-kinship/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oleksandr-kinship/subscriptions", "organizations_url": "https://api.github.com/users/oleksandr-kinship/orgs", "repos_url": "https://api.github.com/users/oleksandr-kinship/repos", "events_url": "https://api.github.com/users/oleksandr-kinship/events{/privacy}", "received_events_url": "https://api.github.com/users/oleksandr-kinship/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2026-01-08T22:15:16Z", "updated_at": "2026-02-03T03:17:51Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm new in Gx framework and data management itself, tough trying to build data-quality framework on my project. \n\nInitially im use all basic abstractions to build correct sequence of these to validate data in MSSQL, \nAt end all finished with run of `Checkpoint` that runs `ValidationDefinition` then `Action`, im also use really useful `unexpected_index_column_names` (with `_id`  coumn) in result_format for `Checkpoint.run()` to include it into results and see in my dataDoc html. \n\nIt works perfect when I have 1 table (i mean all set of abstractions that end with VD), then added second again all great.\nBut when I have added a third table that doesn't have `_id` column it's failed \nThen I start finding the way how to define `unexpected_index_column_names` on table level, I have found that I can define it only in `run()` function for Checkpoint, VD or batch.\n\nIt means if I want to use Checkpoint I have to include there only VDs with tables that have my column from `unexpected_index_column_names`.  otherwise check for tables that not include the index column will be errored. \n\nSo if miss something let me know, but I would use full cycle of abstractions with predefined actions, but for that I need to use Checkpoint, but I can't skip `unexpected_index_column_names` it looks really useful \n\n**Describe the solution you'd like**\nI would like to set `unexpected_index_column_names` on any of table level abstractions \n\n**Describe alternatives you've considered**\nRight now im use loop with run() for all my VD, to each add result_format with `unexpected_index_column_names` correct for each table that using. After that separately build site `context.build_data_docs(site_names=site_name)` (with no action, before im used `gx.checkpoint.actions.UpdateDataDocsAction`)\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11592/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11592/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11584", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11584/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11584/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11584/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11584", "id": 3787487656, "node_id": "I_kwDOBiS_IM7hwHmo", "number": 11584, "title": "ExpectationSuite deduplicates expectations with same type/column but different kwargs (e.g., different regex patterns)", "user": {"login": "subediparas5", "id": 37067860, "node_id": "MDQ6VXNlcjM3MDY3ODYw", "avatar_url": "https://avatars.githubusercontent.com/u/37067860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subediparas5", "html_url": "https://github.com/subediparas5", "followers_url": "https://api.github.com/users/subediparas5/followers", "following_url": "https://api.github.com/users/subediparas5/following{/other_user}", "gists_url": "https://api.github.com/users/subediparas5/gists{/gist_id}", "starred_url": "https://api.github.com/users/subediparas5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subediparas5/subscriptions", "organizations_url": "https://api.github.com/users/subediparas5/orgs", "repos_url": "https://api.github.com/users/subediparas5/repos", "events_url": "https://api.github.com/users/subediparas5/events{/privacy}", "received_events_url": "https://api.github.com/users/subediparas5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2026-01-07T06:10:22Z", "updated_at": "2026-01-07T13:38:49Z", "closed_at": "2026-01-07T13:38:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When adding multiple expectations of the same type targeting the same column but with different kwargs (such as different regex patterns), Great Expectations incorrectly treats them as duplicates and overwrites earlier expectations with later ones. This results in only one expectation being validated instead of all of them.\\\n\n**Environment**\n- Great Expectations version: 1.x (current main branch)\n- Python version: 3.12\n- Execution engine: Pandas (also affects other engines)\n\n**Steps to Reproduce**\n```import pandas as pd\nimport great_expectations as gx\n\n# Create a simple dataframe\ndf = pd.DataFrame({\"First Name\": [\"John\", \"Jane\", \"Bob\"]})\n\n# Create context and validator\ncontext = gx.get_context()\ndata_source = context.data_sources.add_pandas(\"pandas\")\ndata_asset = data_source.add_dataframe_asset(name=\"test\")\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\"batch\")\nbatch = batch_definition.get_batch(batch_parameters={\"dataframe\": df})\nvalidator = context.get_validator(batch=batch)\n\n# Add multiple regex expectations on the same column with DIFFERENT regex patterns\nvalidator.expect_column_values_to_not_match_regex(\n    column=\"First Name\",\n    regex=r\"^\\s*[Mm][Rr]\\.\",  # Check for \"Mr.\" prefix\n    meta={\"rule_id\": \"1\"}\n)\nvalidator.expect_column_values_to_not_match_regex(\n    column=\"First Name\",\n    regex=r\"['\\\"]\",  # Check for quotes\n    meta={\"rule_id\": \"2\"}\n)\nvalidator.expect_column_values_to_not_match_regex(\n    column=\"First Name\",\n    regex=r\"(?i)\\bJr\\.\\s*$\",  # Check for \"Jr.\" suffix\n    meta={\"rule_id\": \"3\"}\n)\n\n# Check how many expectations are in the suite\nprint(f\"Expected 3 expectations, got: {len(validator.expectation_suite.expectations)}\")\n\n# Validate\nresult = validator.validate()\nprint(f\"Expected 3 results, got: {len(result.results)}\")\n```\n\n**Expected Behavior**\n- validator.expectation_suite.expectations should contain 3 expectations\n- validator.validate().results should return 3 validation results\n\n**Actual Behavior**\n- validator.expectation_suite.expectations contains only 1 expectation (the last one added)\n- validator.validate().results returns only 1 validation result\n\nThe first two expectations are silently overwritten by subsequent expectations.\n\n**Impact**\nThis bug affects any use case where users want to apply multiple expectations of the same type to the same column with different parameters, such as:\n- Multiple regex patterns on the same column\n- Multiple range checks with different thresholds on the same column\n- Multiple pattern checks on the same column\n\nThis is a common pattern in data quality rules where a single column may need to satisfy multiple distinct validation criteria.", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11584/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11584/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11579", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11579/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11579/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11579/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11579", "id": 3780538393, "node_id": "I_kwDOBiS_IM7hVnAZ", "number": 11579, "title": "SqlAlchemyExecutionEngine.resolve_metric_bundle raises IndexError with duckdb-engine (empty results)", "user": {"login": "tim0306", "id": 8168598, "node_id": "MDQ6VXNlcjgxNjg1OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/8168598?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tim0306", "html_url": "https://github.com/tim0306", "followers_url": "https://api.github.com/users/tim0306/followers", "following_url": "https://api.github.com/users/tim0306/following{/other_user}", "gists_url": "https://api.github.com/users/tim0306/gists{/gist_id}", "starred_url": "https://api.github.com/users/tim0306/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tim0306/subscriptions", "organizations_url": "https://api.github.com/users/tim0306/orgs", "repos_url": "https://api.github.com/users/tim0306/repos", "events_url": "https://api.github.com/users/tim0306/events{/privacy}", "received_events_url": "https://api.github.com/users/tim0306/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2026-01-05T08:00:40Z", "updated_at": "2026-01-05T10:55:21Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nGX 1.10.0 fails when running expectations against DuckDB via duckdb-engine. During metric resolution, SqlAlchemyExecutionEngine.resolve_metric_bundle crashes with IndexError: list index out of range, causing all expectations to return Observed: N/A. The same SQL executed directly via SQLAlchemy returns a valid row, so the failure appears to be in GX\u2019s SQL execution path.\n\n**To Reproduce**\ngreat_expectations.yml isn\u2019t used here; this is a Fluent API example. (If required, I can adapt to a YAML config.)\n\nimport os\nfrom urllib.parse import quote_plus\n\nimport great_expectations as gx\nfrom great_expectations.core.run_identifier import RunIdentifier\nfrom minio import Minio\n\nBUCKET = \"ais-lake\"\nPREFIX = \"silver/source=dma/dt=2026-01-01/\"\nDUCKDB_DB = \"/tmp/gx_duckdb.db\"\n\nendpoint = os.getenv(\"MINIO_ENDPOINT\", \"192.168.70.30:9000\")\naccess_key = os.getenv(\"MINIO_ACCESS_KEY\", \"\")\nsecret_key = os.getenv(\"MINIO_SECRET_KEY\", \"\")\nsecure = os.getenv(\"MINIO_SECURE\", \"false\").lower() == \"true\"\n\nclient = Minio(endpoint, access_key=access_key, secret_key=secret_key, secure=secure)\nobjects = list(client.list_objects(BUCKET, prefix=PREFIX, recursive=True))\nparquet_files = [o.object_name for o in objects if o.object_name.endswith(\".parquet\")]\nfile_path = f\"s3://{BUCKET}/{parquet_files[0]}\"\n\ncontext = gx.get_context()\n\nconnection_string = (\n    f\"duckdb:///{DUCKDB_DB}\"\n    f\"?s3_endpoint={quote_plus(endpoint)}\"\n    f\"&s3_access_key_id={quote_plus(access_key)}\"\n    f\"&s3_secret_access_key={quote_plus(secret_key)}\"\n    f\"&s3_use_ssl={quote_plus(str(secure).lower())}\"\n    \"&s3_region=eu-west-1\"\n    \"&s3_url_style=path\"\n)\ndatasource = context.data_sources.add_sql(\n    name=\"duckdb_sql\",\n    connection_string=connection_string,\n)\n\nengine = datasource.get_execution_engine().engine\nwith engine.begin() as conn:\n    conn.exec_driver_sql(\n        f\"CREATE OR REPLACE TABLE main.gx_table_0 AS \"\n        f\"SELECT * FROM read_parquet('{file_path}')\"\n    )\n\ndata_asset = datasource.add_query_asset(\n    name=\"file_data_0\",\n    query=\"SELECT * FROM main.gx_table_0\",\n)\nbatch_def = data_asset.add_batch_definition(name=\"FULL_TABLE\")\n_ = batch_def.get_batch()\n\nsuite = context.suites.add(gx.ExpectationSuite(name=\"demo_suite\"))\nfrom great_expectations.expectations import ExpectColumnValuesToNotBeNull\nsuite.add_expectation(ExpectColumnValuesToNotBeNull(column=\"timestamp\"))\n\nvalidation_def = gx.ValidationDefinition(\n    name=\"validate\",\n    data=batch_def,\n    suite=suite,\n)\nvalidation_def = context.validation_definitions.add(validation_def)\n\ncheckpoint = gx.Checkpoint(\n    name=\"checkpoint\",\n    validation_definitions=[validation_def],\n    result_format={\"result_format\": \"COMPLETE\"},\n    actions=[],\n)\ncheckpoint = context.checkpoints.add(checkpoint)\n\nresult = checkpoint.run(run_id=RunIdentifier(run_name=\"repro\"))\nprint(result.success)\nprint(result.run_results)\n\n**Stack trace (trimmed):**\n\nIndexError: list index out of range\n  File \".../great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1016, in resolve_metric_bundle\n    f\"\"\"SqlAlchemyExecutionEngine computed {len(res[0])} metrics on domain_id ...\n...\ngreat_expectations.exceptions.exceptions.MetricResolutionError: list index out of range\n\n**Expected behavior**\nExpectations should run successfully (the underlying SQL query returns a row; direct SQLAlchemy execution works). expect_column_values_to_not_be_null should PASS for the test data.\n\n**Environment**\nOperating System: Linux Ubuntu 24.04.3 LTS\nGreat Expectations Version: 1.10.0\nduckdb-engine==0.17.0\nduckdb==1.4.3\nsqlalchemy==2.x\nData Source: SQL (DuckDB via SQLAlchemy / duckdb-engine)\nCloud environment: local (MinIO for S3-compatible storage)\n\n**Additional context**\nI can work around the issue by overriding SqlAlchemyExecutionEngine.resolve_metric_bundle to execute the compiled SQL directly and return the result row; in that case, all expectations PASS. This suggests an issue in GX\u2019s SQL execution path (possibly connection lifecycle or result handling). If helpful, I can share the patch.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11579/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11576", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11576/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11576/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11576/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11576", "id": 3760671233, "node_id": "I_kwDOBiS_IM7gJ0oB", "number": 11576, "title": "Fix typing for module reexport", "user": {"login": "temarych", "id": 75130519, "node_id": "MDQ6VXNlcjc1MTMwNTE5", "avatar_url": "https://avatars.githubusercontent.com/u/75130519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/temarych", "html_url": "https://github.com/temarych", "followers_url": "https://api.github.com/users/temarych/followers", "following_url": "https://api.github.com/users/temarych/following{/other_user}", "gists_url": "https://api.github.com/users/temarych/gists{/gist_id}", "starred_url": "https://api.github.com/users/temarych/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/temarych/subscriptions", "organizations_url": "https://api.github.com/users/temarych/orgs", "repos_url": "https://api.github.com/users/temarych/repos", "events_url": "https://api.github.com/users/temarych/events{/privacy}", "received_events_url": "https://api.github.com/users/temarych/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-12-24T16:25:35Z", "updated_at": "2026-01-15T14:11:47Z", "closed_at": "2026-01-15T14:11:47Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nPyright raises an error when importing `get_context` from the top-level `great_expectations` module. To resolve this, all reexported symbols must be listed in `__all__`.\n\n**To Reproduce**\nSetup a project with UV and add the following lines from the quickstart guide:\n```python\nimport great_expectations as gx\n\ncontext = gx.get_context()\n```\n\nThen run Pyright:\n```\ngx.py:3:14 - error: \"get_context\" is not exported from module \"great_expectations\" (reportPrivateImportUsage)\n```\n\n**Expected behavior**\nPyright should not report errors for symbols that are intentionally re-exported from the `great_expectations` module.\n\n**Environment:**\n - Operating System: macOS\n - Great Expectations Version: 1.10.0\n - Package Manager: UV\n - Type Checker: Pyright", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11576/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11576/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11566", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11566/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11566/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11566/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11566", "id": 3723426129, "node_id": "I_kwDOBiS_IM7d7vlR", "number": 11566, "title": "Row Condition with Date Column Causes ResourceFreshnessAggregateError Due to Serialization Mismatch", "user": {"login": "freget", "id": 4210849, "node_id": "MDQ6VXNlcjQyMTA4NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4210849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freget", "html_url": "https://github.com/freget", "followers_url": "https://api.github.com/users/freget/followers", "following_url": "https://api.github.com/users/freget/following{/other_user}", "gists_url": "https://api.github.com/users/freget/gists{/gist_id}", "starred_url": "https://api.github.com/users/freget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freget/subscriptions", "organizations_url": "https://api.github.com/users/freget/orgs", "repos_url": "https://api.github.com/users/freget/repos", "events_url": "https://api.github.com/users/freget/events{/privacy}", "received_events_url": "https://api.github.com/users/freget/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-12-12T13:26:10Z", "updated_at": "2026-02-03T03:46:43Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen adding a `row_condition` that compares a column to a Python `datetime.date` object, Great Expectations raises a `ResourceFreshnessAggregateError`. The error occurs when updating the validation definition, caused by a mismatch between the in-memory `datetime` object and its string representation after JSON serialization/deserialization.\n\nThe following exception is raised:\n\n```\ngreat_expectations.exceptions.resource_freshness.ResourceFreshnessAggregateError: ExpectationSuite 'suite' has changed since it has last been saved. Please update with <SUITE_OBJECT>.save(), then try your action again.\n```\n\n**To Reproduce**\nUse the following minimal example (with dummy names for database, table, and columns):\n\n```\nimport datetime import great_expectations as gx \nfrom great_expectations.expectations.row_conditions import Column\n\ncontext = gx.get_context(mode=\"ephemeral\")\n\nconnection_string = \"postgresql+psycopg2://user:password@host:5432/dummydb\" \ndata_source = context.data_sources.add_or_update_postgres( name=\"postgresql\", connection_string=connection_string ) \ndata_asset = data_source.add_table_asset( name=\"dummy_table\", table_name=\"myschema.my_table\" ) \nbatch_definition = data_asset.add_batch_definition_whole_table(name=\"whole_table\") \nsuite = gx.ExpectationSuite(\"suite\")\n\nex = gx.expectations.ExpectColumnValuesToNotBeNull( column=\"my_column\", row_condition=Column(\"my_date_column\") < datetime.date.today() )\n\nsuite.add_expectation(ex)\n\ncontext.suites.add_or_update(suite) \ncontext.data_sources.add_or_update_postgres(data_source)\n\nvd = gx.ValidationDefinition(data=batch_definition, suite=suite, name=\"dummy_table\") \ncontext.validation_definitions.add_or_update(vd)\n```\n\nWhen running this code, the following error occurs:\n\n```\ngreat_expectations.exceptions.resource_freshness.ResourceFreshnessAggregateError: ExpectationSuite 'suite' has changed since it has last been saved. Please update with <SUITE_OBJECT>.save(), then try your action again.\n```\n\n**Expected behavior**\nThe expectation with a `row_condition` on a date column should work seamlessly as documented [here](https://github.com/great-expectations/great_expectations/blob/f14a590442ecc19e5771aa7eebf3ff1999c96641/docs/docusaurus/docs/core/customize_expectations/_examples/row_conditions.py#L159), and the serialization/deserialization of the condition should not cause any state mismatches or errors when updating validation definitions.\n\n**Environment (please complete the following information):**\nOperating System: Windows 10, Databricks\nGreat Expectations Version: 1.9.2\nData Source: PostgreSQL via SQLAlchemy\n\n**Additional context**\nUpon further investigation, the problem arises because the JSON serialization of the Python `datetime.date` used for filtering is stored as a string. When updating the validation definition, the deserialized version is a string, while the in-memory version is still a datetime object, resulting in a mismatch and the `ResourceFreshnessAggregateError`.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11566/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11566/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11565", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11565/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11565/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11565/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11565", "id": 3723376833, "node_id": "I_kwDOBiS_IM7d7jjB", "number": 11565, "title": "Row Condition Feature Fails on SQLAlchemy Data Sources: \"module 'sqlalchemy' has no attribute 'ColumnElement'\" Exception", "user": {"login": "freget", "id": 4210849, "node_id": "MDQ6VXNlcjQyMTA4NDk=", "avatar_url": "https://avatars.githubusercontent.com/u/4210849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freget", "html_url": "https://github.com/freget", "followers_url": "https://api.github.com/users/freget/followers", "following_url": "https://api.github.com/users/freget/following{/other_user}", "gists_url": "https://api.github.com/users/freget/gists{/gist_id}", "starred_url": "https://api.github.com/users/freget/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freget/subscriptions", "organizations_url": "https://api.github.com/users/freget/orgs", "repos_url": "https://api.github.com/users/freget/repos", "events_url": "https://api.github.com/users/freget/events{/privacy}", "received_events_url": "https://api.github.com/users/freget/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-12-12T13:10:48Z", "updated_at": "2025-12-12T13:10:48Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen using the new row_condition feature as of Great Expectations 1.9, evaluating expectations on SQLAlchemy data sources fails. The following exception is raised:\n\n```\ngreat_expectations.exceptions.exceptions.MetricResolutionError: module 'sqlalchemy' has no attribute 'ColumnElement' \n```\n\n**To Reproduce**\nUse the following minimal example (with dummy names for database, table, and columns):\n\n```\nimport great_expectations as gx from great_expectations.expectations.row_conditions import Column\n\ncontext = gx.get_context(mode=\"ephemeral\")\n\nconnection_string = \"postgresql+psycopg2://user:password@host:5432/dummydb\" \ndata_source = context.data_sources.add_or_update_postgres( name=\"postgresql\", connection_string=connection_string ) \ndata_asset = data_source.add_table_asset( name=\"dummy_table\", table_name=\"myschema.my_table\" ) \nbatch_definition = data_asset.add_batch_definition_whole_table(name=\"whole_table\") \nsuite = gx.ExpectationSuite(\"suite\")\n\nex = gx.expectations.ExpectColumnValuesToNotBeNull( column=\"my_column\", row_condition=Column(\"my_condition_column\").is_in([1, 2]) )\n\nsuite.add_expectation(ex)\n\ncontext.suites.add_or_update(suite) \ncontext.data_sources.add_or_update_postgres(data_source)\n\nvd = gx.ValidationDefinition(data=batch_definition, suite=suite, name=\"dummy_table\") \ncontext.validation_definitions.add_or_update(vd)\ncheckpoint = gx.Checkpoint( name=\"test\", validation_definitions=[vd] )\n\nprint(checkpoint.run())\n```\n\nRelevant results output:\n```\nresults = [\n    {\n        \"success\": False,\n        \"expectation_config\": {\n            \"type\": \"expect_column_values_to_not_be_null\",\n            \"kwargs\": {\n                \"column\": \"my_column\",\n                \"row_condition\": {\n                    \"column\": {\n                        \"name\": \"my_condition_column\"\n                    },\n                    \"operator\": \"IN\",\n                    \"parameter\": [1, 2],\n                    \"type\": \"comparison\"\n                },\n                \"batch_id\": \"postgresql-dummy_table\"\n            },\n            \"meta\": {},\n            \"id\": \"2bcecebe-32b6-4055-b49d-976432cd8d70\",\n            \"severity\": \"critical\"\n        },\n        \"result\": {},\n        \"meta\": {},\n        \"exception_info\": {\n            \"MetricConfigurationID(metric_name='table.row_count', metric_domain_kwargs_id='1f510fb50914a9b611801503e4540432', metric_value_kwargs_id=())\": {\n                \"exception_traceback\": (\n                    \"Traceback (most recent call last):\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 590, in _process_direct_and_bundled_metric_computation_configurations\\n\"\n                    \"    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 982, in resolve_metric_bundle\\n\"\n                    \"    queries: list[dict] = self._organize_metrics_by_domain(\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 1133, in _organize_metrics_by_domain\\n\"\n                    \"    selectable: sqlalchemy.Selectable = self.get_domain_records(domain_kwargs=domain_kwargs)\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 664, in get_domain_records\\n\"\n                    \"    parsed_condition = self.condition_to_filter_clause(row_condition)\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 1546, in condition_to_filter_clause\\n\"\n                    \"    if not isinstance(output, sa.ColumnElement):\\n\"\n                    \"AttributeError: module 'sqlalchemy' has no attribute 'ColumnElement'\\n\\n\"\n                    \"The above exception was the direct cause of the following exception:\\n\\n\"\n                    \"Traceback (most recent call last):\\n\"\n                    \"  File \\\".../site-packages/great_expectations/validator/validation_graph.py\\\", line 290, in _resolve\\n\"\n                    \"    self._execution_engine.resolve_metrics(\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 294, in resolve_metrics\\n\"\n                    \"    return self._process_direct_and_bundled_metric_computation_configurations(\\n\"\n                    \"  File \\\".../site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 594, in _process_direct_and_bundled_metric_computation_configurations\\n\"\n                    \"    raise gx_exceptions.MetricResolutionError(\\n\"\n                    \"great_expectations.exceptions.exceptions.MetricResolutionError: module 'sqlalchemy' has no attribute 'ColumnElement'\\n\"\n                ),\n                \"exception_message\": \"module 'sqlalchemy' has no attribute 'ColumnElement'\",\n                \"raised_exception\": True\n            }\n        }\n    }\n]\n```\n\n**Expected behavior**\nThe expectation with row_condition should work seamlessly with SQLAlchemy data sources, allowing conditional evaluation as it does with other backends (e.g., Pandas).\n\n**Environment:**\n\nOperating System: Windows 10, Databricks\nGreat Expectations Version: 1.9.2\nData Source: PostgreSQL via SQLAlchemy\n\n**Additional context**\nNone.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11565/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11560", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11560/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11560/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11560/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11560", "id": 3718106972, "node_id": "I_kwDOBiS_IM7dnc9c", "number": 11560, "title": "Profiler \u529f\u80fd\u57281.9.1 \u65e0\u6cd5\u4f7f\u7528", "user": {"login": "panhf", "id": 49714883, "node_id": "MDQ6VXNlcjQ5NzE0ODgz", "avatar_url": "https://avatars.githubusercontent.com/u/49714883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/panhf", "html_url": "https://github.com/panhf", "followers_url": "https://api.github.com/users/panhf/followers", "following_url": "https://api.github.com/users/panhf/following{/other_user}", "gists_url": "https://api.github.com/users/panhf/gists{/gist_id}", "starred_url": "https://api.github.com/users/panhf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/panhf/subscriptions", "organizations_url": "https://api.github.com/users/panhf/orgs", "repos_url": "https://api.github.com/users/panhf/repos", "events_url": "https://api.github.com/users/panhf/events{/privacy}", "received_events_url": "https://api.github.com/users/panhf/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-12-11T07:10:49Z", "updated_at": "2026-02-02T22:12:47Z", "closed_at": "2026-02-02T22:12:47Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Profiler\n\u529f\u80fd\u57281.9.1 \u65e0\u6cd5\u4f7f\u7528", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11560/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11560/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11542", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11542/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11542/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11542/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11542", "id": 3685518788, "node_id": "I_kwDOBiS_IM7brI3E", "number": 11542, "title": "Generated data docs website is very slow for many validations", "user": {"login": "nikaltipar", "id": 45468465, "node_id": "MDQ6VXNlcjQ1NDY4NDY1", "avatar_url": "https://avatars.githubusercontent.com/u/45468465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikaltipar", "html_url": "https://github.com/nikaltipar", "followers_url": "https://api.github.com/users/nikaltipar/followers", "following_url": "https://api.github.com/users/nikaltipar/following{/other_user}", "gists_url": "https://api.github.com/users/nikaltipar/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikaltipar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikaltipar/subscriptions", "organizations_url": "https://api.github.com/users/nikaltipar/orgs", "repos_url": "https://api.github.com/users/nikaltipar/repos", "events_url": "https://api.github.com/users/nikaltipar/events{/privacy}", "received_events_url": "https://api.github.com/users/nikaltipar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-12-02T12:04:57Z", "updated_at": "2025-12-02T12:04:57Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nCreating a data docs website for a suite with many validations (in the order of thousands), slows down my browser and gets stuck in the process.\n\nIn my case I tested 3000 test validations. It can be any type, although I haven't created sample code in this bug report.\n\n**To Reproduce**\nPlease create any suite with test 3000 validations against a simple pandas dataframe and create the corresponding data docs website using the default settings.\n\n**Expected behavior**\nThe corresponding website should function without getting stuck (for a long time, at least).\n\n**Environment (please complete the following information):**\n - Operating System: Windows\n - Great Expectations Version: 1.7.0\n - Data Source: Pandas\n - Cloud environment: Local\n\n**Additional context**\nI am trying to introduce Great Expectations to my team and would like the least friction possible. Therefore I would like the data docs website to work as expected for a big number of validations.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11542/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11542/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11532", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11532/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11532/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11532/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11532", "id": 3660791689, "node_id": "I_kwDOBiS_IM7aMz-J", "number": 11532, "title": "batch.columns() returns empty list [] for Redshift batches, breaking all column-based validations", "user": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-11-24T22:42:18Z", "updated_at": "2026-01-09T23:11:11Z", "closed_at": "2026-01-09T23:11:11Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "## \ud83d\udc1b Bug Description\n\nWhen using Great Expectations with Amazon Redshift (via `gx-sqlalchemy-redshift`), the `batch.columns()` method returns an empty list `[]` even when the batch contains data. This causes **all expectations that reference column names to fail** with `InvalidMetricAccessorDomainKwargsKeyError: Error: The column \"X\" in BatchData does not exist.`\n\n### Impact\n\n- \u274c **Critical**: Blocks all column-based validations on Redshift\n- \u274c Validations fail at ~11% completion (36 of 342 expectations in our case)\n- \u274c Affects both partitioned and non-partitioned batches\n- \u2705 `batch.head()` works correctly and shows all columns\n- \u2705 The underlying `get_columns()` method in the dialect is implemented correctly\n\n---\n\n## \ud83d\udd0d Environment\n\n```\ngreat-expectations: 1.9.1\ngx-sqlalchemy-redshift: 0.8.20\nSQLAlchemy: 2.0.44\nPython: 3.12\nDatabase: Amazon Redshift\n```\n\n---\n\n## \ud83d\udccb Steps to Reproduce\n\n### Minimal Reproducible Example\n\n```python\nimport great_expectations as gx\n\n# Setup\ncontext = gx.get_context(mode=\"file\")\ndatasource = context.get_datasource(\"redshift_datasource\")\nasset = datasource.get_asset(\"my_table_asset\")\nbatch_definition = asset.get_batch_definition(\"daily_batch\")\nbatch = batch_definition.get_batch()\n\n# Problem: columns() returns empty list\nprint(batch.columns())  # Output: []\n\n# But head() works and shows all columns\nprint(batch.head())  # Shows DataFrame with 127 columns\n\n# Validation fails with \"column does not exist\"\nexpectation = gx.expectations.ExpectColumnValuesToNotBeNull(column=\"payment_id\")\nresult = batch.validate(expectation)\n# Raises: InvalidMetricAccessorDomainKwargsKeyError:\n# Error: The column \"payment_id\" in BatchData does not exist.\n```\n\n### Configuration\n\n**Data Source Configuration:**\n```yaml\nfluent_datasources:\n  redshift_datasource:\n    type: redshift\n    connection_string: \"redshift+psycopg2://...\"\n    assets:\n      my_table_asset:\n        type: table\n        table_name: schema.table_name\n        batch_definitions:\n          - name: daily_batch\n            partitioner:\n              column_name: transaction_date\n              method_name: partition_on_year_and_month_and_day\n```\n\n---\n\n## \ud83c\udfaf Expected vs Actual Behavior\n\n### Expected\n```python\nbatch.columns()  # Should return: ['column1', 'column2', 'column3', ...]\n```\n\n### Actual\n```python\nbatch.columns()  # Returns: []\n```\n\n---\n\n## \ud83d\udcca Evidence\n\n### Diagnostic Output\n\n```bash\n\ud83d\udcca Testing batch.head():\n\u2705 Works! Returned:\n                analysis_id      result  ...  parent_alias\n0  691c93ce3cd8043c4dfc6cb3  authorized  ...        light\n...\n[5 rows x 127 columns]\n\n\u274c Testing batch.columns() [BUG]:\nResult: []\n\u26a0\ufe0f  BUG CONFIRMED: returned empty list []\n```\n\n### Validation Failure Log\n\n```\nCalculating Metrics:  11%|\u2588\u258f| 36/342 [09:02<1:16:52, 15.07s/it]\n\n{\n  \"success\": false,\n  \"expectation_config\": {\n    \"type\": \"expect_column_values_to_not_be_null\",\n    \"kwargs\": {\"column\": \"payment_id\"}\n  },\n  \"exception_info\": {\n    \"exception_message\": \"Error: The column \\\"payment_id\\\" in BatchData does not exist.\",\n    \"exception_traceback\": \"...\n      File \\\".../great_expectations/expectations/metrics/util.py\\\", line 855\n        raise gx_exceptions.InvalidMetricAccessorDomainKwargsKeyError(\n      InvalidMetricAccessorDomainKwargsKeyError: Error: The column \\\"payment_id\\\" in BatchData does not exist.\"\n  }\n}\n```\n\n---\n\n## \ud83d\udd2c Technical Analysis\n\n### Root Cause\n\nThe issue occurs in the internal validation flow:\n\n1. GX calls `batch.columns()` internally to verify column existence before running expectations\n2. For Redshift, `batch.columns()` returns `[]`\n3. GX's `_verify_column_names_exist_and_get_normalized_typed_column_names_map()` (line 855 in `util.py`) raises an error because it thinks no columns exist\n4. All column-based expectations fail\n\n### Why head() works but columns() doesn't\n\n- `batch.head()` executes an actual SQL query (`SELECT * FROM ... LIMIT 5`) which returns data **and** column metadata via the database cursor\n- `batch.columns()` attempts to retrieve column metadata directly without executing a full query, but this optimization fails for Redshift batches\n\n### Key Finding: HeadData structure\n\nWhen debugging, we discovered that `batch.head()` returns a `HeadData` object with the following structure:\n\n```python\nhead_data = batch.head()\ntype(head_data)  # <class 'great_expectations.datasource.fluent.interfaces.HeadData'>\ndir(head_data)   # ['data']  # Only has 'data' attribute!\n\n# Columns are accessible via:\nhead_data.data.columns  # \u2705 Returns list of column names\n```\n\n---\n\n## \ud83d\udca1 Workaround\n\nWe've implemented a monkey patch that replaces `Batch.columns()` with a version that uses `head().data.columns` as a fallback:\n\n```python\nfrom great_expectations.datasource.fluent.interfaces import Batch\n\n_original_columns = Batch.columns\n\ndef patched_columns(self) -> list[str]:\n    \"\"\"Patched version that uses head() as fallback.\"\"\"\n    # Try original method first\n    try:\n        columns = _original_columns(self)\n        if columns:\n            return columns\n    except Exception:\n        pass\n\n    # Workaround: Extract from head()\n    head_data = self.head()\n    if hasattr(head_data, \"data\") and hasattr(head_data.data, \"columns\"):\n        return list(head_data.data.columns)\n\n    raise RuntimeError(\"Could not retrieve columns from batch\")\n\nBatch.columns = patched_columns\n```\n\n**Result**: \u2705 All 342 expectations now execute successfully!\n\n---\n\n## \ud83c\udfaf Proposed Solution\n\nThe `Batch.columns()` method should:\n\n1. **Try the optimized path first** (current implementation)\n2. **If it returns empty**, fall back to extracting columns from `head().data.columns`\n3. **Cache the result** to avoid repeated `head()` calls\n\n### Suggested Fix Location\n\nFile: `great_expectations/datasource/fluent/interfaces.py` (or wherever `Batch.columns()` is implemented)\n\n```python\ndef columns(self) -> list[str]:\n    \"\"\"\n    Return column names for this batch.\n\n    Falls back to extracting from head() if the optimized path returns empty,\n    which can happen with certain SQL adapters like gx-sqlalchemy-redshift.\n    \"\"\"\n    # Try optimized path first\n    columns = self._get_columns_optimized()\n\n    if columns:\n        return columns\n\n    # Fallback: extract from head() for compatibility\n    try:\n        head_data = self.head()\n        if hasattr(head_data, \"data\") and hasattr(head_data.data, \"columns\"):\n            return list(head_data.data.columns)\n    except Exception as e:\n        logger.warning(f\"Failed to retrieve columns via fallback: {e}\")\n\n    return []  # or raise an exception\n```\n\n---\n\n## \ud83d\udcda Related Issues\n\n- #11181 (Original report - unable to reproduce by maintainers)\n\n---\n\n## \ud83e\uddea Testing\n\n### Test Case 1: Verify columns() returns non-empty list\n\n```python\ndef test_batch_columns_redshift():\n    \"\"\"Test that batch.columns() returns column names for Redshift.\"\"\"\n    context = gx.get_context(mode=\"file\")\n    datasource = context.get_datasource(\"redshift_datasource\")\n    asset = datasource.get_asset(\"test_table\")\n    batch = asset.get_batch_definition(\"test_batch\").get_batch()\n\n    columns = batch.columns()\n\n    assert len(columns) > 0, \"batch.columns() should not return empty list\"\n    assert isinstance(columns, list)\n    assert all(isinstance(col, str) for col in columns)\n```\n\n### Test Case 2: Verify validations work\n\n```python\ndef test_column_validation_redshift():\n    \"\"\"Test that column-based validations work for Redshift.\"\"\"\n    batch = get_redshift_batch()\n\n    expectation = gx.expectations.ExpectColumnValuesToNotBeNull(\n        column=\"test_column\"\n    )\n\n    result = batch.validate(expectation)\n\n    # Should not raise InvalidMetricAccessorDomainKwargsKeyError\n    assert \"exception_info\" not in result or not result[\"exception_info\"]\n```\n\n---\n\n## \ud83d\ude4b Additional Context\n\n### Why this wasn't caught earlier\n\n1. Most SQL adapters (PostgreSQL, MySQL) handle column metadata differently\n2. Redshift uses a forked adapter (`gx-sqlalchemy-redshift`) for SQLAlchemy 2 compatibility\n3. The adapter implements `get_columns()` correctly, but GX's `Batch.columns()` doesn't use it properly\n\n### Production Impact\n\nThis bug **completely blocks** the use of Great Expectations with Redshift for column-based validations, which are the most common type of validation. Our team had to implement a monkey patch to continue using GX in production.\n\n---\n\n**Environment Details:**\n- OS: Linux 6.8.0-45-generic\n- Python: 3.12\n- Installation method: Poetry\n- Database: Amazon Redshift (via VPN)\n\nThank you for maintaining Great Expectations! Happy to provide more information or test patches.\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11532/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11532/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11527", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11527/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11527/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11527/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11527", "id": 3640677327, "node_id": "I_kwDOBiS_IM7ZAFPP", "number": 11527, "title": "SQL DataSource fetches only 20 unexpected indexes in Great Expectations results", "user": {"login": "KiranGunda7", "id": 167798162, "node_id": "U_kgDOCgBlkg", "avatar_url": "https://avatars.githubusercontent.com/u/167798162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KiranGunda7", "html_url": "https://github.com/KiranGunda7", "followers_url": "https://api.github.com/users/KiranGunda7/followers", "following_url": "https://api.github.com/users/KiranGunda7/following{/other_user}", "gists_url": "https://api.github.com/users/KiranGunda7/gists{/gist_id}", "starred_url": "https://api.github.com/users/KiranGunda7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KiranGunda7/subscriptions", "organizations_url": "https://api.github.com/users/KiranGunda7/orgs", "repos_url": "https://api.github.com/users/KiranGunda7/repos", "events_url": "https://api.github.com/users/KiranGunda7/events{/privacy}", "received_events_url": "https://api.github.com/users/KiranGunda7/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-11-19T01:47:44Z", "updated_at": "2026-02-02T22:26:39Z", "closed_at": "2026-02-02T22:26:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen running validations using a SQL datasource added with `add_sql()`, the results for unexpected indexes only contain 20 records. However, when using a pandas datasource, all unexpected indexes are returned as expected. The limitation appears only with the SQL datasource.\n\n**To Reproduce**\n- Configure a SQL datasource using `add_sql()`\n- Run a validation that results in more than 20 unexpected indexes\n- Observe that only 20 indexes are present in the results\n- Compare with the same operation using a pandas datasource, which returns all expected records\n\n**Expected behavior**\nAll unexpected indexes should be returned in the validation results for SQL datasources, consistent with pandas datasources.\n\n**Environment (please complete the following information):**\n - Great Expectations Version: v1.3.7\n - Data Source: BigQuery\n\n**Additional context**\nIs there a configuration, workaround, or code change that can return the full list of unexpected indexes for SQL datasources? ", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11527/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11503", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11503/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11503/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11503/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11503", "id": 3584934502, "node_id": "I_kwDOBiS_IM7VrcJm", "number": 11503, "title": "Issue with Great Expectations Store Configuration on Databricks Serverless Compute", "user": {"login": "Mutharasu84", "id": 156774615, "node_id": "U_kgDOCVgw1w", "avatar_url": "https://avatars.githubusercontent.com/u/156774615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mutharasu84", "html_url": "https://github.com/Mutharasu84", "followers_url": "https://api.github.com/users/Mutharasu84/followers", "following_url": "https://api.github.com/users/Mutharasu84/following{/other_user}", "gists_url": "https://api.github.com/users/Mutharasu84/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mutharasu84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mutharasu84/subscriptions", "organizations_url": "https://api.github.com/users/Mutharasu84/orgs", "repos_url": "https://api.github.com/users/Mutharasu84/repos", "events_url": "https://api.github.com/users/Mutharasu84/events{/privacy}", "received_events_url": "https://api.github.com/users/Mutharasu84/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-11-04T06:29:53Z", "updated_at": "2026-02-03T16:14:50Z", "closed_at": "2026-02-03T16:14:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi Team,\nI\u2019m currently exploring the integration of the Great Expectations library with **Databricks Serverless Compute**. While setting up the DataContext, I configured the stores as follows:\npython\nreturn {   \n \"class_name\": \"ExpectationsStore\",    \n\"store_backend\": {        \"class_name\": \"TupleS3StoreBackend\",        \"bucket\": bucket_name,    },\n}\n\nThis configuration works as expected on **Databricks Classic Compute**. However, when executing the same code on Serverless Compute, I encounter an error stating: **\"Unable to locate credentials.\"**\nCould you please confirm if Great Expectations supports **Databricks service credentials** by default when running on Serverless Compute? If not, are there any recommended approaches or workarounds to enable this?", "closed_by": {"login": "Mutharasu84", "id": 156774615, "node_id": "U_kgDOCVgw1w", "avatar_url": "https://avatars.githubusercontent.com/u/156774615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mutharasu84", "html_url": "https://github.com/Mutharasu84", "followers_url": "https://api.github.com/users/Mutharasu84/followers", "following_url": "https://api.github.com/users/Mutharasu84/following{/other_user}", "gists_url": "https://api.github.com/users/Mutharasu84/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mutharasu84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mutharasu84/subscriptions", "organizations_url": "https://api.github.com/users/Mutharasu84/orgs", "repos_url": "https://api.github.com/users/Mutharasu84/repos", "events_url": "https://api.github.com/users/Mutharasu84/events{/privacy}", "received_events_url": "https://api.github.com/users/Mutharasu84/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11503/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11483", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11483/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11483/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11483/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11483", "id": 3556535994, "node_id": "I_kwDOBiS_IM7T_G66", "number": 11483, "title": "unexpected_rows only has a sample of 200 rows.", "user": {"login": "anjujoy564-ai", "id": 240487877, "node_id": "U_kgDODlWNxQ", "avatar_url": "https://avatars.githubusercontent.com/u/240487877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anjujoy564-ai", "html_url": "https://github.com/anjujoy564-ai", "followers_url": "https://api.github.com/users/anjujoy564-ai/followers", "following_url": "https://api.github.com/users/anjujoy564-ai/following{/other_user}", "gists_url": "https://api.github.com/users/anjujoy564-ai/gists{/gist_id}", "starred_url": "https://api.github.com/users/anjujoy564-ai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anjujoy564-ai/subscriptions", "organizations_url": "https://api.github.com/users/anjujoy564-ai/orgs", "repos_url": "https://api.github.com/users/anjujoy564-ai/repos", "events_url": "https://api.github.com/users/anjujoy564-ai/events{/privacy}", "received_events_url": "https://api.github.com/users/anjujoy564-ai/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-10-27T12:28:11Z", "updated_at": "2026-02-02T22:17:14Z", "closed_at": "2026-02-02T22:17:14Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nI am using unexpected_list in validation result to find out invalid records in ExpectCompoundColumnsToBeUnique expectation. But I am only getting 200 invalid rows rest invalid rows are eliminated from result.\n\n**Describe the solution you'd like**\nRemove this limitation on unexpected_list, or introduce some other key which can hold all invalid records.\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11483/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11483/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11482", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11482/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11482/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11482/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11482", "id": 3555406285, "node_id": "I_kwDOBiS_IM7T6zHN", "number": 11482, "title": "adding fabric data source to context from python notebook", "user": {"login": "muhssamy", "id": 49695385, "node_id": "MDQ6VXNlcjQ5Njk1Mzg1", "avatar_url": "https://avatars.githubusercontent.com/u/49695385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muhssamy", "html_url": "https://github.com/muhssamy", "followers_url": "https://api.github.com/users/muhssamy/followers", "following_url": "https://api.github.com/users/muhssamy/following{/other_user}", "gists_url": "https://api.github.com/users/muhssamy/gists{/gist_id}", "starred_url": "https://api.github.com/users/muhssamy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muhssamy/subscriptions", "organizations_url": "https://api.github.com/users/muhssamy/orgs", "repos_url": "https://api.github.com/users/muhssamy/repos", "events_url": "https://api.github.com/users/muhssamy/events{/privacy}", "received_events_url": "https://api.github.com/users/muhssamy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-27T07:19:58Z", "updated_at": "2026-01-27T13:05:07Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nwhen i am trying \n```python\ndata_source_name = dataset\ndata_source = context.data_sources.add_fabric_powerbi(\n    data_source_name, dataset=dataset, workspace=workspace\n)\n```\nthis is working in pyspark experience and not in python experience. only add is the issue you can complete the actions\n\n```python\nFile ~/jupyter-env/python3.11/lib/python3.11/site-packages/great_expectations/datasource/datasource_dict.py:197, in CacheableDatasourceDict.__getitem__(self, name)\n    196 # Upon cache miss, retrieve from store and add to cache\n--> 197 ds = super().__getitem__(name)\n    198 self.data[name] = ds\n\nFile ~/jupyter-env/python3.11/lib/python3.11/site-packages/great_expectations/datasource/datasource_dict.py:115, in DatasourceDict.__getitem__(self, name)\n    113 @override\n    114 def __getitem__(self, name: str) -> FluentDatasource:\n--> 115     ds = self._get_ds_from_store(name)\n    117     return self._init_fluent_datasource(name=name, ds=ds)\n\nFile ~/jupyter-env/python3.11/lib/python3.11/site-packages/great_expectations/datasource/datasource_dict.py:106, in DatasourceDict._get_ds_from_store(self, name)\n    105 except ValueError:\n--> 106     raise KeyError(f\"Could not find a datasource named '{name}'\")\n\nKeyError: \"Could not find a datasource named 'Sales Semantic Model'\"\n\nDuring handling of the above exception, another exception occurred:\n\nTestConnectionError                       Traceback (most recent call last)\nCell In[15], line 9\n      6     print(f\"\u2705 Using existing data source: {data_source_name}\")\n      7 except:\n      8     # Create new if doesn't exist\n----> 9     data_source = context.data_sources.add_fabric_powerbi(\n     10         data_source_name, dataset=dataset, workspace=workspace\n     11     )\n     12     print(f\"\u2705 Created new data source: {data_source_name}\")\n\nFile ~/jupyter-env/python3.11/lib/python3.11/site-packages/great_expectations/datasource/fluent/sources.py:476, in DataSourceManager.create_add_crud_method.<locals>.add_datasource(name_or_datasource, **kwargs)\n    474 logger.debug(f\"Adding {datasource_type} with {datasource.name}\")\n    475 datasource._data_context = self._data_context\n--> 476 datasource.test_connection()\n    477 datasource = self._data_context._add_fluent_datasource(datasource)\n    479 return datasource\n\nFile ~/jupyter-env/python3.11/lib/python3.11/site-packages/great_expectations/datasource/fluent/fabric.py:301, in FabricPowerBIDatasource.test_connection(self, test_assets)\n    292 \"\"\"Test the connection for the FabricPowerBIDatasource.\n    293 \n    294 Args:\n   (...)\n    298     TestConnectionError: If the connection test fails.\n    299 \"\"\"\n    300 if not self._running_on_fabric():\n--> 301     raise TestConnectionError(\"Must be running Microsoft Fabric to use this datasource\")  # noqa: TRY003 # FIXME CoP\n    303 try:\n    304     from sempy import fabric  # noqa: F401 # test if fabric is installed\n\nTestConnectionError: Must be running Microsoft Fabric to use this datasource\n```\n\n**To Reproduce**\ntry to add a power bi data model from python notebook vs pyspark notebook\n\n**Expected behavior**\nthey should be the same\n\n**Environment (please complete the following information):**\nfabric notebook\n\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11482/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11468", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11468/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11468/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11468/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11468", "id": 3531603571, "node_id": "I_kwDOBiS_IM7Sf_5z", "number": 11468, "title": "Missing `unexpected_index_column_names` in validation result for expectation: ExpectColumnValuesToNotBeNull", "user": {"login": "CNysb", "id": 46118221, "node_id": "MDQ6VXNlcjQ2MTE4MjIx", "avatar_url": "https://avatars.githubusercontent.com/u/46118221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CNysb", "html_url": "https://github.com/CNysb", "followers_url": "https://api.github.com/users/CNysb/followers", "following_url": "https://api.github.com/users/CNysb/following{/other_user}", "gists_url": "https://api.github.com/users/CNysb/gists{/gist_id}", "starred_url": "https://api.github.com/users/CNysb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CNysb/subscriptions", "organizations_url": "https://api.github.com/users/CNysb/orgs", "repos_url": "https://api.github.com/users/CNysb/repos", "events_url": "https://api.github.com/users/CNysb/events{/privacy}", "received_events_url": "https://api.github.com/users/CNysb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-20T08:52:24Z", "updated_at": "2025-11-07T17:32:18Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\nwhen validating dataset with expectations `ExpectColumnValuesToNotBeNull` , validation result would not contain `unexpected_index_column_names`\n\n**Describe the solution you'd like**\nadd param `unexpected_index_column_names` in `_format_map_output` method for ExpectColumnValuesToNotBeNull.class\n\n**Describe alternatives you've considered**\nnot alternatives\n\n**Additional context**\n\nimport great_expectations as gx\nimport pandas as pd \nfrom pprint import pprint\ndata = pd.DataFrame({\n    \"age\": [25, 30, 35, 40, 45],\n    \"customer_id\": [1001, 1002, 1003, 1004, 1005],\n    \"name\": [\"Alice\", \"Bob\", \"Charlie\", \"David\", \"Eva\"],\n    \"email\": [\"alice@example.com\", \"bob@example.com\", \"charlie@example.com\", \"david@example.com\", None]\n})\ncontext = gx.get_context()\ndata_source = context.data_sources.add_pandas(\"test_pandas_source\")\ndata_asset = data_source.add_dataframe_asset(\"test_pandas_df\")\nsuite_name = \"test_suite\"\nsuite = gx.ExpectationSuite(name=suite_name)\nsuite = context.suites.add(suite)\nexp_not_null = gx.expectations.ExpectColumnValuesToNotBeNull(column=\"email\")\nexp_value_between = gx.expectations.ExpectColumnValuesToBeBetween(column=\"age\", min_value=1001, max_value=1004)\nsuite.add_expectation(exp_not_null)\nsuite.add_expectation(exp_value_between)\n\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\"test_batch\")\nvalidation_def = gx.ValidationDefinition(\n    data=batch_definition,\n    suite=suite,\n    name=\"test_validation\"\n)\n\nval_result = validation_def.run(\n    batch_parameters={\"dataframe\": data},\n    result_format={\"result_format\": \"COMPLETE\", \"unexpected_index_column_names\": [\"customer_id\"]}\n)\n\npprint(val_result)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11468/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11468/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11441", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11441/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11441/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11441/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11441", "id": 3502526703, "node_id": "I_kwDOBiS_IM7QxFDv", "number": 11441, "title": "Validation ran on different column than set on rule `expect_column_values_to_be_in_set`", "user": {"login": "subediparas5", "id": 37067860, "node_id": "MDQ6VXNlcjM3MDY3ODYw", "avatar_url": "https://avatars.githubusercontent.com/u/37067860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subediparas5", "html_url": "https://github.com/subediparas5", "followers_url": "https://api.github.com/users/subediparas5/followers", "following_url": "https://api.github.com/users/subediparas5/following{/other_user}", "gists_url": "https://api.github.com/users/subediparas5/gists{/gist_id}", "starred_url": "https://api.github.com/users/subediparas5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subediparas5/subscriptions", "organizations_url": "https://api.github.com/users/subediparas5/orgs", "repos_url": "https://api.github.com/users/subediparas5/repos", "events_url": "https://api.github.com/users/subediparas5/events{/privacy}", "received_events_url": "https://api.github.com/users/subediparas5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-10T11:41:56Z", "updated_at": "2025-10-14T19:12:12Z", "closed_at": "2025-10-14T19:12:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI have set the rule `expect_column_values_to_be_in_set` on a column called Make but it ran on another column instead\n\n**To Reproduce**\n- Create a validation rule as follows for a dataset:\n```\n{\"expectation_type\": \"expect_column_values_to_be_in_set\", \"kwargs\": {\"column\": \"Make\", \"value_set\": [\"Tesla\", \"Hyundai\", \"Kia\", \"Ford\", \"Nissan\", \"Volkswagen\", \"Audi\", \"Volvo\", \"Lexus\", \"Porsche\", \"Rivian\", \"Genesis\", \"Toyota\", \"Chevrolet\", \"BMW\", \"Jeep\", \"Mercedes-Benz\", \"Cadillac\", \"Dodge\"]}}\n```\n- Create a test dataset with a few columns\n- Run validation on the test dataset\n- The validation is ran on different column than mentioned on `kwargs.columns`\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.7.0\n - Data Source: Pandas\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": {"login": "josectobar", "id": 21246524, "node_id": "MDQ6VXNlcjIxMjQ2NTI0", "avatar_url": "https://avatars.githubusercontent.com/u/21246524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josectobar", "html_url": "https://github.com/josectobar", "followers_url": "https://api.github.com/users/josectobar/followers", "following_url": "https://api.github.com/users/josectobar/following{/other_user}", "gists_url": "https://api.github.com/users/josectobar/gists{/gist_id}", "starred_url": "https://api.github.com/users/josectobar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josectobar/subscriptions", "organizations_url": "https://api.github.com/users/josectobar/orgs", "repos_url": "https://api.github.com/users/josectobar/repos", "events_url": "https://api.github.com/users/josectobar/events{/privacy}", "received_events_url": "https://api.github.com/users/josectobar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11441/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11441/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11440", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11440/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11440/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11440/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11440", "id": 3502499145, "node_id": "I_kwDOBiS_IM7Qw-VJ", "number": 11440, "title": "`expect_multicolumn_sum_to_equal` raises exception when expected columns are missing instead of failing validation", "user": {"login": "subediparas5", "id": 37067860, "node_id": "MDQ6VXNlcjM3MDY3ODYw", "avatar_url": "https://avatars.githubusercontent.com/u/37067860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subediparas5", "html_url": "https://github.com/subediparas5", "followers_url": "https://api.github.com/users/subediparas5/followers", "following_url": "https://api.github.com/users/subediparas5/following{/other_user}", "gists_url": "https://api.github.com/users/subediparas5/gists{/gist_id}", "starred_url": "https://api.github.com/users/subediparas5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subediparas5/subscriptions", "organizations_url": "https://api.github.com/users/subediparas5/orgs", "repos_url": "https://api.github.com/users/subediparas5/repos", "events_url": "https://api.github.com/users/subediparas5/events{/privacy}", "received_events_url": "https://api.github.com/users/subediparas5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-10-10T11:33:50Z", "updated_at": "2025-11-04T14:51:14Z", "closed_at": "2025-10-28T15:55:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen there is no column for which I have set rule `expect_multicolumn_sum_to_equal` exception is raised instead of validation failing. Exception: `Usecols do not match columns, columns expected but not found: ['Col1', 'Col2']`\n\n```\nself.datasource = self.context.data_sources.add_pandas(\"pandas\")\nself.asset = self.datasource.add_dataframe_asset(name=\"pd_dataframe_asset\")\nself.batch_def = self.asset.add_batch_definition_whole_dataframe(\"batch_definition\")\nself.batch = self.batch_def.get_batch(batch_parameters={\"dataframe\": self.df})\n\nsuite_name = \"crawlguard_suite_\" + str(uuid.uuid4())\nsuite = ExpectationSuite(name=suite_name)\nvalidator = self.context.get_validator(\n    batch_request=self.batch.batch_request,\n    expectation_suite=suite,\n)\n\nexpectation_fn = getattr(validator, expectation_type)\nexpectation_fn(**(expectation_kwargs or {}), result_format=\"COMPLETE\")\n\nresult = validator.validate()\n```\n\n**To Reproduce**\n-Create a rule: `{\"expectation_type\": \"expect_multicolumn_sum_to_equal\", \"kwargs\": {\"column_list\": [\"Col1\", \"Col2\"], \"sum_total\": 2}}`\n-Create a test data with Col1 and Col3 but not Col2.\n-Test the validation rule on the dataset, it throws the exception.\n\n**Expected behavior**\nThe validation rule should fail instead of raising an exception\n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.7.0\n - Data Source: Pandas\n\n", "closed_by": {"login": "subediparas5", "id": 37067860, "node_id": "MDQ6VXNlcjM3MDY3ODYw", "avatar_url": "https://avatars.githubusercontent.com/u/37067860?v=4", "gravatar_id": "", "url": "https://api.github.com/users/subediparas5", "html_url": "https://github.com/subediparas5", "followers_url": "https://api.github.com/users/subediparas5/followers", "following_url": "https://api.github.com/users/subediparas5/following{/other_user}", "gists_url": "https://api.github.com/users/subediparas5/gists{/gist_id}", "starred_url": "https://api.github.com/users/subediparas5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/subediparas5/subscriptions", "organizations_url": "https://api.github.com/users/subediparas5/orgs", "repos_url": "https://api.github.com/users/subediparas5/repos", "events_url": "https://api.github.com/users/subediparas5/events{/privacy}", "received_events_url": "https://api.github.com/users/subediparas5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11440/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11440/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11393", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11393/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11393/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11393/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11393", "id": 3439823538, "node_id": "I_kwDOBiS_IM7NB4qy", "number": 11393, "title": "Spark engine ignores strict_min and strict_max parameters in expect_column_value_lengths_to_be_between", "user": {"login": "ccccchoyu", "id": 233711372, "node_id": "U_kgDODe4nDA", "avatar_url": "https://avatars.githubusercontent.com/u/233711372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccccchoyu", "html_url": "https://github.com/ccccchoyu", "followers_url": "https://api.github.com/users/ccccchoyu/followers", "following_url": "https://api.github.com/users/ccccchoyu/following{/other_user}", "gists_url": "https://api.github.com/users/ccccchoyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccccchoyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccccchoyu/subscriptions", "organizations_url": "https://api.github.com/users/ccccchoyu/orgs", "repos_url": "https://api.github.com/users/ccccchoyu/repos", "events_url": "https://api.github.com/users/ccccchoyu/events{/privacy}", "received_events_url": "https://api.github.com/users/ccccchoyu/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-09-22T08:49:27Z", "updated_at": "2025-09-22T12:11:54Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nThe `ColumnValuesValueLength` metric provider has inconsistent behavior between execution engines for `strict_min` and `strict_max` parameters. The Pandas execution engine properly implements strict (exclusive) bounds logic, but the Spark execution engine completely ignores these parameters, treating all comparisons as inclusive. \n\n**To Reproduce**\n``` python\n# This should exclude values with length exactly 2 and 4 (strict bounds)\nexpectation_config = {\n    \"expectation_type\": \"expect_column_value_lengths_to_be_between\",\n    \"kwargs\": {\n        \"column\": \"text_col\",\n        \"min_value\": 2,\n        \"max_value\": 4,\n        \"strict_min\": True,\n        \"strict_max\": True\n    }\n}\n\n# With Pandas: correctly excludes length 2 and 4, only length 3 passes\n# With Spark (before fix): incorrectly includes length 2 and 4 (ignores strict parameters)\n```\n\nOriginal buggy Spark implementation: \n- https://github.com/great-expectations/great_expectations/blob/b1c632fe190fc31c8ce2068a8e59db216c007de8/great_expectations/expectations/metrics/column_map_metrics/column_value_lengths.py#L241-L248\n\n**Expected behavior**\nAll execution engines (Pandas, Spark, SQLAlchemy) should handle strict_min and strict_max parameters consistently:\n- When `strict_min=True`: use > instead of >= for minimum bound\n- When `strict_max=True`: use < instead of <= for maximum bound\n\n**Proposed Fix:**\nI have implemented a fix that adds proper strict bounds logic to the Spark engine, matching the behavior of the Pandas engine:\n\n``` python\n# Fixed implementation\nif min_value is None:\n    if strict_max:\n        return column_lengths < max_value\n    else:\n        return column_lengths <= max_value\n\nelif max_value is None:\n    if strict_min:\n        return column_lengths > min_value\n    else:\n        return column_lengths >= min_value\n\nelse:\n    if strict_min and strict_max:\n        return (column_lengths > min_value) & (column_lengths < max_value)\n    elif strict_min:\n        return (column_lengths > min_value) & (column_lengths <= max_value)\n    elif strict_max:\n        return (column_lengths >= min_value) & (column_lengths < max_value)\n    else:\n        return (column_lengths >= min_value) & (column_lengths <= max_value)\n```\n\n**Environment (please complete the following information):**\n- Operating System: macOS\n- Great Expectations Version: 1.5.10\n- Data Source: Spark\n- Cloud environment: Local development\n\n**Additional context**\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11393/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11393/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11383", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11383/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11383/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11383/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11383", "id": 3420037796, "node_id": "I_kwDOBiS_IM7L2aKk", "number": 11383, "title": "Expectations with pandas datasource with column type datetime64[ns] fails", "user": {"login": "dennisobrien", "id": 1168692, "node_id": "MDQ6VXNlcjExNjg2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1168692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dennisobrien", "html_url": "https://github.com/dennisobrien", "followers_url": "https://api.github.com/users/dennisobrien/followers", "following_url": "https://api.github.com/users/dennisobrien/following{/other_user}", "gists_url": "https://api.github.com/users/dennisobrien/gists{/gist_id}", "starred_url": "https://api.github.com/users/dennisobrien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dennisobrien/subscriptions", "organizations_url": "https://api.github.com/users/dennisobrien/orgs", "repos_url": "https://api.github.com/users/dennisobrien/repos", "events_url": "https://api.github.com/users/dennisobrien/events{/privacy}", "received_events_url": "https://api.github.com/users/dennisobrien/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-09-16T01:56:32Z", "updated_at": "2025-11-23T18:50:15Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n\nAttempting to add an expectation on a Pandas dataframe with a column of type `datetime64[ns]` fails.\n\n**To Reproduce**\n\nFirst construct a dataframe.\n\n```python\nfrom datetime import datetime\n\nimport great_expectations as gx\nimport great_expectations.expectations as gxe\nfrom great_expectations.expectations.expectation import Expectation\nimport pandas as pd\n\ntest_df: pd.DataFrame = pd.DataFrame({\"dt\": [datetime(2025, 9, 1), datetime(2025, 9, 2), datetime(2025, 9, 3)], \"value\": [1, 2, 3]})\ntest_df[\"dt\"] = pd.to_datetime(test_df[\"dt\"])\n```\nThe dataframe looks like this:\n```\n|    | dt                  |   value |\n|---:|:--------------------|--------:|\n|  0 | 2025-09-01 00:00:00 |       1 |\n|  1 | 2025-09-02 00:00:00 |       2 |\n|  2 | 2025-09-03 00:00:00 |       3 |\n```\n\nNow try to validate that all three datetime values are in the column \"dt\":\n```python\ngx_context = gx.get_context(mode=\"ephemeral\")\ndata_source = gx_context.data_sources.add_or_update_pandas(name=f\"data_source\")\ndata_asset = data_source.add_dataframe_asset(name=f\"data_asset\")\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(f\"batch_definition\")\nsuite = gx.ExpectationSuite(name=f\"expectation_suite\")\nsuite = gx_context.suites.add_or_update(suite)\n# Add the expectations to the Expectation Suite.\n# None of the following formulations work.\nvalue_set = [d.strftime(\"%Y-%m-%dT%H:%M:%S\") for d in pd.date_range(start=datetime(2025, 9, 1), end=datetime(2025, 9, 3), freq='1d')]\n# value_set = pd.date_range(start=datetime(2025, 9, 1), end=datetime(2025, 9, 3), freq='1d').values.tolist()\n# value_set = [datetime(2025, 9, 1), datetime(2025, 9, 2), datetime(2025, 9, 3)]\n# value_set = [pd.to_datetime(d) for d in [datetime(2025, 9, 1), datetime(2025, 9, 2), datetime(2025, 9, 3)]]\nsuite.add_expectation(\n    gxe.ExpectColumnDistinctValuesToEqualSet(column=\"dt\", value_set=value_set)\n)\nvalidation_definition = gx.ValidationDefinition(\n    data=batch_definition,\n    suite=suite,\n    name=f\"validation_definition\",\n)\nbatch_parameters_dataframe = {\"dataframe\": test_df}\nvalidation_results = validation_definition.run(batch_parameters=batch_parameters_dataframe)\nprint(validation_results)\n```\n\nThe validate fails.\n```\n{\n  \"success\": false,\n  \"results\": [\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_distinct_values_to_equal_set\",\n        \"kwargs\": {\n          \"batch_id\": \"data_source-data_asset\",\n          \"column\": \"dt\",\n          \"value_set\": [\n            \"2025-09-01T00:00:00\",\n            \"2025-09-02T00:00:00\",\n            \"2025-09-03T00:00:00\"\n          ]\n        },\n        \"meta\": {},\n        \"id\": \"140ac112-8c7a-4fbd-bba7-9be73065b879\",\n        \"severity\": \"critical\"\n      },\n      \"result\": {\n        \"observed_value\": [\n          \"2025-09-01T00:00:00\",\n          \"2025-09-02T00:00:00\",\n          \"2025-09-03T00:00:00\"\n        ],\n        \"details\": {\n          \"value_counts\": [\n            {\n              \"value\": \"2025-09-01T00:00:00\",\n              \"count\": 1\n            },\n            {\n              \"value\": \"2025-09-02T00:00:00\",\n              \"count\": 1\n            },\n            {\n              \"value\": \"2025-09-03T00:00:00\",\n              \"count\": 1\n            }\n          ]\n        }\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    }\n  ],\n  \"suite_name\": \"expectation_suite\",\n  \"suite_parameters\": {},\n  \"statistics\": {\n    \"evaluated_expectations\": 1,\n    \"successful_expectations\": 0,\n    \"unsuccessful_expectations\": 1,\n    \"success_percent\": 0.0\n  },\n  \"meta\": {\n    \"great_expectations_version\": \"1.5.11\",\n    \"batch_spec\": {\n      \"batch_data\": \"PandasDataFrame\"\n    },\n    \"batch_markers\": {\n      \"ge_load_time\": \"20250916T015156.035543Z\",\n      \"pandas_data_fingerprint\": \"decab94b951f365b5cf8e8433fc16737\"\n    },\n    \"active_batch_definition\": {\n      \"datasource_name\": \"data_source\",\n      \"data_connector_name\": \"fluent\",\n      \"data_asset_name\": \"data_asset\",\n      \"batch_identifiers\": {\n        \"dataframe\": \"<DATAFRAME>\"\n      }\n    },\n    \"validation_id\": \"0d346436-327c-4a0c-a052-c5f45d5baca8\",\n    \"checkpoint_id\": null,\n    \"run_id\": {\n      \"run_name\": null,\n      \"run_time\": \"2025-09-15T18:51:56.045556-07:00\"\n    },\n    \"validation_time\": \"2025-09-16T01:51:56.045556+00:00\",\n    \"batch_parameters\": {\n      \"dataframe\": \"<DATAFRAME>\"\n    }\n  },\n  \"id\": null\n}\n```\n\nI've included a few other variations of `value_set` in the code but none of these work.  The last two result in a `ResourceFreshnessAggregateError` exception.  The stacktrace in this case points to json decoding.\n\n**Expected behavior**\n\nIdeally we can include validations on the timestamp values of a pandas dataframe.\n\n**Environment (please complete the following information):**\n - Operating System: Jupyter notebook running on Linux.\n - Great Expectations Version: 1.5.11\n - Data Source: Pandas\n - Cloud environment: None\n\n**Additional context**\n\nI'm new to using great_expectations, so this could very well be user error and not a bug.  But I could not find anywhere in the docs how to do a validation on a `datetime64[ns]` type column.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11383/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11383/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11381", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11381/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11381/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11381/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11381", "id": 3419848881, "node_id": "I_kwDOBiS_IM7L1sCx", "number": 11381, "title": "Spark Execution Engine: unexpected_index_column_names does not work with Nested Columns", "user": {"login": "parkseulkee", "id": 26270125, "node_id": "MDQ6VXNlcjI2MjcwMTI1", "avatar_url": "https://avatars.githubusercontent.com/u/26270125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/parkseulkee", "html_url": "https://github.com/parkseulkee", "followers_url": "https://api.github.com/users/parkseulkee/followers", "following_url": "https://api.github.com/users/parkseulkee/following{/other_user}", "gists_url": "https://api.github.com/users/parkseulkee/gists{/gist_id}", "starred_url": "https://api.github.com/users/parkseulkee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/parkseulkee/subscriptions", "organizations_url": "https://api.github.com/users/parkseulkee/orgs", "repos_url": "https://api.github.com/users/parkseulkee/repos", "events_url": "https://api.github.com/users/parkseulkee/events{/privacy}", "received_events_url": "https://api.github.com/users/parkseulkee/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-09-15T23:47:27Z", "updated_at": "2025-09-15T23:50:08Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nFor flat (non-nested) columns, `unexpected_index_column_names` works as expected.\nHowever, when using **nested columns**, it does not work.\nIn addition, if either `unexpected_index_column_names` or `domain_column_name_list` is set to a nested column, it becomes difficult to utilize `unexpected_index_list`.\n\n\n**To Reproduce**\nExample configuration and schema:\n\n* Checkpoint configuration:\n    * Index column: `Data.evt.id`\n\n```python\ncheckpoint = context.checkpoints.add(\n    gx.Checkpoint(\n        name=checkpoint_name,\n        validation_definitions=[validation_definition],\n        actions=[gx.checkpoint.actions.UpdateDataDocsAction(name=checkpoint_name)],\n        result_format={\n            \"result_format\": \"COMPLETE\",\n            \"unexpected_index_column_names\": [\n                \"Data.evt.id\"\n            ],\n            \"partial_unexpected_count\": 0,\n            \"exclude_unexpected_values\": False,\n            \"include_unexpected_rows\": True,\n            \"return_unexpected_index_query\": True,\n        },\n    )\n)\n```\n* Suite configuration:\n    * Validation column: `Data.evt.retry`\n\n```json\n{\n  \"id\": \"9f5cdaeb-0959-4b8b-af8b-52934a9234db\",\n  \"type\": \"expect_column_values_to_be_in_set\",\n  \"kwargs\": {\n    \"column\": \"Data.evt.retry\",\n    \"value_set\": [\"0\", \"1\"]\n  },\n  \"meta\": {}\n}\n```\n\n  \n\n* Schema before `select()`:\n\n  ```text\n  root\n   |-- Data: struct (nullable = true)\n   |    |-- evt: struct (nullable = true)\n   |    |    |-- id: string (nullable = true)\n   |    |    |-- retry: string (nullable = true)\n  ```\n\n* Schema after `select(columns_to_keep)`:\n\n  ```text\n  root\n   |-- id: string (nullable = true)\n   |-- retry: integer (nullable = true)\n  ```\n\nAt this point, Great Expectations no longer recognizes the original nested path (`Data.evt.id`), making it impossible to return `unexpected_index_list`.\n\n*Stack trace excerpt (simplified):*\n\n```python\nraise gx_exceptions.InvalidMetricAccessorDomainKwargsKeyError(\n    f\"Error: The unexpected_index_column 'Data.evt.id' does not exist in Spark DataFrame.\"\n)\n```\n\n**Expected behavior**\n\n* Nested column paths should be preserved during `select(columns_to_keep)`.\n* `unexpected_index_column_names` and `domain_column_name_list` should work properly with nested columns so that `unexpected_index_list` can be utilized.\n\n**Environment (please complete the following information):**\n\n* Operating System: MacOS\n* Great Expectations Version: 1.5.10\n* Data Source: Spark\n\n---\n\n**Additional context**\nThe issue seems to be caused by schema pruning in `map_condition_auxilliary_methods.py`, where `select(columns_to_keep)` flattens nested structures and loses the original nested path.\n\n- https://github.com/great-expectations/great_expectations/blob/264b4e0b8c3c34851d5d0b5722b485458590d298/great_expectations/expectations/metrics/map_metric_provider/map_condition_auxilliary_methods.py#L740\n\n```python\n# Prune the dataframe down only the columns we care about\nfiltered = filtered.select(columns_to_keep)\n```\n\n**Suggested Fix**\n\nPreserve nested column paths during pruning by aliasing columns explicitly:\n\n```python\naliased_cols = [F.col(c).alias(c) for c in columns_to_keep]\nfiltered = filtered.select(*aliased_cols)\n```\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11381/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11381/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11364", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11364/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11364/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11364/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11364", "id": 3385529307, "node_id": "I_kwDOBiS_IM7JyxPb", "number": 11364, "title": "Pre-commit bot is not an approved contributor to CI checks.", "user": {"login": "vovavili", "id": 64227274, "node_id": "MDQ6VXNlcjY0MjI3Mjc0", "avatar_url": "https://avatars.githubusercontent.com/u/64227274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vovavili", "html_url": "https://github.com/vovavili", "followers_url": "https://api.github.com/users/vovavili/followers", "following_url": "https://api.github.com/users/vovavili/following{/other_user}", "gists_url": "https://api.github.com/users/vovavili/gists{/gist_id}", "starred_url": "https://api.github.com/users/vovavili/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vovavili/subscriptions", "organizations_url": "https://api.github.com/users/vovavili/orgs", "repos_url": "https://api.github.com/users/vovavili/repos", "events_url": "https://api.github.com/users/vovavili/events{/privacy}", "received_events_url": "https://api.github.com/users/vovavili/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-09-04T21:28:46Z", "updated_at": "2026-02-02T22:23:04Z", "closed_at": "2026-02-02T22:23:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Currently, CI checks for my pull request [fail because one of the commits was authored by the pre-commit bot](https://github.com/great-expectations/great_expectations/actions/runs/17474681333/job/49631439894?pr=11315). This bot should be added to a list of trusted contributors, which is quite trivial to do. ", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11364/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11364/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11359", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11359/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11359/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11359/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11359", "id": 3384380441, "node_id": "I_kwDOBiS_IM7JuYwZ", "number": 11359, "title": "Issue while reading S3 directories with more than 1000 keys", "user": {"login": "pawel99k", "id": 43797956, "node_id": "MDQ6VXNlcjQzNzk3OTU2", "avatar_url": "https://avatars.githubusercontent.com/u/43797956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pawel99k", "html_url": "https://github.com/pawel99k", "followers_url": "https://api.github.com/users/pawel99k/followers", "following_url": "https://api.github.com/users/pawel99k/following{/other_user}", "gists_url": "https://api.github.com/users/pawel99k/gists{/gist_id}", "starred_url": "https://api.github.com/users/pawel99k/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pawel99k/subscriptions", "organizations_url": "https://api.github.com/users/pawel99k/orgs", "repos_url": "https://api.github.com/users/pawel99k/repos", "events_url": "https://api.github.com/users/pawel99k/events{/privacy}", "received_events_url": "https://api.github.com/users/pawel99k/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-09-04T15:55:41Z", "updated_at": "2025-09-14T13:16:15Z", "closed_at": "2025-09-14T13:16:15Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\ngreat_expetations.datasource.fluent.data_connector.s3_data_connector.list_s3_keys function has a bug while recursive reading S3 directories with more than min(1000, max_keys) elements inside. The \"ContinuationToken\" of query_options is inherited by every following request, instead of being utilized only once. Thus, reading the objects from directories with number of elements exceeding min(1000, max_keys) is not possible.\n\n**To Reproduce**\n\n```\nfrom great_expectations.datasource.fluent.data_connector.s3_data_connector import list_s3_keys\nresult = list_s3_keys(\n    s3=s3_client,\n    query_options={\n        \"Bucket\": bucket_name,  # S3 bucket name\n        \"Prefix\": prefix,  # prefix containing more than 1 object inside\n        \"Delimiter\": \"/\",\n        \"MaxKeys\": 1,\n    },\n    iterator_dict={},\n    recursive=True\n)\nlist(result)\n```\n\nError:\n`InvalidRequest: An error occurred (InvalidRequest) when calling the ListObjectsV2 operation: This bucket does not support a prefix that does not end in a delimiter. Specify a prefix path ending with a delimiter and try again.`\n\n\n**Expected behavior**\nIt should be possible to read more than MaxKeys objects from a directory without any error.\n\n**Environment (please complete the following information):**\n - Operating System: Linux\n - Great Expectations Version: 1.5.10\n - Data Source: SparkS3Datasource\n - Cloud environment: S3\n\n**Additional context**\nThe issue shall be resolved with deleting the `ContinuationToken` key from `query_options` after a S3 request.\n", "closed_by": {"login": "wookasz", "id": 14184925, "node_id": "MDQ6VXNlcjE0MTg0OTI1", "avatar_url": "https://avatars.githubusercontent.com/u/14184925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wookasz", "html_url": "https://github.com/wookasz", "followers_url": "https://api.github.com/users/wookasz/followers", "following_url": "https://api.github.com/users/wookasz/following{/other_user}", "gists_url": "https://api.github.com/users/wookasz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wookasz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wookasz/subscriptions", "organizations_url": "https://api.github.com/users/wookasz/orgs", "repos_url": "https://api.github.com/users/wookasz/repos", "events_url": "https://api.github.com/users/wookasz/events{/privacy}", "received_events_url": "https://api.github.com/users/wookasz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11359/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11359/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11352", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11352/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11352/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11352/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11352", "id": 3362114103, "node_id": "I_kwDOBiS_IM7IZco3", "number": 11352, "title": "Wrong Documentation \"Run a Validation Definition\"", "user": {"login": "HoergerL", "id": 66875014, "node_id": "MDQ6VXNlcjY2ODc1MDE0", "avatar_url": "https://avatars.githubusercontent.com/u/66875014?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HoergerL", "html_url": "https://github.com/HoergerL", "followers_url": "https://api.github.com/users/HoergerL/followers", "following_url": "https://api.github.com/users/HoergerL/following{/other_user}", "gists_url": "https://api.github.com/users/HoergerL/gists{/gist_id}", "starred_url": "https://api.github.com/users/HoergerL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HoergerL/subscriptions", "organizations_url": "https://api.github.com/users/HoergerL/orgs", "repos_url": "https://api.github.com/users/HoergerL/repos", "events_url": "https://api.github.com/users/HoergerL/events{/privacy}", "received_events_url": "https://api.github.com/users/HoergerL/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-08-28T07:11:57Z", "updated_at": "2025-08-28T07:11:57Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI am completely new to Great Expectation, so it might be that I did sth wrong on my side. I have been following the documentation exactly and arrived at this step:\nhttps://docs.greatexpectations.io/docs/core/run_validations/run_a_validation_definition. I don't really understand what this part does: \nbatch_parameters_dataframe = {\"dataframe\": dataframe}\nbatch_parameters_daily = {\"year\": \"2020\", \"month\": \"1\", \"day\": \"17\"}\nbatch_parameters_yearly = {\"year\": \"2019\"}\n\nvalidation_results = validation_definition.run(batch_parameters=batch_parameters_yearly)\n\nbut for me it doesn't look intended. the batch_parameters_dataframe and batch_parameters_daily are not used at all and if I execute the code like this, I get the following error \"BuildBatchRequestError: Bad input to build_batch_request: options must contain exactly 1 key, 'dataframe'.\". I tried around and switched it to this, which run successfully: validation_results = validation_definition.run(batch_parameters=batch_parameters)\nCould you either explain better in the documentation what this is about and how to use it or adjust it to running code? This makes it really hard for beginners to get started.\n\n\n\n**To Reproduce**\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\n\n## Code:\n\n```python\nimport great_expectations as gx\n\ncontext = gx.get_context(mode=\"file\")\nprint(type(context).__name__)\n# Retrieve the dataframe Batch Definition\n\n\n# data_source = context.data_sources.add_spark(name=data_source_name)\ntry:\n    data_source = context.data_sources.get(data_source_name)\nexcept:\n    # Datasource doesn't exist yet; add it\n    data_source = context.data_sources.add_spark(name=data_source_name)\n\n# data_asset = data_source.add_dataframe_asset(name=data_asset_name)\ntry:\n    data_asset = data_source.get_asset(data_asset_name)\nexcept:\n    data_asset = data_source.add_dataframe_asset(name=data_asset_name)\n\nbatch_definition_name = \"my_batch_definition\"\n\n# Add a Batch Definition to the Data Asset\n# wird oben erstellt, theoretisch unn\u00f6tig hier\ntry:\n    batch_definition = data_asset.get_batch_definition(batch_definition_name)\nexcept:\n    batch_definition = data_asset.add_batch_definition_whole_dataframe(batch_definition_name) # means that the batch definition contains the complete dataframe and not parts of it\n\n\nbatch_definition = (\n    context.data_sources.get(data_source_name)\n    .get_asset(data_asset_name)\n    .get_batch_definition(batch_definition_name)\n)\n\n\ndataframe = spark.sql(f\"Select * from {db_name}.{table_name}\")\n\nprint(type(dataframe))\n\n# Create an Expectation to test\nexpectation = gx.expectations.ExpectColumnValuesToBeBetween(\n    column=\"recid\", max_value=6, min_value=1\n)\n\n# Get the dataframe as a Batch\nbatch_parameters = {\"dataframe\": dataframe}\n\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\n\n# print(batch.head())\n\n# Test the Expectation\nvalidation_results = batch.validate(expectation)\nprint(validation_results)\n\n# organize expectations into an expectation suite\nsuite_name = \"my_expectation_suite\"\nsuite = gx.ExpectationSuite(name=suite_name)\n\ntry: \n    suite = context.suites.add(suite)\nexcept:\n    print(\"suite already exists\")\nexisting_suite_name = (\n    \"my_expectation_suite\"  # replace this with the name of your Expectation Suite\n)\nsuite = context.suites.get(name=existing_suite_name)\n\nsuite.add_expectation(expectation)\nexpectation.column = \"pickup_location_id\"\nexpectation.save()\n\n# create a validation definition\n\n# Retrieve an Expectation Suite\n# expectation_suite_name = \"my_expectation_suite\"\n# expectation_suite = context.suites.get(name=expectation_suite_name)\n\n# Retrieve a Batch Definition\n# batch_definition_name = \"my_batch_definition\"\n# batch_definition = (\n#     context.data_sources.get(data_source_name)\n#     .get_asset(data_asset_name)\n#     .get_batch_definition(batch_definition_name)\n# )\n\n# Create a Validation Definition\ndefinition_name = \"my_validation_definition\"\nvalidation_definition = gx.ValidationDefinition(\n    data=batch_definition, suite=suite, name=definition_name\n)\n\n# Add the Validation Definition to the Data Context\ntry:\n    validation_definition = context.validation_definitions.add(validation_definition)\nexcept:\n    print(\"validation_definition already exists\")\n\n\n# retreiving exepectation suite\n# existing_suite_name = (\n#     \"my_expectation_suite\"  # replace this with the name of your Expectation Suite\n# )\n# suite = context.suites.get(name=existing_suite_name)\n\nimport great_expectations as gx\n\n\n# Retrieve the Validation Definition\nvalidation_definition_name = \"my_validation_definition\"\nvalidation_definition = context.validation_definitions.get(validation_definition_name)\n\nprint(validation_definition)\n\n# Define Batch parameters\n# Accepted keys are determined by the BatchDefinition used to instantiate this ValidationDefinition.\nbatch_parameters_dataframe = {\"dataframe\": dataframe}\nbatch_parameters_daily = {\"year\": \"2020\", \"month\": \"1\", \"day\": \"17\"}\nbatch_parameters_yearly = {\"year\": \"2019\"}\n\n# Run the Validation Definition\n# validation_results = validation_definition.run(batch_parameters=batch_parameters_yearly)\nvalidation_results = validation_definition.run(batch_parameters=batch_parameters_yearly)\n\n# Review the Validation Results\n# print(validation_results)\n\n```\n\n## Error:\n\nBuildBatchRequestError                    Traceback (most recent call last)\nCell In[157], line 19\n     14 batch_parameters_yearly = {\"year\": \"2019\"}\n     16 # Run the Validation Definition\n     17 # validation_results = validation_definition.run(batch_parameters=batch_parameters_yearly)\n     18 #TODO: make runnable\n---> 19 validation_results = validation_definition.run(batch_parameters=batch_parameters_yearly)\n     21 # Review the Validation Results\n     22 # print(validation_results)\n\nFile ~/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/core/validation_definition.py:296, in ValidationDefinition.run(self, checkpoint_id, batch_parameters, expectation_parameters, result_format, run_id)\n    289         diagnostics.raise_for_error()\n    291 validator = Validator(\n    292     batch_definition=self.batch_definition,\n    293     batch_parameters=batch_parameters,\n    294     result_format=result_format,\n    295 )\n--> 296 results = validator.validate_expectation_suite(self.suite, expectation_parameters)\n    297 results.meta[\"validation_id\"] = self.id\n    298 results.meta[\"checkpoint_id\"] = checkpoint_id\n\nFile ~/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/v1_validator.py:71, in Validator.validate_expectation_suite(self, expectation_suite, expectation_parameters)\n     65 def validate_expectation_suite(\n     66     self,\n     67     expectation_suite: ExpectationSuite,\n     68     expectation_parameters: Optional[SuiteParameterDict] = None,\n     69 ) -> ExpectationSuiteValidationResult:\n     70     \"\"\"Run an expectation suite against the batch definition\"\"\"\n---> 71     results = self._validate_expectation_configs(\n     72         expectation_configs=expectation_suite.expectation_configurations,\n     73         expectation_parameters=expectation_parameters,\n     74     )\n     75     statistics = calc_validation_statistics(results)\n     77     return ExpectationSuiteValidationResult(\n     78         results=results,\n     79         success=statistics.success,\n   (...)\n     99         batch_id=self.active_batch_id,\n    100     )\n\nFile ~/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/v1_validator.py:123, in Validator._validate_expectation_configs(self, expectation_configs, expectation_parameters)\n    117 def _validate_expectation_configs(\n    118     self,\n    119     expectation_configs: list[ExpectationConfiguration],\n    120     expectation_parameters: Optional[SuiteParameterDict] = None,\n    121 ) -> list[ExpectationValidationResult]:\n    122     \"\"\"Run a list of expectation configurations against the batch definition\"\"\"\n--> 123     processed_expectation_configs = self._wrapped_validator.process_expectations_for_validation(\n    124         expectation_configs, expectation_parameters\n    125     )\n    127     runtime_configuration: dict\n    128     if isinstance(self.result_format, ResultFormat):\n\nFile ~/cluster-env/clonedenv/lib/python3.10/functools.py:981, in cached_property.__get__(self, instance, owner)\n    979 val = cache.get(self.attrname, _NOT_FOUND)\n    980 if val is _NOT_FOUND:\n--> 981     val = self.func(instance)\n    982     try:\n    983         cache[self.attrname] = val\n\nFile ~/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/v1_validator.py:112, in Validator._wrapped_validator(self)\n    110 @cached_property\n    111 def _wrapped_validator(self) -> OldValidator:\n--> 112     batch_request = self._batch_definition.build_batch_request(\n    113         batch_parameters=self._batch_parameters\n    114     )\n    115     return self._get_validator(batch_request=batch_request)\n\nFile ~/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/core/batch_definition.py:67, in BatchDefinition.build_batch_request(self, batch_parameters)\n     63 def build_batch_request(\n     64     self, batch_parameters: Optional[BatchParameters] = None\n     65 ) -> BatchRequest[PartitionerT]:\n     66     \"\"\"Build a BatchRequest from the asset and batch parameters.\"\"\"\n---> 67     return self.data_asset.build_batch_request(\n     68         options=batch_parameters,\n     69         partitioner=self.partitioner,\n     70     )\n\nFile ~/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/datasource/fluent/spark_datasource.py:238, in DataFrameAsset.build_batch_request(self, options, batch_slice, partitioner)\n    232     raise BuildBatchRequestError(\n    233         message=\"partitioner is not currently supported for this DataAsset \"\n    234         \"and must be None.\"\n    235     )\n    237 if not (options is not None and \"dataframe\" in options and len(options) == 1):\n--> 238     raise BuildBatchRequestError(message=\"options must contain exactly 1 key, 'dataframe'.\")\n    240 if not self.is_spark_data_frame(options[\"dataframe\"]):\n    241     raise BuildBatchRequestError(\n    242         message=\"Cannot build batch request without a Spark DataFrame.\"\n    243     )\n\nBuildBatchRequestError: Bad input to build_batch_request: options must contain exactly 1 key, 'dataframe'.\n\n**Expected behavior**\nI would expect the code to run through and run a validation_definition\n\n**Environment (please complete the following information):**\n - Operating System: Windows\n - Great Expectations Version: 1.5.8\n - Data Source: Spark\n - Cloud environment: Azure Synapse\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11352/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11336", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11336/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11336/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11336/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11336", "id": 3315910810, "node_id": "I_kwDOBiS_IM7FpMia", "number": 11336, "title": "Scala/Java Spark support for Great Expectations", "user": {"login": "praveen-kanamarlapudi", "id": 9835138, "node_id": "MDQ6VXNlcjk4MzUxMzg=", "avatar_url": "https://avatars.githubusercontent.com/u/9835138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/praveen-kanamarlapudi", "html_url": "https://github.com/praveen-kanamarlapudi", "followers_url": "https://api.github.com/users/praveen-kanamarlapudi/followers", "following_url": "https://api.github.com/users/praveen-kanamarlapudi/following{/other_user}", "gists_url": "https://api.github.com/users/praveen-kanamarlapudi/gists{/gist_id}", "starred_url": "https://api.github.com/users/praveen-kanamarlapudi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/praveen-kanamarlapudi/subscriptions", "organizations_url": "https://api.github.com/users/praveen-kanamarlapudi/orgs", "repos_url": "https://api.github.com/users/praveen-kanamarlapudi/repos", "events_url": "https://api.github.com/users/praveen-kanamarlapudi/events{/privacy}", "received_events_url": "https://api.github.com/users/praveen-kanamarlapudi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-08-12T20:56:01Z", "updated_at": "2025-10-07T14:27:30Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**  \nWe use Scala Spark extensively for our ETL workloads. While Great Expectations supports PySpark, our pipelines are entirely Scala-based, making it challenging to integrate GE.\n\n**Describe the solution you'd like**  \nNative Scala Spark support in Great Expectations, allowing expectations to be defined and executed directly within Scala/Spark jobs. \n\n**Describe alternatives you've considered**  \n- Running a separate PySpark job for validation after Scala Spark processing (adds latency, complexity, and extra infrastructure).  \n- While having a sperate pyspark job is feasible, for critical metrics, we prefer the Data Quality checks to happen during the ingestion time.\n\n**Additional context**  \nScala Spark remains the dominant language in many big data platforms for ETL pipelines. Adding Scala support in GE would enable broader adoption in JVM-based environments, reduce cross-language overhead, and allow teams to leverage GE\u2019s powerful data validation and documentation features without disrupting existing JVM based workflows.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11336/reactions", "total_count": 1, "+1": 0, "-1": 1, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11336/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11319", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11319/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11319/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11319/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11319", "id": 3274693144, "node_id": "I_kwDOBiS_IM7DL9oY", "number": 11319, "title": "row_condition not applied correctly with PostgreSQL/SQL datasources", "user": {"login": "cfpalacio", "id": 210908552, "node_id": "U_kgDODJI1iA", "avatar_url": "https://avatars.githubusercontent.com/u/210908552?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cfpalacio", "html_url": "https://github.com/cfpalacio", "followers_url": "https://api.github.com/users/cfpalacio/followers", "following_url": "https://api.github.com/users/cfpalacio/following{/other_user}", "gists_url": "https://api.github.com/users/cfpalacio/gists{/gist_id}", "starred_url": "https://api.github.com/users/cfpalacio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cfpalacio/subscriptions", "organizations_url": "https://api.github.com/users/cfpalacio/orgs", "repos_url": "https://api.github.com/users/cfpalacio/repos", "events_url": "https://api.github.com/users/cfpalacio/events{/privacy}", "received_events_url": "https://api.github.com/users/cfpalacio/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-07-29T19:13:23Z", "updated_at": "2025-09-15T09:38:18Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "# Great Expectations Bug Report\n\n**Describe the bug**\nWhen using `row_condition` with a PostgreSQL datasource, Great Expectations fails to properly apply the condition filter to the SQL query. The generated SQL query for retrieving unexpected rows contains syntax errors (duplicate WHERE clauses) and completely ignores the row_condition filters. This results in all rows being evaluated instead of only the rows that match the specified condition.\n\n**To Reproduce**\nCode to reproduce the issue:\n\n```python\nimport great_expectations as gx\n\n# Connection string\nconnection_string = \"postgresql+psycopg://postgres:password@localhost:5432/testdb\"\n\n# Create GX context\ncontext = gx.get_context()\n\n# Add datasource\ndatasource = context.data_sources.add_postgres(\n    name=\"postgres_datasource\",\n    connection_string=connection_string\n)\n\n# Define the result format configuration\nresult_format_config = {\n    \"result_format\": \"COMPLETE\",\n    \"unexpected_index_column_names\": [\"customer_id\"],\n    \"return_unexpected_index_query\": True,\n    \"partial_unexpected_count\": 1000,\n    \"exclude_unexpected_values\": False,\n    \"include_unexpected_rows\": True\n}\n\n# SQL query - Sample customer orders data\nsql_query = \"\"\"\n    SELECT \n        c.customer_id,\n        c.customer_name,\n        c.customer_type,\n        c.registration_date,\n        o.order_id,\n        o.order_amount,\n        o.order_status,\n        o.payment_method,\n        EXTRACT(YEAR FROM AGE(CURRENT_DATE, c.registration_date)) as years_as_customer,\n        COUNT(o.order_id) OVER (PARTITION BY c.customer_id) as total_orders\n    FROM customers c\n    LEFT JOIN orders o ON c.customer_id = o.customer_id\n    WHERE o.order_date >= '2024-01-01'\n\"\"\"\n\n# Add data asset\ndata_asset = datasource.add_query_asset(\n    name=\"customer_orders_analysis\",\n    query=sql_query\n)\n\n# Get batch\nbatch_definition = data_asset.add_batch_definition(\"default_batch\")\nbatch = batch_definition.get_batch()\n\n# Create suite\nsuite = context.suites.add(gx.ExpectationSuite(name=\"test_suite\"))\n\n# Add expectation with row_condition\n# This should only validate payment methods for premium customers with more than 5 years\nexpectation = gx.expectations.ExpectColumnValuesToNotBeInSet(\n    column=\"payment_method\",\n    value_set=[\"check\", \"cash\"],\n    row_condition='col(\"years_as_customer\") > 5 AND col(\"customer_type\") == \"PREMIUM\" AND col(\"total_orders\") > 10',\n    condition_parser=\"great_expectations\"\n)\n\nsuite.add_expectation(expectation)\n\n# Validate\nvalidation_result = batch.validate(suite, result_format=result_format_config)\nprint(validation_result)\n```\n\n**Generated SQL with syntax error:**\nThe `unexpected_index_query` in the validation result shows:\n```sql\nSELECT customer_id, payment_method \nFROM SELECT * \nFROM (SELECT c.customer_id, c.customer_name, ...) AS anon_1 \nWHERE true \nWHERE payment_method IS NOT NULL AND payment_method IN ('check'::VARCHAR, 'cash'::VARCHAR);\n```\n\nNote the duplicate WHERE clauses (`WHERE true WHERE`) and the complete absence of the row_condition filters (`years_as_customer > 5`, `customer_type == \"PREMIUM\"`, `total_orders > 10`).\n\n**Expected behavior**\nThe row_condition should be properly translated to SQL and applied as a filter. The expectation should only evaluate rows where:\n- `years_as_customer > 5` \n- `customer_type == \"PREMIUM\"`\n- `total_orders > 10`\n\n**Environment (please complete the following information):**\n- Operating System: MacOS\n- Great Expectations Version: 1.5.1\n- Data Source: PostgreSQL (using psycopg)\n- Python Version: 3.9\n\n**Additional context**\n- The issue occurs specifically when using `row_condition` with SQL datasources\n- Tested with multiple condition combinations (using AND operators) and all exhibit the same behavior\n- The validation incorrectly reports all rows as \"unexpected\" because the row_condition is not being applied\n- This appears to be a bug in how Great Expectations translates the row_condition parser output to SQL for database sources\n- The issue makes it impossible to use conditional expectations with SQL databases, forcing users to either pre-filter data in their queries or load entire datasets into memory", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11319/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11318", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11318/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11318/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11318/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11318", "id": 3273765039, "node_id": "I_kwDOBiS_IM7DIbCv", "number": 11318, "title": "SuiteFactory.delete(...) raises a TypeException when using a DatabaseStoreBackend", "user": {"login": "smcl", "id": 510566, "node_id": "MDQ6VXNlcjUxMDU2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/510566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smcl", "html_url": "https://github.com/smcl", "followers_url": "https://api.github.com/users/smcl/followers", "following_url": "https://api.github.com/users/smcl/following{/other_user}", "gists_url": "https://api.github.com/users/smcl/gists{/gist_id}", "starred_url": "https://api.github.com/users/smcl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smcl/subscriptions", "organizations_url": "https://api.github.com/users/smcl/orgs", "repos_url": "https://api.github.com/users/smcl/repos", "events_url": "https://api.github.com/users/smcl/events{/privacy}", "received_events_url": "https://api.github.com/users/smcl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-07-29T13:58:21Z", "updated_at": "2025-07-30T11:42:59Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen you configure an ExpectationStore with a DatabaseStoreBackend and try to delete a suite, a `TypeException` is raised.\n\n**To Reproduce**\n\nI've got a very small project which demonstrates this in action at https://github.com/smcl/gx-dbstore-delete-issue - you just need to ensure you have great-expectations 1.5.x and sqlalchemy installed.\n\nBut basically the code looks like the below\n\n```\nimport great_expectations as gx\ncontext = gx.get_context(mode=\"file\")\ncontext.suites.add(gx.core.expectation_suite.ExpectationSuite(name=\"test_suite\"))\ncontext.suites.delete(\"test_suite\")\n```\n\nWith a very \"vanilla\" great_expectations.yml with an expectations_store configured as follows:\n\n```\n  expectations_store:\n    # class_name: ExpectationsStore\n    # store_backend:\n    #   class_name: TupleFilesystemStoreBackend\n    #   base_directory: expectations/\n    class_name: ExpectationsStore\n    store_backend:\n      class_name: DatabaseStoreBackend\n      credentials:\n        drivername: sqlite\n        database: ./gx.db\n```\n\nWhen you run the script you'll encounter the following Exception:\n\n```\n    for key_col, val in zip(self.key_columns, key)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: 'ExpectationSuiteIdentifier' object is not iterable\n```\n\n**Expected behavior**\nThe provided `app.py` script should terminate without any errors.\n\n**Environment (please complete the following information):**\n - Operating System: Windows\n - Great Expectations Version: 1.5.6\n - Data Source: n/a\n - Cloud environment: n/a\n\n**Additional context**\n\nI looked into the GX sources to see if I was doing something stupid. The `TypeError` is raised inside `DatabaseStoreBackend.remove_key` which reports that \"'ExpectationSuiteIdentifier' object is not iterable\" (code is [here](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/data_context/store/database_store_backend.py#L346-L361)) - object in question is the `key` parameter below which we pass into `zip(...)`:\n\n```\n    def remove_key(self, key):  # type: ignore[explicit-override] # FIXME\n        delete_statement = self._table.delete().where(\n            sa.and_(\n                *(\n                    getattr(self._table.columns, key_col) == val\n                    for key_col, val in zip(self.key_columns, key)\n                )\n            )\n        )\n        # ... removed\n```\n\nThere is no type annotation for `key` here, but this code appears to believe that `key` is a collection that can be iterated over ... but in this case it is called indirectly from `SuiteFactory.delete` [here](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/core/factory/suite_factory.py#L83):\n\n```\n    key = self._store.get_key(name=suite.name, id=suite.id)\n    self._store.remove_key(key=key)\n```\n\nThat `get_key` method has a type annotation indicating that it returns either `GXCloudIdentifier | ExpectationSuiteIdentifier` - _neither_ of these types are iterable so it will obviously cause an exception when it is then passed as an argument into `zip()`.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11318/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11318/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11301", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11301/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11301/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11301/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11301", "id": 3232316404, "node_id": "I_kwDOBiS_IM7AqTv0", "number": 11301, "title": "[FEATURE] MAX_RESULT_RECORDS set using environment variable", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-07-15T13:41:52Z", "updated_at": "2025-08-07T08:27:49Z", "closed_at": "2025-08-04T19:32:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We only get a sample of 200 for unexpected rows query expectations.\n\n**Describe the solution you'd like**\nI want to retrieve ALL unexpected rows.\n\n**Describe alternatives you've considered**\nUse an environment variable to set this value.\n\n[MAX_RESULT_RECORDS](https://github.com/great-expectations/great_expectations/blob/560f8efab35ca2d08ed0be321a6febe077b84328/great_expectations/expectations/metrics/util.py#L90)\n\nOld:\n`MAX_RESULT_RECORDS: Final[int] = 200`\nUpdated:\n`MAX_RESULT_RECORDS: Final[int] = int(os.getenv(\"GX_MAX_RESULT_RECORDS\", 200))`", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11301/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11284", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11284/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11284/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11284/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11284", "id": 3204704757, "node_id": "I_kwDOBiS_IM6_A-n1", "number": 11284, "title": "Docstring for `add_dataframe_asset` references missing dataframe argument", "user": {"login": "leftkats", "id": 16416781, "node_id": "MDQ6VXNlcjE2NDE2Nzgx", "avatar_url": "https://avatars.githubusercontent.com/u/16416781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leftkats", "html_url": "https://github.com/leftkats", "followers_url": "https://api.github.com/users/leftkats/followers", "following_url": "https://api.github.com/users/leftkats/following{/other_user}", "gists_url": "https://api.github.com/users/leftkats/gists{/gist_id}", "starred_url": "https://api.github.com/users/leftkats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leftkats/subscriptions", "organizations_url": "https://api.github.com/users/leftkats/orgs", "repos_url": "https://api.github.com/users/leftkats/repos", "events_url": "https://api.github.com/users/leftkats/events{/privacy}", "received_events_url": "https://api.github.com/users/leftkats/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-07-05T10:16:29Z", "updated_at": "2025-07-05T10:16:29Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**  \nThe docstring for the `add_dataframe_asset` method in [`great_expectations/datasource/fluent/spark_datasource.py`](https://github.com/great-expectations/great_expectations/blob/7e23505b4ca36554d08ff6384f9f3d0eb0b56504/great_expectations/datasource/fluent/spark_datasource.py#L358) references a `dataframe` argument, but the function signature does not include a `dataframe` parameter. This creates confusion about how the method should be used.\n\n**To Reproduce**  \n1. View the [`add_dataframe_asset` method definition](https://github.com/great-expectations/great_expectations/blob/7e23505b4ca36554d08ff6384f9f3d0eb0b56504/great_expectations/datasource/fluent/spark_datasource.py#L358).\n2. Observe that the docstring includes:\n    ```python\n    Args:\n        name: The name of the DataFrame asset. This can be any arbitrary string.\n        dataframe: The Spark Dataframe containing the data for this DataFrame data asset.\n        batch_metadata: An arbitrary user defined dictionary with string keys which will get inherited by any\n                        batches created from the asset.\n    ```\n3. The actual function signature is:\n    ```python\n    def add_dataframe_asset(\n        self,\n        name: str,\n        batch_metadata: Optional[BatchMetadata] = None,\n    ) -> DataFrameAsset:\n    ```\n4. There is no `dataframe` parameter.\n\n**Expected behavior**  \nThe docstring should accurately reflect the function signature, or the function should accept a `dataframe` argument if that is the intended usage.\n\n**Environment (please complete the following information):**\n - Operating System: N/A (documentation issue)\n - Great Expectations Version: [please fill in, if relevant]\n - Data Source: Spark\n - Cloud environment: N/A\n\n**Additional context**  \nThis appears to be a documentation oversight. Please clarify the intended API for adding a DataFrame asset and update the docstring or method signature accordingly.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11284/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11284/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11275", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11275/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11275/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11275/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11275", "id": 3178400622, "node_id": "I_kwDOBiS_IM69cotu", "number": 11275, "title": "Ephemeral Data Context Failing with permission denied on file", "user": {"login": "jmcorreia", "id": 11615737, "node_id": "MDQ6VXNlcjExNjE1NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/11615737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmcorreia", "html_url": "https://github.com/jmcorreia", "followers_url": "https://api.github.com/users/jmcorreia/followers", "following_url": "https://api.github.com/users/jmcorreia/following{/other_user}", "gists_url": "https://api.github.com/users/jmcorreia/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmcorreia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmcorreia/subscriptions", "organizations_url": "https://api.github.com/users/jmcorreia/orgs", "repos_url": "https://api.github.com/users/jmcorreia/repos", "events_url": "https://api.github.com/users/jmcorreia/events{/privacy}", "received_events_url": "https://api.github.com/users/jmcorreia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-06-26T09:06:19Z", "updated_at": "2025-07-09T18:21:30Z", "closed_at": "2025-07-09T18:21:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We are migrating from GX0.18 to GX 1.x and even though we are using Ephemeral Data Context and we are not using analytics, we are still getting below error:\n\nPermission denied: '/root/.great_expectations/great_expectations.conf\nThe error is coming as part of the self._get_oss_id() inside _init_analytics even though we have analytics usage set as False in the data context and even though we are using ephemeral context.\nThis is happening with Databricks DBR15.4 on a streaming load, inside a forEachBatch.\nDo you have any idea?\nWhy is GX checking for the file if we are using ephemeral and also turning analytics off?\n\nhttps://discourse.greatexpectations.io/t/ephemeral-data-context-failing-with-permission-denied-on-file/2235", "closed_by": {"login": "wookasz", "id": 14184925, "node_id": "MDQ6VXNlcjE0MTg0OTI1", "avatar_url": "https://avatars.githubusercontent.com/u/14184925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wookasz", "html_url": "https://github.com/wookasz", "followers_url": "https://api.github.com/users/wookasz/followers", "following_url": "https://api.github.com/users/wookasz/following{/other_user}", "gists_url": "https://api.github.com/users/wookasz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wookasz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wookasz/subscriptions", "organizations_url": "https://api.github.com/users/wookasz/orgs", "repos_url": "https://api.github.com/users/wookasz/repos", "events_url": "https://api.github.com/users/wookasz/events{/privacy}", "received_events_url": "https://api.github.com/users/wookasz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11275/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11275/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11271", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11271/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11271/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11271/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11271", "id": 3173926353, "node_id": "I_kwDOBiS_IM69LkXR", "number": 11271, "title": "DataContextError: Datasource is not a FluentDatasource", "user": {"login": "learnprofile", "id": 32097278, "node_id": "MDQ6VXNlcjMyMDk3Mjc4", "avatar_url": "https://avatars.githubusercontent.com/u/32097278?v=4", "gravatar_id": "", "url": "https://api.github.com/users/learnprofile", "html_url": "https://github.com/learnprofile", "followers_url": "https://api.github.com/users/learnprofile/followers", "following_url": "https://api.github.com/users/learnprofile/following{/other_user}", "gists_url": "https://api.github.com/users/learnprofile/gists{/gist_id}", "starred_url": "https://api.github.com/users/learnprofile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/learnprofile/subscriptions", "organizations_url": "https://api.github.com/users/learnprofile/orgs", "repos_url": "https://api.github.com/users/learnprofile/repos", "events_url": "https://api.github.com/users/learnprofile/events{/privacy}", "received_events_url": "https://api.github.com/users/learnprofile/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-06-25T02:57:13Z", "updated_at": "2025-10-07T15:36:27Z", "closed_at": "2025-10-07T15:36:27Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am trying to use Great expectation package in my databricks to connect directly with SQL Server and evaluate.\n\n1. Installed newer version of GE: 1.5.2\n2. using config version 3.0\n3. I have explicitely set root directory of my dbfs filestore.\n4. even tried updating great_expectations.yml based on some of the external links but still didnt help.\n\nI have splitted steps into 2 \n1st step:\n\n----------------\n# Databricks notebook source\n# MAGIC %pip install great_expectations==1.5.2 ruamel.yaml\n\n# COMMAND ----------\n\nimport datetime\nfrom great_expectations import get_context\nfrom great_expectations.data_context import EphemeralDataContext\nfrom great_expectations.data_context.types.base import DataContextConfig, FilesystemStoreBackendDefaults\nfrom great_expectations.data_context.types.base import DataContextConfig\nfrom great_expectations.data_context.store.tuple_store_backend import TupleFilesystemStoreBackend\nfrom great_expectations.data_context.types.base import FilesystemStoreBackendDefaults \nimport great_expectations as gx\nfrom great_expectations.core.batch import RuntimeBatchRequest\nfrom great_expectations.data_context.types.base import (\n    DataContextConfig,\n    FilesystemStoreBackendDefaults,\n)\n\n\ndef get_data_context():\n    context_config = DataContextConfig(\n        config_version=3.0,\n        store_backend_defaults=FilesystemStoreBackendDefaults(\n            root_directory=\"/dbfs/FileStore/gx/\"\n        ),\n        stores={\n            \"expectations_store\": {\n                \"class_name\": \"ExpectationsStore\",\n                \"store_backend\": {\n                    \"class_name\": \"TupleFilesystemStoreBackend\",\n                    \"base_directory\": \"/dbfs/FileStore/gx/expectations/\"\n                }\n            },\n            # \"validations_store\": {\n            #     \"class_name\": \"ValidationsStore\",\n            #     \"store_backend\": {\n            #         \"class_name\": \"TupleFilesystemStoreBackend\",\n            #         \"base_directory\": \"/dbfs/FileStore/gx/validations/\"\n            #     }\n            # },\n            \"validation_results_store\": {\n    \"class_name\": \"ValidationResultsStore\",\n    \"store_backend\": {\n        \"class_name\": \"TupleFilesystemStoreBackend\",\n        \"base_directory\": \"/dbfs/FileStore/gx/validations/\"\n    }\n},\n\n            \"evaluation_parameter_store\": {\n                \"class_name\": \"EvaluationParameterStore\"\n            }\n        },\n        data_docs_sites={}\n    )\n\n    context = EphemeralDataContext(project_config=context_config)\n\n    if \"spark_runtime_ds\" not in [ds.name for ds in context.list_datasources()]:\n        context.sources.add_spark(\n            name=\"spark_runtime_ds\"\n        ).add_runtime_data_connector(\n            name=\"runtime_data_connector\",\n            batch_identifiers=[\"default_identifier\"]\n        )\n\n    return context\n\n\n\n\n\n\n\ndef parse_ge_validation_result(results) -> tuple:\n    if results:\n        validation_id = results.list_validation_result_identifiers()[0]\n        if validation_id:\n            stats = results.get_statistics().get(\"validation_statistics\").get(validation_id)\n            if stats:\n                return results.success, stats[\"success_percent\"]\n    return None, None\n\n\ndef executeValidation(df, dataset_name, expectations):\n    context = get_data_context()\n\n    suite_name = f\"{dataset_name}_expectations\"\n    try:\n        context.get_expectation_suite(suite_name)\n    except Exception:\n        context.create_expectation_suite(suite_name)\n\n    batch_request = RuntimeBatchRequest(\n        datasource_name=\"spark_runtime_ds\",\n        data_connector_name=\"runtime_data_connector\",\n        data_asset_name=dataset_name,\n        batch_identifiers={\"default_identifier\": \"default_identifier\"},\n        runtime_parameters={\"batch_data\": df},\n    )\n\n    validator = context.get_validator(\n        batch_request=batch_request,\n        expectation_suite_name=suite_name\n    )\n\n    for exp in expectations:\n        validator.expectation_suite.add_expectation_configuration(\n            expectation_type=exp[\"expectation_type\"],\n            kwargs=exp[\"kwargs\"]\n        )\n\n    validator.save_expectation_suite(discard_failed_expectations=False)\n\n    checkpoint_name = f\"{dataset_name}_checkpoint\"\n    if checkpoint_name not in [cp.name for cp in context.list_checkpoints()]:\n        context.add_checkpoint(\n            name=checkpoint_name,\n            config_version=1.0,\n            class_name=\"SimpleCheckpoint\",\n            validations=[{\n                \"batch_request\": batch_request,\n                \"expectation_suite_name\": suite_name\n            }]\n        )\n\n    result = context.run_checkpoint(checkpoint_name=checkpoint_name)\n\n    success = result[\"success\"]\n    stats = result[\"run_results\"]\n    success_percent = None\n\n    try:\n        validation_result = list(stats.values())[0][\"validation_result\"]\n        total = validation_result[\"statistics\"][\"evaluated_expectations\"]\n        success_count = validation_result[\"statistics\"][\"successful_expectations\"]\n        success_percent = (success_count / total) * 100\n    except Exception:\n        pass\n\n    return success, success_percent\n\n\nand then next step\n\njdbc_url = \"jdbc:sqlserver://xxxxx.database.windows.net:1433;databaseName=xxxx\"\nconnection_properties = {\n    \"user\": dbutils.secrets.get(\"ADLSScope\", \"AzSQL-DBr-PROD\"),\n    \"password\": dbutils.secrets.get(\"ADLSScope\", \"ADB-AzSQL-PROD-pwd\"),\n    \"driver\": \"com.microsoft.sqlserver.jdbc.SQLServerDriver\"\n}\nsql_df = spark.read.jdbc(url=jdbc_url, table=\"dbo.DQ_LOGIC\", properties=connection_properties)\n\n\nexpectations = [\n    {\"expectation_type\": \"expect_column_values_to_not_be_null\", \"kwargs\": {\"column\": \"HIERARCHY_ID\"}},\n    {\"expectation_type\": \"expect_column_values_to_be_unique\", \"kwargs\": {\"column\": \"HIERARCHY_ID\"}},\n    {\"expectation_type\": \"expect_column_values_to_match_regex\", \"kwargs\": {\"column\": \"HIERARCHY_ID\", \"regex\": r\"^\\d+$\"}},\n    {\"expectation_type\": \"expect_column_values_to_not_be_null\", \"kwargs\": {\"column\": \"DQ_SQL\"}},\n    {\"expectation_type\": \"expect_column_values_to_be_of_type\", \"kwargs\": {\"column\": \"DQ_SQL\", \"type_\": \"string\"}},\n    {\"expectation_type\": \"expect_column_values_to_not_match_regex\", \"kwargs\": {\"column\": \"DQ_SQL\", \"regex\": r\"^\\s*$\"}},\n    {\"expectation_type\": \"expect_column_value_lengths_to_be_between\", \"kwargs\": {\"column\": \"DQ_SQL\", \"min_value\": 1, \"max_value\": 500}},\n]\n\n\nsuccess, percent = executeValidation(sql_df, \"DQ_LOGIC\", expectations)\nprint(f\"Validation success: {success}\")\nprint(f\"Success percentage: {percent}\")\n\n--------------------------------------------------------\nshows error as\n\nCRITICAL:great_expectations.data_context.store.store:Error The module: `great_expectations.data_context.store` does not contain the class: `EvaluationParameterStore`.\n        - Please verify that the class named `EvaluationParameterStore` exists. occurred while attempting to instantiate a store.\nClassInstantiationError: The module \"great_expectations.data_context.store\" exists; however, the system is unable to create an instance of the class \"EvaluationParameterStore\", searched for inside this module.  Please make sure that the class named \"EvaluationParameterStore\" is properly defined inside its intended module and declared correctly by the calling entity.  This error is unrecoverable.\n            \nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/util.py:264, in load_class(class_name, module_name)\n    263 try:\n--> 264     klass_ = getattr(module_obj, class_name)\n    265 except AttributeError:\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/data_context/store/store.py:387, in Store.build_store_from_config(name, config, module_name, runtime_environment)\n    385     class_name: str = config[\"class_name\"]\n    386     module_name = config.get(\"module_name\", module_name)\n--> 387     raise gx_exceptions.ClassInstantiationError(\n    388         module_name=module_name,\n    389         package_name=None,\n    390         class_name=class_name,\n    391     ) from e\n    393 return new_store\n\n\n\n\nlet me know what am i missing.", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11261", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11261/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11261/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11261/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11261", "id": 3162917497, "node_id": "I_kwDOBiS_IM68hkp5", "number": 11261, "title": "How do I pass batch_identifiers in GE v1", "user": {"login": "kassnl09", "id": 52441157, "node_id": "MDQ6VXNlcjUyNDQxMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/52441157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kassnl09", "html_url": "https://github.com/kassnl09", "followers_url": "https://api.github.com/users/kassnl09/followers", "following_url": "https://api.github.com/users/kassnl09/following{/other_user}", "gists_url": "https://api.github.com/users/kassnl09/gists{/gist_id}", "starred_url": "https://api.github.com/users/kassnl09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kassnl09/subscriptions", "organizations_url": "https://api.github.com/users/kassnl09/orgs", "repos_url": "https://api.github.com/users/kassnl09/repos", "events_url": "https://api.github.com/users/kassnl09/events{/privacy}", "received_events_url": "https://api.github.com/users/kassnl09/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-06-20T11:08:17Z", "updated_at": "2026-01-27T21:42:19Z", "closed_at": "2026-01-27T21:42:19Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "This is not included in the migration guide, so I need a bit of guidance. In our v0 implementation we are using a `RuntimeBatchRequest` object where we pass the dictionary 'batch_identifiers' that later appears in the result json:\n\n```\n        batch_request = RuntimeBatchRequest(\n            datasource_name=data_source_name,\n            data_connector_name=\"dataframe_connector\",\n            data_asset_name=data_asset_name,\n            batch_identifiers={\n                \"effective_date\": reference_date,\n                \"layer_name_type_identifier\": pipeline_stage,\n                \"run_id\": f\"dq_run_at_{datetime.date.today().strftime('%Y%m%d_%H%M%S')}\",\n                \"source_system_type_identifier\": domain,\n                \"data_product_identifier\": \"Other\",\n                \"showstopper\": is_blocking,\n            },\n            runtime_parameters={\"batch_data\": df},\n       )\n```\n\nI haven't yet found a way to pass these `batch_identifiers` anywhere at the v1 implementation. I'm evaluating in-memory spark dataframes as following:\n\n```\n        batch_definition = context.data_sources.get(data_source_name).get_asset(data_asset_name).get_batch_definition(batch_definition_name)\n        suite = context.suites.get(expectation_suite_name)\n        validation_definition = context.validation_definitions.add(\n            gx.ValidationDefinition(data=batch_definition, suite=suite, name=validation_definition_name)\n        )\n        checkpoint = gx.Checkpoint(\n            name=checkpoint_name,\n            validation_definitions=[validation_definition],\n            result_format={\n                \"result_format\": \"SUMMARY\",\n                \"partial_unexpected_count\": 50,\n                \"unexpected_index_column_names\": primary_keys,\n            },\n        )\n\n        return checkpoint.run(\n            batch_parameters={\"dataframe\": df},\n        )\n```\n\nWhere do the batch_identifiers identifiers fit in the logic for v1 above? I went through all documentation and I haven't found the answer yet. Any help is highly appreciated. Thank you in advance!", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11261/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11261/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11258", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11258/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11258/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11258/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11258", "id": 3155595691, "node_id": "I_kwDOBiS_IM68FpGr", "number": 11258, "title": "Unable to fetch checkpoints from AzureBlobStorage when using TupleAzureBlobStorageBackend with a prefix \"first_part/second_part\" in Windows", "user": {"login": "Rohitjoshi07", "id": 45355153, "node_id": "MDQ6VXNlcjQ1MzU1MTUz", "avatar_url": "https://avatars.githubusercontent.com/u/45355153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rohitjoshi07", "html_url": "https://github.com/Rohitjoshi07", "followers_url": "https://api.github.com/users/Rohitjoshi07/followers", "following_url": "https://api.github.com/users/Rohitjoshi07/following{/other_user}", "gists_url": "https://api.github.com/users/Rohitjoshi07/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rohitjoshi07/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rohitjoshi07/subscriptions", "organizations_url": "https://api.github.com/users/Rohitjoshi07/orgs", "repos_url": "https://api.github.com/users/Rohitjoshi07/repos", "events_url": "https://api.github.com/users/Rohitjoshi07/events{/privacy}", "received_events_url": "https://api.github.com/users/Rohitjoshi07/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-06-18T06:10:32Z", "updated_at": "2025-06-18T06:10:32Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI had configured my checkpoint store in DatacontextConfig using (class_name: TupleAzureBlobStoreBackend) and added a prefix with azure credentials(account_url and sas_token), when i load the gx_context and do gx_context.checkpoints.get(checkpoint_name), its giving BlobNotFound Error, however while adding a checkpoint its able to add it properly in the AzureBlobStorage using the given prefix.\n\nAlso while fetching checkpoint is already present in the azure blob storage with the correct name. Digging deeper into it i found out in implementation of tuple_store_backend.py [class: TupleAzureStoreBackend], list_keys() method: its using relpath for obj.name from azure blob store:\nex: obj_name = data_quality/checkpoint/ck.json\nwill get converted to : az_blob_key = data_quality\\checkpoint\\ck.json\nbut my prefix is : data_quality/checkpoint\nand as per os WINDOWS: os.path.sep= '\\'\nhence this will fail the first if condition where we are checking if az_blob_key startswith our prefix and os seperator.\n\n`\n@override\n    def list_keys(self, prefix: Tuple = ()) -> List[Tuple]:\n        # Note that the prefix arg is only included to maintain consistency with the parent class signature  # noqa: E501 # FIXME CoP\n        key_list = []\n\n        for obj in self._container_client.list_blobs(name_starts_with=self.prefix):\n            az_blob_key = os.path.relpath(obj.name)\n            if az_blob_key.startswith(f\"{self.prefix}{os.path.sep}\"):\n                az_blob_key = az_blob_key[len(self.prefix) + 1 :]\n\n            if self._is_missing_prefix_or_suffix(\n                filepath_prefix=self.filepath_prefix,\n                filepath_suffix=self.filepath_suffix,\n                key=az_blob_key,\n            ):\n                continue\n            key = self._convert_filepath_to_key(az_blob_key)\n\n            key_list.append(key)\n        return key_list\n\n    @override\n    def _get_all(self) -> list[Any]:\n        keys = self.list_keys()\n        return [self._get(key) for key in keys]\n` \n\n**To Reproduce**\n\nConfigure GX context [File or Ephemeral] with a checkpoint store (class_name: TupleAzureBlobStoreBackend and prefix: \"data_quality/checkpoints\") and try to fetch the checkpoint using \ngx_context.checkpoints.get(checkpoint_name) #checkpoint_name without .json suffix\n\n**Expected behavior**\nlist_keys method should be able to resolve the paths properly and during comparision resolve the prefix too, incase resolving blob_key.\nin list_keys method: if az_blob_key.startswith(f\"{self.prefix}{os.path.sep}\"): should be converted to \nif az_blob_key.startswith(f\"{os.path.relpath(self.prefix)}{os.path.sep}\"):\nthen its working fine and It is able to read the checkpoint and return if present in azure blob storage with the mentioned prefix.\n\n**Environment (please complete the following information):**\n - Operating System: [e.g. Linux, MacOS, Windows]: Windows\n - Great Expectations Version: [e.g. 0.13.2]: 1.5.1\n - Data Source: [e.g. Pandas, Snowflake]: pandas\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]: Azure\n\n**Additional context**\nCurrently running in local:\n\n![Image](https://github.com/user-attachments/assets/6b1ced21-0199-44fd-9777-3d0ab4dfc06d)\n![Image](https://github.com/user-attachments/assets/6ff2d4c2-d66a-47cf-83f5-1b6860e1b30b)\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11258/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11243", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11243/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11243/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11243/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11243", "id": 3136587881, "node_id": "I_kwDOBiS_IM669Ihp", "number": 11243, "title": "Getting the sql query as bad formatted", "user": {"login": "mradulbohra", "id": 42599869, "node_id": "MDQ6VXNlcjQyNTk5ODY5", "avatar_url": "https://avatars.githubusercontent.com/u/42599869?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mradulbohra", "html_url": "https://github.com/mradulbohra", "followers_url": "https://api.github.com/users/mradulbohra/followers", "following_url": "https://api.github.com/users/mradulbohra/following{/other_user}", "gists_url": "https://api.github.com/users/mradulbohra/gists{/gist_id}", "starred_url": "https://api.github.com/users/mradulbohra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mradulbohra/subscriptions", "organizations_url": "https://api.github.com/users/mradulbohra/orgs", "repos_url": "https://api.github.com/users/mradulbohra/repos", "events_url": "https://api.github.com/users/mradulbohra/events{/privacy}", "received_events_url": "https://api.github.com/users/mradulbohra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-06-11T12:07:21Z", "updated_at": "2025-10-07T14:50:08Z", "closed_at": "2025-10-07T14:50:08Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI am getting the query as below in sql format\n\n**To Reproduce**\nSELECT optimization_elasticity FROM SELECT * FROM (SELECT\ncampaign_id, campaign_version, xyz. where something_1 where something_2\n\n**Expected behavior**\nSELECT optimization_elasticity FROM (SELECT * FROM (SELECT\ncampaign_id, campaign_version, xyz. where something_1) where something_2\n\n**Environment (please complete the following information):**\n - Operating System: [e.g. Linux, MacOS, Windows]\n - Great Expectations Version: [e.g. 0.13.2]\n - Data Source: [e.g. Pandas, Snowflake]\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11243/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11242", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11242/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11242/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11242/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11242", "id": 3136436383, "node_id": "I_kwDOBiS_IM668jif", "number": 11242, "title": "[ISSUE] Error [Errno 22] Invalid argument - when calling suite.add_expectation()", "user": {"login": "LuukKaandorpAH", "id": 114914020, "node_id": "U_kgDOBtly5A", "avatar_url": "https://avatars.githubusercontent.com/u/114914020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LuukKaandorpAH", "html_url": "https://github.com/LuukKaandorpAH", "followers_url": "https://api.github.com/users/LuukKaandorpAH/followers", "following_url": "https://api.github.com/users/LuukKaandorpAH/following{/other_user}", "gists_url": "https://api.github.com/users/LuukKaandorpAH/gists{/gist_id}", "starred_url": "https://api.github.com/users/LuukKaandorpAH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LuukKaandorpAH/subscriptions", "organizations_url": "https://api.github.com/users/LuukKaandorpAH/orgs", "repos_url": "https://api.github.com/users/LuukKaandorpAH/repos", "events_url": "https://api.github.com/users/LuukKaandorpAH/events{/privacy}", "received_events_url": "https://api.github.com/users/LuukKaandorpAH/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-06-11T11:12:12Z", "updated_at": "2025-10-07T14:40:21Z", "closed_at": "2025-10-07T14:40:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nSometimes when running suite.add_expectation() we get the following error: \n\n_[Errno 22] Invalid argument_\n\nThe strange thing is that this happens sometimes. When re-running the code, the error usually disappears. Therefore, we are thinking it's a bug within the library. \n\n**To Reproduce**\nHere is the full track trace up to the relevant code:\n\n`\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/expi/common/client_wrappers/gx_client.py:147, in GreatExpectationsClient.add_expectations(self, suite_name, expectations)\n    145 suite = self.context.suites.get(f\"{suite_name}_suite\")\n    146 for expectation in expectations:\n--> 147     suite.add_expectation(expectation)\n    149 self.context.suites.add_or_update(suite)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/core/expectation_suite.py:154, in ExpectationSuite.add_expectation(self, expectation)\n    151 if not already_added:\n    152     # suite is a set-like collection, so don't add if it not unique\n    153     if should_save_expectation:\n--> 154         expectation = self._store.add_expectation(suite=self, expectation=expectation)\n    155     self.expectations.append(expectation)\n    157 expectation.register_save_callback(save_callback=self._save_expectation)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/expectations_store.py:155, in ExpectationsStore.add_expectation(self, suite, expectation)\n    152     expectation.id = str(uuid.uuid4())\n    153 fetched_suite.expectations.append(expectation)\n--> 155 self.update(key=suite_identifier, value=fetched_suite)\n    156 if self.cloud_mode:\n    157     # since update doesn't return the object we need (here), we refetch the suite\n    158     suite_identifier, fetched_suite = self._refresh_suite(suite)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/store.py:312, in Store.update(self, key, value, **kwargs)\n    308 def update(self, key: DataContextKey, value: Any, **kwargs) -> None:\n    309     \"\"\"\n    310     Essentially `set` but validates that a given key-value pair does already exist.\n    311     \"\"\"\n--> 312     return self._update(key=key, value=value, **kwargs)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/expectations_store.py:247, in ExpectationsStore._update(self, key, value, **kwargs)\n    245     value: ExpectationSuite = self._add_ids_on_update(value)\n    246 try:\n--> 247     result = super()._update(key=key, value=value, **kwargs)\n    249     if self.cloud_mode:\n    250         # cloud backend has added IDs, so we update our local state to be in sync\n    251         assert isinstance(result, GXCloudResourceRef)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/store.py:316, in Store._update(self, key, value, **kwargs)\n    314 def _update(self, key: DataContextKey, value: Any, **kwargs) -> None:\n    315     self._validate_key(key)\n--> 316     return self._store_backend.update(self.key_to_tuple(key), self.serialize(value), **kwargs)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/_store_backend.py:152, in StoreBackend.update(self, key, value, **kwargs)\n    148 def update(self, key, value, **kwargs):\n    149     \"\"\"\n    150     Essentially `set` but validates that a given key-value pair does already exist.\n    151     \"\"\"\n--> 152     return self._update(key=key, value=value, **kwargs)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/_store_backend.py:159, in StoreBackend._update(self, key, value, **kwargs)\n    155 if not self.has_key(key):\n    156     raise StoreBackendError(  # noqa: TRY003 # FIXME CoP\n    157         f\"Store does not have a value associated the following key: {key}.\"\n    158     )\n--> 159 return self.set(key=key, value=value, **kwargs)\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/_store_backend.py:132, in StoreBackend.set(self, key, value, **kwargs)\n    130 # Allow the implementing setter to return something (e.g. a path used for its key)\n    131 try:\n--> 132     return self._set(key, value, **kwargs)\n    133 except ValueError as e:\n    134     logger.debug(str(e))\n\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.12/site-packages/great_expectations/data_context/store/tuple_store_backend.py:325, in TupleFilesystemStoreBackend._set(self, key, value, **kwargs)\n    322 path, _filename = os.path.split(filepath)\n    324 os.makedirs(str(path), exist_ok=True)  # noqa: PTH103 # FIXME CoP\n--> 325 with open(filepath, \"wb\") as outfile:\n    326     if isinstance(value, str):\n    327         outfile.write(value.encode(\"utf-8\"))\n\nOSError: [Errno 22] Invalid argument\nWorkload failed, see run output for details\n`\n\n**Expected behavior**\nWe expect the expectation to be added without errors. \n\n**Environment (please complete the following information):**\n - Operating System: Linux\n - Great Expectations Version: 1.5.0\n - Data Source: Pandas\n - Cloud environment: Azure Databricks\n\n**Additional context**\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11242/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11242/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11210", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11210/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11210/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11210/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11210", "id": 3100668449, "node_id": "I_kwDOBiS_IM640HIh", "number": 11210, "title": "[ISSUE] unexpected_rows_query not using batch parameter", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-05-29T15:20:28Z", "updated_at": "2025-06-16T07:47:12Z", "closed_at": "2025-06-16T07:47:12Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI'm validating a rule, this rule uses the UnexpectedRowsExpectation class, and in the query there is this {batch} parameter.\n\n**The problem**: The Expectation is not querying the Spark Dataframe defined as a Data Asset but executing the query directly from the source table. I have set a spark dataframe where I'm filtering some rows that I don't want to validate, but the Expectation is validating ALL the table instead of the filtered DF.\n\n**To Reproduce**\nArguments:  '{\"unexpected_rows_query\": \"SELECT * FROM {batch} WHERE FLOOR(DATEDIFF(CURRENT_DATE(), DATE_OF_BIRTH) / 365.25) NOT BETWEEN 18 AND 90\"}'\n\nIs happening with other queries. All of them with the {batch} parameter.\n\n**Expected behavior**\nExecute the query against the DF and not the table.\n\n**Environment:**\n - Great Expectations Version: 1.3.6\n - Data Source: Spark Dataframe\n - Cloud environment: Azure Databricks", "closed_by": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11210/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11206", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11206/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11206/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11206/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11206", "id": 3097823222, "node_id": "I_kwDOBiS_IM64pQf2", "number": 11206, "title": "Boolean values passed to add_csv_asset are converted to string", "user": {"login": "lucasarruda-ciandt", "id": 179879811, "node_id": "U_kgDOCri_gw", "avatar_url": "https://avatars.githubusercontent.com/u/179879811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucasarruda-ciandt", "html_url": "https://github.com/lucasarruda-ciandt", "followers_url": "https://api.github.com/users/lucasarruda-ciandt/followers", "following_url": "https://api.github.com/users/lucasarruda-ciandt/following{/other_user}", "gists_url": "https://api.github.com/users/lucasarruda-ciandt/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucasarruda-ciandt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucasarruda-ciandt/subscriptions", "organizations_url": "https://api.github.com/users/lucasarruda-ciandt/orgs", "repos_url": "https://api.github.com/users/lucasarruda-ciandt/repos", "events_url": "https://api.github.com/users/lucasarruda-ciandt/events{/privacy}", "received_events_url": "https://api.github.com/users/lucasarruda-ciandt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-28T15:47:04Z", "updated_at": "2025-08-20T22:51:13Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen passing a boolean value for a flag such as index_col=False in add_csv_asset() (which is the option to disable column indexing in pandas, for instance), the pydantic validator (according to my debugging) seems to erroneously convert it to string, causing pandas to think it must use named column \"False\" for indexing the dataframe, thus it's impossible to disable such behavior. \n\nThis probably is affecting other bool flag as well and perhaps other engines too. \n\n**Expected behavior**\nBoolean values should be respected and not converted to string.\n\n**Environment (please complete the following information):**\n - Operating System: Mac\n - Great Expectations Version: 1.4.5\n - Data Source: Pandas\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11206/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11206/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11199", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11199/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11199/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11199/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11199", "id": 3091950260, "node_id": "I_kwDOBiS_IM64S2q0", "number": 11199, "title": "Column does not exist in BatchData when column name has a dot (.) - Spark only", "user": {"login": "larruda", "id": 1940532, "node_id": "MDQ6VXNlcjE5NDA1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1940532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larruda", "html_url": "https://github.com/larruda", "followers_url": "https://api.github.com/users/larruda/followers", "following_url": "https://api.github.com/users/larruda/following{/other_user}", "gists_url": "https://api.github.com/users/larruda/gists{/gist_id}", "starred_url": "https://api.github.com/users/larruda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larruda/subscriptions", "organizations_url": "https://api.github.com/users/larruda/orgs", "repos_url": "https://api.github.com/users/larruda/repos", "events_url": "https://api.github.com/users/larruda/events{/privacy}", "received_events_url": "https://api.github.com/users/larruda/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-05-26T19:40:46Z", "updated_at": "2025-05-26T20:06:42Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI'm using a SparkFileSystemDatasource with a CSVAsset (header=True). The csv file has a header line and some column names have dots (e.g. Data.Entrega). GX is not able to identify those columns and throw \"The column \\\"Data.Entrega\\\" in BatchData does not exist\"\n\n**To Reproduce**\nIt's an ephemeral context, also I'm not allowed to share any code due to NDA with customer. It's simple as I described, reading a csv asset from a spark datasource with header=true and dots in the col names, simple as that anyone should be able to easily reproduce. \n\n**Expected behavior**\nThe column should be found. \n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.4.5\n - Data Source: Spark CSV file\n - Cloud environment: N/A\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11199/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11199/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11189", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11189/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11189/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11189/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11189", "id": 3083175356, "node_id": "I_kwDOBiS_IM63xYW8", "number": 11189, "title": "Missing doc to create custom expectation (not extending)", "user": {"login": "larruda", "id": 1940532, "node_id": "MDQ6VXNlcjE5NDA1MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1940532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larruda", "html_url": "https://github.com/larruda", "followers_url": "https://api.github.com/users/larruda/followers", "following_url": "https://api.github.com/users/larruda/following{/other_user}", "gists_url": "https://api.github.com/users/larruda/gists{/gist_id}", "starred_url": "https://api.github.com/users/larruda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larruda/subscriptions", "organizations_url": "https://api.github.com/users/larruda/orgs", "repos_url": "https://api.github.com/users/larruda/repos", "events_url": "https://api.github.com/users/larruda/events{/privacy}", "received_events_url": "https://api.github.com/users/larruda/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-05-22T12:16:12Z", "updated_at": "2025-05-28T20:48:17Z", "closed_at": "2025-05-28T20:48:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "This [ignored] discussion already provides the context: https://github.com/great-expectations/great_expectations/discussions/10303\n\nAny maintainer would please at least provide some guidance here?", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11189/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11189/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11181", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11181/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11181/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11181/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11181", "id": 3074766051, "node_id": "I_kwDOBiS_IM63RTTj", "number": 11181, "title": "Problems on retrieving batch when using redshift_datasource", "user": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-05-19T19:06:41Z", "updated_at": "2025-10-14T15:20:02Z", "closed_at": "2025-10-14T15:20:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I used to use this data souce to connect to a redshift server and it works flawless (Used the redshift with SQLAlchemy 1.4):\n\n```\n    CONNECTION_STRING = (\n        \"postgresql+psycopg2://${REDSHIFT_USERNAME}:${REDSHIFT_PASSWORD}\"\n        f\"@{REDSHIFT_HOST}:5439/master?sslmode=allow\"\n    )\n    datasource_name = \"redshift_datasource\"\n    datasource = context.data_sources.add_or_update_postgres(\n        name=datasource_name, connection_string=CONNECTION_STRING\n    )\n```\n\nThen, I've updated to use Redshift GX fork with SQLAlchemy 2.0 with the following data source:\n\n```\n    redshift_connection_details = RedshiftConnectionDetails(\n        user=\"${REDSHIFT_USERNAME}\",\n        password=\"${REDSHIFT_PASSWORD}\",\n        host=REDSHIFT_HOST,\n        port=5439,\n        database=\"master\",\n        sslmode=RedshiftSSLModes.ALLOW,\n    )\n\n    datasource_name = \"redshift_datasource\"\n    datasource = context.data_sources.add_or_update_redshift(\n        name=datasource_name,\n        connection_string=redshift_connection_details,\n    )\n```\n\nIf I use it and test with a batch:\n```\nbatch_definition = table_asset.get_batch_definition(batch_name)\nbatch = batch_definition.get_batch()\nprint(\"batch.head():\", batch.head())\nprint(\"batch.columns():\", batch.columns())\n```\n\nIt will return the dataframe with batch.head(). However, the batch.columns will return []\nThis is breaking any expectation I try to test. \n\nVersions:\ngreat-expectations (1.4.4)\ngx-sqlalchemy-redshift (0.8.20)", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11181/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11181/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11177", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11177/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11177/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11177/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11177", "id": 3068352389, "node_id": "I_kwDOBiS_IM6241eF", "number": 11177, "title": "REDSHIFT_TYPES missing geometry types", "user": {"login": "VolkovGeoPhy", "id": 117853378, "node_id": "U_kgDOBwZMwg", "avatar_url": "https://avatars.githubusercontent.com/u/117853378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VolkovGeoPhy", "html_url": "https://github.com/VolkovGeoPhy", "followers_url": "https://api.github.com/users/VolkovGeoPhy/followers", "following_url": "https://api.github.com/users/VolkovGeoPhy/following{/other_user}", "gists_url": "https://api.github.com/users/VolkovGeoPhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/VolkovGeoPhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VolkovGeoPhy/subscriptions", "organizations_url": "https://api.github.com/users/VolkovGeoPhy/orgs", "repos_url": "https://api.github.com/users/VolkovGeoPhy/repos", "events_url": "https://api.github.com/users/VolkovGeoPhy/events{/privacy}", "received_events_url": "https://api.github.com/users/VolkovGeoPhy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-05-16T08:39:44Z", "updated_at": "2025-05-28T17:56:37Z", "closed_at": "2025-05-28T17:56:36Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWe don;t have geometry and geography types for Redshift\nclass REDSHIFT_TYPES:\n    \"\"\"Namespace for Redshift dialect types.\"\"\"\n\n    CHAR = CHAR\n    VARCHAR = VARCHAR\n    INTEGER = INTEGER\n    SMALLINT = SMALLINT\n    BIGINT = BIGINT\n    TIMESTAMP = TIMESTAMP\n    DATE = DATE\n    DOUBLE_PRECISION = DOUBLE_PRECISION\n    BOOLEAN = BOOLEAN\n    DECIMAL = DECIMAL\n\n\n**To Reproduce**\nCheck REDSHIFT_TYPES variable\n\n**Expected behavior**\nGeometry columns are supported\n\n**Environment (please complete the following information):**\n - Operating System: [e.g. Linux, MacOS, Windows]\n - Great Expectations Version: 1.4.4\n - Data Source: Redshift\n\n**Additional context**\n[Slack message](https://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1747139289688209)\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11177/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11177/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11157", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11157/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11157/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11157/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11157", "id": 3052137431, "node_id": "I_kwDOBiS_IM616-vX", "number": 11157, "title": "Snowflake datasource: configure host for privatelink connection", "user": {"login": "andreasdmb2b", "id": 138754281, "node_id": "U_kgDOCEU46Q", "avatar_url": "https://avatars.githubusercontent.com/u/138754281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreasdmb2b", "html_url": "https://github.com/andreasdmb2b", "followers_url": "https://api.github.com/users/andreasdmb2b/followers", "following_url": "https://api.github.com/users/andreasdmb2b/following{/other_user}", "gists_url": "https://api.github.com/users/andreasdmb2b/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreasdmb2b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreasdmb2b/subscriptions", "organizations_url": "https://api.github.com/users/andreasdmb2b/orgs", "repos_url": "https://api.github.com/users/andreasdmb2b/repos", "events_url": "https://api.github.com/users/andreasdmb2b/events{/privacy}", "received_events_url": "https://api.github.com/users/andreasdmb2b/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-05-09T13:13:27Z", "updated_at": "2025-05-13T14:26:15Z", "closed_at": "2025-05-13T14:26:14Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWe are currently hardening our Snowflake security and enabled the privatelink connection. This is essentially a VPN between Snowflake and our servers. Therefore, we have to change the hostname of snowflake to `https://<orgname>-<account_name>.privatelink.snowflakecomputing.com`.\n\nIt seems that this is not possible. \n\nSee: https://docs.snowflake.com/user-guide/organizations-connect#private-connectivity-urls\n\n**To Reproduce**\nI don't know how we can set the hostname for the Snowflake datasource.\n\n**Expected behavior**\nTo be able to set the hostname and connect to snowflake via a privatelink.\n\n**Environment (please complete the following information):**\n - Operating System: Linux\n - Great Expectations Version: 1.3.10\n - Data Source: Snowflake\n - Cloud environment: GCP\n\n**Additional context**\nnone", "closed_by": {"login": "andreasdmb2b", "id": 138754281, "node_id": "U_kgDOCEU46Q", "avatar_url": "https://avatars.githubusercontent.com/u/138754281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreasdmb2b", "html_url": "https://github.com/andreasdmb2b", "followers_url": "https://api.github.com/users/andreasdmb2b/followers", "following_url": "https://api.github.com/users/andreasdmb2b/following{/other_user}", "gists_url": "https://api.github.com/users/andreasdmb2b/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreasdmb2b/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreasdmb2b/subscriptions", "organizations_url": "https://api.github.com/users/andreasdmb2b/orgs", "repos_url": "https://api.github.com/users/andreasdmb2b/repos", "events_url": "https://api.github.com/users/andreasdmb2b/events{/privacy}", "received_events_url": "https://api.github.com/users/andreasdmb2b/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11157/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11157/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11150", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11150/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11150/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11150/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11150", "id": 3037101087, "node_id": "I_kwDOBiS_IM61Bnwf", "number": 11150, "title": "Copied code differs from visible code snippet in documentation", "user": {"login": "zono-zono", "id": 131334459, "node_id": "U_kgDOB9QBOw", "avatar_url": "https://avatars.githubusercontent.com/u/131334459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zono-zono", "html_url": "https://github.com/zono-zono", "followers_url": "https://api.github.com/users/zono-zono/followers", "following_url": "https://api.github.com/users/zono-zono/following{/other_user}", "gists_url": "https://api.github.com/users/zono-zono/gists{/gist_id}", "starred_url": "https://api.github.com/users/zono-zono/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zono-zono/subscriptions", "organizations_url": "https://api.github.com/users/zono-zono/orgs", "repos_url": "https://api.github.com/users/zono-zono/repos", "events_url": "https://api.github.com/users/zono-zono/events{/privacy}", "received_events_url": "https://api.github.com/users/zono-zono/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2025-05-03T02:34:15Z", "updated_at": "2025-12-19T01:18:17Z", "closed_at": "2025-12-19T01:18:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Description\n\nOn the Great Expectations Docs site, the code shown in the documentation appears correct, but when I click the \"copy\" icon in the code block, the code copied to the clipboard is different from what's displayed.\n\n### URL\nhttps://docs.greatexpectations.io/docs/core/define_expectations/create_an_expectation?procedure=sample_code\n\n### Steps to Reproduce\n\n1. Visit the above documentation page\n2. Go to the \"Sample code\" tab\n3. Click on the \"copy\" button on the code snippet\n4. Paste the code into an editor\n5. Notice that the copied code does not match the visible code\n\n### Expected behavior\n\nThe copied code should exactly match the code shown in the documentation.\n\n### Screenshot\n\n![Image](https://github.com/user-attachments/assets/b0e5778f-f24e-40e0-9b73-b8f676a71adf)\n\n### Environment\n\n- Browser: Chrome \n- OS: macOS \n\n### Notes\n\nIf this is related to the way the documentation is rendered or how code snippets are embedded, I\u2019m happy to assist further or provide more detail.\n\nThanks!", "closed_by": {"login": "billdirks", "id": 12725591, "node_id": "MDQ6VXNlcjEyNzI1NTkx", "avatar_url": "https://avatars.githubusercontent.com/u/12725591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billdirks", "html_url": "https://github.com/billdirks", "followers_url": "https://api.github.com/users/billdirks/followers", "following_url": "https://api.github.com/users/billdirks/following{/other_user}", "gists_url": "https://api.github.com/users/billdirks/gists{/gist_id}", "starred_url": "https://api.github.com/users/billdirks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billdirks/subscriptions", "organizations_url": "https://api.github.com/users/billdirks/orgs", "repos_url": "https://api.github.com/users/billdirks/repos", "events_url": "https://api.github.com/users/billdirks/events{/privacy}", "received_events_url": "https://api.github.com/users/billdirks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11148", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11148/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11148/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11148/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11148", "id": 3036541070, "node_id": "I_kwDOBiS_IM60_fCO", "number": 11148, "title": "Add retries when connecting to backend database", "user": {"login": "dgajendr", "id": 27180384, "node_id": "MDQ6VXNlcjI3MTgwMzg0", "avatar_url": "https://avatars.githubusercontent.com/u/27180384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgajendr", "html_url": "https://github.com/dgajendr", "followers_url": "https://api.github.com/users/dgajendr/followers", "following_url": "https://api.github.com/users/dgajendr/following{/other_user}", "gists_url": "https://api.github.com/users/dgajendr/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgajendr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgajendr/subscriptions", "organizations_url": "https://api.github.com/users/dgajendr/orgs", "repos_url": "https://api.github.com/users/dgajendr/repos", "events_url": "https://api.github.com/users/dgajendr/events{/privacy}", "received_events_url": "https://api.github.com/users/dgajendr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-05-02T17:54:01Z", "updated_at": "2025-05-12T23:00:16Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nCurrently, our great expectations is set up with AWS RDS on backend. Occasionally, the connection gets lost failing the entire job.\n\n**Describe the solution you'd like**\nPlease add retry to the main great expectations class, so the number of retries to connect to backend on failure can be specified.\n\n**Describe alternatives you've considered**\nRetrying the whole job, but it resulted in other side effects\n\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11148/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11148/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11141", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11141/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11141/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11141/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11141", "id": 3032097576, "node_id": "I_kwDOBiS_IM60uiMo", "number": 11141, "title": "SQLAlchemy dialect uses deprecated dbapi() method", "user": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-04-30T18:12:05Z", "updated_at": "2026-01-09T14:50:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Minor issue, but it appears that this library is using a deprecated method from SQLAlchemy:\n\n> great_expectations/datasource/fluent/sql_datasource.py:1238 SADeprecationWarning: The dbapi() classmethod on dialect classes has been renamed to import_dbapi().  Implement an import_dbapi() classmethod directly on class <class 'sqlalchemy_redshift.dialect.RedshiftDialect_psycopg2'> to remove this warning; the old .dbapi() classmethod may be maintained for backwards compatibility.\n>   return sa.create_engine(connection_string, **kwargs)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11141/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11141/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11139", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11139/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11139/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11139/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11139", "id": 3030234665, "node_id": "I_kwDOBiS_IM60nbYp", "number": 11139, "title": "Config Substitutor very slow when using secret store", "user": {"login": "ThiloSchneider-fraport", "id": 209740776, "node_id": "U_kgDODIBj6A", "avatar_url": "https://avatars.githubusercontent.com/u/209740776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThiloSchneider-fraport", "html_url": "https://github.com/ThiloSchneider-fraport", "followers_url": "https://api.github.com/users/ThiloSchneider-fraport/followers", "following_url": "https://api.github.com/users/ThiloSchneider-fraport/following{/other_user}", "gists_url": "https://api.github.com/users/ThiloSchneider-fraport/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThiloSchneider-fraport/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThiloSchneider-fraport/subscriptions", "organizations_url": "https://api.github.com/users/ThiloSchneider-fraport/orgs", "repos_url": "https://api.github.com/users/ThiloSchneider-fraport/repos", "events_url": "https://api.github.com/users/ThiloSchneider-fraport/events{/privacy}", "received_events_url": "https://api.github.com/users/ThiloSchneider-fraport/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-30T06:08:40Z", "updated_at": "2025-05-20T14:17:29Z", "closed_at": "2025-05-20T14:17:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen using a secret store during config substitution, the initialization of the config is significantly slower than when defining the secrets directly in the config. \n\nFurther analysis shows that _ConfigurationSubstitutor tries to implement a caching mechanism for _substitute_value_from_secret_store, but fails to use the cache correctly. Therefore, no caching is done and calls to the secret store are done much more frequent than necessary. \n\n**To Reproduce**\nReproducing requires a secret store and then multiple uses of the same secret throughout the config. \n\n**Expected behavior**\nFaster initialization\n\n**Environment (please complete the following information):**\nirrelevant\n\n", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11139/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11139/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11137", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11137/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11137/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11137/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11137", "id": 3026682131, "node_id": "I_kwDOBiS_IM60Z4ET", "number": 11137, "title": "'BatchRequest' object has no attribute 'runtime_parameters' when using BatchRequest in context.add_or_update_checkpoint", "user": {"login": "kpmg-rvangenechten", "id": 198041471, "node_id": "U_kgDOC83ffw", "avatar_url": "https://avatars.githubusercontent.com/u/198041471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kpmg-rvangenechten", "html_url": "https://github.com/kpmg-rvangenechten", "followers_url": "https://api.github.com/users/kpmg-rvangenechten/followers", "following_url": "https://api.github.com/users/kpmg-rvangenechten/following{/other_user}", "gists_url": "https://api.github.com/users/kpmg-rvangenechten/gists{/gist_id}", "starred_url": "https://api.github.com/users/kpmg-rvangenechten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kpmg-rvangenechten/subscriptions", "organizations_url": "https://api.github.com/users/kpmg-rvangenechten/orgs", "repos_url": "https://api.github.com/users/kpmg-rvangenechten/repos", "events_url": "https://api.github.com/users/kpmg-rvangenechten/events{/privacy}", "received_events_url": "https://api.github.com/users/kpmg-rvangenechten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-04-29T01:16:49Z", "updated_at": "2025-05-20T16:59:45Z", "closed_at": "2025-05-20T16:59:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "\ndatasource = context.sources.add_or_update_sqlite(\n    name=\"healthcare_data\",  \n    connection_string=\"sqlite:///C://Users//rvangenechten//Desktop//Data_quality//medicine.db\",\n)\n\nquery = \"SELECT * FROM healthcare_data\"  \nasset = datasource.add_query_asset(\n    name=\"healthcare_query_asset\",  \n    query=query  \n)\n\nbatch_request = asset.build_batch_request()  \n\n\ncheckpoint = context.add_or_update_checkpoint(\n    name=\"healthcare_checkpoint\",\n    expectation_suite_name=\"healthcare_suite\",\n    validations=[\n        {\n            \"batch_request\": batch_request,\n            \"expectation_suite_name\": \"healthcare_suite\",\n        }\n    ],\n    action_list=[\n        {\n            \"name\": \"store_validation_result\",\n            \"action\": {\"class_name\": \"StoreValidationResultAction\"},\n        },\n        {\n            \"name\": \"store_evaluation_params\",\n            \"action\": {\"class_name\": \"StoreEvaluationParametersAction\"},\n        },\n        {\n            \"name\": \"update_data_docs\",\n            \"action\": {\n                \"class_name\": \"UpdateDataDocsAction\",\n                \"site_names\": [\"local_site\"]\n            },\n        },\n        {\n            \"name\": \"datahub_action\",\n            \"action\": {\n                \"module_name\": \"datahub.integrations.great_expectations.action\",\n                \"class_name\": \"DataHubValidationAction\",\n                \"server_url\": <URL>,\n                \"token\": \"<TOKEN>\",\n                \"env\": \"DEV\",\n                \"timeout_sec\": 120,\n                \"parse_table_names_from_sql\": True,\n                \"graceful_exceptions\": True,\n                \"platform_instance_map\": { \"healthcare_data\": \"healthcare_data\" },\n\n            }\n        }\n    ]\n)\n\n\nWITH:\n# Great Expectations version compatible with DataHub GX plugin\ngreat_expectations==0.18.21\n\n# DataHub GX plugin\nacryl-datahub-gx-plugin==1.0.0.2\n\n# DataHub core (optional based on your setup)\nacryl-datahub==1.0.0.2\n# DataHub GX plugin dependencies (optional based on your setup)\nacryl-datahub[great-expectations]\n\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11137/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11137/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11133", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11133/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11133/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11133/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11133", "id": 3020332940, "node_id": "I_kwDOBiS_IM60Bp-M", "number": 11133, "title": "pkg_resources is deprecated and removed in Python 3.12", "user": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-04-25T15:08:19Z", "updated_at": "2025-04-29T16:00:42Z", "closed_at": "2025-04-28T16:57:10Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "GX is using pkg_resources module which was deprecated:\n\n> Use of pkg_resources is deprecated in favor of [importlib.resources](https://docs.python.org/3.11/library/importlib.resources.html#module-importlib.resources), [importlib.metadata](https://docs.python.org/3.11/library/importlib.metadata.html#module-importlib.metadata) and their backports ([importlib_resources](https://pypi.org/project/importlib_resources), [importlib_metadata](https://pypi.org/project/importlib_metadata)). Some useful APIs are also provided by [packaging](https://pypi.org/project/packaging) (e.g. requirements and version parsing). Users should refrain from new usage of pkg_resources and should work to port to importlib-based solutions.\n\nhttps://setuptools.pypa.io/en/latest/pkg_resources.html\n\nAnd it was removed in python 3.12:\n>[gh-95299](https://github.com/python/cpython/issues/95299): Do not pre-install setuptools in virtual environments created with [venv](https://docs.python.org/3/library/venv.html#module-venv). This means that distutils, setuptools, pkg_resources, and easy_install will no longer available by default; to access these run pip install setuptools in the [activated](https://docs.python.org/3/library/venv.html#venv-explanation) virtual environment.\n\nhttps://docs.python.org/3/whatsnew/3.12.html\n\nI've seen an issue was created related to this https://github.com/great-expectations/great_expectations/issues/9292, associated with a PR that was closed. Maybe using this PR as draft can simplify this maintenance.", "closed_by": {"login": "dctalbot", "id": 17692467, "node_id": "MDQ6VXNlcjE3NjkyNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/17692467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dctalbot", "html_url": "https://github.com/dctalbot", "followers_url": "https://api.github.com/users/dctalbot/followers", "following_url": "https://api.github.com/users/dctalbot/following{/other_user}", "gists_url": "https://api.github.com/users/dctalbot/gists{/gist_id}", "starred_url": "https://api.github.com/users/dctalbot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dctalbot/subscriptions", "organizations_url": "https://api.github.com/users/dctalbot/orgs", "repos_url": "https://api.github.com/users/dctalbot/repos", "events_url": "https://api.github.com/users/dctalbot/events{/privacy}", "received_events_url": "https://api.github.com/users/dctalbot/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11133/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11133/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11116", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11116/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11116/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11116/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11116", "id": 3011461299, "node_id": "I_kwDOBiS_IM6zf0Cz", "number": 11116, "title": "SlackNotificationAction result format does not get changed.", "user": {"login": "gavetisyanca", "id": 44903895, "node_id": "MDQ6VXNlcjQ0OTAzODk1", "avatar_url": "https://avatars.githubusercontent.com/u/44903895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gavetisyanca", "html_url": "https://github.com/gavetisyanca", "followers_url": "https://api.github.com/users/gavetisyanca/followers", "following_url": "https://api.github.com/users/gavetisyanca/following{/other_user}", "gists_url": "https://api.github.com/users/gavetisyanca/gists{/gist_id}", "starred_url": "https://api.github.com/users/gavetisyanca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gavetisyanca/subscriptions", "organizations_url": "https://api.github.com/users/gavetisyanca/orgs", "repos_url": "https://api.github.com/users/gavetisyanca/repos", "events_url": "https://api.github.com/users/gavetisyanca/events{/privacy}", "received_events_url": "https://api.github.com/users/gavetisyanca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-22T15:41:42Z", "updated_at": "2025-04-22T15:42:30Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "During the SlackNotificationAction and Checkpoint creation, I'm not getting any result_format changes/differences. Seems like it defaults to minimalistic result format output where I only have the following piece of information:\n\n> Checkpoint Name \n> Runtime: <DATE>\n> Asset name: <NAME>\n> Expectation Suite <Name>\n> Summary : 3 out of 12 expectations were met\n\n\n**Expected behavior**\nI expect to have a complete verbose output of the expectations. At least the ones that fail \n\n**Environment (please complete the following information):**\nLinux\nGE version 1.3.12\nData Source: pandas df ( context.data_sources.add_pandas(<PANDAS_DATA_SOURCE_NAME>)\nData Asset: data_sources.add_dataframe_asset(<DATA_ASSET_NAME)\n```\nSlackNotificationAction(name, slack_token, slack_channel, nofify_on, show_failed_expectations)\nCheckpoint(name, validation_defitions, actions, result_format={\"result_format\": \"COMPLETE\"})\nChechpoint.run(batch_parameters={\"dataframe\": df})\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11116/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11116/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11113", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11113/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11113/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11113/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11113", "id": 3008856330, "node_id": "I_kwDOBiS_IM6zV4EK", "number": 11113, "title": "Old Custom SQL Expectation Types in GX >1.0 don't work", "user": {"login": "Zaquen", "id": 55550300, "node_id": "MDQ6VXNlcjU1NTUwMzAw", "avatar_url": "https://avatars.githubusercontent.com/u/55550300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zaquen", "html_url": "https://github.com/Zaquen", "followers_url": "https://api.github.com/users/Zaquen/followers", "following_url": "https://api.github.com/users/Zaquen/following{/other_user}", "gists_url": "https://api.github.com/users/Zaquen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zaquen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zaquen/subscriptions", "organizations_url": "https://api.github.com/users/Zaquen/orgs", "repos_url": "https://api.github.com/users/Zaquen/repos", "events_url": "https://api.github.com/users/Zaquen/events{/privacy}", "received_events_url": "https://api.github.com/users/Zaquen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-04-21T16:56:56Z", "updated_at": "2025-04-22T18:01:23Z", "closed_at": "2025-04-22T18:01:22Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Currently it seems the only documented Custom SQL Query available in Great Expectations is the UnexpectedRowsExpectation. Unfortunately, this doesn't fit the use case that I am dealing with.\n\nAre the old ones listed [here](https://docs.greatexpectations.io/docs/0.18/oss/guides/expectations/creating_custom_expectations/how_to_create_custom_query_expectations/) no longer supported? Is there a feature planned to reinstate these items?\n\nThe use case is to return percentages of items that are selected from the whole table and doesn't seem possible with UnexpectedRowsExpectation.\n\nIf there is a different way to leverage this information, possibly with metrics and custom SQL Queries, let me know. \n\nOtherwise, to solve this problem will I have to create custom metrics and expectations? ", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11090", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11090/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11090/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11090/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11090", "id": 2988382956, "node_id": "I_kwDOBiS_IM6yHxrs", "number": 11090, "title": "Command <pip install great_expectations[spark]> installs library that cannot be imported  (1.3.14)", "user": {"login": "vasilijyaromenka", "id": 159802895, "node_id": "U_kgDOCYZmDw", "avatar_url": "https://avatars.githubusercontent.com/u/159802895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasilijyaromenka", "html_url": "https://github.com/vasilijyaromenka", "followers_url": "https://api.github.com/users/vasilijyaromenka/followers", "following_url": "https://api.github.com/users/vasilijyaromenka/following{/other_user}", "gists_url": "https://api.github.com/users/vasilijyaromenka/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasilijyaromenka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasilijyaromenka/subscriptions", "organizations_url": "https://api.github.com/users/vasilijyaromenka/orgs", "repos_url": "https://api.github.com/users/vasilijyaromenka/repos", "events_url": "https://api.github.com/users/vasilijyaromenka/events{/privacy}", "received_events_url": "https://api.github.com/users/vasilijyaromenka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-04-11T11:25:17Z", "updated_at": "2025-04-23T09:49:59Z", "closed_at": "2025-04-22T18:28:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nAccording to the docs, one of the ways to install the Great Expectation library and all the dependencies is running the command `%pip install great_expectations[spark]`. \n\nFor the version `great_expectations 1.3.14`, it successfully installs the following libraries:\n`Successfully installed altair-4.2.2 annotated-types-0.7.0 backoff-2.2.1 great_expectations-1.3.14 jinja2-3.1.6 marshmallow-3.26.1 monotonic-1.6 numpy-1.24.4 posthog-3.24.0 py4j-0.10.9.7 pydantic-2.11.3 pydantic-core-2.33.1 pyspark-3.5.5 ruamel.yaml-0.18.10 ruamel.yaml.clib-0.2.12 toolz-1.0.0 tqdm-4.67.1 typing-extensions-4.13.2 typing-inspection-0.4.0 tzlocal-5.3.1`\n\nHowever, when importing `great_expectations`, it returns the Import Error:\n`ImportError: cannot import name 'deprecated' from 'typing_extensions' `\n\n\n**To Reproduce** \n`%pip install great_expectations[spark]`\n`import great_expectations as gx`\n\n**Expected behavior**\nNo output, successful import\n\n**Actual behavior**\n`ImportError: cannot import name 'deprecated' from 'typing_extensions' (/databricks/python/lib/python3.10/site-packages/typing_extensions.py)`\n\n**Environment (please complete the following information):**\n - Great Expectations Version: 1.3.14\n - Data Source: Spark\n - Cloud environment: Azure Databricks\n\n**Additional context**\nThe issue can be worked around with installing all the dependencies from GE 1.3.0 with pinned versions:\n`%pip install altair==4.2.2 annotated-types==0.7.0 backoff==2.2.1 great_expectations==1.3.14 marshmallow==3.25.1 monotonic==1.6 numpy==1.24.4 posthog==3.8.3 py4j==0.10.9.7 pydantic==2.10.5 pydantic-core==2.27.2 pyspark==3.5.4 ruamel.yaml==0.18.10 ruamel.yaml.clib==0.2.12 toolz==1.0.0 tqdm==4.67.1 typing-extensions==4.12.2 tzlocal==5.2`\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11090/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11090/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11086", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11086/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11086/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11086/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11086", "id": 2985834526, "node_id": "I_kwDOBiS_IM6x-Dge", "number": 11086, "title": "Support for Azure CLI authentication for GX", "user": {"login": "kunaljubce", "id": 34453918, "node_id": "MDQ6VXNlcjM0NDUzOTE4", "avatar_url": "https://avatars.githubusercontent.com/u/34453918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kunaljubce", "html_url": "https://github.com/kunaljubce", "followers_url": "https://api.github.com/users/kunaljubce/followers", "following_url": "https://api.github.com/users/kunaljubce/following{/other_user}", "gists_url": "https://api.github.com/users/kunaljubce/gists{/gist_id}", "starred_url": "https://api.github.com/users/kunaljubce/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kunaljubce/subscriptions", "organizations_url": "https://api.github.com/users/kunaljubce/orgs", "repos_url": "https://api.github.com/users/kunaljubce/repos", "events_url": "https://api.github.com/users/kunaljubce/events{/privacy}", "received_events_url": "https://api.github.com/users/kunaljubce/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-10T14:09:30Z", "updated_at": "2025-04-16T15:29:09Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nThere's no feature ootb to connect to Azure data sources via Azure CLI authentication. With `great_expectations==0.15.x`, we were able to shoe-horn in the workaround solution by adding `azure_options[\"credential\"] = DefaultAzureCredential()` to the `PandasExecutionEngine` and overriding the default behaviour of the engine via `great_expectations.yml`:\n\n```shell\n    execution_engine:\n      module_name: execution_engine.pandas_execution_engine_with_creds\n      class_name: PandasExecutionEngine\n```\nBut this custom parameterisation in `great_expectations.yml` doesn't seem to be allowed anymore due to pydantic type checks.\n\n![Image](https://github.com/user-attachments/assets/b2c25ad3-8320-43fc-a62c-8795742cdf38)\n\n**Describe the solution you'd like**\nBest case would be to check if `credentials` field is not mentioned in the `azure_options` attribute, then load `DefaultAzureCredential()`, which acquires an auth token as long as the user is logged in to Azure via the Az CLI. Due to this being RBAC based, this is also more secure than any kind of tokens or credentials being specified in the files and loaded. \n\n**Describe alternatives you've considered**\nThe immediate request would be to allow `great_expectations.yml` to be flexible with arguments so that developers can tweak and extend the capabilities of GX. With `v1.x`,  it's too rigid.\n\nIf this is allowed, we can override the `PandasExecutionEngine` class with our own definition to authenticate azure and make use of it. \n\n**Additional context**\nAdding a sample log from the airflow task which uses Az CLI auth for GX:\n```shell\n[2025-04-09T07:13:45.859+0000] {pandas_execution_engine_with_creds.py:25} INFO - Creating Azure BlobServiceClient with DefaultAzureCredential\n[2025-04-09T07:13:45.859+0000] {pandas_execution_engine_with_creds.py:30} WARNING - Missing credentials, adding DefaultAzureCredential()\n[2025-04-09T07:13:45.859+0000] {environment.py:115} INFO - No environment configuration found.\n[2025-04-09T07:13:45.862+0000] {managed_identity.py:117} INFO - ManagedIdentityCredential will use IMDS\n[2025-04-09T07:13:45.865+0000] {_universal.py:509} INFO - Request URL: 'http://x.x.x.x/metadata/identity/oauth2/token?api-version=REDACTED&resource=REDACTED'\nRequest method: 'GET'\nRequest headers:\n    'User-Agent': 'azsdk-python-identity/1.19.0 Python/3.9.21 (Linux-6.12.5-linuxkit-aarch64-with-glibc2.36)'\nNo body was attached to the request\n[2025-04-09T07:13:47.117+0000] {chained.py:190} INFO - DefaultAzureCredential acquired a token from AzureCliCredential\n```\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11086/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11076", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11076/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11076/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11076/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11076", "id": 2981734645, "node_id": "I_kwDOBiS_IM6xuaj1", "number": 11076, "title": "ExpectColumnValuesToBeOfType dq rule is not returning expected result format", "user": {"login": "divdeconnct", "id": 206818948, "node_id": "U_kgDODFPOhA", "avatar_url": "https://avatars.githubusercontent.com/u/206818948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/divdeconnct", "html_url": "https://github.com/divdeconnct", "followers_url": "https://api.github.com/users/divdeconnct/followers", "following_url": "https://api.github.com/users/divdeconnct/following{/other_user}", "gists_url": "https://api.github.com/users/divdeconnct/gists{/gist_id}", "starred_url": "https://api.github.com/users/divdeconnct/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/divdeconnct/subscriptions", "organizations_url": "https://api.github.com/users/divdeconnct/orgs", "repos_url": "https://api.github.com/users/divdeconnct/repos", "events_url": "https://api.github.com/users/divdeconnct/events{/privacy}", "received_events_url": "https://api.github.com/users/divdeconnct/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-04-09T06:48:39Z", "updated_at": "2025-04-22T18:34:59Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/core/expect_column_values_to_be_of_type.py\nExpectColumnValuesToBeOfType - is not returning expected result format described in the https://greatexpectations.io/expectations/expect_column_values_to_be_of_type/\n\nOn the success/failure case Result format should contain - element_count,unexpected_count etc fields,\nRather it is having only ObservedType in the output.\n\n  \"exception_info\": {\n    \"raised_exception\": false,\n    \"exception_traceback\": null,\n    \"exception_message\": null\n  },\n  \"result\": {\n    \"element_count\": 3,\n    \"unexpected_count\": 0,\n    \"unexpected_percent\": 0.0,\n    \"partial_unexpected_list\": [],\n    \"missing_count\": 0,\n    \"missing_percent\": 0.0,\n    \"unexpected_percent_total\": 0.0,\n    \"unexpected_percent_nonmissing\": 0.0\n  },\n  \"meta\": {},\n  \"success\": true\n}\n - Operating System:  Windows\n - Great Expectations Version:  0.18\n - Data Source: Databricks/Spark\n - Cloud environment: Databricks\n\nThe sample code, I have got from data quality rule - expect_column_values_to_be_null.py\n from https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/core/expect_column_values_to_be_null.py\n\nResult_format is not defined as similar to above data quality rule for expect_column_values_to_be_of_type\n\nfrom great_expectations.expectations.expectation_configuration import (\n    parse_result_format,\n)\n        return _format_map_output(\n            result_format=parse_result_format(result_format),\n            success=success,\n            element_count=metrics.get(\"table.row_count\"),\n            nonnull_count=nonnull_count,\n            unexpected_count=metrics.get(\n                f\"{self.map_metric}.{SummarizationMetricNameSuffixes.UNEXPECTED_COUNT.value}\"\n            ),\n            unexpected_list=metrics.get(\n                f\"{self.map_metric}.{SummarizationMetricNameSuffixes.UNEXPECTED_VALUES.value}\"\n            ),\n            unexpected_index_list=metrics.get(\n                f\"{self.map_metric}.{SummarizationMetricNameSuffixes.UNEXPECTED_INDEX_LIST.value}\"\n            ),\n            unexpected_index_query=metrics.get(\n                f\"{self.map_metric}.{SummarizationMetricNameSuffixes.UNEXPECTED_INDEX_QUERY.value}\"\n            )", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11076/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11076/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11067", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11067/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11067/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11067/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11067", "id": 2976309397, "node_id": "I_kwDOBiS_IM6xZuCV", "number": 11067, "title": "Azure Data Explorer Support", "user": {"login": "hemalrajput", "id": 87568781, "node_id": "MDQ6VXNlcjg3NTY4Nzgx", "avatar_url": "https://avatars.githubusercontent.com/u/87568781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hemalrajput", "html_url": "https://github.com/hemalrajput", "followers_url": "https://api.github.com/users/hemalrajput/followers", "following_url": "https://api.github.com/users/hemalrajput/following{/other_user}", "gists_url": "https://api.github.com/users/hemalrajput/gists{/gist_id}", "starred_url": "https://api.github.com/users/hemalrajput/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hemalrajput/subscriptions", "organizations_url": "https://api.github.com/users/hemalrajput/orgs", "repos_url": "https://api.github.com/users/hemalrajput/repos", "events_url": "https://api.github.com/users/hemalrajput/events{/privacy}", "received_events_url": "https://api.github.com/users/hemalrajput/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-07T09:58:09Z", "updated_at": "2025-04-22T18:36:46Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "# Feature Request: Support for Azure Data Explorer (ADX) as a Data Source\n\n## Summary  \nI\u2019d like to request support for Azure Data Explorer (ADX), also known as Kusto, when adding a data source in Great Expectations.\n\n## Context  \nI attempted to integrate ADX using the [`sqlalchemy-kusto`](https://pypi.org/project/sqlalchemy-kusto/) SQLAlchemy dialect via the generic method:\n\n```python\ncontext.data_sources.add_sql(name: str, connection_string: str)\n```\n\nHowever, I encountered an issue when following the [SQL data source configuration guide](https://docs.greatexpectations.io/docs/core/connect_to_data/sql_data/).\n\nSpecifically, when executing the following:\n\n```python\nfull_table_batch = full_table_batch_definition.get_batch()\nfull_table_batch.head()\n```\n\nI received an error due to an invalid SQL query generated by Great Expectations:\n\n```sql\nSELECT * FROM (SELECT * FROM <my_table_here> WHERE true) AS anon_1\n```\n\n## Issue  \nThe Kusto (ADX) engine does not support the `WHERE true` clause, resulting in this error:\n\n```\nOTR0001: Incorrect syntax near 'true'\n```\n\nIn Kusto syntax, a valid equivalent would be:\n\n```sql\nSELECT TOP 5 * FROM (SELECT * FROM <my_table_here>) AS anon_1\n```\n\nThis suggests that the default SQL query patterns used by Great Expectations (which assume standard SQL behavior) are not fully compatible with ADX.\n\n## Request  \n- Provide native or official support for Azure Data Explorer as a data source.\n- Alternatively, allow customization or override of generated SQL query patterns (such as removing or modifying the `WHERE true` clause) when using non-standard SQL dialects like ADX.\n- Ideally, extend support within the data source configuration to detect and handle quirks of dialects like `sqlalchemy-kusto`.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11067/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11067/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11065", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11065/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11065/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11065/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11065", "id": 2975324715, "node_id": "I_kwDOBiS_IM6xV9or", "number": 11065, "title": "GX Not FIPS Compliant", "user": {"login": "ccravens", "id": 1319049, "node_id": "MDQ6VXNlcjEzMTkwNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1319049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccravens", "html_url": "https://github.com/ccravens", "followers_url": "https://api.github.com/users/ccravens/followers", "following_url": "https://api.github.com/users/ccravens/following{/other_user}", "gists_url": "https://api.github.com/users/ccravens/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccravens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccravens/subscriptions", "organizations_url": "https://api.github.com/users/ccravens/orgs", "repos_url": "https://api.github.com/users/ccravens/repos", "events_url": "https://api.github.com/users/ccravens/events{/privacy}", "received_events_url": "https://api.github.com/users/ccravens/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-04-07T00:08:17Z", "updated_at": "2025-04-16T15:28:01Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen running GX on FIPS compliant environments, it is broken due to the use of md5.\n\n**To Reproduce**\nTry and run a validation on FIPS compliance, particularly in-memory panda dataframe, and it fails due to use of md5 hash.\n\n**Expected behavior**\nGX to run on FIPS-enabled systems.\n\n**Environment (please complete the following information):**\n - Operating System: Linux\n - Great Expectations Version: 1.3.13\n - Data Source: Pandas\n - Cloud environment: None\n\n**Additional context**\nFIPS does not support md5, so I'm submitting a PR and will link this issue in the PR\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11065/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11065/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11054", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11054/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11054/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11054/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11054", "id": 2958020779, "node_id": "I_kwDOBiS_IM6wT9Cr", "number": 11054, "title": "MicrosoftTeamsNotificationAction failing with 400 Bad Request", "user": {"login": "jwalant-dattani", "id": 120472952, "node_id": "U_kgDOBy5FeA", "avatar_url": "https://avatars.githubusercontent.com/u/120472952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwalant-dattani", "html_url": "https://github.com/jwalant-dattani", "followers_url": "https://api.github.com/users/jwalant-dattani/followers", "following_url": "https://api.github.com/users/jwalant-dattani/following{/other_user}", "gists_url": "https://api.github.com/users/jwalant-dattani/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwalant-dattani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwalant-dattani/subscriptions", "organizations_url": "https://api.github.com/users/jwalant-dattani/orgs", "repos_url": "https://api.github.com/users/jwalant-dattani/repos", "events_url": "https://api.github.com/users/jwalant-dattani/events{/privacy}", "received_events_url": "https://api.github.com/users/jwalant-dattani/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-03-29T13:32:40Z", "updated_at": "2025-04-17T17:50:39Z", "closed_at": "2025-04-17T17:50:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nMicrosoftTeamsNotificationAction failing with 400 Bad Request\n\n**To Reproduce**\n```\nfrom datetime import datetime\nfrom typing import Dict\n\nimport great_expectations as gx\nimport pandas as pd\n\ndf = pd.read_csv(\n    \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\"\n)\n\ncontext = gx.get_context()\n\n# Add data source and data asset\ndata_source = context.data_sources.add_pandas(name=\"nyc_taxi_data_source\")\ndata_asset = data_source.add_dataframe_asset(name=\"nyc_taxi_data_asset\")\n\n# Define batch for the entire dataframe\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\"nyc_taxi_batch\")\n\n# Create an expectation suite\nsuite = gx.ExpectationSuite(name=\"nyc_taxi_suite\")\ncontext.suites.add(suite)\n\n# Add a row count expectation\nrow_count = df.shape[0]\nrow_count_expectation = gx.expectations.ExpectTableRowCountToEqual(value=row_count)\nsuite.add_expectation(row_count_expectation)\n\n# Create a validation definition\nvalidation_def = gx.ValidationDefinition(data=batch_definition, suite=suite, name=\"nyc_taxi_validation\")\ncontext.validation_definitions.add(validation_def)\n\n# Webhook and checkpoint setup\nteams_webhook_url = \"__teams_webhook_url__\"  # Replace with your actual Teams webhook URL\naction_list = [\n    gx.checkpoint.MicrosoftTeamsNotificationAction(\n        name=\"notify_teams_on_validation\",\n        teams_webhook=teams_webhook_url,\n        notify_on=\"all\",\n    ),\n    gx.checkpoint.UpdateDataDocsAction(name=\"update_data_docs\"),\n]\n\ncheckpoint = gx.Checkpoint(\n    name=\"nyc_taxi_checkpoint\",\n    validation_definitions=[validation_def],\n    actions=action_list,\n    result_format={\n        \"result_format\": \"SUMMARY\",\n    },\n)\n\ncontext.checkpoints.add(checkpoint)\n\n\n# Function to get validation results\ndef run_validation(checkpoint: gx.Checkpoint, batch_params: Dict):\n    run_id = gx.RunIdentifier(run_name=\"validation_checkpoint\", run_time=datetime.now())\n    result = checkpoint.run(batch_params, run_id=run_id)\n\n    if not result.success:\n        print(\"Validation failed! Notification has been sent.\")\n    return result\n\n\n# Define batch parameters and run validation\nbatch_params = {\"dataframe\": df}\nvalidation_result = run_validation(checkpoint=checkpoint, batch_params=batch_params)\n```\n\n**Expected behavior**\nShould not fail with bad request\n\n**Environment (please complete the following information):**\n - Operating System: [MacOS]\n - Great Expectations Version: [1.3.12]\n - Data Source: [Pandas]\n - Cloud environment: [None]\n\n**Additional context**\nThis is the actual error found when inspecting response.content\n```\n{\n  \"error\": {\n    \"code\": \"TriggerInputSchemaMismatch\",\n    \"message\": \"The input body for trigger 'manual' of type 'Request' did not match its schema definition. Error details: 'Invalid type. Expected String but got Number.'.\"\n  }\n}\n```\n<img width=\"425\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/44f06463-33d9-4258-8bda-74277cb6d9af\" />\n\n<p>\n\n\"version\" attribute in [adaptive card payload](https://adaptivecards.io/explorer/) is expected to be a string. It is being initialized in [MicrosoftTeamsRenderer](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/render/renderer/microsoft_teams_renderer.py#L35) as a number.\n\n_MICROSOFT_TEAMS_SCHEMA_VERSION = 1.5 \n\n<p>\nShould work after that is made a string\n\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11054/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11054/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11051", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11051/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11051/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11051/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11051", "id": 2953649849, "node_id": "I_kwDOBiS_IM6wDR65", "number": 11051, "title": "ExpectationConfiguration using", "user": {"login": "gavetisyanca", "id": 44903895, "node_id": "MDQ6VXNlcjQ0OTAzODk1", "avatar_url": "https://avatars.githubusercontent.com/u/44903895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gavetisyanca", "html_url": "https://github.com/gavetisyanca", "followers_url": "https://api.github.com/users/gavetisyanca/followers", "following_url": "https://api.github.com/users/gavetisyanca/following{/other_user}", "gists_url": "https://api.github.com/users/gavetisyanca/gists{/gist_id}", "starred_url": "https://api.github.com/users/gavetisyanca/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gavetisyanca/subscriptions", "organizations_url": "https://api.github.com/users/gavetisyanca/orgs", "repos_url": "https://api.github.com/users/gavetisyanca/repos", "events_url": "https://api.github.com/users/gavetisyanca/events{/privacy}", "received_events_url": "https://api.github.com/users/gavetisyanca/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-27T16:24:40Z", "updated_at": "2025-04-22T18:45:28Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I had a question on the usage of `ExpectationConfiguration` \nI am trying to run the same expectation type on multiple columns using for loop.\nBut when I add the `ExpectationConfiguration` into my `ExpectationSuite` I'm getting this error:\n```\nreturn [exp.configuration for exp in self.expectations]\nAttributeError: ''ExpectationConfiguration' object has no attribute 'configuration\n```'\nI found this error to be odd since with previous versions of the api I didn't have problems\n```\nThe code that I have is the following:\n```\nexpectation_config = ExpectationConfiguration(type=\"expect_column_to_exist\",\nkwargs={})\nfor col in expected_columns:\n  expectation_config.kwargs={\"column\": col} \n  self.suite.add_expectation(expectation_config)\n\n```\nThe version of GE being used is 1.3.11\nThank you for reading this post", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11051/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11051/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11049", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11049/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11049/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11049/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11049", "id": 2953028428, "node_id": "I_kwDOBiS_IM6wA6NM", "number": 11049, "title": "How to avoid NoAvailableBatchesError when there is no data", "user": {"login": "CrossNox", "id": 15719718, "node_id": "MDQ6VXNlcjE1NzE5NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/15719718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CrossNox", "html_url": "https://github.com/CrossNox", "followers_url": "https://api.github.com/users/CrossNox/followers", "following_url": "https://api.github.com/users/CrossNox/following{/other_user}", "gists_url": "https://api.github.com/users/CrossNox/gists{/gist_id}", "starred_url": "https://api.github.com/users/CrossNox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CrossNox/subscriptions", "organizations_url": "https://api.github.com/users/CrossNox/orgs", "repos_url": "https://api.github.com/users/CrossNox/repos", "events_url": "https://api.github.com/users/CrossNox/events{/privacy}", "received_events_url": "https://api.github.com/users/CrossNox/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-27T13:38:41Z", "updated_at": "2025-04-22T18:38:08Z", "closed_at": "2025-04-22T18:38:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "So, I have setup a checkpoint that has several validation definitions, one per asset.\n\nThe goal is to validate new data from yesterday every day. But if one of those assets does not have new data for the given batch parameters, running the checkpoint will fail raising `NoAvailableBatchesError`. \n\nThis seems to be the expected behaviour from a look into the tests.\n\nHow do I get around this?\n\nIMHO if there's no data, expectations should not fail, as nothing is breaking the data contract it establishes.", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11049/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11049/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11045", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11045/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11045/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11045/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11045", "id": 2948487588, "node_id": "I_kwDOBiS_IM6vvlmk", "number": 11045, "title": "Unexpected_rows_expectation doesn't give element_count in the validation results", "user": {"login": "ayaan-ak-1", "id": 69572282, "node_id": "MDQ6VXNlcjY5NTcyMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/69572282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayaan-ak-1", "html_url": "https://github.com/ayaan-ak-1", "followers_url": "https://api.github.com/users/ayaan-ak-1/followers", "following_url": "https://api.github.com/users/ayaan-ak-1/following{/other_user}", "gists_url": "https://api.github.com/users/ayaan-ak-1/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayaan-ak-1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayaan-ak-1/subscriptions", "organizations_url": "https://api.github.com/users/ayaan-ak-1/orgs", "repos_url": "https://api.github.com/users/ayaan-ak-1/repos", "events_url": "https://api.github.com/users/ayaan-ak-1/events{/privacy}", "received_events_url": "https://api.github.com/users/ayaan-ak-1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-26T06:02:11Z", "updated_at": "2025-04-28T07:17:37Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nWhen running a validation for unexpected_rows_expectation it is just giving unexpected_rows_list and the observed_value ( which has unexpected row count ). But it does not have element_count which can tell how many rows it evaluated.\n\n**Solution**\nCan there be any way i can see other values (like element_count) in the validation results\n\n\n\n**Additional context**\n\nIn the UnexpectedRowsExpectation class (great_expectations/expectations/core/unexpected_rows_expectation.py)\nthe _validate function returns very few metrics as shown below\n\n\n    @override\n    def _validate(\n        self,\n        metrics: dict,\n        runtime_configuration: dict | None = None,\n        execution_engine: ExecutionEngine | None = None,\n    ) -> Union[ExpectationValidationResult, dict]:\n        metric_value = metrics[\"unexpected_rows_query.table\"]\n        unexpected_row_count = metrics[\"unexpected_rows_query.row_count\"]\n        observed_value = f\"{unexpected_row_count} unexpected \"\n        if unexpected_row_count == 1:\n            observed_value += \"row\"\n        else:\n            observed_value += \"rows\"\n        return {\n            \"success\": unexpected_row_count == 0,\n            \"result\": {\n                \"observed_value\": observed_value,\n                \"details\": {\"unexpected_rows\": metric_value},\n            },\n        }\n\n\nso can we update this to return even more important information in the results", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11045/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11045/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11043", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11043/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11043/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11043/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11043", "id": 2946669242, "node_id": "I_kwDOBiS_IM6vopq6", "number": 11043, "title": "Unable to run batch validation on an Azure sql datasource", "user": {"login": "BleckJeck", "id": 18755049, "node_id": "MDQ6VXNlcjE4NzU1MDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/18755049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BleckJeck", "html_url": "https://github.com/BleckJeck", "followers_url": "https://api.github.com/users/BleckJeck/followers", "following_url": "https://api.github.com/users/BleckJeck/following{/other_user}", "gists_url": "https://api.github.com/users/BleckJeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/BleckJeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BleckJeck/subscriptions", "organizations_url": "https://api.github.com/users/BleckJeck/orgs", "repos_url": "https://api.github.com/users/BleckJeck/repos", "events_url": "https://api.github.com/users/BleckJeck/events{/privacy}", "received_events_url": "https://api.github.com/users/BleckJeck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-25T14:07:03Z", "updated_at": "2025-03-31T16:38:29Z", "closed_at": "2025-03-31T16:38:28Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI want to run validation on my data on a Azure SQL server. I managed to connect just fine and can get batches as expected (batch.head() returns the expected results) but when I try to validate any expectation I get an exception.\nThis is true for both Table and Query data assets, and for different expectation types.\n\n**To Reproduce**\n- great_expectations.yml config file (attached as plain text)\n[great_expectations.txt](https://github.com/user-attachments/files/19449305/great_expectations.txt)\n\n\n\n- full code (with company details obfuscated):\n```\nimport great_expectations as gx\ncontext = gx.get_context(mode=\"file\")\n\n# CONNECTION DETAILS\nimport pyodbc\nimport sqlalchemy as sa\n\nserver = '<server_name>.windows.net' \ndatabase = '<database_name>'\nconnection_string = 'DRIVER={ODBC Driver 18 for SQL Server};SERVER='+server+';DATABASE='+database+';Authentication=ActiveDirectoryInteractive'\nconnection_url = sa.engine.URL.create(\"mssql+pyodbc\", query={\"odbc_connect\": connection_string})\n\n# CREATE DATASOURCE\ncontext.data_sources.add_sql(name='sql_test_2', connection_string=str(connection_url))\n\n# CREATE TABLE DATA ASSET\ndata_source = context.data_sources.get(\"sql_test_2\")\ndata_source.add_table_asset(table_name=\"<table_name>\", name=\"test_table\")\n\n# CREATE BATCH DEFINITION\ndata_asset = context.data_sources.get(\"sql_test_2\").get_asset(\"test_table\")\ndata_asset.add_batch_definition_whole_table(name=\"FULL_TABLE\")\n\n# TEST RUN OF BATCH VALIDATION\nbatch_definition = data_asset.get_batch_definition(\"FULL_TABLE\")\ntest_batch = batch_definition.get_batch()\n\n# define expectation\nfrom great_expectations import expectations as gxe\nexpectation = gxe.ExpectCompoundColumnsToBeUnique(column_list=[\"ManuscriptID\",\"ContactID\"])\n\n# run the validation\nvalidation_results = test_batch.validate(expectation)\nprint(validation_results)\n```\n\n\n- full stack trace the error (with company details obfuscated):\n```\n{\n  \"success\": false,\n  \"expectation_config\": {\n    \"type\": \"expect_compound_columns_to_be_unique\",\n    \"kwargs\": {\n      \"column_list\": [\n        \"ManuscriptID\",\n        \"ContactID\"\n      ],\n      \"batch_id\": \"sql_test_2-test_table\"\n    },\n    \"meta\": {}\n  },\n  \"result\": {},\n  \"meta\": {},\n  \"exception_info\": {\n    \"MetricConfigurationID(metric_name='table.columns', metric_domain_kwargs_id='67b97f39746b2a088030b40d41ec16ed', metric_value_kwargs_id=())\": {\n      \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"C:\\\\<company_filesystem>\\\\GX prototype\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\execution_engine\\\\execution_engine.py\\\", line 534, in _process_direct_and_bundled_metric_computation_configurations\\n    metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"C:\\\\<company_filesystem>\\\\GX prototype\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\metrics\\\\metric_provider.py\\\", line 60, in inner_func\\n    return metric_fn(*args, **kwargs)\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"C:\\\\<company_filesystem>\\\\GX prototype\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\metrics\\\\table_metrics\\\\table_columns.py\\\", line 49, in _sqlalchemy\\n    return [col[\\\"name\\\"] for col in column_metadata]\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\nTypeError: 'NoneType' object is not iterable\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"C:\\\\<company_filesystem>\\\\GX prototype\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\validator\\\\validation_graph.py\\\", line 296, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"C:\\\\<company_filesystem>\\\\GX prototype\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\execution_engine\\\\execution_engine.py\\\", line 280, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"C:\\\\<company_filesystem>\\\\GX prototype\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\execution_engine\\\\execution_engine.py\\\", line 539, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: 'NoneType' object is not iterable\\n\",\n      \"exception_message\": \"'NoneType' object is not iterable\",\n      \"raised_exception\": true\n    }\n  }\n}\n```\n**Expected behavior**\nShould be able to run and see the results of the validation.\n\n**Environment (please complete the following information):**\n - Operating System: [Windows]\n - Great Expectations Version: [GX core 1.3.11]\n - Data Source: [SQL through sqlAlchemy]\n - Cloud environment: [Azure]\n\n**Additional context**\nI've managed to set up successful validations by extracting the data from the Azure SQL server, loading into a pandas DataFrame and running the validations on the df itself. What I'm trying to do now is to remove the middle man and run validation on the server directly.\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11043/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11043/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11032", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11032/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11032/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11032/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11032", "id": 2925093772, "node_id": "I_kwDOBiS_IM6uWWOM", "number": 11032, "title": "Optional limitation to 200 records for UnexpectedRowsExpectation", "user": {"login": "HOsthues", "id": 203651560, "node_id": "U_kgDODCN56A", "avatar_url": "https://avatars.githubusercontent.com/u/203651560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HOsthues", "html_url": "https://github.com/HOsthues", "followers_url": "https://api.github.com/users/HOsthues/followers", "following_url": "https://api.github.com/users/HOsthues/following{/other_user}", "gists_url": "https://api.github.com/users/HOsthues/gists{/gist_id}", "starred_url": "https://api.github.com/users/HOsthues/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HOsthues/subscriptions", "organizations_url": "https://api.github.com/users/HOsthues/orgs", "repos_url": "https://api.github.com/users/HOsthues/repos", "events_url": "https://api.github.com/users/HOsthues/events{/privacy}", "received_events_url": "https://api.github.com/users/HOsthues/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-17T13:26:30Z", "updated_at": "2025-08-04T19:32:50Z", "closed_at": "2025-08-04T19:32:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nI need to retrieve ALL rows that failed the UnexpectedRowsExpectation. Currently, unexpected_rows is limited to 200 rows.\n\n**Describe the solution you'd like**\nI need the possibility to disable the limit. An additional boolean parameter would be sufficient that can be used to choose \"limitation to 200\" (could be the default) or \"no limitation\".\n\n**Additional context**\nSee also\nhttps://discourse.greatexpectations.io/t/unexpectedrowsexpectation-unexpected-rows-limit/2026\nhttps://discourse.greatexpectations.io/t/unexpected-list-is-limited-to-200-rows-even-after-i-precise-my-result-format-to-complete/2059\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11032/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11032/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11026", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11026/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11026/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11026/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11026", "id": 2917040865, "node_id": "I_kwDOBiS_IM6t3oLh", "number": 11026, "title": "Row conditions with accents in the value are not parsable", "user": {"login": "Gudsfile", "id": 32420956, "node_id": "MDQ6VXNlcjMyNDIwOTU2", "avatar_url": "https://avatars.githubusercontent.com/u/32420956?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gudsfile", "html_url": "https://github.com/Gudsfile", "followers_url": "https://api.github.com/users/Gudsfile/followers", "following_url": "https://api.github.com/users/Gudsfile/following{/other_user}", "gists_url": "https://api.github.com/users/Gudsfile/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gudsfile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gudsfile/subscriptions", "organizations_url": "https://api.github.com/users/Gudsfile/orgs", "repos_url": "https://api.github.com/users/Gudsfile/repos", "events_url": "https://api.github.com/users/Gudsfile/events{/privacy}", "received_events_url": "https://api.github.com/users/Gudsfile/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2025-03-13T12:46:45Z", "updated_at": "2025-07-16T15:08:00Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n\nWhen a row_condition contains an accent, for example on the value under test, the project crashes, indicating a parsing error. \nIn fact, in the code (cf file `great_expectations/expectations/row_conditions.py`) the parsing of row_condition expects to find the characters of `condition_value_chars`, but this list is made up of alphanumeric pyparsing characters (`alphanums`) that do not contain accents. I think [pyparsing `alphas8bit` characters](https://pythonhosted.org/pyparsing/pyparsing-module.html#alphas8bit) should be added to the list. \n\n```python\ncondition_value_chars = alphanums + punctuation_without_apostrophe + WHITESPACE_CHARS\ncondition_value = Suppress('\"') + Word(f\"{condition_value_chars}._\").setResultsName(\n    \"condition_value\"\n) + Suppress('\"') ^ Suppress(\"'\") + Word(f\"{condition_value_chars}._\").setResultsName(\n    \"condition_value\"\n) + Suppress(\"'\")\n```\n\nto\n\n```python\ncondition_value_chars = alphanums + punctuation_without_apostrophe + WHITESPACE_CHARS + alphas8bit\n# \u2026\n```\n\n**To Reproduce**\n\nAdd an expectation with a `row_condition` with an accent :\n```python\n      gxe.ExpectColumnDistinctValuesToBeInSet(\n        column=\"column_name\",\n        value_set=[\"value_a\", \"value_b\"],\n        condition_parser=\"great_expectations\",\n        row_condition='col(\"column_partition\")==\"V\u00e0lueWithAccent\"',\n      )\n```\n\nResult is this error :\n```\nunable to parse condition: col(\"country_form\")=='V\u00e0lueWithAccent'\nFile \"\u2026/site-packages/pyparsing/core.py\", line 1212, in parse_string\nraise exc.with_traceback(None)\npyparsing.exceptions.ParseException: Expected \"'\", found '\u00e0lueWithAccent' (at char 23), (line:1, col:24)\n```\n\n**Expected behavior**\n\nExpectation checking without parsing problems and taking into account the condition. \n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11026/reactions", "total_count": 5, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11026/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11017", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11017/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11017/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11017/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11017", "id": 2911814250, "node_id": "I_kwDOBiS_IM6tjsJq", "number": 11017, "title": "recursive_file_lookup doesn't read files from subdirectories when set to True in add_parquet_asset", "user": {"login": "jagpsz", "id": 26366036, "node_id": "MDQ6VXNlcjI2MzY2MDM2", "avatar_url": "https://avatars.githubusercontent.com/u/26366036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jagpsz", "html_url": "https://github.com/jagpsz", "followers_url": "https://api.github.com/users/jagpsz/followers", "following_url": "https://api.github.com/users/jagpsz/following{/other_user}", "gists_url": "https://api.github.com/users/jagpsz/gists{/gist_id}", "starred_url": "https://api.github.com/users/jagpsz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jagpsz/subscriptions", "organizations_url": "https://api.github.com/users/jagpsz/orgs", "repos_url": "https://api.github.com/users/jagpsz/repos", "events_url": "https://api.github.com/users/jagpsz/events{/privacy}", "received_events_url": "https://api.github.com/users/jagpsz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-11T20:29:23Z", "updated_at": "2025-03-17T22:13:56Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI would like to read all parquet files from subdirectories from s3. I am doing that in databricks. My data is partitioned by yyyy, mm, dd, hh but I want to validate the whole day at once. `recursive_file_lookup` doesn't seem to work as expected,\n\nI get \n`TestConnectionError: No file in bucket \"my_bucket\" with prefix \"\" and recursive file discovery set to \"False\" found using delimiter \"/\" for DataAsset \"inventory_parts_asset_\".`\n\n\n**To Reproduce**\n```\nimport great_expectations as gx\n\n# Get the Ephemeral Data Context\ncontext = gx.get_context(mode=\"ephemeral\")\nassert type(context).__name__ == \"EphemeralDataContext\"\n\n# Define the Data Source's parameters:\ndata_source_name = \"source_name\"\nbucket_name = \"my_bucket\"\nboto3_options = {\n    \"region_name\": \"region\",  \n    \"endpoint_url\": \"endpoint_url\",  \n    \"aws_access_key_id\": \"key_id\",  \n    \"aws_secret_access_key\": \"access_key\", \n}\n# Create the Data Source:\ndata_source = context.data_sources.add_or_update_spark_s3(\n    name=data_source_name, bucket=bucket_name, boto3_options=boto3_options\n)\n\nasset_name = \"inventory_parts_asset_\"\n\nIt doesn't work: \ns3_prefix = \"my_prefix/yyyy=2025/mm=03/dd=09/\"\ndata_asset = data_source.add_parquet_asset(name=asset_name, s3_prefix=s3_prefix, recursive_file_lookup=True)\n\nIt works:\ns3_prefix = \"my_prefix/yyyy=2025/mm=03/dd=09/hh=00/\"\ndata_asset = data_source.add_parquet_asset(name=asset_name, s3_prefix=s3_prefix, recursive_file_lookup=True)\n\n```\n**Expected behavior**\nRead all parquet files from subdirectories\n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.3.9\n - Cloud environment: AWS\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11017/timeline", "performed_via_github_app": null, "state_reason": "reopened"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11014", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11014/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11014/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11014/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11014", "id": 2909762491, "node_id": "I_kwDOBiS_IM6tb3O7", "number": 11014, "title": "\"No module named great_expectations.__main__; 'great_expectations' is a package and cannot be directly executed\" getting this error on windows 11 command prompt.", "user": {"login": "RanjeetSoni116", "id": 55587302, "node_id": "MDQ6VXNlcjU1NTg3MzAy", "avatar_url": "https://avatars.githubusercontent.com/u/55587302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RanjeetSoni116", "html_url": "https://github.com/RanjeetSoni116", "followers_url": "https://api.github.com/users/RanjeetSoni116/followers", "following_url": "https://api.github.com/users/RanjeetSoni116/following{/other_user}", "gists_url": "https://api.github.com/users/RanjeetSoni116/gists{/gist_id}", "starred_url": "https://api.github.com/users/RanjeetSoni116/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RanjeetSoni116/subscriptions", "organizations_url": "https://api.github.com/users/RanjeetSoni116/orgs", "repos_url": "https://api.github.com/users/RanjeetSoni116/repos", "events_url": "https://api.github.com/users/RanjeetSoni116/events{/privacy}", "received_events_url": "https://api.github.com/users/RanjeetSoni116/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-11T09:20:11Z", "updated_at": "2025-03-24T17:55:31Z", "closed_at": "2025-03-24T17:55:31Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n I am new in great_expectations tool, I am exploring this tool to use for ML data pipeline validation. after successfully installing GX using command in windows command prompt \"pip install great_expectations\" in next step to create default folder structure using command in windows command prompt for virtual env \"geat_expectations init\" or \"python -m great_expectations init\" getting error \"No module named great_expectations.__main__; 'great_expectations' is a package and cannot be directly executed\" can any help me to install properly ?\n\n**Expected behavior**\nI should be able to create default greate expectation folder structure in my windows 11.\n\n**Environment (please complete the following information):**\n - Operating System: [Windows 11]\n - Great Expectations Version: [e.g. 1.3.1]\n - Data Source: [e.g. PySpark]\n - Cloud environment: [Azure, Databricks]\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11014/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11014/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11013", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11013/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11013/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11013/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11013", "id": 2907753460, "node_id": "I_kwDOBiS_IM6tUMv0", "number": 11013, "title": "Getting error \"No module named great_expectations.__main__; 'great_expectations' is a package and cannot be directly executed\" when trying to configure great_expectation on windows through command line, command (great_expectations init)", "user": {"login": "RanjeetSoni116", "id": 55587302, "node_id": "MDQ6VXNlcjU1NTg3MzAy", "avatar_url": "https://avatars.githubusercontent.com/u/55587302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RanjeetSoni116", "html_url": "https://github.com/RanjeetSoni116", "followers_url": "https://api.github.com/users/RanjeetSoni116/followers", "following_url": "https://api.github.com/users/RanjeetSoni116/following{/other_user}", "gists_url": "https://api.github.com/users/RanjeetSoni116/gists{/gist_id}", "starred_url": "https://api.github.com/users/RanjeetSoni116/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RanjeetSoni116/subscriptions", "organizations_url": "https://api.github.com/users/RanjeetSoni116/orgs", "repos_url": "https://api.github.com/users/RanjeetSoni116/repos", "events_url": "https://api.github.com/users/RanjeetSoni116/events{/privacy}", "received_events_url": "https://api.github.com/users/RanjeetSoni116/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-10T16:02:45Z", "updated_at": "2025-03-11T07:21:05Z", "closed_at": "2025-03-10T20:45:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI have successfully installed \"great_expectation\" on Windows but when running the command **great_expectations init** its thronging below error, I have tried to configure on virtual env also but getting the same error\n\n$ python -m great_expectations init\nC:\\Pipeline Data Validation\\GX_DataValidation\\Scripts\\python.exe: No module named great_expectations.__main__; 'great_expectations' is a package and cannot be directly executed\n\n![Image](https://github.com/user-attachments/assets/5b46d734-0578-4ad5-8fb7-6df51cabdfb3)\n\n**To Reproduce**\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Environment (please complete the following information):**\n - Operating System: [Windows 11]\n - Great Expectations Version: [e.g. 1.3.9]\n - Data Source: [e.g. Spark]\n - Cloud environment: [Databricks]\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11013/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11013/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11010", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11010/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11010/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11010/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11010", "id": 2903553916, "node_id": "I_kwDOBiS_IM6tELd8", "number": 11010, "title": "Feature to return the processed keys during a data quality validation", "user": {"login": "jmcorreia", "id": 11615737, "node_id": "MDQ6VXNlcjExNjE1NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/11615737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmcorreia", "html_url": "https://github.com/jmcorreia", "followers_url": "https://api.github.com/users/jmcorreia/followers", "following_url": "https://api.github.com/users/jmcorreia/following{/other_user}", "gists_url": "https://api.github.com/users/jmcorreia/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmcorreia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmcorreia/subscriptions", "organizations_url": "https://api.github.com/users/jmcorreia/orgs", "repos_url": "https://api.github.com/users/jmcorreia/repos", "events_url": "https://api.github.com/users/jmcorreia/events{/privacy}", "received_events_url": "https://api.github.com/users/jmcorreia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-07T17:25:51Z", "updated_at": "2025-03-18T16:10:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We have a use case, for which we want to be able to store the status of all the open and closed Data Quality problems.\nFor doing so, we rely on GX unexpected_index_list to have the PKs that got DQ problems and we have some custom logic on our framework to get all the unique keys on the dataset being validated - we call it processed_keys.\nAfterwards we match these with the unexpected_index_list considering all history of runs, and if the previously identified bad PKs appear as good records in the following runs, we close the Data Quality problem.\n\nThis has been working until now in GX 0.18.8, even though the processing is challenging.\nHowever, when people use row_conditions, this impose challenges as we cannot really rely on the unique keys of the Dataset, because the expectations with row_conditions are not considering the entire dataset, but a filtered version.\n\nOf course we could try to change our logic to build the \"processed_keys\" for each row_condition, but this will mean additional processing and also additional data being stored. E.g. as of now we store a single processed_keys dict for the entire dataset being validated, having it 1 or 100 expectations. If we would accommodate this logic, we would have to build as much dicts as expectations with row_conditions.\n\n**IDEA PROPOSED**\n- as you already build the list of keys for failures, would it be possible for you to also retrieve the keys for good records or for processed records? \n- or, would you be able to retrieve the keys that are ignored by applying the row_condition?\n- any other idea?\n\n**Additional context**\n- Please let me know what you think of the idea, if you would have any other idea and if you would need more details", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11010/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11006", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11006/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11006/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11006/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/11006", "id": 2902051106, "node_id": "I_kwDOBiS_IM6s-cki", "number": 11006, "title": "ExpectColumnValuesToBeOfType argument missing attribute 'type'", "user": {"login": "MithunMi97", "id": 49356216, "node_id": "MDQ6VXNlcjQ5MzU2MjE2", "avatar_url": "https://avatars.githubusercontent.com/u/49356216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MithunMi97", "html_url": "https://github.com/MithunMi97", "followers_url": "https://api.github.com/users/MithunMi97/followers", "following_url": "https://api.github.com/users/MithunMi97/following{/other_user}", "gists_url": "https://api.github.com/users/MithunMi97/gists{/gist_id}", "starred_url": "https://api.github.com/users/MithunMi97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MithunMi97/subscriptions", "organizations_url": "https://api.github.com/users/MithunMi97/orgs", "repos_url": "https://api.github.com/users/MithunMi97/repos", "events_url": "https://api.github.com/users/MithunMi97/events{/privacy}", "received_events_url": "https://api.github.com/users/MithunMi97/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7550155696, "node_id": "LA_kwDOBiS_IM8AAAABwgY7sA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/non-fluent-datasource", "name": "non-fluent-datasource", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-07T05:31:21Z", "updated_at": "2025-03-19T16:28:41Z", "closed_at": "2025-03-19T16:28:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When we tried to run the expectation for the column type, we got an error indicating that an attribute was missing. When we debugged, we found that the dictionary argument only had the name (column names) attribute and didn't include the type attribute.\n\nPython script:\n\nimport great_expectations as gx\nfrom great_expectations.datasource.fluent.batch_request import BatchRequest\n\n# from great_expectations.expect_column_values_to_be_of_type import ExpectColumnValuesToBeOfType\n\ncontext = gx.get_context()\ndatasource_name = \"my_new_datasource\"\nmy_connection_string = \"redshiftconnection\"\n\ndata_source2 = context.data_sources.add_postgres(\n    name=datasource_name, connection_string=my_connection_string\n)\n\nprint(\"8***********************************\")\nprint(context.data_sources.get(datasource_name))\n\nquery = \"SELECT * from table_9\"\ndata_asset_name = \"table_name\"\ndata_asset = data_source2.add_query_asset(name=data_asset_name, query=query)\ndata_asset = data_source2.get_asset(data_asset_name)\n\nfull_table_batch_definition = data_asset.add_batch_definition_whole_table(\n    name=\"FULL_TABLE\"\n)\n\n# Verify that the Batch Definition is valid\nfull_table_batch = full_table_batch_definition.get_batch()\nprint(full_table_batch.head())\n\ndf = full_table_batch.data.get_table_metadata()\nprint(df)\n\nprint(\"============ getting the validator =============\", type(full_table_batch))\n\nexpectation_suite_name = \"inventory_parts_suite\"\nsuite = gx.ExpectationSuite(name=expectation_suite_name)\n\n# Add Expectations\nsuite.add_expectation(\n    gx.expectations.ExpectColumnValuesToNotBeNull(column=\"disease_common_name\")\n)\nsuite.add_expectation(\n    gx.expectations.ExpectColumnValuesToBeOfType(column=\"epi_rate\", type_=\"NUMERIC\")\n)\n\n# Add the Expectation Suite to the Context\ncontext.suites.add(suite)\n\nvalidation_results = full_table_batch.validate(suite)\nprint(type(validation_results.to_json_dict()))\n\nimport json\n\njsobj = json.dumps(validation_results.to_json_dict(), indent=4)\nwith open('test.json', 'w') as w:\n    w.write(jsobj)\nExpectation Result:\n\n{\n    \"success\": false,\n    \"expectation_config\": {\n        \"type\": \"expect_column_values_to_be_of_type\",\n        \"kwargs\": {\n            \"column\": \"epi_rate\",\n            \"type_\": \"NUMERIC\",\n            \"batch_id\": \"my_new_datasource-bod.stg_dm_patient_funnel_epidemiology\"\n        },\n        \"meta\": {},\n        \"id\": \"b6cbfff3-41c4-4ae4-ae8f-c1cb560604b5\"\n    },\n    \"result\": {},\n    \"meta\": {},\n    \"exception_info\": {\n        \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"c:\\\\Users\\\\MShanm12\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python39\\\\lib\\\\site-packages\\\\great_expectations\\\\validator\\\\validator.py\\\", line 650, in graph_validate\\n    result = expectation.metrics_validate(\\n  File \\\"c:\\\\Users\\\\MShanm12\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python39\\\\lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\expectation.py\\\", line 1149, in metrics_validate\\n    expectation_validation_result: Union[ExpectationValidationResult, dict] = self._validate(\\n  File \\\"c:\\\\Users\\\\MShanm12\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python39\\\\lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\core\\\\expect_column_values_to_be_of_type.py\\\", line 567, in _validate\\n    actual_column_type = [\\n  File \\\"c:\\\\Users\\\\MShanm12\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python39\\\\lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\core\\\\expect_column_values_to_be_of_type.py\\\", line 568, in <listcomp>\\n    type_dict[\\\"type\\\"]\\nKeyError: 'type'\\n\",\n        \"exception_message\": \"'type'\",\n        \"raised_exception\": true\n    }\n}\n\nEnvironment (please complete the following information):\nOperating System: Linux and Windows\nGreat Expectations Version: 1.3.8\nData Source: Redshift\nCloud environment: EMR, local windows machine\nAdditional context: Some issue while retrieving the batch data from tables.\n\n<img width=\"941\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8dacd62b-a19b-4954-af43-85d4dea3d9c8\" />", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11006/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/11006/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10999", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10999/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10999/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10999/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10999", "id": 2900382842, "node_id": "I_kwDOBiS_IM6s4FR6", "number": 10999, "title": "localisation of text in GX results", "user": {"login": "smcl", "id": 510566, "node_id": "MDQ6VXNlcjUxMDU2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/510566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smcl", "html_url": "https://github.com/smcl", "followers_url": "https://api.github.com/users/smcl/followers", "following_url": "https://api.github.com/users/smcl/following{/other_user}", "gists_url": "https://api.github.com/users/smcl/gists{/gist_id}", "starred_url": "https://api.github.com/users/smcl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smcl/subscriptions", "organizations_url": "https://api.github.com/users/smcl/orgs", "repos_url": "https://api.github.com/users/smcl/repos", "events_url": "https://api.github.com/users/smcl/events{/privacy}", "received_events_url": "https://api.github.com/users/smcl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-03-06T13:13:01Z", "updated_at": "2025-03-10T20:47:41Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nWe use GX validation in a number of locales - Netherlands, Sweden, Germany, Finland etc. Currently all of the text relating to the results - for example what is generated by each expectation's `_prescriptive_renderer` - is exclusively in English. Ideally this kind of stuff can be localized so that non-English-speaking users can work with the results.\n\n**Describe the solution you'd like**\nThis is a tough one because it could be fairly large and touches quite a few things. Taking a very specific couple of lines from the GX codebase though, we'd ideally not have code like this (from the `_prescriptive_template` method of the `ExpectColumnDistinctValuesToBeInSet` class [here](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/core/expect_column_distinct_values_to_be_in_set.py#L298-L301)):\n\n```\n    if renderer_configuration.include_column_name:\n        template_str = f\"$column distinct values must belong to this set: {value_set_str}.\"\n    else:\n        template_str = f\"distinct values must belong to this set: {value_set_str}.\"\n```\n\nSo for text that should end up being output and visible to users we shouldn't really have English-language string literals but rather we'd have a set of localisations _somewhere_ that we'd return using some utility function\n\n```\n    if renderer_configuration.include_column_name:\n        template_str = self.localized_template(locale, \"column_distinct_values_must_belong_to_set\", column, value_set_str)\n    else:\n        template_str = self.localized_template(locale, \"distinct_values_must_belong_to_set\", value_set_str)\n```\n\nObviously this is just a hacked together example but I hope it is clear what I mean - we'd use a function or method that would identify, based on the current locale and a string identifier, find a string template into which the supplied `*args` would be inserted.\n\n**Describe alternatives you've considered**\nOur alternative in this case would be to produce all required localisations outside of GX, discard all text GX provides and just sort of hack it together. This is _sort of_ manageable but I do not believe we are the only ones who operate in locales where English is not the main language. So if a dozen other orgs do the same, that's a lot of additional repeated effort. Additionally it's potentially a reason some may elect not to use GX.\n\n**Additional context**\nn/a\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10999/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10999/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10993", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10993/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10993/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10993/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10993", "id": 2892950632, "node_id": "I_kwDOBiS_IM6sbuxo", "number": 10993, "title": "Cannot download ebook \"The beginner's guide to data quality tests\"", "user": {"login": "jaepil-choi", "id": 25889304, "node_id": "MDQ6VXNlcjI1ODg5MzA0", "avatar_url": "https://avatars.githubusercontent.com/u/25889304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaepil-choi", "html_url": "https://github.com/jaepil-choi", "followers_url": "https://api.github.com/users/jaepil-choi/followers", "following_url": "https://api.github.com/users/jaepil-choi/following{/other_user}", "gists_url": "https://api.github.com/users/jaepil-choi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaepil-choi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaepil-choi/subscriptions", "organizations_url": "https://api.github.com/users/jaepil-choi/orgs", "repos_url": "https://api.github.com/users/jaepil-choi/repos", "events_url": "https://api.github.com/users/jaepil-choi/events{/privacy}", "received_events_url": "https://api.github.com/users/jaepil-choi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-03-04T05:05:56Z", "updated_at": "2025-03-08T23:26:53Z", "closed_at": "2025-03-08T23:26:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n\nOn the site https://pages.greatexpectations.io/beginners-guide the guide book is not downloadable. Buttons have no response. \n\n**To Reproduce**\n\nTry downloading the file\n\n**Expected behavior**\n\nDownload the file\n\n**Environment (please complete the following information):**\n - Operating System: [e.g. Linux, MacOS, Windows] Windows\n - Great Expectations Version: [e.g. 0.13.2] n/a\n - Data Source: [e.g. Pandas, Snowflake] n/a\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP] n/a\n\n**Additional context**\nAdd any other context about the problem here.\n\nCould you just share the book in Github repo? ", "closed_by": {"login": "jaepil-choi", "id": 25889304, "node_id": "MDQ6VXNlcjI1ODg5MzA0", "avatar_url": "https://avatars.githubusercontent.com/u/25889304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaepil-choi", "html_url": "https://github.com/jaepil-choi", "followers_url": "https://api.github.com/users/jaepil-choi/followers", "following_url": "https://api.github.com/users/jaepil-choi/following{/other_user}", "gists_url": "https://api.github.com/users/jaepil-choi/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaepil-choi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaepil-choi/subscriptions", "organizations_url": "https://api.github.com/users/jaepil-choi/orgs", "repos_url": "https://api.github.com/users/jaepil-choi/repos", "events_url": "https://api.github.com/users/jaepil-choi/events{/privacy}", "received_events_url": "https://api.github.com/users/jaepil-choi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10993/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10978", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10978/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10978/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10978/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10978", "id": 2884425586, "node_id": "I_kwDOBiS_IM6r7Ndy", "number": 10978, "title": "Incorrect description in the HTML report for the ExpectTableColumnsToMatchSet rule (GX v1.*)", "user": {"login": "nameless-t", "id": 194818872, "node_id": "U_kgDOC5yzOA", "avatar_url": "https://avatars.githubusercontent.com/u/194818872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nameless-t", "html_url": "https://github.com/nameless-t", "followers_url": "https://api.github.com/users/nameless-t/followers", "following_url": "https://api.github.com/users/nameless-t/following{/other_user}", "gists_url": "https://api.github.com/users/nameless-t/gists{/gist_id}", "starred_url": "https://api.github.com/users/nameless-t/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nameless-t/subscriptions", "organizations_url": "https://api.github.com/users/nameless-t/orgs", "repos_url": "https://api.github.com/users/nameless-t/repos", "events_url": "https://api.github.com/users/nameless-t/events{/privacy}", "received_events_url": "https://api.github.com/users/nameless-t/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-02-27T12:47:00Z", "updated_at": "2025-02-27T12:48:37Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When you use the ExpectTableColumnsToMatchSet expectation rule without any optional argument, the default behavior is to match exactly this set. However, the description in the HTML report in the new version is incorrect.\n\n**GX v1.3.*** Incorrect\n![Image](https://github.com/user-attachments/assets/8a56f1ac-6da3-43a3-8406-549953348103)\n\n\n**GX v0.18.*** Correct\n\n![Image](https://github.com/user-attachments/assets/285084c1-fdb6-42d3-b135-b1e575f34e2a)\n\n\n\n**Environment (please complete the following information):**\n\n- Great Expectations Version: [e.g. 1.3.5]\n- Data Source: Spark\n- Cloud environment: Databricks", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10978/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10978/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10977", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10977/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10977/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10977/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10977", "id": 2883372250, "node_id": "I_kwDOBiS_IM6r3MTa", "number": 10977, "title": "File Context can't be created with `context_root_dir`", "user": {"login": "CrossNox", "id": 15719718, "node_id": "MDQ6VXNlcjE1NzE5NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/15719718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CrossNox", "html_url": "https://github.com/CrossNox", "followers_url": "https://api.github.com/users/CrossNox/followers", "following_url": "https://api.github.com/users/CrossNox/following{/other_user}", "gists_url": "https://api.github.com/users/CrossNox/gists{/gist_id}", "starred_url": "https://api.github.com/users/CrossNox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CrossNox/subscriptions", "organizations_url": "https://api.github.com/users/CrossNox/orgs", "repos_url": "https://api.github.com/users/CrossNox/repos", "events_url": "https://api.github.com/users/CrossNox/events{/privacy}", "received_events_url": "https://api.github.com/users/CrossNox/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2025-02-27T04:13:24Z", "updated_at": "2025-04-09T14:54:48Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "```\ncontext = gx.get_context(\n        context_root_dir=context_root_dir, project_root_dir=None, mode=\"file\"\n)\n```\n\nResults in\n\n```\nTypeError: 'project_root_dir' and 'context_root_dir' are conflicting args; please only provide one\n```\n\n\nGX version: 1.3.7\n\nI think this is due to https://github.com/great-expectations/great_expectations/blob/f9dba6f7c5409b0f25374dac028000ebabedca48/great_expectations/data_context/data_context/context_factory.py#L184", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10977/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10977/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10958", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10958/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10958/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10958/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10958", "id": 2869809739, "node_id": "I_kwDOBiS_IM6rDdJL", "number": 10958, "title": "Why is `validation_definition_store_name` not part of the `great_expectations.yaml` spec?", "user": {"login": "CrossNox", "id": 15719718, "node_id": "MDQ6VXNlcjE1NzE5NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/15719718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CrossNox", "html_url": "https://github.com/CrossNox", "followers_url": "https://api.github.com/users/CrossNox/followers", "following_url": "https://api.github.com/users/CrossNox/following{/other_user}", "gists_url": "https://api.github.com/users/CrossNox/gists{/gist_id}", "starred_url": "https://api.github.com/users/CrossNox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CrossNox/subscriptions", "organizations_url": "https://api.github.com/users/CrossNox/orgs", "repos_url": "https://api.github.com/users/CrossNox/repos", "events_url": "https://api.github.com/users/CrossNox/events{/privacy}", "received_events_url": "https://api.github.com/users/CrossNox/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-02-21T19:08:18Z", "updated_at": "2025-02-27T01:51:29Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm trying to set up GX in such a way that I can use a single `yaml` to run both `production` and `development` environments.\n\nOn `config_variables` I have `env` for this purpose. Then, e.g. `expectations_store_name` could be `${env}_expectations_store`, with `dev_expectations_store` and `prd_expectations_store` configured as Filesystem/S3 backends, respectively. The `S3` backend could be populated on CI.\n\nBut now, what should I do with the `validation_definition_store` ?\n\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10958/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10958/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10957", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10957/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10957/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10957/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10957", "id": 2866613721, "node_id": "I_kwDOBiS_IM6q3Q3Z", "number": 10957, "title": "[BUG] row_condition", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2025-02-20T16:05:29Z", "updated_at": "2025-08-05T13:16:46Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nHi! I have a problem when trying to use **row_condition**. No matter how I write the condition I always get an error.\n\nI'm using GX 1.3.3 in Databricks (14.3 LTS (includes Apache Spark 3.5.0, Scala 2.12)) with Python 3.10.12\n\nThe data asset is a simple pyspark DF:\n`df = spark.createDataFrame([(\"accepted\", \"-1\", 1), (\"rejected\", \"-1\", 2), (\"new\", \"-1\", 3), (\"dismissed\", \"-1\", 4), (\"canceled\", \"1\", 5)], [\"status_code\", \"offer_id\", \"integration_id\"])`\n\nParameters:\n```\nimport os\nos.environ[\"GX_ANALYTICS_ENABLED\"] = \"false\"\nfrom json import loads\nimport great_expectations as ge\nimport importlib\n\ncatalog = \"dbw_gt_data_uat_lake_catalog\"\nschema  = \"js_gold\"\ntable_name = \"gld_fact_jobseeker_offer\"\ncolumn = \"status_code\"\ntable_key_list = [\"integration_id\"] # List of PK columns\nexpectation_name = \"ExpectColumnValuesToBeInSet\"\nargs = {\"column\": \"status_code\", \"value_set\": [\"accepted\", \"canceled\", \"new\", \"rejected\", \"dismissed\"]}\ncondition_parser = \"spark\"\nrow_condition = 'col(\"integration_id\")==1'\nargs.update({\"row_condition\": row_condition}, **{\"condition_parser\": condition_parser})\n```\n\nThe functions I'm using to create the context and test the expectation:\n```\ndef my_import(name: str, arguments: dict) -> object:\n    \"\"\"Import a specific Expectation Class from GX Expectation module\"\"\"\n    module = importlib.import_module(\"great_expectations.expectations\")\n    return getattr(module, name)(**arguments)\n```\n```\ndef test_expectation(df = None):\n    context = ge.get_context()\n    data_name = f\"{catalog}.{schema}.{table_name}\"\n    data_source = context.data_sources.add_spark(name=data_name)\n    data_asset = data_source.add_dataframe_asset(name=table_name)\n    \n    if not df:\n        batch_parameters = {\n            \"dataframe\": \n                spark.read.table(f\"{catalog}.{schema}.{table_name}\").limit(100)\n            }\n    else:\n        batch_parameters = {\"dataframe\": df}\n    \n    expectation_suite = context.suites.add(ge.core.expectation_suite.ExpectationSuite(name=f\"s-{data_name}\"))\n    \n    # Get the expectation class\n    gx_expectation = my_import(expectation_name, args)\n    expectation_suite.add_expectation(gx_expectation)\n        \n    batch_definition = data_asset.add_batch_definition_whole_dataframe(\n        name=\"batch_definition\"\n    )\n    validation_definition = context.validation_definitions.add(\n            ge.core.validation_definition.ValidationDefinition(\n                name=f\"vd-{data_name}\",\n                data=batch_definition,\n                suite=expectation_suite,\n            )\n    )\n    checkpoint = context.checkpoints.add(\n        ge.Checkpoint(\n            name=f\"cp-{data_name}\",\n            validation_definitions=[validation_definition],\n            result_format={\n                \"result_format\": \"COMPLETE\",\n                \"unexpected_index_column_names\": table_key_list,\n                \"partial_unexpected_count\": 0,\n                \"exclude_unexpected_values\": False,\n                \"include_unexpected_rows\": True,\n                \"return_unexpected_index_query\": False,\n            },\n        )\n    )\n    return checkpoint.run(batch_parameters=batch_parameters)\n\ntest_expectation(df)\n```\n\nThe exception message is: \n\n> \"exception_message\": \"[UNRESOLVED_ROUTINE] Cannot resolve function col on search path [system.builtin, system.session, dbw_gt_data_uat_lake_catalog.default]. SQLSTATE: 42883; line 1 pos 0\\n\\nJVM stack...\"", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10957/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10957/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10948", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10948/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10948/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10948/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10948", "id": 2859407959, "node_id": "I_kwDOBiS_IM6qbxpX", "number": 10948, "title": "GX Core is unusable on ORACLE using SQLAlchemy - Generates invalid SQL (Adds FROM DUAL to query)", "user": {"login": "BrentEaston", "id": 1622667, "node_id": "MDQ6VXNlcjE2MjI2Njc=", "avatar_url": "https://avatars.githubusercontent.com/u/1622667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BrentEaston", "html_url": "https://github.com/BrentEaston", "followers_url": "https://api.github.com/users/BrentEaston/followers", "following_url": "https://api.github.com/users/BrentEaston/following{/other_user}", "gists_url": "https://api.github.com/users/BrentEaston/gists{/gist_id}", "starred_url": "https://api.github.com/users/BrentEaston/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BrentEaston/subscriptions", "organizations_url": "https://api.github.com/users/BrentEaston/orgs", "repos_url": "https://api.github.com/users/BrentEaston/repos", "events_url": "https://api.github.com/users/BrentEaston/events{/privacy}", "received_events_url": "https://api.github.com/users/BrentEaston/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-02-18T05:41:19Z", "updated_at": "2025-07-29T20:01:03Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "[test.py.txt](https://github.com/user-attachments/files/18839583/test.py.txt)\n\n**Problem Description**\nWe currently use an old version (15) of Great Expectations against an Oracle database, using SQLAlchemy. This has worked for several years. I am trying to convert our existing installation to use the latest GX Core and SQLAlchemy versions.  A simple attempt to validate an Expectation against a small batch of data fails because GX Core is generating invalid SQL trying to access Oracle. \n\nThe SQL I am using is `select 1 from spriden where rownum < 10`\n\nThe 2 SQLs being generated by GX Core are: \n\n`SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1`  \n`SELECT count(*) AS \\\"table.row_count\\\" \\nFROM (SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1) anon_1`\n\nwhich are both rubbish. The `FROM DUAL` is just not needed.\n\nI have tried both the oracledb and cx_oracle packages with the same result.\n\n**To Reproduce**\nRun the attached test.py.txt program, replace the table name 'spriden' with any other table name that exists within your environment\n\n\n\nThe output from this program is:\n\n`--- Data Source ---\nconnection_string: oracle+oracledb://${ODIN_ORACLE_USER}:${ODIN_ORACLE_PASSWORD}@${ODIN_ORACLE_HOST_ODS}:${ODIN_ORACLE_PORT_ODS}?service_name=${ODIN_ORACLE_DATABASE_ODS}\nid: a8801ad2-73d2-4d20-958a-693988ed96d0\nname: ODST\ntype: sql\n\n--- Data Source Asset List ---\n[QueryAsset(name='T002', type='query', id=UUID('d95aa19b-48a2-4284-8063-b7a1908da545'), order_by=[], batch_metadata={}, batch_definitions=[], query='select 1 as error from spriden where rownum < 10')]\n--- Batch Columns ---\nCalculating Metrics:  10%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588                                                                                                                     | 1/10 [00:00<00:01,  8.67it/s]\n--- Results ---\n{\n  \"success\": false,\n  \"expectation_config\": {\n    \"type\": \"expect_column_values_to_be_null\",\n    \"kwargs\": {\n      \"column\": \"error\",\n      \"batch_id\": \"ODST-T002\"\n    },\n    \"meta\": {}\n  },\n  \"result\": {},\n  \"meta\": {},\n  \"exception_info\": {\n    \"MetricConfigurationID(metric_name='table.column_types', metric_domain_kwargs_id='a351bbf72b281f0b7a62dbbf3599ce5c', metric_value_kwargs_id='include_nested=True')\": {\n      \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1964, in _exec_single_context\\n    self.dialect.do_execute(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py\\\", line 942, in do_execute\\n    cursor.execute(statement, parameters)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/oracledb/cursor.py\\\", line 710, in execute\\n    impl.execute(self)\\n  File \\\"src/oracledb/impl/thin/cursor.pyx\\\", line 196, in oracledb.thin_impl.ThinCursorImpl.execute\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 439, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 440, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 432, in oracledb.thin_impl.Protocol._process_message\\n  File \\\"src/oracledb/impl/thin/messages.pyx\\\", line 74, in oracledb.thin_impl.Message._check_and_raise_exception\\noracledb.exceptions.DatabaseError: ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 533, in _process_direct_and_bundled_metric_computation_configurations\\n    metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/expectations/metrics/metric_provider.py\\\", line 60, in inner_func\\n    return metric_fn(*args, **kwargs)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/expectations/metrics/table_metrics/table_column_types.py\\\", line 70, in _sqlalchemy\\n    return _get_sqlalchemy_column_metadata(execution_engine, batch_data)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/expectations/metrics/table_metrics/table_column_types.py\\\", line 107, in _get_sqlalchemy_column_metadata\\n    return get_sqlalchemy_column_metadata(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/expectations/metrics/util.py\\\", line 410, in get_sqlalchemy_column_metadata\\n    columns = column_reflection_fallback(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/expectations/metrics/util.py\\\", line 661, in column_reflection_fallback\\n    result_object = connection.execute(query)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1416, in execute\\n    return meth(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py\\\", line 516, in _execute_on_connection\\n    return connection._execute_clauseelement(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1638, in _execute_clauseelement\\n    ret = self._execute_context(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1843, in _execute_context\\n    return self._exec_single_context(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1983, in _exec_single_context\\n    self._handle_dbapi_exception(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 2352, in _handle_dbapi_exception\\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1964, in _exec_single_context\\n    self.dialect.do_execute(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py\\\", line 942, in do_execute\\n    cursor.execute(statement, parameters)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/oracledb/cursor.py\\\", line 710, in execute\\n    impl.execute(self)\\n  File \\\"src/oracledb/impl/thin/cursor.pyx\\\", line 196, in oracledb.thin_impl.ThinCursorImpl.execute\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 439, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 440, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 432, in oracledb.thin_impl.Protocol._process_message\\n  File \\\"src/oracledb/impl/thin/messages.pyx\\\", line 74, in oracledb.thin_impl.Message._check_and_raise_exception\\nsqlalchemy.exc.DatabaseError: (oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n[SQL: SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1]\\n(Background on this error at: https://sqlalche.me/e/20/4xp6)\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/validator/validation_graph.py\\\", line 278, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 280, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 538, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: (oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n[SQL: SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1]\\n(Background on this error at: https://sqlalche.me/e/20/4xp6)\\n\",\n      \"exception_message\": \"(oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n[SQL: SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1]\\n(Background on this error at: https://sqlalche.me/e/20/4xp6)\",\n      \"raised_exception\": true\n    },\n    \"MetricConfigurationID(metric_name='table.row_count', metric_domain_kwargs_id='a351bbf72b281f0b7a62dbbf3599ce5c', metric_value_kwargs_id=())\": {\n      \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1964, in _exec_single_context\\n    self.dialect.do_execute(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py\\\", line 942, in do_execute\\n    cursor.execute(statement, parameters)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/oracledb/cursor.py\\\", line 710, in execute\\n    impl.execute(self)\\n  File \\\"src/oracledb/impl/thin/cursor.pyx\\\", line 196, in oracledb.thin_impl.ThinCursorImpl.execute\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 439, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 440, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 432, in oracledb.thin_impl.Protocol._process_message\\n  File \\\"src/oracledb/impl/thin/messages.pyx\\\", line 74, in oracledb.thin_impl.Message._check_and_raise_exception\\noracledb.exceptions.DatabaseError: ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 546, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 983, in resolve_metric_bundle\\n    res = self.execute_query(sa_query_object).fetchall()  # type: ignore[assignment] # FIXME CoP\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 1274, in execute_query\\n    result = connection.execute(query)  # type: ignore[arg-type] # FIXME:Selectable overly broad\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1416, in execute\\n    return meth(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py\\\", line 516, in _execute_on_connection\\n    return connection._execute_clauseelement(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1638, in _execute_clauseelement\\n    ret = self._execute_context(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1843, in _execute_context\\n    return self._exec_single_context(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1983, in _exec_single_context\\n    self._handle_dbapi_exception(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 2352, in _handle_dbapi_exception\\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py\\\", line 1964, in _exec_single_context\\n    self.dialect.do_execute(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py\\\", line 942, in do_execute\\n    cursor.execute(statement, parameters)\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/oracledb/cursor.py\\\", line 710, in execute\\n    impl.execute(self)\\n  File \\\"src/oracledb/impl/thin/cursor.pyx\\\", line 196, in oracledb.thin_impl.ThinCursorImpl.execute\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 439, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 440, in oracledb.thin_impl.Protocol._process_single_message\\n  File \\\"src/oracledb/impl/thin/protocol.pyx\\\", line 432, in oracledb.thin_impl.Protocol._process_message\\n  File \\\"src/oracledb/impl/thin/messages.pyx\\\", line 74, in oracledb.thin_impl.Message._check_and_raise_exception\\nsqlalchemy.exc.DatabaseError: (oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n[SQL: SELECT count(*) AS \\\"table.row_count\\\" \\nFROM (SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1) anon_1]\\n(Background on this error at: https://sqlalche.me/e/20/4xp6)\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/validator/validation_graph.py\\\", line 278, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 280, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/u01/app/odin/gxenv/lib64/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 550, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: (oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n[SQL: SELECT count(*) AS \\\"table.row_count\\\" \\nFROM (SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1) anon_1]\\n(Background on this error at: https://sqlalche.me/e/20/4xp6)\\n\",\n      \"exception_message\": \"(oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\\nHelp: https://docs.oracle.com/error-help/db/ora-00907/\\n[SQL: SELECT count(*) AS \\\"table.row_count\\\" \\nFROM (SELECT * \\nFROM (SELECT 1 as error from spriden where rownum < 10 FROM DUAL) anon_1 \\nWHERE 1 = 1) anon_1]\\n(Background on this error at: https://sqlalche.me/e/20/4xp6)\",\n      \"raised_exception\": true\n    }\n  }\n}`\n\n**Expected behavior**\nThat the call to batch.validate() will not fall over with an exception due to GX Core running an invalid SQL.\n\n** Environment **\n - Linux OS\n - GX Core version 1.3.6\n - oracledb version 2.5.1\n - cx-oracle version 8.3.0\n - Oracle version 19c Enterprise\n\n**Additional context**\nThis problem is not present in Great Expectations version 0.15.43\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10948/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10948/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10947", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10947/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10947/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10947/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10947", "id": 2857011049, "node_id": "I_kwDOBiS_IM6qSodp", "number": 10947, "title": "ExpectColumnValueLengthsToBeBetween is raising exception in DBR 15.4 LTS", "user": {"login": "suchintakp5", "id": 12035308, "node_id": "MDQ6VXNlcjEyMDM1MzA4", "avatar_url": "https://avatars.githubusercontent.com/u/12035308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suchintakp5", "html_url": "https://github.com/suchintakp5", "followers_url": "https://api.github.com/users/suchintakp5/followers", "following_url": "https://api.github.com/users/suchintakp5/following{/other_user}", "gists_url": "https://api.github.com/users/suchintakp5/gists{/gist_id}", "starred_url": "https://api.github.com/users/suchintakp5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suchintakp5/subscriptions", "organizations_url": "https://api.github.com/users/suchintakp5/orgs", "repos_url": "https://api.github.com/users/suchintakp5/repos", "events_url": "https://api.github.com/users/suchintakp5/events{/privacy}", "received_events_url": "https://api.github.com/users/suchintakp5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-02-17T07:31:21Z", "updated_at": "2025-03-18T05:58:57Z", "closed_at": "2025-03-12T13:37:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nExpectColumnValueLengthsToBeBetween is failing and raising exception in DBR 15.4 LTS and Unity Catalog enabled cluster.\n**To Reproduce**\n```\nimport great_expectations as gx\nimport great_expectations.expectations as gxe\n\n# Retrieve your Data Context\ndata_context = gx.get_context(mode=\"ephemeral\")\n# Define the Data Source name\ndata_source_name = \"source_system_name_spark_dataframe\"\n# Add the Data Source to the Data Context\ndata_source = data_context.data_sources.add_spark(name=data_source_name)\n# Define the Data Asset name\ndata_asset_name = \"dataset_name\"\n# Add a Data Asset to the Data Source\ndata_asset = data_source.add_dataframe_asset(name=data_asset_name)\n# Define the Batch Definition name\nbatch_definition_name = \"dataset_batch_definition\"\n\n# Add a Batch Definition to the Data Asset\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\n    batch_definition_name\n)\n\ndf = <A pyspark dataframe>\n\nbatch_parameters = {\"dataframe\": df}\n# Get the dataframe as a Batch\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\n\ntest = gxe.ExpectColumnValueLengthsToBeBetween(column=<column_name>, min_value=1, max_value=5, catch_exceptions=True)\n# Test the Expectation\nvalidation_results = batch.validate(test, result_format=\"COMPLETE\")\n```\n\n**Expected behavior**\nNo exception should be raised\n\n**Environment (please complete the following information):**\n - Operating System: [Azure Databricks cluster with DBR 15.4 LTS and Unity Catalog enabled]\n - Great Expectations Version: [1.3.6]\n - Data Source: [Pyspark dataframe]\n - Cloud environment: [Azure Databricks]\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10947/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10936", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10936/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10936/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10936/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10936", "id": 2850432986, "node_id": "I_kwDOBiS_IM6p5ifa", "number": 10936, "title": "Unable to retrieve validation definition name='XXX' id='XXX' from store (type=value_error)", "user": {"login": "sarvesh1911", "id": 58596734, "node_id": "MDQ6VXNlcjU4NTk2NzM0", "avatar_url": "https://avatars.githubusercontent.com/u/58596734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarvesh1911", "html_url": "https://github.com/sarvesh1911", "followers_url": "https://api.github.com/users/sarvesh1911/followers", "following_url": "https://api.github.com/users/sarvesh1911/following{/other_user}", "gists_url": "https://api.github.com/users/sarvesh1911/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarvesh1911/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarvesh1911/subscriptions", "organizations_url": "https://api.github.com/users/sarvesh1911/orgs", "repos_url": "https://api.github.com/users/sarvesh1911/repos", "events_url": "https://api.github.com/users/sarvesh1911/events{/privacy}", "received_events_url": "https://api.github.com/users/sarvesh1911/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-02-13T09:11:56Z", "updated_at": "2025-02-25T10:06:22Z", "closed_at": "2025-02-24T15:28:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nCannot convert an ephemeral data context to a file context\n(This is the duplicate to bug - https://github.com/great-expectations/great_expectations/issues/10271 which was closed)\n\n**To Reproduce**\n\ngreat_expectations.yml\n\n```yaml\n\n# Welcome to Great Expectations! Always know what to expect from your data.\n#\n# Here you can define datasources, batch kwargs generators, integrations and\n# more. This file is intended to be committed to your repo. For help with\n# configuration please:\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\n#   - Join our slack channel: http://greatexpectations.io/slack\n\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\n# It is auto-generated and usually does not need to be changed.\nconfig_version: 4\n\n# This config file supports variable substitution which enables: 1) keeping\n# secrets out of source control & 2) environment-based configuration changes\n# such as staging vs prod.\n#\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\n# to replace the value of `my_key` with the value from an environment\n# variable `my_value` or a corresponding key read from this config file,\n# which is defined through the `config_variables_file_path`.\n# Environment variables take precedence over variables defined here.\n#\n# Substitution values defined here can be a simple (non-nested) value,\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\n#\n#\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\n\n\nconfig_variables_file_path: uncommitted/config_variables.yml\n\n# The plugins_directory will be added to your python path for custom modules\n# used to override and extend Great Expectations.\nplugins_directory: plugins/\n\nstores:\n# Stores are configurable places to store things like Expectations, Validations\n# Data Docs, and more. These are for advanced users only - most users can simply\n# leave this section alone.\n  expectations_store:\n    class_name: ExpectationsStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: expectations/\n\n  validation_results_store:\n    class_name: ValidationResultsStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: uncommitted/validations/\n\n  checkpoint_store:\n    class_name: CheckpointStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      suppress_store_backend_id: true\n      base_directory: checkpoints/\n\n  validation_definition_store:\n    class_name: ValidationDefinitionStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: validation_definitions/\n\nexpectations_store_name: expectations_store\nvalidation_results_store_name: validation_results_store\ncheckpoint_store_name: checkpoint_store\n\ndata_docs_sites:\n  # Data Docs make it simple to visualize data quality in your project. These\n  # include Expectations, Validations & Profiles. The are built for all\n  # Datasources from JSON artifacts in the local repo including validations &\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\n  local_site:\n    class_name: SiteBuilder\n    # set to false to hide how-to buttons in Data Docs\n    show_how_to_buttons: true\n    store_backend:\n        class_name: TupleFilesystemStoreBackend\n        base_directory: uncommitted/data_docs/local_site/\n    site_index_builder:\n        class_name: DefaultSiteIndexBuilder\n\nanalytics_enabled: True \n```\n\n\nThe code is a copy of the tutorial available in the GX Core docs [here](https://docs.greatexpectations.io/docs/core/introduction/try_gx#validate-data-in-a-sql-table), with context.convert_to_file_context() appended to the end.\n\n```python\n# Import required modules from GX library.\nimport great_expectations as gx\n\n# Create Data Context.\ncontext = gx.get_context()\n\n# Connect to data.\n# Create Data Source, Data Asset, Batch Definition, and Batch.\nconnection_string = \"postgresql+psycopg2://try_gx:try_gx@postgres.workshops.greatexpectations.io/gx_example_db\"\n\ndata_source = context.data_sources.add_postgres(\n    \"postgres db\", connection_string=connection_string\n)\ndata_asset = data_source.add_table_asset(name=\"taxi data\", table_name=\"nyc_taxi_data\")\n\nbatch_definition = data_asset.add_batch_definition_whole_table(\"batch definition\")\nbatch = batch_definition.get_batch()\n\n# Create Expectation Suite containing two Expectations.\nsuite = context.suites.add(\n    gx.core.expectation_suite.ExpectationSuite(name=\"expectations\")\n)\nsuite.add_expectation(\n    gx.expectations.ExpectColumnValuesToBeBetween(\n        column=\"passenger_count\", min_value=1, max_value=6\n    )\n)\nsuite.add_expectation(\n    gx.expectations.ExpectColumnValuesToBeBetween(column=\"fare_amount\", min_value=0)\n)\n\n# Create Validation Definition.\nvalidation_definition = context.validation_definitions.add(\n    gx.core.validation_definition.ValidationDefinition(\n        name=\"validation definition\",\n        data=batch_definition,\n        suite=suite,\n    )\n)\n\n# Create Checkpoint, run Checkpoint, and capture result.\ncheckpoint = context.checkpoints.add(\n    gx.checkpoint.checkpoint.Checkpoint(\n        name=\"checkpoint\", validation_definitions=[validation_definition]\n    )\n)\n\ncheckpoint_result = checkpoint.run()\nprint(checkpoint_result.describe())\n\ncontext.convert_to_file_context()\n```\n\n**Traceback**\n\n```\nTraceback (most recent call last):\n  File \"/Users/sarvesh@backbase.com/Documents/PDF_Statement_Extraction/PDF_Statement_Extraction/great_expectation_test/great_expectations_test.py\", line 53, in <module>\n    context.convert_to_file_context()\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/data_context/ephemeral_data_context.py\", line 95, in convert_to_file_context\n    return migrator.migrate()\n           ^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/migrator/file_migrator.py\", line 63, in migrate\n    self._migrate_primary_stores(\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/migrator/file_migrator.py\", line 89, in _migrate_primary_stores\n    self._migrate_store(\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/migrator/file_migrator.py\", line 110, in _migrate_store\n    source_obj = source_store.get(key)\n                 ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/store/store.py\", line 246, in get\n    return self.deserialize(value)\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/store/checkpoint_store.py\", line 96, in deserialize\n    return Checkpoint.parse_raw(value)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/pydantic/v1/main.py\", line 549, in parse_raw\n    return cls.parse_obj(obj)\n           ^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/pydantic/v1/main.py\", line 526, in parse_obj\n    return cls(**obj)\n           ^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/pydantic/v1/main.py\", line 341, in __init__\n    raise validation_error\npydantic.v1.error_wrappers.ValidationError: 1 validation error for Checkpoint\nvalidation_definitions\n  Unable to retrieve validation definition name='validation definition' id='7d48ca95-0f7a-4d91-8a64-c0b6e740bdbf' from store (type=value_error)\n```\n\n**Saving the context right after fetching the context.**\n\nTried saving the context right after fetching the context. The File Context saves successfully , but when trying to add GX components to that particular context, it fails with errors. Example below -\n\n```python\n\n\n# Import required modules from GX library.\nimport great_expectations as gx\n\n\n# Create Data Context.\ncontext = gx.get_context()\n\ncontext.convert_to_file_context()\n\n# Connect to data.\n# Create Data Source, Data Asset, Batch Definition, and Batch.\nconnection_string = \"postgresql+psycopg2://try_gx:try_gx@postgres.workshops.greatexpectations.io/gx_example_db\"\n\ndata_source = context.data_sources.add_postgres(\n    \"postgres db\", connection_string=connection_string\n)\ndata_asset = data_source.add_table_asset(name=\"taxi data\", table_name=\"nyc_taxi_data\")\n\nbatch_definition = data_asset.add_batch_definition_whole_table(\"batch definition\")\nbatch = batch_definition.get_batch()\n\n# Create Expectation Suite containing two Expectations.\nsuite = context.suites.add(\n    gx.core.expectation_suite.ExpectationSuite(name=\"expectations\")\n)\nsuite.add_expectation(\n    gx.expectations.ExpectColumnValuesToBeBetween(\n        column=\"passenger_count\", min_value=1, max_value=6\n    )\n)\nsuite.add_expectation(\n    gx.expectations.ExpectColumnValuesToBeBetween(column=\"fare_amount\", min_value=0)\n)\n\n# Create Validation Definition.\nvalidation_definition = context.validation_definitions.add(\n    gx.core.validation_definition.ValidationDefinition(\n        name=\"validation definition\",\n        data=batch_definition,\n        suite=suite,\n    )\n)\n\n# Create Checkpoint, run Checkpoint, and capture result.\ncheckpoint = context.checkpoints.add(\n    gx.checkpoint.checkpoint.Checkpoint(\n        name=\"checkpoint\", validation_definitions=[validation_definition]\n    )\n)\n\ncheckpoint_result = checkpoint.run()\nprint(checkpoint_result.describe())\n\n```\n\n**Traceback**\n\n```\nSuccessfully migrated to FileDataContext!\nTraceback (most recent call last):\n  File \"/Users/sarvesh@backbase.com/Documents/PDF_Statement_Extraction/PDF_Statement_Extraction/great_expectation_test/great_expectations_test.py\", line 37, in <module>\n    validation_definition = context.validation_definitions.add(\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/core/factory/validation_definition_factory.py\", line 48, in add\n    self._store.add(key=key, value=validation)\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/store/store.py\", line 299, in add\n    return self._add(key=key, value=value, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/store/validation_definition_store.py\", line 100, in _add\n    return super()._add(key=key, value=value, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/store/store.py\", line 303, in _add\n    output = self._store_backend.add(self.key_to_tuple(key), self.serialize(value), **kwargs)\n                                                             ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/data_context/store/validation_definition_store.py\", line 77, in serialize\n    output = value.json(models_as_dict=False, indent=2, sort_keys=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/pydantic/v1/main.py\", line 504, in json\n    return self.__config__.json_dumps(data, default=encoder, **dumps_kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/json/__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/json/encoder.py\", line 202, in encode\n    chunks = list(chunks)\n             ^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/json/encoder.py\", line 432, in _iterencode\n    yield from _iterencode_dict(o, _current_indent_level)\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/json/encoder.py\", line 406, in _iterencode_dict\n    yield from chunks\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/json/encoder.py\", line 439, in _iterencode\n    o = _default(o)\n        ^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/pydantic/v1/json.py\", line 101, in custom_pydantic_encoder\n    return encoder(obj)\n           ^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/core/validation_definition.py\", line 107, in <lambda>\n    BatchDefinition: lambda b: b.identifier_bundle(),\n                               ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/core/batch_definition.py\", line 170, in identifier_bundle\n    diagnostics.raise_for_error()\n  File \"/Applications/anaconda3/envs/great_expectation_test/lib/python3.11/site-packages/great_expectations/core/freshness_diagnostics.py\", line 49, in raise_for_error\n    raise self.raise_for_error_class(errors=self.errors)\ngreat_expectations.exceptions.resource_freshness.ResourceFreshnessAggregateError: \n\tCould not find datasource 'postgres db'\n\nProcess finished with exit code 1\n```\n\n**Expected behavior**\nSuccessfully export ephemeral context to file with all GX components.\n\n**Environment (please complete the following information):**\n\nOperating System: MacOS\nGreat Expectations Version: 1.3.5\nData Source: PostgreSQL\nCloud environment: NA\n\n**Additional context**\n\n<img width=\"307\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1b409945-2f3a-49a9-801c-8eb6c2b2ae1f\" />\n\n\n\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10936/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10936/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10926", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10926/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10926/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10926/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10926", "id": 2845672091, "node_id": "I_kwDOBiS_IM6pnYKb", "number": 10926, "title": "SQL execution Exception executing validations, using SQL and Pandas data sources: \"Duplicated field name in view schema: column_values.nonnull.unexpected_count\"", "user": {"login": "bluinchiostro", "id": 99811977, "node_id": "U_kgDOBfMCiQ", "avatar_url": "https://avatars.githubusercontent.com/u/99811977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluinchiostro", "html_url": "https://github.com/bluinchiostro", "followers_url": "https://api.github.com/users/bluinchiostro/followers", "following_url": "https://api.github.com/users/bluinchiostro/following{/other_user}", "gists_url": "https://api.github.com/users/bluinchiostro/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluinchiostro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluinchiostro/subscriptions", "organizations_url": "https://api.github.com/users/bluinchiostro/orgs", "repos_url": "https://api.github.com/users/bluinchiostro/repos", "events_url": "https://api.github.com/users/bluinchiostro/events{/privacy}", "received_events_url": "https://api.github.com/users/bluinchiostro/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-02-11T15:09:08Z", "updated_at": "2025-04-28T07:39:48Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Bug description**\nSQL execution Exception executing validations, using SQL and Pandas data sources.\n\nI created a File Data Context, connected to SQL data, filesystem data and Pandas Dataframes. I defined my expectation suite, created a validation definition and run it. While executing\n\n`validation_results = validation_definition.run()` with SQL and Pandas datasource, I'm facing with this error:\n\n```\nCalculating Metrics:  86%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258c | 24/28 [00:01<00:00, 20.39it/s]An SQL execution Exception occurred.  OperationalError: \"(psycopg2.OperationalError) **Duplicated field name in view schema: column_values.nonnull.unexpected_count**\nDETAIL:  java.sql.SQLException: Duplicated field name in view schema: column_values.nonnull.unexpected_count\n\n[SQL: SELECT sum(CASE WHEN (field1 IS NULL) THEN %(param_1)s ELSE %(param_2)s END) AS \"column_values.nonnull.unexpected_count\", sum(CASE WHEN (field2 IS NULL) THEN %(param_3)s ELSE %(param_4)s END) AS \"column_values.nonnull.unexpected_count\", sum(CASE WHEN (field3 IS NULL) THEN %(param_5)s ELSE %(param_6)s END) AS \"column_values.nonnull.unexpected_count\", sum(CASE WHEN (field4 IS NULL) THEN %(param_7)s ELSE %(param_8)s END) AS \"column_values.nonnull.unexpected_count\" \nFROM (SELECT * \nFROM (SELECT * from my_table_data) AS anon_1 \nWHERE true) AS anon_1]\n[parameters: {'param_1': 1, 'param_2': 0, 'param_3': 1, 'param_4': 0, 'param_5': 1, 'param_6': 0, 'param_7': 1, 'param_8': 0}]\n(Background on this error at: https://sqlalche.me/e/14/e3q8)\".  Traceback: \"Traceback (most recent call last):\n  File \"d:\\Veronica\\Anaconda\\envs\\gxenv\\lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1900, in _execute_context\n    self.dialect.do_execute(\n  File \"d:\\Veronica\\Anaconda\\envs\\gxenv\\lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 736, in do_execute\n    cursor.execute(statement, parameters)\npsycopg2.OperationalError: Duplicated field name in view schema: column_values.nonnull.unexpected_count\nDETAIL:  java.sql.SQLException: Duplicated field name in view schema: column_values.nonnull.unexpected_count\n```\n\nThe dataframe hasn't duplicated field names.\n\n\n**To Reproduce**\n**_great_expectations.yml config:_**\n\n`config_version: 4.0`\n`config_variables_file_path: uncommitted/config_variables.yml`\n\n`plugins_directory: plugins/`\n\n`stores:`\n\n```\n  expectations_store:\n    class_name: ExpectationsStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: expectations/\n```\n\n```\n  validation_results_store:\n    class_name: ValidationResultsStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: uncommitted/validations/\n```\n\n```\n  checkpoint_store:\n    class_name: CheckpointStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      suppress_store_backend_id: true\n      base_directory: checkpoints/\n```\n\n```\n  validation_definition_store:\n    class_name: ValidationDefinitionStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: validation_definitions/\n```\n\n```\nexpectations_store_name: expectations_store\nvalidation_results_store_name: validation_results_store\ncheckpoint_store_name: checkpoint_store\n```\n\n`data_docs_sites:`\n\n ```\n local_site:\n    class_name: SiteBuilder\n    show_how_to_buttons: true\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: uncommitted/data_docs/local_site/\n    site_index_builder:\n      class_name: DefaultSiteIndexBuilder\nfluent_datasources:\n  my_ds:\n    type: sqlite\n    id: 0717e05c-7846-40ca-8b77-834fa9f74d0b\n    assets:\n      my_data_asset:\n        type: query\n        id: d891b4e5-104c-481d-836c-aa8e4395691c\n        batch_metadata: {}\n        batch_definitions:\n          FULL_TABLE:\n            id: 4814ef8f-38d8-4f04-ad89-d35f8f2a0fc1\n            partitioner:\n        query: SELECT * from mytable\n    connection_string: ${myconnectionstring}\n  employee_department:\n    type: pandas_filesystem\n    id: fb484e5a-d57f-444b-897f-2af191d8fe16\n    assets:\n      employee_department:\n        type: csv\n        id: 5ce9d256-4b94-4e02-b2b9-135765006abb\n    base_directory: D:\\Veronica\\PyCharmProjects\\gx_test_135\n  dq:\n    type: sqlite\n    id: acc48a7b-f5af-425c-9dfc-6d7685283c80\n    assets:\n      dq_asset:\n        type: query\n        id: 52c24fe5-1c44-4e60-a4f0-b356b7bb9c53\n        batch_metadata: {}\n        batch_definitions:\n          FULL_TABLE:\n            id: 51874da9-477a-4f79-92af-e8e472bd4c6a\n            partitioner:\n        query: SELECT * from asset_name = myasset\n    connection_string: sqlite:///D:\\Veronica\\PyCharmProjects\\ds-gxupgrade\\dq.db\n  dq_employee:\n    type: pandas_filesystem\n    id: ab12ba8f-61ea-45ef-a4b3-28ed985629c4\n    assets:\n      employee_department:\n        type: csv\n        id: 29da965b-7516-4f82-8ffe-ad4b2685cc12\n        batch_definitions:\n          employee_department:\n            id: 54381107-2029-4eca-801c-dbd09fe73353\n            partitioner:\n              regex: employee_department.csv$\n              param_names: []\n    base_directory: D:\\Veronica\\PyCharmProjects\\ds-gxupgrade\n my_data_pandas:\n    type: pandas\n    id: 2d65fc95-0040-4a5b-bfb9-433288e9918a\n    assets:\n      pandas_asset:\n        type: dataframe\n        id: 02b58697-1ca2-4b46-ad6b-b80bf6209ad2\n        batch_metadata: {}\n        batch_definitions:\n          cr_pandas_batch:\n            id: 9cd952be-a29d-4a90-a230-5ba015974584\n            partitioner:\nanalytics_enabled: false\ndata_context_id: e10c5839-a0de-4edc-a051-0c43c2a83f71\n```\n\n\n**My code:**\n\n```\nfrom sqlalchemy import *\nimport great_expectations as gx\nimport pandas as pd\n\ncontext = gx.get_context()\n\nengine = create_engine(context.config_variables['my_connection_string'])\n\n\ndataset = pd.read_sql_query(\"select * from my_table_data\", engine)\ndf = pd.DataFrame(dataset)\n```\n\n\"\"\"Retrieve the dataframe Batch Definition\"\"\"\n```\ndata_source_name = \"my_data_pandas\"\ndata_asset_name = \"pandas_asset\"\nbatch_definition_name = \"cr_pandas_batch\"\nbatch_definition = (\n    context.data_sources.get(data_source_name)\n    .get_asset(data_asset_name)\n    .get_batch_definition(batch_definition_name)\n)\n\nbatch_parameters = {\"dataframe\": df}\n\n\ndefinition_name = \"my_data_vd\"\nvalidation_definition = context.validation_definitions.get(definition_name)\n\n```\n\n\n\"\"\"Get the dataframe as a Batch\"\"\"\n```\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\n\nresult = validation_definition.run()\n```\n\n\n**Expected behavior**\nMy usecase requires the complete validation **with Pandas data source**. \n\n**Environment:**\n - Operating System: tested in Windows and Linux\n - Great Expectations Version: 1.3.5\n - Data Source: Pandas, SQL, filesystem\n - Cloud environment: none\n\n**Additional context**\nIt works if the expectation suite contains only one expectation (with the three different data sources); it works with multiple expectations inside the expectation suite only with filesystem data source. My usecase requires the complete validation of the dataset **with Pandas data source**, the other datasources have been added only for test. I checked the requirements.txt in this repository and my environment is alligned with this.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10926/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10924", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10924/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10924/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10924/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10924", "id": 2844064339, "node_id": "I_kwDOBiS_IM6phPpT", "number": 10924, "title": "ExpectTableRowCountToBeBetween can not be created or used with Runtime Parameters", "user": {"login": "eric-brady", "id": 18721804, "node_id": "MDQ6VXNlcjE4NzIxODA0", "avatar_url": "https://avatars.githubusercontent.com/u/18721804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric-brady", "html_url": "https://github.com/eric-brady", "followers_url": "https://api.github.com/users/eric-brady/followers", "following_url": "https://api.github.com/users/eric-brady/following{/other_user}", "gists_url": "https://api.github.com/users/eric-brady/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric-brady/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric-brady/subscriptions", "organizations_url": "https://api.github.com/users/eric-brady/orgs", "repos_url": "https://api.github.com/users/eric-brady/repos", "events_url": "https://api.github.com/users/eric-brady/events{/privacy}", "received_events_url": "https://api.github.com/users/eric-brady/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-02-11T01:24:55Z", "updated_at": "2025-02-14T04:44:20Z", "closed_at": "2025-02-14T04:44:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n`ExpectTableRowCountToBeBetween` now has a check to ensure that the `max_value` is `>=` the `min_value`. This check is performed both when a new `Expectation` is created as well as when an existing `Expectation` is executed. This validation comparison fails when the `Expectation` is configured with Runtime Parameters \n\n**To Reproduce**\nError can be reproduced in a quick ephemeral context\n```\nimport great_expectations as gx\n\ncontext = gx.get_context(mode=\"ephemeral\")\nsuite = gx.ExpectationSuite(name=\"test_suite\")\nsuite = context.suites.add(suite)\n\nsuite.add_expectation(\n    gx.expectations.ExpectTableRowCountToBeBetween(\n        min_value={\"$PARAMETER\": \"min_row_count\"},\n        max_value={\"$PARAMETER\": \"max_row_count\"},\n    )\n)\n```\n\nRaises a `ValidationError`: `'>' not supported between instances of 'dict' and 'dict' (type=type_error)`\n\n**Expected behavior**\nThe `Expectation` should be successfully created or executed.\n\n**Environment (please complete the following information):**\n - Operating System: \n - Great Expectations Version: >= 1.3.2\n - Data Source: \n - Cloud environment: \n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": {"login": "billdirks", "id": 12725591, "node_id": "MDQ6VXNlcjEyNzI1NTkx", "avatar_url": "https://avatars.githubusercontent.com/u/12725591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billdirks", "html_url": "https://github.com/billdirks", "followers_url": "https://api.github.com/users/billdirks/followers", "following_url": "https://api.github.com/users/billdirks/following{/other_user}", "gists_url": "https://api.github.com/users/billdirks/gists{/gist_id}", "starred_url": "https://api.github.com/users/billdirks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billdirks/subscriptions", "organizations_url": "https://api.github.com/users/billdirks/orgs", "repos_url": "https://api.github.com/users/billdirks/repos", "events_url": "https://api.github.com/users/billdirks/events{/privacy}", "received_events_url": "https://api.github.com/users/billdirks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10924/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10924/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10922", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10922/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10922/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10922/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10922", "id": 2841110094, "node_id": "I_kwDOBiS_IM6pV-ZO", "number": 10922, "title": "unexpected_index_query is not in usable format", "user": {"login": "suchintakp5", "id": 12035308, "node_id": "MDQ6VXNlcjEyMDM1MzA4", "avatar_url": "https://avatars.githubusercontent.com/u/12035308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suchintakp5", "html_url": "https://github.com/suchintakp5", "followers_url": "https://api.github.com/users/suchintakp5/followers", "following_url": "https://api.github.com/users/suchintakp5/following{/other_user}", "gists_url": "https://api.github.com/users/suchintakp5/gists{/gist_id}", "starred_url": "https://api.github.com/users/suchintakp5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suchintakp5/subscriptions", "organizations_url": "https://api.github.com/users/suchintakp5/orgs", "repos_url": "https://api.github.com/users/suchintakp5/repos", "events_url": "https://api.github.com/users/suchintakp5/events{/privacy}", "received_events_url": "https://api.github.com/users/suchintakp5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-02-10T01:32:15Z", "updated_at": "2025-02-10T23:11:07Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n`unexpected_index_query` returned by the validation result can not be used to get the failed rows unless formatted properly\n\n**To Reproduce**\nRun any expectation in COMPLETE mode to get the `unexpected_index_query` in the result\n\n**Expected behavior**\n`unexpected_index_query` returned by the validation result should be in a proper usable format\n\n`\"unexpected_index_query\": \"df.filter(F.expr(NOT (ID Number IS NOT NULL)))\"` can be formatted and used as follows:\n`\"unexpected_index_query\": \"df.filter(F.expr('NOT (``ID Number`` IS NOT NULL)'))\"`\n\nSimilarly, `\"unexpected_index_query\": \"df.filter(F.expr((Country IS NOT NULL) AND (NOT (Country IN (US, GB, Algeria)))))\"` can be formatted and used as follows:\n`\"unexpected_index_query\": \"df.filter(F.expr('(Country IS NOT NULL) AND (NOT (Country IN (\\\"US\\\", \\\"GB\\\", \\\"Algeria\\\")))'))\"`\n\n**Environment (please complete the following information):**\n - Great Expectations Version: [1.3.5]\n - Data Source: [PySpark DataFrame]\n - Cloud environment: [Azure Databricks]\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10922/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10922/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10921", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10921/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10921/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10921/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10921", "id": 2839246868, "node_id": "I_kwDOBiS_IM6pO3gU", "number": 10921, "title": "Reference to deprecated CLI in data docs", "user": {"login": "mcompen", "id": 39552232, "node_id": "MDQ6VXNlcjM5NTUyMjMy", "avatar_url": "https://avatars.githubusercontent.com/u/39552232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcompen", "html_url": "https://github.com/mcompen", "followers_url": "https://api.github.com/users/mcompen/followers", "following_url": "https://api.github.com/users/mcompen/following{/other_user}", "gists_url": "https://api.github.com/users/mcompen/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcompen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcompen/subscriptions", "organizations_url": "https://api.github.com/users/mcompen/orgs", "repos_url": "https://api.github.com/users/mcompen/repos", "events_url": "https://api.github.com/users/mcompen/events{/privacy}", "received_events_url": "https://api.github.com/users/mcompen/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-02-07T23:00:59Z", "updated_at": "2025-03-20T17:10:57Z", "closed_at": "2025-03-20T17:10:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nThe \"How to edit this suite\" button on the expectations suite page in the data docs opens a box that still refers to the CLI\n![Image](https://github.com/user-attachments/assets/7c37537c-99ae-4a40-888b-ea99ca70ba7a)\n\nThe \"Show walkthrough\" button as well\n\n![Image](https://github.com/user-attachments/assets/16a39355-9eba-4e0d-8dfc-566083d737aa)\n\n\n**To Reproduce**\nSee e.g. https://github.com/great-expectations/great_expectations/blob/1.3.5/great_expectations/render/view/templates/edit_expectations_instructions_modal.j2\n\n**Expected behavior**\n-\n\n**Environment (please complete the following information):**\n-\n\n**Additional context**\n-\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10921/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10921/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10917", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10917/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10917/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10917/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10917", "id": 2835721772, "node_id": "I_kwDOBiS_IM6pBa4s", "number": 10917, "title": "ExpectColumnValueLengthsToEqual is failing/raising exception when applied on a column having null values as well", "user": {"login": "suchintakp5", "id": 12035308, "node_id": "MDQ6VXNlcjEyMDM1MzA4", "avatar_url": "https://avatars.githubusercontent.com/u/12035308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suchintakp5", "html_url": "https://github.com/suchintakp5", "followers_url": "https://api.github.com/users/suchintakp5/followers", "following_url": "https://api.github.com/users/suchintakp5/following{/other_user}", "gists_url": "https://api.github.com/users/suchintakp5/gists{/gist_id}", "starred_url": "https://api.github.com/users/suchintakp5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suchintakp5/subscriptions", "organizations_url": "https://api.github.com/users/suchintakp5/orgs", "repos_url": "https://api.github.com/users/suchintakp5/repos", "events_url": "https://api.github.com/users/suchintakp5/events{/privacy}", "received_events_url": "https://api.github.com/users/suchintakp5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-02-06T14:39:01Z", "updated_at": "2025-03-11T15:33:34Z", "closed_at": "2025-03-11T15:33:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n**ExpectColumnValueLengthsToEqual** is failing/raising exception when applied on a column having null values as well. in version 1.3.5. This was not failing in version 0.18\n\n**To Reproduce**\n```\nimport great_expectations as gx\nimport great_expectations.expectations as gxe\n\n# Retrieve your Data Context\ndata_context = gx.get_context(mode=\"ephemeral\")\n# Define the Data Source name\ndata_source_name = \"source_system_name_spark_dataframe\"\n# Add the Data Source to the Data Context\ndata_source = data_context.data_sources.add_spark(name=data_source_name)\n# Define the Data Asset name\ndata_asset_name = \"dataset_name\"\n# Add a Data Asset to the Data Source\ndata_asset = data_source.add_dataframe_asset(name=data_asset_name)\n# Define the Batch Definition name\nbatch_definition_name = \"dataset_batch_definition\"\n\n# Add a Batch Definition to the Data Asset\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\n    batch_definition_name\n)\n\ndf = <A pyspark dataframe containing few null values in a string column>\n\nbatch_parameters = {\"dataframe\": df}\n# Get the dataframe as a Batch\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\n\ntest = gxe.ExpectColumnValueLengthsToEqual(column=<column_name>, value=<length>)\n# Test the Expectation\nvalidation_results = batch.validate(test, result_format=\"COMPLETE\")\nprint(validation_results)\n```\n\n\n**Expected behavior**\nNo exception should be raised. For the null values, the length should be equal to zero or they should not be considered as part the expectation result\n\n**Environment (please complete the following information):**\n - Great Expectations Version: [1.3.5]\n - Data Source: [Spark dataframe created from a csv file]\n - Cloud environment: [Azure Databricks]\n\n**Additional context**\n```\n{\n  \"success\": false,\n  \"expectation_config\": {\n    \"type\": \"expect_column_value_lengths_to_equal\",\n    \"kwargs\": {\n      \"column\": \"ID Number\",\n      \"value\": 7.0,\n      \"batch_id\": \"source_system_name_spark_dataframe-dataset_name\"\n    },\n    \"meta\": {}\n  },\n  \"result\": {},\n  \"meta\": {},\n  \"exception_info\": {\n    \"('column_values.value_length.map', '0464e137b2cdb1dd819e7ee85c081f95', ())\": {\n      \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 532, in _process_direct_and_bundled_metric_computation_configurations\\n    metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/expectations/metrics/metric_provider.py\\\", line 99, in inner_func\\n    return metric_fn(*args, **kwargs)\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/expectations/metrics/map_metric_provider/column_function_partial.py\\\", line 239, in inner_func\\n    ) = execution_engine.get_compute_domain(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 800, in get_compute_domain\\n    data: pyspark.DataFrame = self.get_domain_records(domain_kwargs=domain_kwargs)\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 689, in get_domain_records\\n    data = data.filter(filter_condition.condition)\\n  File \\\"/databricks/spark/python/pyspark/instrumentation_utils.py\\\", line 48, in wrapper\\n    res = func(*args, **kwargs)\\n  File \\\"/databricks/spark/python/pyspark/sql/dataframe.py\\\", line 3123, in filter\\n    jdf = self._jdf.filter(condition)\\n  File \\\"/databricks/spark/python/lib/py4j-0.10.9.5-src.zip/py4j/java_gateway.py\\\", line 1321, in __call__\\n    return_value = get_return_value(\\n  File \\\"/databricks/spark/python/pyspark/errors/exceptions.py\\\", line 234, in deco\\n    raise converted from None\\npyspark.errors.exceptions.ParseException: \\n[PARSE_SYNTAX_ERROR] Syntax error at or near 'IS'.(line 1, pos 10)\\n\\n== SQL ==\\nID Number IS NOT NULL\\n----------^^^\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-70771ece-6841-4d7b-a9e8-4a8bc864ed04/lib/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 537, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n[PARSE_SYNTAX_ERROR] Syntax error at or near 'IS'.(line 1, pos 10)\\n\\n== SQL ==\\nID Number IS NOT NULL\\n----------^^^\\n\\n\",\n      \"exception_message\": \"\\n[PARSE_SYNTAX_ERROR] Syntax error at or near 'IS'.(line 1, pos 10)\\n\\n== SQL ==\\nID Number IS NOT NULL\\n----------^^^\\n\",\n      \"raised_exception\": true\n    }\n  }\n}\n```\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10917/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10914", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10914/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10914/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10914/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10914", "id": 2833115506, "node_id": "I_kwDOBiS_IM6o3ely", "number": 10914, "title": "result_format = \"COMPLETE\" does not work", "user": {"login": "Max-Bld", "id": 132047493, "node_id": "U_kgDOB97ihQ", "avatar_url": "https://avatars.githubusercontent.com/u/132047493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Max-Bld", "html_url": "https://github.com/Max-Bld", "followers_url": "https://api.github.com/users/Max-Bld/followers", "following_url": "https://api.github.com/users/Max-Bld/following{/other_user}", "gists_url": "https://api.github.com/users/Max-Bld/gists{/gist_id}", "starred_url": "https://api.github.com/users/Max-Bld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Max-Bld/subscriptions", "organizations_url": "https://api.github.com/users/Max-Bld/orgs", "repos_url": "https://api.github.com/users/Max-Bld/repos", "events_url": "https://api.github.com/users/Max-Bld/events{/privacy}", "received_events_url": "https://api.github.com/users/Max-Bld/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-02-05T14:32:15Z", "updated_at": "2025-02-07T06:26:33Z", "closed_at": "2025-02-07T06:26:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\n\nI want to get all the rows indexes which have a null value in any column. I therefore use the `ExpectColumnValuesToNotBeNull` expectation, with the parameter `result_format = \"COMPLETE\"` for each column in an Expectation Suite.\n\nBut neither the field `unexpected_index_list`,  or `unexpected_index_query`, appear in the validation results JSON.\n\nData comes from a local PostgreSQL database.\n\n**To Reproduce**\ngreat_expectations.yml:\n\n```yml\nconfig_version: 4.0\n\nconfig_variables_file_path: uncommitted/config_variables.yml\n\n# The plugins_directory will be added to your python path for custom modules\n# used to override and extend Great Expectations.\nplugins_directory: plugins/\n\nstores:\n# Stores are configurable places to store things like Expectations, Validations\n# Data Docs, and more. These are for advanced users only - most users can simply\n# leave this section alone.\n  expectations_store:\n    class_name: ExpectationsStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: expectations/\n\n  validation_results_store:\n    class_name: ValidationResultsStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: uncommitted/validations/\n\n  checkpoint_store:\n    class_name: CheckpointStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      suppress_store_backend_id: true\n      base_directory: checkpoints/\n\n  validation_definition_store:\n    class_name: ValidationDefinitionStore\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: validation_definitions/\n\nexpectations_store_name: expectations_store\nvalidation_results_store_name: validation_results_store\ncheckpoint_store_name: checkpoint_store\n\ndata_docs_sites:\n  # Data Docs make it simple to visualize data quality in your project. These\n  # include Expectations, Validations & Profiles. The are built for all\n  # Datasources from JSON artifacts in the local repo including validations &\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\n  local_site:\n    class_name: SiteBuilder\n    show_how_to_buttons: true\n    store_backend:\n      class_name: TupleFilesystemStoreBackend\n      base_directory: uncommitted/data_docs/local_site/\n    site_index_builder:\n      class_name: DefaultSiteIndexBuilder\nfluent_datasources:\n  postgres_datatourisme_database:\n    type: sql\n    id: c7bd8536-5e7d-4555-9e22-71081ee4bb82\n    assets:\n      datatourisme_data_table:\n        type: table\n        id: 6d88f036-a7f1-4883-8b53-0344d8a02508\n        batch_metadata: {}\n        batch_definitions:\n          whole_table_batch:\n            id: ff646271-b7a1-4981-938b-59fc3f3857f1\n            partitioner:\n        table_name: raw.datatourisme_data\n        schema_name:\n    connection_string: postgresql://postgres:mysecret@localhost:5432\nanalytics_enabled:\ndata_context_id: 18c04598-a5c6-4baf-ba95-8d530d254a90\n\n```\n\n The code:\n\n```python\ncontext = gx.get_context(mode=\"file\")\n\ndata_source_name = \"postgres_datatourisme_database\"\n\ndata_source = context.data_sources.add_or_update_sql(\n    name=data_source_name, \n    connection_string=connection_string\n    )\n\ndata_asset_name = f\"{table_name}_table\"\n\ndata_asset = data_source.add_table_asset(\n    table_name=f\"raw.{table_name}\", \n    name=data_asset_name\n)\n\nbatch_definition_name = \"whole_table_batch\"\n\nbatch_definition = data_asset.add_batch_definition_whole_table(\n    name=batch_definition_name\n)\n\nsuite_name = \"completeness_suite\"\n\nsuite = gx.ExpectationSuite(\n    name=suite_name\n)\n\nexpectations = []\n\nfor column in column_names:\n\n    expectation = gxe.ExpectColumnValuesToNotBeNull(\n        column=column,\n        result_format=\"COMPLETE\"\n    )\n\n    suite.add_expectation(expectation)\n\ncontext.suites.add_or_update(suite)\n\ncontext.suites.get(name=suite_name)\n\nbatch_definition = (\n    context.data_sources.get(data_source_name)\n    .get_asset(data_asset_name)\n    .get_batch_definition(batch_definition_name)\n)\n\nexpectation_suite = context.suites.get(name=suite_name)\n\nvalidation_definition_name = \"completeness_validation_definition\"\nvalidation_definition = gx.ValidationDefinition(\n    data=batch_definition, suite=expectation_suite, name=definition_name\n)\n\nvalidation_results = validation_definition.run()\n```\n\nValidation results JSON : \n\n```json\n{\n  \"success\": false,\n  \"results\": [\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"id\"\n        },\n        \"meta\": {},\n        \"id\": \"dca395b3-ba80-43e3-a877-c1b29f59243f\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"nom_du_poi\"\n        },\n        \"meta\": {},\n        \"id\": \"ad450c76-fbaa-411d-8b82-eb284b498e02\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"categories_de_poi\"\n        },\n        \"meta\": {},\n        \"id\": \"2ba1c76d-0e92-4fdf-8e9f-2153988bcc4f\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"latitude\"\n        },\n        \"meta\": {},\n        \"id\": \"8a541ea2-4e0c-4187-a186-67b5d01fddef\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"longitude\"\n        },\n        \"meta\": {},\n        \"id\": \"35b78f4a-feeb-4211-b188-5123febbe95c\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"adresse_postale\"\n        },\n        \"meta\": {},\n        \"id\": \"c718482f-441e-4488-a753-b593b92ec0bc\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 46018,\n        \"unexpected_percent\": 9.636490422771752,\n        \"partial_unexpected_list\": [\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null\n        ],\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": null,\n            \"count\": 20\n          }\n        ]\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"code_postal_et_commune\"\n        },\n        \"meta\": {},\n        \"id\": \"ee4a6470-79b3-42db-a07b-f73228ec7585\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"periodes_regroupees\"\n        },\n        \"meta\": {},\n        \"id\": \"9b360b21-b04d-481c-a236-2022a5a17aa3\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 398907,\n        \"unexpected_percent\": 83.53391031936658,\n        \"partial_unexpected_list\": [\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null\n        ],\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": null,\n            \"count\": 20\n          }\n        ]\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"covid19_mesures_specifiques\"\n        },\n        \"meta\": {},\n        \"id\": \"76aaff86-34f3-490c-b17e-296e39ebe9b7\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 469979,\n        \"unexpected_percent\": 98.41688322838553,\n        \"partial_unexpected_list\": [\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null\n        ],\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": null,\n            \"count\": 20\n          }\n        ]\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"createur_de_la_donnee\"\n        },\n        \"meta\": {},\n        \"id\": \"1286f750-0383-4a2f-aa81-5951241f255b\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"sit_diffuseur\"\n        },\n        \"meta\": {},\n        \"id\": \"28e656e8-6fbf-49cf-99fe-760c01b724ec\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"date_de_mise_a_jour\"\n        },\n        \"meta\": {},\n        \"id\": \"a446a60d-d753-43bc-8542-7337ce671795\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"contacts_du_poi\"\n        },\n        \"meta\": {},\n        \"id\": \"b94171d3-7e48-47be-ad8e-9c7645c59955\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 14717,\n        \"unexpected_percent\": 3.0818425301389,\n        \"partial_unexpected_list\": [\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null\n        ],\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": null,\n            \"count\": 20\n          }\n        ]\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"classements_du_poi\"\n        },\n        \"meta\": {},\n        \"id\": \"f2df11ec-2004-4cf7-a8ce-837b649cff34\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 387610,\n        \"unexpected_percent\": 81.16823966210089,\n        \"partial_unexpected_list\": [\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null\n        ],\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": null,\n            \"count\": 20\n          }\n        ]\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"description\"\n        },\n        \"meta\": {},\n        \"id\": \"59f20fa1-7544-47a1-b1d4-b1c327da6bd6\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 182510,\n        \"unexpected_percent\": 38.218867987745504,\n        \"partial_unexpected_list\": [\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null,\n          null\n        ],\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": null,\n            \"count\": 20\n          }\n        ]\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": true,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_not_be_null\",\n        \"kwargs\": {\n          \"result_format\": \"COMPLETE\",\n          \"batch_id\": \"postgres_datatourisme_database-datatourisme_data_table\",\n          \"column\": \"uri_id_du_poi\"\n        },\n        \"meta\": {},\n        \"id\": \"63ba37fd-bee4-43c7-816a-099e4358dd9a\"\n      },\n      \"result\": {\n        \"element_count\": 477539,\n        \"unexpected_count\": 0,\n        \"unexpected_percent\": 0.0,\n        \"partial_unexpected_list\": [],\n        \"partial_unexpected_counts\": []\n      },\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    }\n  ],\n  \"suite_name\": \"completeness_suite\",\n  \"suite_parameters\": {},\n  \"statistics\": {\n    \"evaluated_expectations\": 16,\n    \"successful_expectations\": 10,\n    \"unsuccessful_expectations\": 6,\n    \"success_percent\": 62.5\n  },\n  \"meta\": {\n    \"great_expectations_version\": \"1.3.4\",\n    \"batch_spec\": {\n      \"type\": \"table\",\n      \"data_asset_name\": \"datatourisme_data_table\",\n      \"table_name\": \"raw.datatourisme_data\",\n      \"schema_name\": null,\n      \"batch_identifiers\": {}\n    },\n    \"batch_markers\": {\n      \"ge_load_time\": \"20250205T125401.213814Z\"\n    },\n    \"active_batch_definition\": {\n      \"datasource_name\": \"postgres_datatourisme_database\",\n      \"data_connector_name\": \"fluent\",\n      \"data_asset_name\": \"datatourisme_data_table\",\n      \"batch_identifiers\": {}\n    },\n    \"validation_id\": \"99e1aba4-fd3b-459b-b8d0-e41c3b67a3a3\",\n    \"checkpoint_id\": null,\n    \"batch_parameters\": null\n  },\n  \"id\": null\n}\n```\n\n\n\n**Expected behavior**\nA clear and concise description of what you expected to happen.\n\n**Environment (please complete the following information):**\n - Operating System: Linux Ubuntu\n - Great Expectations Version: 1.3.7\n - Data Source: Local PostgreSQL\n - Cloud environment: None\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": {"login": "Max-Bld", "id": 132047493, "node_id": "U_kgDOB97ihQ", "avatar_url": "https://avatars.githubusercontent.com/u/132047493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Max-Bld", "html_url": "https://github.com/Max-Bld", "followers_url": "https://api.github.com/users/Max-Bld/followers", "following_url": "https://api.github.com/users/Max-Bld/following{/other_user}", "gists_url": "https://api.github.com/users/Max-Bld/gists{/gist_id}", "starred_url": "https://api.github.com/users/Max-Bld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Max-Bld/subscriptions", "organizations_url": "https://api.github.com/users/Max-Bld/orgs", "repos_url": "https://api.github.com/users/Max-Bld/repos", "events_url": "https://api.github.com/users/Max-Bld/events{/privacy}", "received_events_url": "https://api.github.com/users/Max-Bld/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10914/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10914/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10912", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10912/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10912/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10912/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10912", "id": 2828898136, "node_id": "I_kwDOBiS_IM6onY9Y", "number": 10912, "title": "[Docs] Fix the incorrect parameter in checkpoint docs", "user": {"login": "GukjinHan", "id": 109935142, "node_id": "U_kgDOBo16Jg", "avatar_url": "https://avatars.githubusercontent.com/u/109935142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GukjinHan", "html_url": "https://github.com/GukjinHan", "followers_url": "https://api.github.com/users/GukjinHan/followers", "following_url": "https://api.github.com/users/GukjinHan/following{/other_user}", "gists_url": "https://api.github.com/users/GukjinHan/gists{/gist_id}", "starred_url": "https://api.github.com/users/GukjinHan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GukjinHan/subscriptions", "organizations_url": "https://api.github.com/users/GukjinHan/orgs", "repos_url": "https://api.github.com/users/GukjinHan/repos", "events_url": "https://api.github.com/users/GukjinHan/events{/privacy}", "received_events_url": "https://api.github.com/users/GukjinHan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-02-04T01:19:20Z", "updated_at": "2025-03-05T14:26:09Z", "closed_at": "2025-03-05T14:26:08Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Describe the bug\nThere is a minor issue in the page describing [Checkpoint](https://docs.greatexpectations.io/docs/reference/api/Checkpoint_class):\nIn the Checkpoint signature, there is a wrong parameter (`&amp;42;`)\n\nTo Reproduce\nSteps to reproduce the behavior:\nGo to docs page : https://docs.greatexpectations.io/docs/reference/api/Checkpoint_class\n\nExpected behavior\nFix the incorrect parameter\n\nEnvironment (please complete the following information):\n\nN/A", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10912/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10912/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10908", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10908/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10908/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10908/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10908", "id": 2827169308, "node_id": "I_kwDOBiS_IM6ogy4c", "number": 10908, "title": "Latest version of MarkupSafe doesn't work with Great Expectations", "user": {"login": "krishnasism", "id": 21293324, "node_id": "MDQ6VXNlcjIxMjkzMzI0", "avatar_url": "https://avatars.githubusercontent.com/u/21293324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/krishnasism", "html_url": "https://github.com/krishnasism", "followers_url": "https://api.github.com/users/krishnasism/followers", "following_url": "https://api.github.com/users/krishnasism/following{/other_user}", "gists_url": "https://api.github.com/users/krishnasism/gists{/gist_id}", "starred_url": "https://api.github.com/users/krishnasism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/krishnasism/subscriptions", "organizations_url": "https://api.github.com/users/krishnasism/orgs", "repos_url": "https://api.github.com/users/krishnasism/repos", "events_url": "https://api.github.com/users/krishnasism/events{/privacy}", "received_events_url": "https://api.github.com/users/krishnasism/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-02-03T10:56:42Z", "updated_at": "2025-02-18T22:44:45Z", "closed_at": "2025-02-18T22:10:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhen importing great-expectations with the latest version, there's an issue with MarkupSafe. MarkupSafe latest version removes `soft_unicode`, which gx uses - thus resulting in the error `cannot import name 'soft_unicode' from 'markupsafe'` \n\n**To Reproduce**\nInstall latest version of gx, and `import great_expectations`\n\n**Expected behavior**\nimport should not fail\n\n**Environment (please complete the following information):**\n - Operating System: Linux\n - Great Expectations Version: 1.3.2\n - Cloud environment: Databricks\n - Python version: 3.10\n\n**Comments**\nPlease set a constraint in your pyproject for MarkupSafe>=2 (or whatever works) and MarkupSafe <3", "closed_by": {"login": "dctalbot", "id": 17692467, "node_id": "MDQ6VXNlcjE3NjkyNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/17692467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dctalbot", "html_url": "https://github.com/dctalbot", "followers_url": "https://api.github.com/users/dctalbot/followers", "following_url": "https://api.github.com/users/dctalbot/following{/other_user}", "gists_url": "https://api.github.com/users/dctalbot/gists{/gist_id}", "starred_url": "https://api.github.com/users/dctalbot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dctalbot/subscriptions", "organizations_url": "https://api.github.com/users/dctalbot/orgs", "repos_url": "https://api.github.com/users/dctalbot/repos", "events_url": "https://api.github.com/users/dctalbot/events{/privacy}", "received_events_url": "https://api.github.com/users/dctalbot/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10908/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10904", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10904/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10904/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10904/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10904", "id": 2822906700, "node_id": "I_kwDOBiS_IM6oQiNM", "number": 10904, "title": "ModuleNotFoundError when calling print_diagnostic_checklist on an expectation", "user": {"login": "xaniasd", "id": 6271065, "node_id": "MDQ6VXNlcjYyNzEwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6271065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xaniasd", "html_url": "https://github.com/xaniasd", "followers_url": "https://api.github.com/users/xaniasd/followers", "following_url": "https://api.github.com/users/xaniasd/following{/other_user}", "gists_url": "https://api.github.com/users/xaniasd/gists{/gist_id}", "starred_url": "https://api.github.com/users/xaniasd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xaniasd/subscriptions", "organizations_url": "https://api.github.com/users/xaniasd/orgs", "repos_url": "https://api.github.com/users/xaniasd/repos", "events_url": "https://api.github.com/users/xaniasd/events{/privacy}", "received_events_url": "https://api.github.com/users/xaniasd/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-01-31T09:43:21Z", "updated_at": "2025-02-13T04:25:25Z", "closed_at": "2025-02-13T04:25:25Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "** Bug description **\nCalling `print_diagnostic_checklist()` on an expectation raises `ModuleNotFoundError: No module named 'tests.test_utils'`. This bug must have been introduced in this [change](https://github.com/great-expectations/great_expectations/commit/3e39e9ed272b62999960121f5f8c7a52f869b372), with a (relative) import from a module seemingly intended  for testing.\n\n**To Reproduce**\n\n```python\nfrom great_expectations import expectations as gxe\nexp = gxe.ExpectColumnMaxToBeBetween(column=\"passenger_count\", min_value=1, max_value=6)\nexp.print_diagnostic_checklist()\n```\n\n**Expected behavior**\nPrint diagnostic information for the expectation\n\n**Environment (please complete the following information):**\n - Operating System: [MacOS]\n - Great Expectations Version: [1.3.2+]\n - Data Source: [N/A]\n - Cloud environment: [N/A]\n\n**Additional context**\nN/A\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10904/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10904/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10902", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10902/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10902/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10902/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10902", "id": 2819774255, "node_id": "I_kwDOBiS_IM6oElcv", "number": 10902, "title": "[ISSUE] GX not automatically updating the config while deploying in AWS Glue into S3 Bucket", "user": {"login": "tegarbratasena", "id": 47619524, "node_id": "MDQ6VXNlcjQ3NjE5NTI0", "avatar_url": "https://avatars.githubusercontent.com/u/47619524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tegarbratasena", "html_url": "https://github.com/tegarbratasena", "followers_url": "https://api.github.com/users/tegarbratasena/followers", "following_url": "https://api.github.com/users/tegarbratasena/following{/other_user}", "gists_url": "https://api.github.com/users/tegarbratasena/gists{/gist_id}", "starred_url": "https://api.github.com/users/tegarbratasena/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tegarbratasena/subscriptions", "organizations_url": "https://api.github.com/users/tegarbratasena/orgs", "repos_url": "https://api.github.com/users/tegarbratasena/repos", "events_url": "https://api.github.com/users/tegarbratasena/events{/privacy}", "received_events_url": "https://api.github.com/users/tegarbratasena/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-01-30T02:45:44Z", "updated_at": "2025-02-12T22:40:19Z", "closed_at": "2025-02-12T22:40:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI found an issue when deploying GX in our AWS S3 bucket using AWS Glue. I find it hard to setup the yaml configuration for s3, so to build the configuration I need to setup manually using this code:\n\n```\n# Function to update yaml manually\ndef update_yml_config(context, s3_client, bucket_name='my-bucket', key='great-expectations/great_expectations.yml'):\n    config_dict = context.variables.config.to_json_dict()\n    \n    if 'data_context_id' in config_dict:\n        config_dict['data_context_id'] = str(config_dict['data_context_id'])\n    \n    if 'fluent_datasources' in config_dict:\n        for ds in config_dict['fluent_datasources'].values():\n            if 'connection_string' in ds:\n                ds['connection_string'] = \"secret|${aws_secrets_manager_arn}|redshift_connection_string\"\n    \n    config_yaml = yaml.dump(config_dict, default_flow_style=False)\n    s3_client.put_object(\n        Bucket=bucket_name,\n        Key=key,\n        Body=config_yaml,\n        ContentType=\"text/yaml\"\n    )\n\n# Get default context\ncontext = gx.get_context()\nconfig_dict = context.variables.config\n\n# Updating config\nconfig_dict[\"stores\"] = {\n    \"expectations_store\": {\n        \"class_name\": \"ExpectationsStore\",\n        \"store_backend\": {\n            \"class_name\": \"TupleS3StoreBackend\",\n            \"bucket\": \"my-bucket\",\n            \"prefix\": \"great-expectations/expectations/\"\n        }\n    },\n    \"validation_results_store\": {\n        \"class_name\": \"ValidationResultsStore\",\n        \"store_backend\": {\n            \"class_name\": \"TupleS3StoreBackend\",\n            \"bucket\": \"my-bucket\",\n            \"prefix\": \"great-expectations/validations/\"\n        }\n    },\n    \"checkpoint_store\": {\n        \"class_name\": \"CheckpointStore\",\n        \"store_backend\": {\n            \"class_name\": \"TupleS3StoreBackend\",\n            \"bucket\": \"my-bucket\",\n            \"prefix\": \"great-expectations/checkpoints/\"\n        }\n    },\n    \"validation_definition_store\": {\n        \"class_name\": \"ValidationDefinitionStore\",\n        \"store_backend\": {\n            \"class_name\": \"TupleS3StoreBackend\",\n            \"bucket\": \"my-bucket\",\n            \"prefix\": \"great-expectations/validation_definitions/\"\n        }\n    }\n}\n\n# # Update context config to point to config_variables\nconfig_dict[\"config_variables_file_path\"] = \"great-expectations/uncommitted/config_variables.yml\"\n\n# Creating config variables yaml\nconfig_variables = {\n    \"my_aws_creds\": \"secret|arn:aws:secretsmanager|redshift_connection_string\"\n}\n\n# Create data docs site\nsite_config = {\n    \"class_name\": \"SiteBuilder\",\n    \"site_index_builder\": {\"class_name\": \"DefaultSiteIndexBuilder\"},\n    \"store_backend\": {\n        \"class_name\": \"TupleS3StoreBackend\",\n        \"bucket\": \"my-bucket\",\n        \"prefix\": \"great-expectations/data_docs/\",\n    },\n}\ncontext.variables.config.data_docs_sites = {\n    \"local_site\": site_config,\n    \"s3_site\": site_config\n}\n\ns3_client.put_object(\n    Bucket='my-bucket',\n    Key='great-expectations/uncommitted/config_variables.yml',\n    Body=yaml.dump(config_variables),\n    ContentType=\"text/yaml\"\n)\n\n# Dump config to yaml files\ncontext_config = context.config\nconfig_dict = context_config.to_dict()\nconfig_yaml = yaml.dump(config_dict, default_flow_style=False)\ns3_client.put_object(\n  Bucket='my-bucket',\n  Key='great-expectations/great_expectations.yml',\n  Body=config_yaml,\n  ContentType=\"text/yaml\"\n)\nupdate_yml_config(context, s3_client)\n\n# Read the config from S3 (when dump it doesn't automatically generate the data_context_id. However running code below and save the config yaml files generate the data_context_id automatically)\nresponse = s3_client.get_object(\n    Bucket='my-bucket',\n    Key='great-expectations/great_expectations.yml'\n)\nconfig_yaml = response['Body'].read().decode('utf-8')\nconfig_dict = yaml.safe_load(config_yaml)\ncontext_config = DataContextConfig(**config_dict)\ncontext = gx.get_context(project_config=context_config)\nupdate_yml_config(context, s3_client)\n\n# Load config_variables.yml into the Data Context\nconfig_vars_response = s3_client.get_object(\n    Bucket=\"my-bucket\",\n    Key=\"great-expectations/uncommitted/config_variables.yml\"\n)\nconfig_vars = yaml.safe_load(config_vars_response[\"Body\"].read())\ncontext.config_variables.update(config_vars)  # Inject variables\n```\n\nit successfully store the yaml file within the path, the folder directory and the `config_variables`. To call the config I need to read the yaml file manually both for gx config and config variables like this:\n\n```\nresponse = s3_client.get_object(\n    Bucket='my-bucket',\n    Key='great-expectations/great_expectations.yml'\n)\nconfig_yaml = response['Body'].read().decode('utf-8')\nconfig_dict = yaml.safe_load(config_yaml)\ncontext_config = DataContextConfig(**config_dict)\ncontext = gx.get_context(project_config=context_config)\n# update_yml_config(context, s3_client)\n\n# Load config_variables.yml into the Data Context\nconfig_vars_response = s3_client.get_object(\n    Bucket=\"my-bucket\",\n    Key=\"great-expectations/uncommitted/config_variables.yml\"\n)\nconfig_vars = yaml.safe_load(config_vars_response[\"Body\"].read())\ncontext.config_variables.update(config_vars)  # Inject variables\n```\n\nI once tried to run this code:\n```\nroot_dir = 's3://my-bucket/great-expectations/'\ncontext = gx.get_context(context_root_dir=root_dir)\nprint(context)\n```\n\nBut the return show that the GX read the config from the `tmp` files instead of the project folder, like this log:\n\n```\n{\n  \"checkpoint_store_name\": \"checkpoint_store\",\n  \"config_version\": 4,\n  \"data_docs_sites\": {\n    \"local_site\": {\n      \"class_name\": \"SiteBuilder\",\n      \"show_how_to_buttons\": true,\n      \"store_backend\": {\n        \"class_name\": \"TupleFilesystemStoreBackend\",\n        \"base_directory\": \"/tmp/tmp3scyd_fn\"\n      },\n      \"site_index_builder\": {\n        \"class_name\": \"DefaultSiteIndexBuilder\"\n      }\n    }\n  },\n  \"expectations_store_name\": \"expectations_store\",\n  \"fluent_datasources\": {},\n  \"stores\": {\n    \"expectations_store\": {\n      \"class_name\": \"ExpectationsStore\",\n      \"store_backend\": {\n        \"class_name\": \"InMemoryStoreBackend\"\n      }\n    },\n    \"validation_results_store\": {\n      \"class_name\": \"ValidationResultsStore\",\n      \"store_backend\": {\n        \"class_name\": \"InMemoryStoreBackend\"\n      }\n    },\n    \"checkpoint_store\": {\n      \"class_name\": \"CheckpointStore\",\n      \"store_backend\": {\n        \"class_name\": \"InMemoryStoreBackend\"\n      }\n    },\n    \"validation_definition_store\": {\n      \"class_name\": \"ValidationDefinitionStore\",\n      \"store_backend\": {\n    \"class_name\": \"InMemoryStoreBackend\"\n}\n    }\n  },\n  \"validation_results_store_name\": \"validation_results_store\"\n}\n```\n\nI hope it can be more simpler in the future to deploy the GX. Thank you\n\n**Environment:**\n - Great Expectations Version: v1.3.3\n - Data Source: Redshift DB\n - Cloud environment: AWS Glue, S3 Bucket\n\n**Additional context**\nHere's my full code that I need to execute to run the data validation in AWS Glue after setting up the config:\n\n```\nimport sys\nfrom datetime import datetime\nfrom botocore.exceptions import ClientError\nimport os\nimport boto3,time,json\nimport yaml\nimport great_expectations as gx\nfrom great_expectations.data_context.types.base import DataContextConfig, S3StoreBackendDefaults\nfrom great_expectations.datasource.fluent import SQLDatasource\nfrom great_expectations.checkpoint import (\n    UpdateDataDocsAction\n)\n\ns3_client = boto3.client('s3')\n\ndef get_redshift_credentials():\n    # Get config from S3\n    s3 = boto3.client(\"s3\", region_name=\"ap-southeast-1\")\n    config = json.loads(s3.get_object(\n        Bucket=\"my-bucket\",\n        Key=\"config/prod-rms-id.json\"\n    )[\"Body\"].read())[\"RMS_ID\"][0]\n\n    # Get credentials from Secrets Manager\n    secrets = json.loads(\n        boto3.client('secretsmanager', region_name=\"ap-southeast-1\")\n        .get_secret_value(SecretId=config[\"secret_manager_name_redshift\"])\n        [\"SecretString\"]\n    )\n\n    return {\n        'host': config[\"redshift_host\"],\n        'database': config[\"redshift_db_name\"],\n        'port': 5439,\n        'username': secrets[\"username\"],\n        'password': secrets[\"password\"]\n    }\n\n# Function to update yaml manually\ndef update_yml_config(context, s3_client, bucket_name='my-bucket', key='great-expectations/great_expectations.yml'):\n    config_dict = context.variables.config.to_json_dict()\n    \n    if 'data_context_id' in config_dict:\n        config_dict['data_context_id'] = str(config_dict['data_context_id'])\n    \n    if 'fluent_datasources' in config_dict:\n        for ds in config_dict['fluent_datasources'].values():\n            if 'connection_string' in ds:\n                ds['connection_string'] = \"secret|${aws_secrets_manager_arn}|redshift_connection_string\"\n    \n    config_yaml = yaml.dump(config_dict, default_flow_style=False)\n    s3_client.put_object(\n        Bucket=bucket_name,\n        Key=key,\n        Body=config_yaml,\n        ContentType=\"text/yaml\"\n    )\n\n# Create a list of Actions for the Checkpoint to perform\naction_list = [\n    # This Action updates the Data Docs static website with the Validation\n    #   Results after the Checkpoint is run.\n    UpdateDataDocsAction(\n        name=\"update_all_data_docs\",\n    ),\n]\n\n\n# # Get default context\n# context = gx.get_context()\n# config_dict = context.variables.config\n\n# # Updating config\n# config_dict[\"stores\"] = {\n#     \"expectations_store\": {\n#         \"class_name\": \"ExpectationsStore\",\n#         \"store_backend\": {\n#             \"class_name\": \"TupleS3StoreBackend\",\n#             \"bucket\": \"my-bucket\",\n#             \"prefix\": \"great-expectations/expectations/\"\n#         }\n#     },\n#     \"validation_results_store\": {\n#         \"class_name\": \"ValidationResultsStore\",\n#         \"store_backend\": {\n#             \"class_name\": \"TupleS3StoreBackend\",\n#             \"bucket\": \"my-bucket\",\n#             \"prefix\": \"great-expectations/validations/\"\n#         }\n#     },\n#     \"checkpoint_store\": {\n#         \"class_name\": \"CheckpointStore\",\n#         \"store_backend\": {\n#             \"class_name\": \"TupleS3StoreBackend\",\n#             \"bucket\": \"my-bucket\",\n#             \"prefix\": \"great-expectations/checkpoints/\"\n#         }\n#     },\n#     \"validation_definition_store\": {\n#         \"class_name\": \"ValidationDefinitionStore\",\n#         \"store_backend\": {\n#             \"class_name\": \"TupleS3StoreBackend\",\n#             \"bucket\": \"my-bucket\",\n#             \"prefix\": \"great-expectations/validation_definitions/\"\n#         }\n#     }\n# }\n\n# # # Update context config to point to config_variables\n# config_dict[\"config_variables_file_path\"] = \"great-expectations/uncommitted/config_variables.yml\"\n\n# # Creating config variables yaml\n# config_variables = {\n#     \"my_aws_creds\": \"secret|arn:aws:secretsmanager|redshift_connection_string\"\n# }\n\n# # Create data docs site\n# site_config = {\n#     \"class_name\": \"SiteBuilder\",\n#     \"site_index_builder\": {\"class_name\": \"DefaultSiteIndexBuilder\"},\n#     \"store_backend\": {\n#         \"class_name\": \"TupleS3StoreBackend\",\n#         \"bucket\": \"my-bucket\",\n#         \"prefix\": \"great-expectations/data_docs/\",\n#     },\n# }\n# context.variables.config.data_docs_sites = {\n#     \"local_site\": site_config,\n#     \"s3_site\": site_config\n# }\n\n# s3_client.put_object(\n#     Bucket='my-bucket',\n#     Key='great-expectations/uncommitted/config_variables.yml',\n#     Body=yaml.dump(config_variables),\n#     ContentType=\"text/yaml\"\n# )\n\n# # Dump config to yaml files\n# context_config = context.config\n# config_dict = context_config.to_dict()\n# config_yaml = yaml.dump(config_dict, default_flow_style=False)\n# s3_client.put_object(\n#   Bucket='my-bucket',\n#   Key='great-expectations/great_expectations.yml',\n#   Body=config_yaml,\n#   ContentType=\"text/yaml\"\n# )\n# update_yml_config(context, s3_client)\n\n# Read the config from S3 (when dump it doesn't automatically generate the data_context_id. However running code below and save the config yaml files generate the data_context_id automatically)\nresponse = s3_client.get_object(\n    Bucket='my-bucket',\n    Key='great-expectations/great_expectations.yml'\n)\nconfig_yaml = response['Body'].read().decode('utf-8')\nconfig_dict = yaml.safe_load(config_yaml)\ncontext_config = DataContextConfig(**config_dict)\ncontext = gx.get_context(project_config=context_config)\n# update_yml_config(context, s3_client)\n\n# Load config_variables.yml into the Data Context\nconfig_vars_response = s3_client.get_object(\n    Bucket=\"my-bucket\",\n    Key=\"great-expectations/uncommitted/config_variables.yml\"\n)\nconfig_vars = yaml.safe_load(config_vars_response[\"Body\"].read())\ncontext.config_variables.update(config_vars)  # Inject variables\n\n# Get secrets from AWS Secrets Manager\ncreds = get_redshift_credentials()\nredshift_host, database, port = creds['host'], creds['database'], creds['port']\nusername, password = creds['username'], creds['password']\n\n# Build connection string and adding the table assets need to be run in every execution.\n# Build the connection string\ndatasource_name = \"my_db\"\nconnection_string = f\"redshift+redshift_connector://{username}:{password}@{redshift_host}:{port}/{database}\"\nredshift_datasource = context.data_sources.add_sql(\n    name=datasource_name,\n    connection_string=connection_string,\n)\n\n# Add table assets in a loop\ntables = [\n    \"inbound_shipment\",\n    \"sku\",\n    \"batch\"\n]\ntable_assets = []\nfor table in tables:\n    asset = redshift_datasource.add_table_asset(\n        name=table,\n        table_name=table,\n        schema_name=\"public\"\n    )\n    table_assets.append(asset)\n    print(f\"Added asset: {table}\")\nupdate_yml_config(context, s3_client)\n\n# # Create expectation suite (cannot duplicate)\n# suite_name = \"inbound_shipment_expectation\"\n# suite = gx.ExpectationSuite(name=suite_name)\n# suite = context.suites.add(suite)\n# # Adding expectation\n# suite.add_expectation(gx.expectations.ExpectColumnValuesToNotBeNull(column=\"shipment_date\"))\n# suite.add_expectation(gx.expectations.ExpectColumnValuesToNotBeNull(column=\"expected_kolis_count\"))\n# suite.add_expectation(gx.expectations.ExpectColumnValuesToBeUnique(column='id'))\n\n# Run this before checkpoint\ndatasource = context.data_sources.get(\"my_db\")\ndata_asset = datasource.get_asset(\"inbound_shipment\")\nbatch_definition = data_asset.add_batch_definition_whole_table(\"inbound_shipment_batch\")\nexpectation_suite = context.suites.get(\"inbound_shipment_expectation\")\n\n# Create a validation definition (cannot duplicate)\n# validation_definition = context.validation_definitions.add(\n#     gx.ValidationDefinition(\n#         name=\"inbound_shipment_validation\",\n#         data=batch_definition,\n#         suite=expectation_suite\n#     )\n# )\n\n# # Create a list of one or more Validation Definitions for the Checkpoint to run\n# validation_definitions = [\n#     context.validation_definitions.get(\"inbound_shipment_validation\")\n# ]\n\n# # Create the Checkpoint (cannot duplicate)\n# checkpoint_name = \"inbound_shipment_checkpoints\"\n# checkpoint = gx.Checkpoint(\n#     name=checkpoint_name,\n#     validation_definitions=validation_definitions,\n#     actions=action_list,\n#     result_format={\"result_format\": \"COMPLETE\"},\n# )\n# # Save the Checkpoint to the Data Context\n# context.checkpoints.add(checkpoint)\n\n# # Run checkpoint\ncheckpoint = context.checkpoints.get(\"inbound_shipment_checkpoints\")\nvalidation_results = checkpoint.run()\n```\n\nHere's my config for references:\n\n```\nanalytics_enabled: null\ncheckpoint_store_name: checkpoint_store\nconfig_variables_file_path: great-expectations/uncommitted/config_variables.yml\nconfig_version: 4\ndata_context_id: 9c0a5f7a-d6de-4888-a830-1b7831348037\ndata_docs_sites:\n  local_site:\n    class_name: SiteBuilder\n    site_index_builder:\n      class_name: DefaultSiteIndexBuilder\n    store_backend:\n      bucket: my-bucket\n      class_name: TupleS3StoreBackend\n      prefix: great-expectations/data_docs/\n  s3_site:\n    class_name: SiteBuilder\n    site_index_builder:\n      class_name: DefaultSiteIndexBuilder\n    store_backend:\n      bucket: my-bucket\n      class_name: TupleS3StoreBackend\n      prefix: great-expectations/data_docs/\nexpectations_store_name: expectations_store\nfluent_datasources:\n  my_db:\n    assets:\n    - batch_metadata: {}\n      id: 0a0962e9-ff0d-4c08-b46c-b83dae193889\n      name: inbound_shipment\n      schema_name: public\n      table_name: inbound_shipment\n      type: table\n    - batch_metadata: {}\n      id: 0ae17b3c-1292-430f-899d-7634c17d9b7e\n      name: sku\n      schema_name: public\n      table_name: sku\n      type: table\n    - batch_metadata: {}\n      id: 14c05845-9876-448b-9c71-ed6ffbd187e0\n      name: batch\n      schema_name: public\n      table_name: batch\n      type: table\n    connection_string: secret|${aws_secrets_manager_arn}|redshift_connection_string\n    id: ac816895-ab3a-4546-aadb-e39a03a79545\n    name: my_db\n    type: sql\nplugins_directory: null\nprogress_bars: null\nstores:\n  checkpoint_store:\n    class_name: CheckpointStore\n    store_backend:\n      bucket: my-bucket\n      class_name: TupleS3StoreBackend\n      prefix: great-expectations/checkpoints/\n  expectations_store:\n    class_name: ExpectationsStore\n    store_backend:\n      bucket: my-bucket\n      class_name: TupleS3StoreBackend\n      prefix: great-expectations/expectations/\n  validation_definition_store:\n    class_name: ValidationDefinitionStore\n    store_backend:\n      bucket: my-bucket\n      class_name: TupleS3StoreBackend\n      prefix: great-expectations/validation_definitions/\n  validation_results_store:\n    class_name: ValidationResultsStore\n    store_backend:\n      bucket: my-bucket\n      class_name: TupleS3StoreBackend\n      prefix: great-expectations/validations/\nvalidation_results_store_name: validation_results_store\n```\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10902/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10902/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10901", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10901/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10901/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10901/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10901", "id": 2819680744, "node_id": "I_kwDOBiS_IM6oEOno", "number": 10901, "title": "Upgrade pandas to >=2.2", "user": {"login": "philsv", "id": 35413649, "node_id": "MDQ6VXNlcjM1NDEzNjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/35413649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philsv", "html_url": "https://github.com/philsv", "followers_url": "https://api.github.com/users/philsv/followers", "following_url": "https://api.github.com/users/philsv/following{/other_user}", "gists_url": "https://api.github.com/users/philsv/gists{/gist_id}", "starred_url": "https://api.github.com/users/philsv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philsv/subscriptions", "organizations_url": "https://api.github.com/users/philsv/orgs", "repos_url": "https://api.github.com/users/philsv/repos", "events_url": "https://api.github.com/users/philsv/events{/privacy}", "received_events_url": "https://api.github.com/users/philsv/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-01-30T01:15:31Z", "updated_at": "2025-06-05T19:33:58Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nI need pandas 2.2 for some of my dependencies. But great-expectations is not compatible as of now with pandas>=2.2\n\nWould this be possible to change?\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10901/reactions", "total_count": 11, "+1": 11, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10901/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10897", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10897/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10897/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10897/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10897", "id": 2818149670, "node_id": "I_kwDOBiS_IM6n-Y0m", "number": 10897, "title": "[ISSUE] Logstream is flooded with _get_default_value called with key \"table\", but it is not a known field messages", "user": {"login": "jschra", "id": 25622698, "node_id": "MDQ6VXNlcjI1NjIyNjk4", "avatar_url": "https://avatars.githubusercontent.com/u/25622698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschra", "html_url": "https://github.com/jschra", "followers_url": "https://api.github.com/users/jschra/followers", "following_url": "https://api.github.com/users/jschra/following{/other_user}", "gists_url": "https://api.github.com/users/jschra/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschra/subscriptions", "organizations_url": "https://api.github.com/users/jschra/orgs", "repos_url": "https://api.github.com/users/jschra/repos", "events_url": "https://api.github.com/users/jschra/events{/privacy}", "received_events_url": "https://api.github.com/users/jschra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2025-01-29T12:59:24Z", "updated_at": "2025-02-20T09:01:47Z", "closed_at": "2025-02-19T17:14:55Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nWhenever I call expectations over my data, my logs get flooded by _get_default_value called with key \"table\" but it is not a known field (see below). For reference, I am using a pandas in-memory DataFrame (via the pandas data-source) which I am passing to a checkpoint with 1 expectation suite.\n\n![Image](https://github.com/user-attachments/assets/d82e8218-c6c5-42db-b877-75fa201677a1)\n\n\n**To Reproduce**\nI'll share a toy example which you can run where it happens. You need to ensure logging level is set to INFO\n\n```python\nimport logging\n\nimport great_expectations as gx\nimport pandas as pd\n\n# -- Set GX constants for artifact creation\nNAME_DATA_SOURCE = \"pandas\"\nNAME_DATA_ASSET = \"tutorial_data\"\nNAME_BATCH_DEF = \"pandas_tutorial\"\nNAME_EXPECTATION_SUITE = \"pandas_tutorial\"\nNAME_VALIDATION_DEF = \"pandas_validation\"\nNAME_CHECKPOINT = \"pandas\"\n\nFILE_CONFIGURE = \"data/yellow_tripdata_2021-11.csv\"\n\nformatter = logging.Formatter(\n    (\"%(levelname)-8s [ %(asctime)s - %(module)s.%(funcName)s : %(lineno)d ] %(message)s\"),\n    datefmt=\"%Y-%m-%d %H:%M:%S\",\n)\nroot_logger = logging.getLogger()\nroot_logger.setLevel(logging.INFO)\nlogging.basicConfig(level=logging.INFO)\nhandler = root_logger.handlers[0]\nhandler.setFormatter(formatter)\n\n\n# -- Load data for configuration\ndf_configure = pd.read_csv(FILE_CONFIGURE)\n\n# -- 1. Initialize GX for configuration & set up in-memory source\ncontext = gx.get_context(mode=\"file\")\n\ndata_source = context.data_sources.add_pandas(name=NAME_DATA_SOURCE)\ndata_asset = data_source.add_dataframe_asset(name=NAME_DATA_ASSET)\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(NAME_BATCH_DEF)\n\n# -- 2. Configure expectation suite to be called over runtime data later\nexpectation_suite = gx.ExpectationSuite(name=NAME_EXPECTATION_SUITE)\nexpectation_suite = context.suites.add(expectation_suite)\n\n# -- 2.1. Define table level expectations\ncolumns = list(df_configure.columns)\nexpectation = gx.expectations.ExpectTableColumnsToMatchSet(column_set=columns)\nexpectation_suite.add_expectation(expectation)\n\n# -- 2.2. Define column level expectations\n# -- 2.2.1. Ensure vendor ID is either 1 or 2\nexpected_values = [1, 2]\nexpectation = gx.expectations.ExpectColumnValuesToBeInSet(\n    column=\"VendorID\",\n    value_set=expected_values,\n)\nexpectation_suite.add_expectation(expectation)\n\n# -- 2.2.2. Validate that all columns have non-null values\nfor column in columns:\n    expectation = gx.expectations.ExpectColumnValuesToNotBeNull(column=column)\n    expectation_suite.add_expectation(expectation)\n\n# -- 2.2.3. Validate that pickup and dropoff datetimes are in the correct format\ndate_columns = [\"tpep_pickup_datetime\", \"tpep_dropoff_datetime\"]\nDATE_PATTERN = (\n    r\"^(?:19|20)\\d{2}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]) (?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d$\"\n)\nfor date_column in date_columns:\n    expectation = gx.expectations.ExpectColumnValuesToMatchRegex(\n        column=date_column,\n        regex=DATE_PATTERN,\n    )\n    expectation_suite.add_expectation(expectation)\n\n# -- 2.2.4. Validate non-zero columns\nnumeric_columns = [\n    \"passenger_count\",\n    \"trip_distance\",\n    \"tip_amount\",\n]\nfor numeric_column in numeric_columns:\n    expectation = gx.expectations.ExpectColumnValuesToBeBetween(\n        column=numeric_column,\n        min_value=0,\n    )\n    expectation_suite.add_expectation(expectation)\n\n# -- 2.3. Evaluate results on test dataset\nbatch_parameters = {\"dataframe\": df_configure}\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\nvalidation_results = batch.validate(expectation_suite)\n\n# -- 3. Bundle suite and batch into validation definition and checkpoint w/ bundled\n# --    actions for easy execution later\nvalidation_definition = gx.ValidationDefinition(\n    data=batch_definition,\n    suite=expectation_suite,\n    name=NAME_VALIDATION_DEF,\n)\n_ = context.validation_definitions.add(validation_definition)\n\naction_list = [\n    gx.checkpoint.UpdateDataDocsAction(\n        name=\"update_all_data_docs\",\n    ),\n]\ncheckpoint = gx.Checkpoint(\n    name=NAME_CHECKPOINT,\n    validation_definitions=[validation_definition],\n    actions=action_list,\n    result_format={\n        \"result_format\": \"COMPLETE\",\n    },\n)\n_ = context.checkpoints.add(checkpoint)\n\n# -- 4. Run checkpoint to validate if everything works properly\nfile_identifier = FILE_CONFIGURE.split(\"/\")[-1]\nrunid = gx.RunIdentifier(run_name=f\"Configuration run - {file_identifier}\")\nresults = checkpoint.run(batch_parameters=batch_parameters, run_id=runid)\n```\n\nApart from the code to adjust the root logger, it is the exact same code as you can find here: https://github.com/jschra/joriktech/tree/main/data_testing_gx_1. So you could use that for full reproducibility (by adding the logger snippet), since the data is also stored there.\n\nLogs you'll get when you run it:\n\n![Image](https://github.com/user-attachments/assets/3eb49e17-c5b2-49fd-9791-6842318d06dd)\n\n\n**Expected behavior**\nI would expect my logstream (set to INFO) to not be flooded with the same message over-and-over again with\n\nINFO     [ 2025-01-29 13:50:08 - expectation._get_default_value : 1161 ] _get_default_value called with key \"table\", but it is not a known field\n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.3.3\n - Data Source: pandas\n - Cloud environment: Not relevant\n\n**Additional context**\nNone needed I think", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10897/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10897/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10896", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10896/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10896/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10896/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10896", "id": 2818097396, "node_id": "I_kwDOBiS_IM6n-MD0", "number": 10896, "title": "[ISSUE] Backends using TupleFilesystemStoreBackend constantly request new Azure credentials", "user": {"login": "jschra", "id": 25622698, "node_id": "MDQ6VXNlcjI1NjIyNjk4", "avatar_url": "https://avatars.githubusercontent.com/u/25622698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschra", "html_url": "https://github.com/jschra", "followers_url": "https://api.github.com/users/jschra/followers", "following_url": "https://api.github.com/users/jschra/following{/other_user}", "gists_url": "https://api.github.com/users/jschra/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschra/subscriptions", "organizations_url": "https://api.github.com/users/jschra/orgs", "repos_url": "https://api.github.com/users/jschra/repos", "events_url": "https://api.github.com/users/jschra/events{/privacy}", "received_events_url": "https://api.github.com/users/jschra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2025-01-29T12:37:21Z", "updated_at": "2025-02-12T19:30:51Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nWe are using GX Core with our backends configured to an Azure Storage Account over multiple containers for each of the stores. Whenever we run our validation jobs, the logs show that connections with our backend are reinitialised constantly where every time, new credentials are requested via AzureDefaultCredential. Now in the source code, it shows that there is an option to set these credentials as an environment variable (AZURE_CREDENTIAL) to prevent them from being requested again every time. However the following loop which goes over the authentication options it set in the wrong order, making it so that the option with AZURE_CREDENTIAL passed beforehand is never reached and instead, the code re-authenticates every single time.\n\nHere is a snippet from `tuple_store_backend.py`:\n\n```python\n...\n    @property\n    @functools.lru_cache  # noqa: B019 # lru_cache on method\n    def _container_client(self) -> Any:\n        from great_expectations.compatibility import azure\n\n        # Validate that \"azure\" libraries were successfully imported and attempt to create \"azure_client\" handle.  # noqa: E501 # FIXME CoP\n        if azure.BlobServiceClient:  # type: ignore[truthy-function] # False if NotImported\n            try:\n                if self.connection_string:\n                    blob_service_client: azure.BlobServiceClient = (\n                        azure.BlobServiceClient.from_connection_string(self.connection_string)\n                    )\n                elif self.account_url:\n                    blob_service_client = azure.BlobServiceClient(\n                        account_url=self.account_url,\n                        credential=azure.DefaultAzureCredential(),\n                    )\n                elif self.credential and self.account_url: # <-- THIS IS NEVER REACHED!\n                    blob_service_client = azure.BlobServiceClient(\n                        account_url=self.account_url, credential=self.credential\n                    )\n                else:\n                    raise StoreBackendError(  # noqa: TRY003, TRY301 # FIXME CoP\n                        \"Unable to initialize ServiceClient, AZURE_STORAGE_CONNECTION_STRING should be set\"  # noqa: E501 # FIXME CoP\n                    )\n            except Exception as e:\n                # Failure to create \"azure_client\" is most likely due invalid \"azure_options\" dictionary.  # noqa: E501 # FIXME CoP\n                raise StoreBackendError(  # noqa: TRY003 # FIXME CoP\n                    f'Due to exception: \"{e!s}\", \"azure_client\" could not be created.'\n                ) from e\n        else:\n            raise StoreBackendError(  # noqa: TRY003 # FIXME CoP\n                'Unable to create azure \"BlobServiceClient\" due to missing azure.storage.blob dependency.'  # noqa: E501 # FIXME CoP\n            )\n\n        return blob_service_client.get_container_client(self.container)\n```\n\nAs can be seen, there is an arm in the if/else block that first checks for the presence of self.account_url after which the next arm checks for the combination of self.credential and self.account_url, which will never be reached. This makes it so that even when the credentials are set in the environment variable, it always goes into the account_url option and regenerates the credentials using AzureDefaultCredential.\n\n\n**Describe the solution you'd like**\nNow in general I think GX could really benefit from implementing singleton connection managers for e.g. blob storage, S3, so that connections are created, stored and re-used throughout the codebase, instead of reconnecting every single time. Because it is not just the credentials that are requested over and over again, if I am not mistaking the connections to the blob resources are also constantly recreated, leading to unnecessary extra overhead and decreased performance.\n\nHowever, at least I'd hope that you can correct the order of this if-else block (so that the arm that checks `self.credential and self.account_url ` comes before the one that just requires `self.account_url`), so that we can prevent the logic from requesting credentials over and over.\n\n**Describe alternatives you've considered**\nSo the singleton implementation I mentioned, but that'd be a looooot more work.\n\n**Additional context**\nScreenshot of re-authentication logs. This happens when I call a checkpoint which validates one pandas in-memory dataframe using one expectation suite with as only related action, the rendering of our Data Docs website. The website is also hosted on an Azure Storage Account.\n\n![Image](https://github.com/user-attachments/assets/bf132389-a643-4dbc-a0ed-7ab3ad05a032)\n\nBelow you can also find the code we use for calling checkpoints and running validations. As apparent from the TODO, it sits in calling the checkpoint.\n\n![Image](https://github.com/user-attachments/assets/7d60217c-8df6-4eff-b393-96de66b23a9c)\n\nOur checkpoint is defined as follows (it uses some of our supporting methods, but it just couples a pandas in-memory frame to one expectation suite and sets that in the checkpoint, along with the update_data_docs action):\n\n![Image](https://github.com/user-attachments/assets/52073abd-8c40-4457-b9bb-dc6c7430a96e)\n\n\n\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10896/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10896/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10887", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10887/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10887/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10887/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10887", "id": 2805342450, "node_id": "I_kwDOBiS_IM6nNiDy", "number": 10887, "title": "Unable to use EmailAction, [SSL: CERTIFICATE_VERIFY_FAILED]", "user": {"login": "pratik-choudhari", "id": 40862682, "node_id": "MDQ6VXNlcjQwODYyNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/40862682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pratik-choudhari", "html_url": "https://github.com/pratik-choudhari", "followers_url": "https://api.github.com/users/pratik-choudhari/followers", "following_url": "https://api.github.com/users/pratik-choudhari/following{/other_user}", "gists_url": "https://api.github.com/users/pratik-choudhari/gists{/gist_id}", "starred_url": "https://api.github.com/users/pratik-choudhari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pratik-choudhari/subscriptions", "organizations_url": "https://api.github.com/users/pratik-choudhari/orgs", "repos_url": "https://api.github.com/users/pratik-choudhari/repos", "events_url": "https://api.github.com/users/pratik-choudhari/events{/privacy}", "received_events_url": "https://api.github.com/users/pratik-choudhari/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-01-22T21:04:27Z", "updated_at": "2025-01-22T21:12:58Z", "closed_at": "2025-01-22T21:12:58Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nI am trying to use the EmailAction. Supplied all required arguments (working credentials). \nWhen the checkpoint executes, `[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1000)` is printed on the console.\n\n**To Reproduce**\nAction code(credentials redacted):\n![Image](https://github.com/user-attachments/assets/c3a9991f-c796-4017-96f3-35b9cd028f73)\n\n**Expected behavior**\nAn email should be delivered to intended recipients.\n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.3.1\n - Data Source: BigQuery\n - Cloud environment: N/A\n\n**Findings**\nIn `great_expectations/checkpoint/actions.py`  EmailAction._send_email() method\n\n![Image](https://github.com/user-attachments/assets/996b284a-a114-43ea-9b4f-093b66d21fd5)\n\nIf I don't use SSLContext in `elif self.use_tls` block, it delivers the email.\n\n![Image](https://github.com/user-attachments/assets/f27a217f-8034-4358-ae8f-d65bbabcb45b)", "closed_by": {"login": "pratik-choudhari", "id": 40862682, "node_id": "MDQ6VXNlcjQwODYyNjgy", "avatar_url": "https://avatars.githubusercontent.com/u/40862682?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pratik-choudhari", "html_url": "https://github.com/pratik-choudhari", "followers_url": "https://api.github.com/users/pratik-choudhari/followers", "following_url": "https://api.github.com/users/pratik-choudhari/following{/other_user}", "gists_url": "https://api.github.com/users/pratik-choudhari/gists{/gist_id}", "starred_url": "https://api.github.com/users/pratik-choudhari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pratik-choudhari/subscriptions", "organizations_url": "https://api.github.com/users/pratik-choudhari/orgs", "repos_url": "https://api.github.com/users/pratik-choudhari/repos", "events_url": "https://api.github.com/users/pratik-choudhari/events{/privacy}", "received_events_url": "https://api.github.com/users/pratik-choudhari/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10887/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10887/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10879", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10879/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10879/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10879/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10879", "id": 2798819888, "node_id": "I_kwDOBiS_IM6m0pow", "number": 10879, "title": "[BUG] Unable to add more than one expectation to suite when the expectations are created with the same column name parameter", "user": {"login": "Erua-chijioke", "id": 110530873, "node_id": "U_kgDOBpaROQ", "avatar_url": "https://avatars.githubusercontent.com/u/110530873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erua-chijioke", "html_url": "https://github.com/Erua-chijioke", "followers_url": "https://api.github.com/users/Erua-chijioke/followers", "following_url": "https://api.github.com/users/Erua-chijioke/following{/other_user}", "gists_url": "https://api.github.com/users/Erua-chijioke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erua-chijioke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erua-chijioke/subscriptions", "organizations_url": "https://api.github.com/users/Erua-chijioke/orgs", "repos_url": "https://api.github.com/users/Erua-chijioke/repos", "events_url": "https://api.github.com/users/Erua-chijioke/events{/privacy}", "received_events_url": "https://api.github.com/users/Erua-chijioke/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-01-20T10:15:26Z", "updated_at": "2025-01-23T14:11:03Z", "closed_at": "2025-01-23T14:11:01Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nUsing Great expectations version 1.3.0 - 1.3.2. I created to different expectations on a single column in a table and it adds only one of the expectation to the suite. The second expectation is not added.  \n**To Reproduce**\n**create data source, asset, batch definition and expectation suite**\ncontext = gx.get_context(project_root_dir=\"/dbfs/xxx\")\n\ndata_source_name = \"my_data_source\"\ndata_asset_name = \"my_dataframe_data_asset\"\nbatch_definition_name = \"my_batch_definition\"\ndata_source = context.data_sources.add_or_update_spark(name=data_source_name)\ndata_asset=data_source.add_dataframe_asset(name=data_asset_name)\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(batch_definition_name)\n\n\nsuite_name = \"my_expectation_suite\"\nsuite = gx.ExpectationSuite(name=suite_name)\nsuite = context.suites.add(suite)\n\nexpectation_0 = gx.expectations.ExpectColumnValuesToNotBeNull(column=\"ledgeraccount\")\ntry: \n    suite.add_expectation(expectation_0)\nexcept Exception as e:\n    print(\"Expectation already exists in the suite\")\n\n#After adding first expectation I printed the suite \nprint(suite)\n\n![Image](https://github.com/user-attachments/assets/3b1c6aa0-1cb0-43a8-ba92-2e39af1f8d0f)\n\nexpectation_2 = gx.expectations.ExpectColumnValuesToBeUnique(column=\"ledgeraccount\")\ntry: \n    suite.add_expectation(expectation_2)\nexcept Exception as e:\n    print(\"Expectation already exists in the suite\")\n\n\n#After adding second expectation I printed the suite, nothing changed implying the second expectation was not added because I used the same column as a parameter in creating the second expectation\nprint(suite)\n\n![Image](https://github.com/user-attachments/assets/7cda4a08-671a-4645-9aa4-062bde916ea3)\n\n\n\n\n**Expected behavior**\nBoth expectations should be added to the suite irrespective that they are expectations implemented on the same column.\n\n**Environment (please complete the following information):**\n - Operating System: Windows\n - Great Expectations Version: 1.3.0 - 1.3.2\n - Data Source: Spark Dataframe\n - Cloud environment:  Databricks\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10879/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10879/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10878", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10878/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10878/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10878/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10878", "id": 2798728747, "node_id": "I_kwDOBiS_IM6m0TYr", "number": 10878, "title": "Ability for Users to parameterize how the UnexpectedRowsExpectation appears on the DataDocs", "user": {"login": "Erua-chijioke", "id": 110530873, "node_id": "U_kgDOBpaROQ", "avatar_url": "https://avatars.githubusercontent.com/u/110530873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erua-chijioke", "html_url": "https://github.com/Erua-chijioke", "followers_url": "https://api.github.com/users/Erua-chijioke/followers", "following_url": "https://api.github.com/users/Erua-chijioke/following{/other_user}", "gists_url": "https://api.github.com/users/Erua-chijioke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erua-chijioke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erua-chijioke/subscriptions", "organizations_url": "https://api.github.com/users/Erua-chijioke/orgs", "repos_url": "https://api.github.com/users/Erua-chijioke/repos", "events_url": "https://api.github.com/users/Erua-chijioke/events{/privacy}", "received_events_url": "https://api.github.com/users/Erua-chijioke/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2025-01-20T09:39:42Z", "updated_at": "2025-01-23T14:12:34Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nCurrently on V1.3.2 and noticed that if one creates a custom expectation using the class UnexpectedRowsExpectation, The datadocs shows the number of unexpected row as seen in the image below. It does not show the content in the actual rows returned, \n\n![Image](https://github.com/user-attachments/assets/1c217792-3024-484e-9862-f250a5acd70b)\n\n**Describe the solution you'd like**\nParameterize how the results show up in the datadocs such that if a user want to see the actual unexpected rows in the datadocs, they can and if they don't want it shown, they can also opt for that. Parameterizing is the best approach because showing all the unexpected rows can be an information overload to some users. ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10878/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10878/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10871", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10871/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10871/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10871/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10871", "id": 2794824774, "node_id": "I_kwDOBiS_IM6mlaRG", "number": 10871, "title": "Slack notification message format", "user": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2025-01-17T08:03:17Z", "updated_at": "2025-02-13T05:55:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\nWith the update from 0.18.2x, the format of the slack notification changed and it's not as clean as before. Also, there is this extra 'Validation Results' message which bothers me a lot. Is anyone else facing the same issue?\n\nIssue 1: Exists in both version, i think in 0.17.x there wasn't this message. \"Validation results .. <file......>\" the long text in between --> can this be removed? anyone else facing this?\n\nIssue 2: In the older version like 0.18.13 before the reformat, the message is cleaner where Expectation suite name: and Data asset name are indented and bolded nicely which is very easy to see. However, after the upgrade, the message is just plain text and it's hard to see what is what.\n\n0.18.13 (old)\n<img width=\"658\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e24af6a2-57cf-43b0-bb77-34bd4910b920\" />\n\n1.3.1 (new)\n<img width=\"635\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/475a315c-a684-4060-b562-3cea19c0a4bb\" />\n\n**Describe the solution you'd like**\nA clean message on Slack.\n\n**Describe alternatives you've considered**\n\n\n**Additional context**\n\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10871/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10870", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10870/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10870/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10870/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10870", "id": 2794809942, "node_id": "I_kwDOBiS_IM6mlWpW", "number": 10870, "title": "[BUG] No Slack notification sent", "user": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-01-17T07:53:50Z", "updated_at": "2025-01-17T07:57:59Z", "closed_at": "2025-01-17T07:57:58Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nAfter the upgrade to GX 1.3.1, I tried to add Slacknotification but don't see any slack notification appearing. Previously with 0.18.x it worked. \n\n**To Reproduce**\n`try:\n            validation_definition = context.validation_definitions.add_or_update(\n                gx.ValidationDefinition(data=batch_definition, suite=suite, name=validation_def_name)\n            )\n        except gx.exceptions.exceptions.DataContextError:\n            validation_definition = context.validation_definitions.get(name=validation_def_name)\n\n        # Action list\n        def _create_action_list():\n\n            action_list = []\n\n            if slack_noti == 'Y':\n                action_list.append(\n                    SlackNotificationAction(\n                        name=\"send_slack_notification_on_failed_expectations\",\n                        slack_token=f\"${self.validation_notification_slack_webhook}\",\n                        # slack_channel=self.validation_notification_slack_channel,\n                        notify_on=\"all\",\n                        notify_with=[\"s3_site\"],\n                        renderer={\n                            \"module_name\": \"great_expectations.render.renderer.slack_renderer\",\n                            \"class_name\": \"SlackRenderer\",\n                        },\n                        show_failed_expectations=True,\n                    ),\n                )\n\n            action_list.append(\n                UpdateDataDocsAction(\n                    name=\"update_all_data_docs\",\n                ),\n            )\n            return action_list\n        \n        action_list = _create_action_list()\n        \n        # Result format\n        result_format = {\n            \"result_format\": {\n                \"result_format\": \"COMPLETE\",\n                \"unexpected_index_column_names\": [\"ID\"],\n                \"include_unexpected_rows\": True,\n            }\n        }\n    \n        def add_checkpoint():\n            checkpoint = context.checkpoints.add(\n                gx.Checkpoint(\n                    name = f\"{chk_name}\",\n                    validation_definitions = [validation_definition],\n                    actions = action_list,\n                    result_format=result_format,\n                )\n            )\n            return checkpoint\n\n\n        try:\n            checkpoint = add_checkpoint()\n        except gx.exceptions.exceptions.DataContextError:\n            context.checkpoints.delete(name=chk_name)\n            checkpoint = add_checkpoint()\n\n\n        checkpoint_result = checkpoint.run(\n            batch_parameters={\"dataframe\": df_main}\n   \n        )`\n\n**Expected behavior**\nA Slack notification should appear with notify_on = 'all'\n\n**Environment (please complete the following information):**\n - Operating System: [e.g. Linux, MacOS, Windows]: MacOS\n - Great Expectations Version: [e.g. 0.13.2]: 1.3.1\n - Data Source: [e.g. Pandas, Snowflake]: Snowflake, spark dataframe\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP], AWS\n\n**Additional context**\nAdd any other context about the problem here.\n", "closed_by": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10870/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10870/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10855", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10855/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10855/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10855/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10855", "id": 2789228846, "node_id": "I_kwDOBiS_IM6mQEEu", "number": 10855, "title": "Cannot import great_expectations", "user": {"login": "tnhgiang", "id": 45427365, "node_id": "MDQ6VXNlcjQ1NDI3MzY1", "avatar_url": "https://avatars.githubusercontent.com/u/45427365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tnhgiang", "html_url": "https://github.com/tnhgiang", "followers_url": "https://api.github.com/users/tnhgiang/followers", "following_url": "https://api.github.com/users/tnhgiang/following{/other_user}", "gists_url": "https://api.github.com/users/tnhgiang/gists{/gist_id}", "starred_url": "https://api.github.com/users/tnhgiang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tnhgiang/subscriptions", "organizations_url": "https://api.github.com/users/tnhgiang/orgs", "repos_url": "https://api.github.com/users/tnhgiang/repos", "events_url": "https://api.github.com/users/tnhgiang/events{/privacy}", "received_events_url": "https://api.github.com/users/tnhgiang/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-01-15T09:05:09Z", "updated_at": "2025-02-09T11:37:51Z", "closed_at": "2025-01-21T21:47:59Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\nAccording to the [official document](https://docs.greatexpectations.io/docs/core/set_up_a_gx_environment/create_a_data_context#request-an-available-data-context), I tried to create a gx DataContext. But, cannot import `great_expectations` package \n\nHere is the logger\n```\nTraceback (most recent call last):\n  File \"/Users/tnhgiang/code/personal/NYC-Taxi-Data-Pipeline/pipeline/gx/gx_init.py\", line 1, in <module>\n    import great_expectations as gx\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/__init__.py\", line 10, in <module>\n    import great_expectations.data_context  # isort:skip\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/data_context/__init__.py\", line 1, in <module>\n    from great_expectations.data_context.data_context import (\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/data_context/data_context/__init__.py\", line 1, in <module>\n    from great_expectations.data_context.data_context.abstract_data_context import (\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 41, in <module>\n    from great_expectations.core import ExpectationSuite\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/core/__init__.py\", line 3, in <module>\n    from .domain import Domain\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/core/domain.py\", line 9, in <module>\n    from great_expectations.core.id_dict import IDDict\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/core/id_dict.py\", line 8, in <module>\n    from great_expectations.util import convert_to_json_serializable  # noqa: TID251\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/great_expectations/util.py\", line 42, in <module>\n    import pandas as pd\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/pandas/__init__.py\", line 46, in <module>\n    from pandas.core.api import (\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/pandas/core/api.py\", line 1, in <module>\n    from pandas._libs import (\n  File \"/Users/tnhgiang/Library/Caches/pypoetry/virtualenvs/nyc-taxi-data-pipeline-OKqUdc96-py3.11/lib/python3.11/site-packages/pandas/_libs/__init__.py\", line 18, in <module>\n    from pandas._libs.interval import Interval\n  File \"interval.pyx\", line 1, in init pandas._libs.interval\nValueError: numpy.dtype size changed, may indicate binary incompatibility. Expected 96 from C header, got 88 from PyObject\n```\n\n**To Reproduce**\nJust follow the instruction from [official documentation](https://docs.greatexpectations.io/docs/core/set_up_a_gx_environment/create_a_data_context#request-an-available-data-context)\n```python\nimport great_expectations as gx\n```\n\n**Expected behavior**\nI'm expecting to import `great_expectations` successfully\n\n**Environment (please complete the following information):**\n - Operating System: MacOS\n - Great Expectations Version: 1.3.1\n - Python: 3.11\n - Pandas: 2.1.1\n - Numpy: 2.1.3\n - Data Source: Not configured yet\n\n**Additional context**\nI'm using poetry as the package management\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10855/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10855/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10852", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10852/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10852/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10852/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10852", "id": 2787715284, "node_id": "I_kwDOBiS_IM6mKSjU", "number": 10852, "title": "Using 'ExpectColumnValuesToBeUnique' calls 2 extra unwanted checks which fail", "user": {"login": "mhaaan", "id": 103126644, "node_id": "U_kgDOBiWWdA", "avatar_url": "https://avatars.githubusercontent.com/u/103126644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhaaan", "html_url": "https://github.com/mhaaan", "followers_url": "https://api.github.com/users/mhaaan/followers", "following_url": "https://api.github.com/users/mhaaan/following{/other_user}", "gists_url": "https://api.github.com/users/mhaaan/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhaaan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhaaan/subscriptions", "organizations_url": "https://api.github.com/users/mhaaan/orgs", "repos_url": "https://api.github.com/users/mhaaan/repos", "events_url": "https://api.github.com/users/mhaaan/events{/privacy}", "received_events_url": "https://api.github.com/users/mhaaan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2025-01-14T16:39:21Z", "updated_at": "2025-01-30T09:15:05Z", "closed_at": "2025-01-30T09:15:04Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I use this check ExpectColumnValuesToBeUnique to see if there are any duplicates in the column and that works completely fine.\n\n``\n{\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_be_unique\",\n        \"kwargs\": {\n          \"batch_id\": \"my_batch\",\n          \"column\": \"`Object_Number~STATUSOBJECT`\"\n        },\n        \"meta\": {},\n        \"id\": \"my_id\"\n      },\n      \"result\": {\n        \"element_count\": 38676578,\n        \"unexpected_count\": 38595653,\n        \"unexpected_percent\": 99.79076483964016,\n        \"partial_unexpected_list\": [\n          \"OR000020000009\",\n          # removed for length\n        ],\n        \"missing_count\": 0,\n        \"missing_percent\": 0.0,\n        \"unexpected_percent_total\": 99.79076483964016,\n        \"unexpected_percent_nonmissing\": 99.79076483964016,\n        \"partial_unexpected_counts\": [\n          {\n            \"value\": \"OR000020000009\",\n            \"count\": 20\n          }\n        ]\n      },\n``\n\nHowever in the results I can see that there are 2 extra checks that have been called and both fail.\nThe checks that are called are **expect_column_to_exist** and **expect_column_values_to_be_in_type_list**\n\n``{\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_to_exist\",\n        \"kwargs\": {\n          \"batch_id\": \"\",\n          \"column\": \"`Object_Number~STATUSOBJECT`\"\n        },\n        \"meta\": {},\n        \"id\": \"\"\n      },\n      \"result\": {},\n      \"meta\": {},\n      \"exception_info\": {\n        \"raised_exception\": false,\n        \"exception_traceback\": null,\n        \"exception_message\": null\n      }\n    },\n    {\n      \"success\": false,\n      \"expectation_config\": {\n        \"type\": \"expect_column_values_to_be_in_type_list\",\n        \"kwargs\": {\n          \"column\": \"`Object_Number~STATUSOBJECT`\",\n          \"type_list\": [\n            \"StringType\"\n          ],\n          \"batch_id\": \"\"\n        },\n        \"meta\": {},\n        \"id\": \"\"\n      },\n      \"result\": {},\n      \"meta\": {},\n      \"exception_info\": {\n        \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py\\\", line 650, in graph_validate\\n    result = expectation.metrics_validate(\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py\\\", line 1150, in metrics_validate\\n    expectation_validation_result: Union[ExpectationValidationResult, dict] = self._validate(\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/core/expect_column_values_to_be_in_type_list.py\\\", line 594, in _validate\\n    [\\nIndexError: list index out of range\\n\",\n        \"exception_message\": \"list index out of range\",\n        \"raised_exception\": true\n      }\n    },\n``\n\nEspecially this **expect_column_to_exist**, I'm not sure why it fails because the same column is used for the uniqueness check and it manages to find the column. I also pass the column wrapped in backticks as it contains the tilde which isnt allowed in sql statements. So not sure why it fails but would also like to know why they are called in the first place.\n\nAny help would be greatly appreciated! Thank you", "closed_by": {"login": "mhaaan", "id": 103126644, "node_id": "U_kgDOBiWWdA", "avatar_url": "https://avatars.githubusercontent.com/u/103126644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhaaan", "html_url": "https://github.com/mhaaan", "followers_url": "https://api.github.com/users/mhaaan/followers", "following_url": "https://api.github.com/users/mhaaan/following{/other_user}", "gists_url": "https://api.github.com/users/mhaaan/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhaaan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhaaan/subscriptions", "organizations_url": "https://api.github.com/users/mhaaan/orgs", "repos_url": "https://api.github.com/users/mhaaan/repos", "events_url": "https://api.github.com/users/mhaaan/events{/privacy}", "received_events_url": "https://api.github.com/users/mhaaan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10852/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10852/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10849", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10849/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10849/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10849/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10849", "id": 2783357583, "node_id": "I_kwDOBiS_IM6l5qqP", "number": 10849, "title": "Incorrect validation_result[\"results\"][\"exception_info\"] structure when raised_exception == True", "user": {"login": "vasilijyaromenka", "id": 159802895, "node_id": "U_kgDOCYZmDw", "avatar_url": "https://avatars.githubusercontent.com/u/159802895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasilijyaromenka", "html_url": "https://github.com/vasilijyaromenka", "followers_url": "https://api.github.com/users/vasilijyaromenka/followers", "following_url": "https://api.github.com/users/vasilijyaromenka/following{/other_user}", "gists_url": "https://api.github.com/users/vasilijyaromenka/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasilijyaromenka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasilijyaromenka/subscriptions", "organizations_url": "https://api.github.com/users/vasilijyaromenka/orgs", "repos_url": "https://api.github.com/users/vasilijyaromenka/repos", "events_url": "https://api.github.com/users/vasilijyaromenka/events{/privacy}", "received_events_url": "https://api.github.com/users/vasilijyaromenka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2025-01-13T08:49:30Z", "updated_at": "2025-05-26T18:49:24Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen raised_exception == True, exception_info has incorrect structure. \r\nInstead of {'raised_exception': True, 'exception_traceback': 'The traceback', 'exception_message': 'some message'}, it has the following structure:\r\n{\"additional_key\" : {'raised_exception': True, 'exception_traceback': 'The traceback', 'exception_message': 'some message'}}\r\n\r\n**To Reproduce**\r\n```\r\n# df to validate \r\ndf = spark.sql(\"\"\"\r\n            SELECT  id , CASE WHEN id%4 = 0 THEN \"NOT NULL\" END AS colname\r\n            FROM  range(1, 100)\"\"\")\r\n\r\n# update expectation suite\r\nsuite_name = \"e_simple_unit_test\"\r\n\r\nsuite = context.suites.add_or_update (gx.ExpectationSuite(name=suite_name))\r\n\r\ncorrect_column_name = gx.expectations.ExpectColumnValuesToNotBeNull (\r\n    column=\"colname\", mostly=1, row_condition = \"id%2 = 0\", condition_parser = \"spark\")\r\n    \r\nincorrect_column_name = gx.expectations.ExpectColumnValuesToNotBeNull (\r\n    column=\"___colname___\", mostly=1, row_condition = \"id%2 = 0\", condition_parser = \"spark\")\r\n\r\nsuite.add_expectation(correct_column_name)\r\nsuite.add_expectation(incorrect_column_name)\r\n\r\nsuite.save()\r\n\r\n# update validation\r\ndata_source_name = data_source_configs[\"data_source_name\"]\r\ndata_asset_name = data_source_configs[\"data_asset_name\"]\r\nbatch_definition_name = data_source_configs[\"batch_definition_name\"]\r\n\r\nbatch_definition = context.data_sources.get(data_source_name).get_asset(data_asset_name).get_batch_definition(batch_definition_name)\r\nvalidation_definition_name = \"unit_test_validation_definition\"\r\n\r\nvalidation_definition = gx.ValidationDefinition(\r\ndata=batch_definition, suite=suite, name=validation_definition_name\r\n)\r\n\r\nunit_test_validation_definition = context.validation_definitions.add_or_update(validation_definition)\r\n\r\n# run the ValidationDefinition\r\nvalidation_results = unit_test_validation_definition.run(\r\n                                    batch_parameters={\"dataframe\": df}, \r\n                                    result_format = \"COMPLETE\")\r\nresults_dict = validation_results.to_json_dict()\r\n\r\nfor dct in results_dict[\"results\"]:\r\n    if \"exception_message\" in dct[\"exception_info\"].keys():\r\n        print(\"\\nCorrect exception_info structure:\")\r\n    elif  \"exception_message\" not in dct[\"exception_info\"].keys():\r\n        print(\"\\nInorrect exception_info structure:\")\r\n\r\n    print(dct[\"exception_info\"])\r\n```\r\n\r\nreturns -- >\r\n\r\n```\r\n\r\nInorrect exception_info structure:\r\n{\"('column_values.nonnull.condition', '242ce27d28b7ac28fe08ad7be0377b1a', ())\": {'exception_traceback': 'Traceback.......', 'exception_message': 'Error: The column \"___colname___\" in BatchData does not exist.', 'raised_exception': True}}\r\n\r\nCorrect exception_info structure:\r\n{'raised_exception': False, 'exception_traceback': None, 'exception_message': None}\r\n```\r\n\r\n**Expected behavior**\r\n```\r\nCorrect exception_info structure:\r\n{'raised_exception': True, 'exception_traceback': 'Traceback.......', 'exception_message': 'Error: The column \"___colname___\" in BatchData does not exist.'}\r\n\r\nCorrect exception_info structure:\r\n{'raised_exception': False, 'exception_traceback': None, 'exception_message': None}\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: [e.g. 1.3.1]\r\n - Data Source: Spark\r\n - Cloud environment: Databricks\r\n\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10849/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10849/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10848", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10848/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10848/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10848/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10848", "id": 2782842419, "node_id": "I_kwDOBiS_IM6l3s4z", "number": 10848, "title": "Update Documentation - Data Profiling", "user": {"login": "PS-Priyanka", "id": 98494462, "node_id": "U_kgDOBd7n_g", "avatar_url": "https://avatars.githubusercontent.com/u/98494462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PS-Priyanka", "html_url": "https://github.com/PS-Priyanka", "followers_url": "https://api.github.com/users/PS-Priyanka/followers", "following_url": "https://api.github.com/users/PS-Priyanka/following{/other_user}", "gists_url": "https://api.github.com/users/PS-Priyanka/gists{/gist_id}", "starred_url": "https://api.github.com/users/PS-Priyanka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PS-Priyanka/subscriptions", "organizations_url": "https://api.github.com/users/PS-Priyanka/orgs", "repos_url": "https://api.github.com/users/PS-Priyanka/repos", "events_url": "https://api.github.com/users/PS-Priyanka/events{/privacy}", "received_events_url": "https://api.github.com/users/PS-Priyanka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2025-01-13T01:51:07Z", "updated_at": "2025-01-29T13:48:06Z", "closed_at": "2025-01-29T13:48:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nFollowed the intructions given on page \"https://greatexpectations.io/blog/data-assistants-close-the-data-trust-gap\" for Data Assistant and when I try to run the given piece of code, it's not working.\r\n\r\n**To Reproduce**\r\nReference code on the website: \r\n![image](https://github.com/user-attachments/assets/c9123b2e-a945-4582-bd85-e2e43b0cdc8a)\r\n\r\nError code in a notebook:\r\n![image](https://github.com/user-attachments/assets/9d5045d7-1a7f-45e4-bd72-b49577ace07b)\r\n\r\n**Expected behavior**\r\nShould execute as explained on the web page: https://greatexpectations.io/blog/data-assistants-close-the-data-trust-gap\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.3.1\r\n - Data Source: Pandas\r\n - Cloud environment: none\r\n\r\n**Additional context**\r\nI'm trying to understand the services offered by great_expectations for data profiling.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10848/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10848/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10830", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10830/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10830/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10830/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10830", "id": 2776101585, "node_id": "I_kwDOBiS_IM6ld_LR", "number": 10830, "title": "Unable to add two expectations (ExpectColumnValuesToBeUnique, ExpectColumnValuesToNotBeNull) to the same column", "user": {"login": "indresh-singh", "id": 102150194, "node_id": "U_kgDOBhawMg", "avatar_url": "https://avatars.githubusercontent.com/u/102150194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/indresh-singh", "html_url": "https://github.com/indresh-singh", "followers_url": "https://api.github.com/users/indresh-singh/followers", "following_url": "https://api.github.com/users/indresh-singh/following{/other_user}", "gists_url": "https://api.github.com/users/indresh-singh/gists{/gist_id}", "starred_url": "https://api.github.com/users/indresh-singh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/indresh-singh/subscriptions", "organizations_url": "https://api.github.com/users/indresh-singh/orgs", "repos_url": "https://api.github.com/users/indresh-singh/repos", "events_url": "https://api.github.com/users/indresh-singh/events{/privacy}", "received_events_url": "https://api.github.com/users/indresh-singh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-01-08T18:56:09Z", "updated_at": "2025-01-23T14:11:22Z", "closed_at": "2025-01-23T14:11:20Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am unable to add ExpectColumnValuesToBeUnique, ExpectColumnValuesToNotBeNull expectations to the same column. Also, when I ran the below testing of whether two expectations are being treated as equal/duplicate, it evaluated to true even when the \"expectation_type\" is same.\r\n\r\n\r\n**CODE**\r\n```\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToBeUnique(column=\"sku_id\",)\r\n)\r\n\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToNotBeNull(column=\"sku_id\")\r\n)\r\n```\r\n\r\n**OUTPUT**\r\nHere's how the expectation suite looks like at this stage.\r\n\r\n```\r\n{\r\n  \"name\": \"forecast_expectation_suite\",\r\n  \"id\": null,\r\n  \"expectations\": [\r\n    {\r\n      \"type\": \"expect_column_values_to_be_unique\",\r\n      \"kwargs\": {\r\n        \"column\": \"sku_id\"\r\n      },\r\n      \"meta\": {}\r\n    }\r\n  ],\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"1.2.4\"\r\n  },\r\n  \"notes\": null\r\n```\r\n\r\n**ANALYSIS**\r\n\r\nThe below internal function to check for equalness of two expectations falsely equates to True. Since expectation_type is a defining property of whether expectations are different it should be considered rather than just relying on \"==\" operator.\r\n\r\n```\r\nprint(\r\n    suite._expectations_are_equalish(\r\n        gx.expectations.ExpectColumnValuesToBeUnique(column=\"sku_id\"}),\r\n        gx.expectations.ExpectColumnValuesToNotBeNull(column=\"sku_id\"}\r\n)\r\n    )\r\n)\r\n```\r\n\r\n**PATCH:**\r\n\r\nBelow is the patch to fix the same. We need to consider expectation_type when evaulating whether two expectations are equal.\r\n\r\n```\r\n@staticmethod\r\ndef _expectations_are_equalish(expectation_a: Expectation, expectation_b: Expectation) -> bool:\r\n    exclude_params = {\"id\", \"rendered_content\", \"notes\", \"meta\"}\r\n    return (\r\n        expectation_a.expectation_type == expectation_b.expectation_type and\r\n        expectation_a.dict(exclude=exclude_params) == expectation_b.dict(exclude=exclude_params)\r\n    )\r\n```\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10830/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10830/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10827", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10827/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10827/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10827/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10827", "id": 2773076000, "node_id": "I_kwDOBiS_IM6lScgg", "number": 10827, "title": "Unquoted strings in `unexpected_index_query` values of gx.ValidationDefinition.run() result", "user": {"login": "vasilicommify", "id": 169456230, "node_id": "U_kgDOChmyZg", "avatar_url": "https://avatars.githubusercontent.com/u/169456230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasilicommify", "html_url": "https://github.com/vasilicommify", "followers_url": "https://api.github.com/users/vasilicommify/followers", "following_url": "https://api.github.com/users/vasilicommify/following{/other_user}", "gists_url": "https://api.github.com/users/vasilicommify/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasilicommify/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasilicommify/subscriptions", "organizations_url": "https://api.github.com/users/vasilicommify/orgs", "repos_url": "https://api.github.com/users/vasilicommify/repos", "events_url": "https://api.github.com/users/vasilicommify/events{/privacy}", "received_events_url": "https://api.github.com/users/vasilicommify/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-01-07T15:09:11Z", "updated_at": "2025-01-31T13:27:15Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\"COMPLETE\" result_format outputs `unexpected_index_query` \r\nThe value of the  `unexpected_index_query`  key cannot be used to extract rows with issue, even the part inside `expr( )`\r\nOne of the reasons is that string values are not quoted \r\n\r\n1)  - there are strings in `value_set`, but in `unexpected_index_query` these strings are not quoted \r\n```\r\n    {\r\n      \"success\": true,\r\n      \"expectation_config\": {\r\n        \"type\": \"expect_column_values_to_be_in_set\",\r\n        \"kwargs\": {\r\n          \"batch_id\": \"my_spark_datasource-my_spark_dataframe\",\r\n          \"column\": \"in_set_str\",\r\n          \"value_set\": [\r\n            \"Val1\",\r\n            \"Val2\"\r\n          ]\r\n        },\r\n        \"meta\": {\r\n          \"note\": \"column_values - without distinct\"\r\n        }\r\n      },\r\n      \"result\": {\r\n        \"element_count\": 100,\r\n        \"unexpected_count\": 0,\r\n        \"unexpected_percent\": 0.0,\r\n        \"partial_unexpected_list\": [],\r\n        \"missing_count\": 11,\r\n        \"missing_percent\": 11.0,\r\n        \"unexpected_percent_total\": 0.0,\r\n        \"unexpected_percent_nonmissing\": 0.0,\r\n        \"partial_unexpected_counts\": [],\r\n        \"unexpected_list\": [],\r\n        \"unexpected_index_query\": \"df.filter(F.expr((in_set_str IS NOT NULL) AND (NOT (in_set_str IN (Val1, Val2)))))\"\r\n      },\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"raised_exception\": false,\r\n        \"exception_traceback\": null,\r\n        \"exception_message\": null\r\n      }\r\n    },\r\n```\r\n\r\n2) regex expression is not quoted \r\n```\r\n\"unexpected_index_query\": \"df.filter(F.expr((email IS NOT NULL) AND (NOT RLIKE(email, ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$))))\"\r\n```\r\n\r\n**To Reproduce**\r\n```\r\n# expectation_suite = any expectation suite with with string fields validations\r\n\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=expectation_suite, name=validation_definition_name\r\n  )\r\n\r\nvalidation_results = validation_definition.run(\r\n                                      batch_parameters={\"dataframe\": data_frame_to_check}, \r\n                                      result_format = \"COMPLETE\")            \r\nvalidation_results \r\n```\r\n\r\n**Expected behavior**\r\nstring and regex expressions should be quoted in `unexpected_index_query` - either with single or double quates for spark \r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: 1.3.0\r\n - Data Source: Spark\r\n - Cloud environment: Databricks\r\n\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10827/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10827/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10823", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10823/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10823/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10823/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10823", "id": 2769853912, "node_id": "I_kwDOBiS_IM6lGJ3Y", "number": 10823, "title": "Update Documentation for GX Core ( Run Validations Section )", "user": {"login": "RupeshKeesaram", "id": 75531784, "node_id": "MDQ6VXNlcjc1NTMxNzg0", "avatar_url": "https://avatars.githubusercontent.com/u/75531784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RupeshKeesaram", "html_url": "https://github.com/RupeshKeesaram", "followers_url": "https://api.github.com/users/RupeshKeesaram/followers", "following_url": "https://api.github.com/users/RupeshKeesaram/following{/other_user}", "gists_url": "https://api.github.com/users/RupeshKeesaram/gists{/gist_id}", "starred_url": "https://api.github.com/users/RupeshKeesaram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RupeshKeesaram/subscriptions", "organizations_url": "https://api.github.com/users/RupeshKeesaram/orgs", "repos_url": "https://api.github.com/users/RupeshKeesaram/repos", "events_url": "https://api.github.com/users/RupeshKeesaram/events{/privacy}", "received_events_url": "https://api.github.com/users/RupeshKeesaram/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2025-01-06T05:29:15Z", "updated_at": "2025-01-23T15:02:02Z", "closed_at": "2025-01-23T15:02:00Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen following the documentation to know more about the Validation definition & running validations, I'm encountering the following issue\r\n\r\n**BuildBatchRequestError: Bad input to build_batch_request: options must contain exactly 1 key, 'dataframe'.**\r\n\r\nEven though answer to this issue is provided at https://github.com/great-expectations/great_expectations/issues/10270 , it's not updated in the documentation\r\n\r\n\r\n**To Reproduce**\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\nset_up_context_for_example(context)\r\n\r\n# Retrieve an Expectation Suite\r\nexpectation_suite_name = \"my_expectation_suite\"\r\nexpectation_suite = context.suites.get(name=expectation_suite_name)\r\n\r\n# Retrieve a Batch Definition\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\nbatch_definition = (\r\n    context.data_sources.get(data_source_name)\r\n    .get_asset(data_asset_name)\r\n    .get_batch_definition(batch_definition_name)\r\n)\r\n\r\n# Create a Validation Definition\r\ndefinition_name = \"my_validation_definition\"\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=expectation_suite, name=definition_name\r\n)\r\n\r\n# Add the Validation Definition to the Data Context\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\nvalidation_results = validation_definition.run()\r\n\r\n\r\n**Expected behavior**\r\nThe batch data should be validated with the provided expectation suite, but it's throwing an **BuildBatchRequestError**.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Windows]\r\n - Great Expectations Version: [1.2.6]\r\n - Data Source: [Pandas]\r\n - Cloud environment: [Local]\r\n\r\n**Additional context**\r\nThe issue can be mitigated or fixed by passing batch_parameters. Update the documentation for the same. \r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10823/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10823/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10816", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10816/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10816/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10816/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10816", "id": 2766208830, "node_id": "I_kwDOBiS_IM6k4P8-", "number": 10816, "title": "gx.ValidationDefinition.run() adds the Validation Definition to Data Context", "user": {"login": "vasilijyaromenka", "id": 159802895, "node_id": "U_kgDOCYZmDw", "avatar_url": "https://avatars.githubusercontent.com/u/159802895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasilijyaromenka", "html_url": "https://github.com/vasilijyaromenka", "followers_url": "https://api.github.com/users/vasilijyaromenka/followers", "following_url": "https://api.github.com/users/vasilijyaromenka/following{/other_user}", "gists_url": "https://api.github.com/users/vasilijyaromenka/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasilijyaromenka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasilijyaromenka/subscriptions", "organizations_url": "https://api.github.com/users/vasilijyaromenka/orgs", "repos_url": "https://api.github.com/users/vasilijyaromenka/repos", "events_url": "https://api.github.com/users/vasilijyaromenka/events{/privacy}", "received_events_url": "https://api.github.com/users/vasilijyaromenka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2025-01-02T15:20:56Z", "updated_at": "2025-01-21T21:47:03Z", "closed_at": "2025-01-21T21:46:57Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen running `run()` method of a `gx.ValidationDefinition` instance the validation definition is being added to the File Data Context.  \r\nIt is not the expected behavior according to `help(gx.ValidationDefinition.run)`.  We have the  `add()` method for to add validation definitions to the context.\r\nIn my use case, I want to configure validation definitions in memory, matching different dataframes and suites. But I can't reuse the code without adding the `delete()` method -- see STR\r\n\r\n**To Reproduce**\r\n```\r\nexpectation_suite = context.suites.get(name=suite_name)\r\nbatch_definition = context.data_sources.get(data_source_name).get_asset(data_asset_name).get_batch_definition(batch_definition_name)\r\nvalidation_definition_name = \"my_validation_definition\"\r\n\r\n# Create a Validation Definition\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=expectation_suite, name=validation_definition_name\r\n)\r\n\r\n# we have a dedicated method to add the Validation Definition to the Data Context, but I do not use it:\r\n# validation_definition = context.validation_definitions.add(validation_definition)\r\n\r\n# After the Validation Definition Run, the validation definition is available in the Data Context, even without add() method \r\nvalidation_results = validation_definition.run(batch_parameters={\"dataframe\": dataframe}, result_format = \"COMPLETE\") # \"SUMMARY\" / \"COMPLETE\"\r\n\r\n# When next time this code is run I encounter this error <<StoreBackendError: Store already has the following key: ('my_validation_definition',).>>\r\n# That is why I delete the Validation Definition from the Data Context every run\r\n# context.validation_definitions.delete(validation_definition_name)\r\n\r\n```\r\nif run the code above more than once as is, without uncommenting the line with validation_definitions.delete(),\r\nit will cause the following error :  \r\n`StoreBackendError: Store already has the following key: ('my_validation_definition',).`\r\n```\r\nStoreBackendError: Store already has the following key: ('my_validation_definition',).\r\n---------------------------------------------------------------------------\r\nStoreBackendError                         Traceback (most recent call last)\r\nFile <command-3947137279416384>, line 14\r\n      6 validation_definition = gx.ValidationDefinition(\r\n      7     data=batch_definition, suite=expectation_suite, name=validation_definition_name\r\n      8 )\r\n     10 # we have a dedicated method to add the Validation Definition to the Data Context, but I do not use it:\r\n     11 # validation_definition = context.validation_definitions.add(validation_definition)\r\n     12 \r\n     13 # After the Validation Definition Run, the validation definition is available in the Data Context => When next time this code is run \r\n---> 14 validation_results = validation_definition.run(batch_parameters={\"dataframe\": dataframe}, result_format = \"COMPLETE\") # \"SUMMARY\" / \"COMPLETE\"\r\n     17 context.validation_definitions.delete(validation_definition_name)\r\n     18 print(validation_results)\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/core/validation_definition.py:280, in ValidationDefinition.run(self, checkpoint_id, batch_parameters, expectation_parameters, result_format, run_id)\r\n    277 if not diagnostics.success:\r\n    278     # The validation definition itself is not added but all children are - we can add it for the user # noqa: E501\r\n    279     if not diagnostics.parent_added and diagnostics.children_added:\r\n--> 280         self._add_to_store()\r\n    281     else:\r\n    282         diagnostics.raise_for_error()\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/core/validation_definition.py:381, in ValidationDefinition._add_to_store(self)\r\n    378 store = project_manager.get_validation_definition_store()\r\n    379 key = store.get_key(name=self.name, id=self.id)\r\n--> 381 store.add(key=key, value=self)\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/data_context/store/store.py:299, in Store.add(self, key, value, **kwargs)\r\n    295 def add(self, key: DataContextKey, value: Any, **kwargs) -> None:\r\n    296     \"\"\"\r\n    297     Essentially `set` but validates that a given key-value pair does not already exist.\r\n    298     \"\"\"\r\n--> 299     return self._add(key=key, value=value, **kwargs)\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/data_context/store/validation_definition_store.py:100, in ValidationDefinitionStore._add(self, key, value, **kwargs)\r\n     97 if not self.cloud_mode:\r\n     98     # this logic should move to the store backend, but is implemented here for now\r\n     99     value.id = str(uuid.uuid4())\r\n--> 100 return super()._add(key=key, value=value, **kwargs)\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/data_context/store/store.py:303, in Store._add(self, key, value, **kwargs)\r\n    301 def _add(self, key: DataContextKey, value: Any, **kwargs) -> Any:\r\n    302     self._validate_key(key)\r\n--> 303     output = self._store_backend.add(self.key_to_tuple(key), self.serialize(value), **kwargs)\r\n    304     if hasattr(value, \"id\") and hasattr(output, \"id\"):\r\n    305         value.id = output.id\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/data_context/store/_store_backend.py:141, in StoreBackend.add(self, key, value, **kwargs)\r\n    137 def add(self, key, value, **kwargs):\r\n    138     \"\"\"\r\n    139     Essentially `set` but validates that a given key-value pair does not already exist.\r\n    140     \"\"\"\r\n--> 141     return self._add(key=key, value=value, **kwargs)\r\n\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-e1011015-1c0d-4390-bbff-4675253d3a70/lib/python3.10/site-packages/great_expectations/data_context/store/_store_backend.py:145, in StoreBackend._add(self, key, value, **kwargs)\r\n    143 def _add(self, key, value, **kwargs):\r\n    144     if self.has_key(key):\r\n--> 145         raise StoreBackendError(f\"Store already has the following key: {key}.\")  # noqa: TRY003\r\n    146     return self.set(key=key, value=value, **kwargs)\r\n\r\nStoreBackendError: Store already has the following key: ('my_validation_definition',).\r\n```\r\n\r\n\r\n \r\n**Expected behavior**\r\nA `gx.ValidationDefinition.run()` should be run without saving it to the \"validation_definitions\" folder \r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: 1.3.0\r\n - Data Source: Spark\r\n - Cloud environment: Databricks on Azure\r\n\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10816/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10816/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10811", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10811/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10811/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10811/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10811", "id": 2759707845, "node_id": "I_kwDOBiS_IM6kfczF", "number": 10811, "title": "Not able to add expectations ExpectColumnValuesToNotBeNull & ExpectColumnValuesToBeUnique for same column of dataset.", "user": {"login": "sengaay", "id": 192863791, "node_id": "U_kgDOC37eLw", "avatar_url": "https://avatars.githubusercontent.com/u/192863791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sengaay", "html_url": "https://github.com/sengaay", "followers_url": "https://api.github.com/users/sengaay/followers", "following_url": "https://api.github.com/users/sengaay/following{/other_user}", "gists_url": "https://api.github.com/users/sengaay/gists{/gist_id}", "starred_url": "https://api.github.com/users/sengaay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sengaay/subscriptions", "organizations_url": "https://api.github.com/users/sengaay/orgs", "repos_url": "https://api.github.com/users/sengaay/repos", "events_url": "https://api.github.com/users/sengaay/events{/privacy}", "received_events_url": "https://api.github.com/users/sengaay/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2024-12-26T12:24:18Z", "updated_at": "2025-01-23T14:11:29Z", "closed_at": "2025-01-23T14:11:27Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am trying to add following two expectations in same suite on same column of a table:\r\n\r\n- ExpectColumnValuesToNotBeNull\r\n- ExpectColumnValuesToBeUnique\r\n\r\nWhen I am doing so, only one expectation is getting added and second expectation does not show in the suite and neither its throwing any error.\r\n\r\n# Chunk of code for creating suite:\r\nsuite = context.suites.add(gx.core.expectation_suite.ExpectationSuite(name=f\"{table_name}_expectation_suite\"))\r\nsuite.add_expectation(gx.expectations.ExpectColumnValuesToNotBeNull(column='Id'))\r\nsuite.add_expectation(gx.expectations.ExpectColumnMaxToBeBetween(\r\n    column=\"Id\",\r\n    min_value=1,\r\n    max_value=3\r\n))\r\nsuite.add_expectation(gx.expectations.ExpectColumnValuesToBeUnique(column='Id'))\r\n\r\n#Suite Definition:\r\n\r\n{\r\n  \"name\": \"dbo.auth_user_expectation_suite\",\r\n  \"id\": \"a3bb183c-f60d-4565-a3ce-1a79f448914e\",\r\n  \"expectations\": [\r\n    {\r\n      \"type\": \"expect_column_values_to_not_be_null\",\r\n      \"kwargs\": {\r\n        \"column\": \"Id\"\r\n      },\r\n      \"meta\": {},\r\n      \"id\": \"ef0e7d14-e713-459e-9f8b-c97754680e34\"\r\n    },\r\n    {\r\n      \"type\": \"expect_column_max_to_be_between\",\r\n      \"kwargs\": {\r\n        \"column\": \"Id\",\r\n        \"min_value\": 1.0,\r\n        \"max_value\": 3.0\r\n      },\r\n      \"meta\": {},\r\n      \"id\": \"446d352d-d6b9-4610-810f-009c97649c4e\"\r\n    }\r\n  ],\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"1.3.0\"\r\n  },\r\n  \"notes\": null\r\n}\r\n\r\nExpectation ExpectColumnValuesToBeUnique is missing from suite.", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10811/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10811/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10810", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10810/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10810/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10810/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10810", "id": 2757262491, "node_id": "I_kwDOBiS_IM6kWHyb", "number": 10810, "title": "Validator is not working with Spark/Hive Datasource", "user": {"login": "Frigus007", "id": 34317944, "node_id": "MDQ6VXNlcjM0MzE3OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/34317944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frigus007", "html_url": "https://github.com/Frigus007", "followers_url": "https://api.github.com/users/Frigus007/followers", "following_url": "https://api.github.com/users/Frigus007/following{/other_user}", "gists_url": "https://api.github.com/users/Frigus007/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frigus007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frigus007/subscriptions", "organizations_url": "https://api.github.com/users/Frigus007/orgs", "repos_url": "https://api.github.com/users/Frigus007/repos", "events_url": "https://api.github.com/users/Frigus007/events{/privacy}", "received_events_url": "https://api.github.com/users/Frigus007/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-12-24T06:25:22Z", "updated_at": "2025-01-23T14:14:31Z", "closed_at": "2025-01-16T22:20:46Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Validator is not working with Spark/Hive Datasource\r\n\r\n**To Reproduce**\r\nTry to connect to any hive/spark fluent query data source and try to fetch data using valication\r\n`batch = validator.head(fetch_all=True) \r\n`\r\nthis will lead to an error \r\n```\r\n\r\nmetric_configuration.metric_name: resolved_metrics[metric_configuration.id]\r\n                                      ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\r\nKeyError: ('table.head', 'batch_id=spark-spark_request', '5757c7240d24c63eaec44da82afc2d5e')\r\n```\r\n\r\nExpected behaviour\r\nvalidator.head(fetch_all=True) should return all data\r\n\r\nEnvironment:\r\n - Operating System: Linux, MacOS\r\n - Great Expectations Version: 0.18.2\r\n - Data Source: Pandas, hive\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10810/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10810/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10808", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10808/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10808/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10808/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10808", "id": 2753685445, "node_id": "I_kwDOBiS_IM6kIefF", "number": 10808, "title": "[BUG] Databricks is not able to recognize complex datatypes (`struct`, `map`, `array`)", "user": {"login": "Shinnnyshinshin", "id": 25670697, "node_id": "MDQ6VXNlcjI1NjcwNjk3", "avatar_url": "https://avatars.githubusercontent.com/u/25670697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shinnnyshinshin", "html_url": "https://github.com/Shinnnyshinshin", "followers_url": "https://api.github.com/users/Shinnnyshinshin/followers", "following_url": "https://api.github.com/users/Shinnnyshinshin/following{/other_user}", "gists_url": "https://api.github.com/users/Shinnnyshinshin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shinnnyshinshin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shinnnyshinshin/subscriptions", "organizations_url": "https://api.github.com/users/Shinnnyshinshin/orgs", "repos_url": "https://api.github.com/users/Shinnnyshinshin/repos", "events_url": "https://api.github.com/users/Shinnnyshinshin/events{/privacy}", "received_events_url": "https://api.github.com/users/Shinnnyshinshin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "open", "locked": false, "assignee": {"login": "Shinnnyshinshin", "id": 25670697, "node_id": "MDQ6VXNlcjI1NjcwNjk3", "avatar_url": "https://avatars.githubusercontent.com/u/25670697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shinnnyshinshin", "html_url": "https://github.com/Shinnnyshinshin", "followers_url": "https://api.github.com/users/Shinnnyshinshin/followers", "following_url": "https://api.github.com/users/Shinnnyshinshin/following{/other_user}", "gists_url": "https://api.github.com/users/Shinnnyshinshin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shinnnyshinshin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shinnnyshinshin/subscriptions", "organizations_url": "https://api.github.com/users/Shinnnyshinshin/orgs", "repos_url": "https://api.github.com/users/Shinnnyshinshin/repos", "events_url": "https://api.github.com/users/Shinnnyshinshin/events{/privacy}", "received_events_url": "https://api.github.com/users/Shinnnyshinshin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Shinnnyshinshin", "id": 25670697, "node_id": "MDQ6VXNlcjI1NjcwNjk3", "avatar_url": "https://avatars.githubusercontent.com/u/25670697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shinnnyshinshin", "html_url": "https://github.com/Shinnnyshinshin", "followers_url": "https://api.github.com/users/Shinnnyshinshin/followers", "following_url": "https://api.github.com/users/Shinnnyshinshin/following{/other_user}", "gists_url": "https://api.github.com/users/Shinnnyshinshin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shinnnyshinshin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shinnnyshinshin/subscriptions", "organizations_url": "https://api.github.com/users/Shinnnyshinshin/orgs", "repos_url": "https://api.github.com/users/Shinnnyshinshin/repos", "events_url": "https://api.github.com/users/Shinnnyshinshin/events{/privacy}", "received_events_url": "https://api.github.com/users/Shinnnyshinshin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2024-12-21T01:20:27Z", "updated_at": "2025-01-21T10:51:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nCurrently the databricks sql connector is not able to expose a `STRUCT()`, `MAP()`, or `ARRAY()` type. This means if there is an `ARRAY` of `STRING` values, then GX will read in the column as a `STRING`. Although this sort of casting will allow for Expectations that depend on types (like `ExpectColumnToBeOfType`) to run, the casting of the complex types can cause confusion. \r\n\r\nThis is already an issue in the `databricks-sql-python` repo [here](https://github.com/databricks/databricks-sql-python/issues/321), and we will monitor this ticket until it is resolved\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**Expected behavior**\r\n* Databricks is able to detect complex datatypes properly and not cast them to a basic type.  \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.3.0\r\n - Data Source: Databricks\r\n - Cloud environment: Databricks\r\n\r\n**Additional context**\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10808/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10808/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10803", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10803/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10803/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10803/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10803", "id": 2752803807, "node_id": "I_kwDOBiS_IM6kFHPf", "number": 10803, "title": "Error Instantiating ValidationResultsStore with Postgres Backend in Great Expectations v1.0.6 on Azure Databricks", "user": {"login": "MidnightRambo", "id": 80781758, "node_id": "MDQ6VXNlcjgwNzgxNzU4", "avatar_url": "https://avatars.githubusercontent.com/u/80781758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MidnightRambo", "html_url": "https://github.com/MidnightRambo", "followers_url": "https://api.github.com/users/MidnightRambo/followers", "following_url": "https://api.github.com/users/MidnightRambo/following{/other_user}", "gists_url": "https://api.github.com/users/MidnightRambo/gists{/gist_id}", "starred_url": "https://api.github.com/users/MidnightRambo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MidnightRambo/subscriptions", "organizations_url": "https://api.github.com/users/MidnightRambo/orgs", "repos_url": "https://api.github.com/users/MidnightRambo/repos", "events_url": "https://api.github.com/users/MidnightRambo/events{/privacy}", "received_events_url": "https://api.github.com/users/MidnightRambo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-12-20T14:02:01Z", "updated_at": "2025-01-23T14:15:00Z", "closed_at": "2025-01-16T22:18:26Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "\r\n### **Description**\r\nWe are experiencing an issue with the `ValidationResultsStore` when configuring Great Expectations (GE) version **1.0.6** to use a Postgres backend within an **Azure Databricks** environment (Runtime version **14.3**). After upgrading from GE version **0.18.4**, where we successfully used Postgres as an external metric store, the system fails to instantiate the `ValidationResultsStore`, despite the Postgres connection being functional.\r\n\r\n---\r\n\r\n### **Steps to Reproduce**\r\n\r\n1. **Environment Setup:**\r\n   - **Platform:** Azure Databricks (Runtime version 14.3)\r\n   - **Great Expectations Version:** 1.0.6\r\n   - **Postgres Version:** 1.0.6\r\n   - **Metric Store:** Postgres used as an external metric store\r\n   - **Visualization Tool:** Grafana for dashboards\r\n\r\n2. **Configuration:**\r\n   - Updated GE configuration from version 0.18.4 to 1.0.6.\r\n   - Rewrote data quality tests to be compatible with the new GE version.\r\n   - Configured the `data_context.yml` with multiple stores:\r\n\r\n     **Expectations Store:**\r\n     ```yaml\r\n     expectations_store:\r\n       class_name: ExpectationsStore\r\n       store_backend:\r\n         class_name: TupleFilesystemStoreBackend\r\n         base_directory: expectations/\r\n     ```\r\n\r\n     **Validation Results Store:**\r\n     ```yaml\r\n     validation_results_store:\r\n       class_name: ValidationResultsStore\r\n       store_backend:\r\n         class_name: DatabaseStoreBackend\r\n         credentials: ${db_creds}\r\n     ```\r\n\r\n3. **Execution:**\r\n   - Ran data quality tests successfully.\r\n   - Attempted to write validation results to the Postgres store.\r\n\r\n4. **Error Encountered:**\r\n   - Received a `ClassInstantiationError`:\r\n     ```\r\n     ClassInstantiationError: Module great_expectations.data_context.store exists, but the system is unable to create an instance of the class ValidationResultsStore within this module.\r\n     Please make sure that the class named ValidationResultsStore is properly defined inside its intended module and declared correctly by the calling entity.\r\n     This error is unrecoverable.\r\n     ```\r\n\r\n---\r\n\r\n### **Expected Behavior**\r\nGreat Expectations should successfully instantiate the `ValidationResultsStore` using the Postgres backend, allowing validation results to be written to the external Postgres metric store without errors.\r\n\r\n---\r\n\r\n### **Actual Behavior**\r\nUpon attempting to instantiate the `ValidationResultsStore` with the Postgres backend, GE throws a `ClassInstantiationError`, indicating it cannot create an instance of `ValidationResultsStore` within the `great_expectations.data_context.store` module.\r\n\r\n---\r\n\r\n### **Environment**\r\n\r\n- **Great Expectations Version:** 1.0.6\r\n- **Databricks Runtime:** 14.3\r\n- **Operating System:** Azure Databricks (manylinux x86)\r\n\r\n---\r\n\r\n### **Additional Context**\r\n\r\n- The Postgres connection is verified to be working outside of Great Expectations.\r\n- The configuration for `ValidationResultsStore` mirrors the previous setup from GE version 0.18.4.\r\n- No relevant information found in the official Great Expectations documentation regarding configuring `ValidationResultsStore` with an external Postgres store in the newer version.\r\n- Environmental variables for database credentials are correctly set and accessible within Databricks.\r\n\r\n---\r\n\r\n### **Possible Solution** *(Optional)*\r\nIf there have been changes to the class names, module paths, or configuration structure in GE version 1.0.6 related to store backends, please provide updated documentation or examples to assist in correctly setting up the `ValidationResultsStore` with a Postgres backend.\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10803/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10803/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10778", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10778/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10778/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10778/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10778", "id": 2738704104, "node_id": "I_kwDOBiS_IM6jPU7o", "number": 10778, "title": "Validation Result", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-12-13T15:57:52Z", "updated_at": "2025-01-21T11:56:43Z", "closed_at": "2025-01-21T11:56:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi Team,\r\n\r\nI validated a column using the **exception_values_to_be_in_set** expectation and I have some doubts about the output result. First, I don't see **unexpected_percent_total** in the [documentation](https://docs.greatexpectations.io/docs/core/trigger_actions_based_on_results/choose_a_result_format/?results=fields).\r\n\r\nThe description of **unexpected_percent_nonmissing** is: \"_The percent of unexpected values in a column, excluding rows that have no value for that column._\", but in the example below unexpected_percent_nonmissing should be 211608/921750 * 100 = 22,95720097640358 and not 65,95724785397692 (I don't get where this value come from).\r\n\r\nFor my understanding **unexpected_percent_total** should be (unexpected_count + missing_count) / element_count * 100 = 88,15101708, where unexpected_count are the total count of unexpected values in in a column (EXCLUDING NULL values). Then unexpected_percent should be 22,9572009764035.\r\n\r\nPlease correct me if I'm missing something.\r\n\r\n```\r\n\"result\": {\r\n        \"element_count\": 921750,\r\n        \"unexpected_count\": 211608,\r\n        \"unexpected_percent\": 65.95724785397692,\r\n        \"partial_unexpected_list\": [],\r\n        \"unexpected_index_column_names\": [\"assignment_key\",\"assignment_id\"],\r\n        \"missing_count\": 600924,\r\n        \"missing_percent\": 65.19381611065907,\r\n        \"unexpected_percent_total\": 22.95720097640358,\r\n        \"unexpected_percent_nonmissing\": 65.95724785397692,        \r\n        \"unexpected_list\": [\"100020\",...], ...\r\n```\r\n\r\n[Here ](https://github.com/great-expectations/great_expectations/blob/49b124accbff7499416f06cfff8f26b6fe961446/great_expectations/expectations/expectation.py#L2706) I see is the calculations of these metrics.\r\n\r\n**To Reproduce**\r\n```\r\ndef test_expectation():\r\n    context = ge.get_context()\r\n    data_name = f\"{catalog}.{schema}.{table_name}\"\r\n    \r\n    # Set up context\r\n    data_source = context.data_sources.add_spark(name=data_name)\r\n    data_asset = data_source.add_dataframe_asset(name=table_name)\r\n    \r\n    batch_parameters = {\"dataframe\": spark.read.table(f\"{catalog}.{schema}.{table_name}\")}\r\n    \r\n    expectation_suite = context.suites.add(ge.core.expectation_suite.ExpectationSuite(name=f\"s-{data_name}\"))\r\n    \r\n    # Get the expectation class\r\n    gx_expectation = my_import(expectation_name, args)\r\n    # Add the expectation to the suite\r\n    expectation_suite.add_expectation(gx_expectation)\r\n    \r\n    batch_definition = data_asset.add_batch_definition_whole_dataframe(\"batch_definition\")\r\n    validation_definition = context.validation_definitions.add(\r\n            ge.core.validation_definition.ValidationDefinition(\r\n                name=f\"vd-{data_name}\",\r\n                data=batch_definition,\r\n                suite=expectation_suite,\r\n            )\r\n    )\r\n    checkpoint = context.checkpoints.add(\r\n        ge.Checkpoint(\r\n            name=f\"cp-{data_name}\",\r\n            validation_definitions=[validation_definition],\r\n            result_format={\r\n                \"result_format\": \"COMPLETE\",\r\n                \"unexpected_index_column_names\": table_key_list,\r\n                \"partial_unexpected_count\": 0,\r\n            },\r\n        )\r\n    )\r\n    result = checkpoint.run(batch_parameters=batch_parameters)\r\n    return result\r\n\r\ndef my_import(name: str, arguments: dict) -> object:\r\n    \"\"\"Import a specific Expectation Class from GX Expectation module\r\n    name -- name of the Expectation Class to be imported\r\n    arguments -- dictionary with the arguments to be passed to the Expectation Class\r\n    \"\"\"\r\n    module = importlib.import_module(\"great_expectations.expectations\")\r\n    return getattr(module, name)(**arguments)\r\n\r\nexpectation_name = \"ExpectColumnValuesToBeInSet\"\r\narguments = '{\"column\": \"employee_category\", \"value_set\": [\"100090\", \"100240\", \"100020\",\"100070\"]}'\r\nargs = loads(arguments)\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.2\r\n - Data Source: PySpark Databricks\r\n - Cloud environment: Azure Databricks\r\n", "closed_by": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10778/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10778/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10775", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10775/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10775/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10775/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10775", "id": 2737526517, "node_id": "I_kwDOBiS_IM6jK1b1", "number": 10775, "title": "Data Docs host on S3 cannot redirect to other pages due to access denied", "user": {"login": "marxaem", "id": 80411967, "node_id": "MDQ6VXNlcjgwNDExOTY3", "avatar_url": "https://avatars.githubusercontent.com/u/80411967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxaem", "html_url": "https://github.com/marxaem", "followers_url": "https://api.github.com/users/marxaem/followers", "following_url": "https://api.github.com/users/marxaem/following{/other_user}", "gists_url": "https://api.github.com/users/marxaem/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxaem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxaem/subscriptions", "organizations_url": "https://api.github.com/users/marxaem/orgs", "repos_url": "https://api.github.com/users/marxaem/repos", "events_url": "https://api.github.com/users/marxaem/events{/privacy}", "received_events_url": "https://api.github.com/users/marxaem/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-12-13T06:27:33Z", "updated_at": "2025-01-23T14:15:21Z", "closed_at": "2025-01-16T22:00:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am trying to host and share Data Docs on AWS S3. After `checkpoint.run()`, an index.html file on S3 was generated as expected.  I followed the instruction to configure bucket policy as guided in [Host and share Data Docs](https://docs.greatexpectations.io/docs/0.18/oss/guides/setup/configuring_data_docs/host_and_share_data_docs/) but when I opened the index.html from my bucket and clicked on any run record, it couldn't redirect to the detailed validation results page, it gave an Access Denied error. This problem is similar to an old issue [Data Docs > S3 > Links to runs are access Denied](https://github.com/great-expectations/great_expectations/issues/1235) but in a different version of GX.\r\n\r\n**To Reproduce**\r\nThe data docs site configurations are as follows\r\n```yaml\r\ndata_docs_sites:\r\n  S3_site:\r\n    class_name: SiteBuilder\r\n    store_backend:\r\n      class_name: TupleS3StoreBackend\r\n      bucket: bucket-name\r\n      prefix: data-docs/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n```\r\n\r\nBy clicking index.html in S3 bucket, the Data Docs link will look like:\r\n`https://bucket-name.s3.ap-southeast-1.amazonaws.com/data-docs/index.html?X-Amz-Algorithm=xxx&...`\r\nHowever, when I clicked the run record, those keys generated from AWS were not following resulting in an Access Denied.\r\n`https://bucket-name.s3.ap-southeast-1.amazonaws.com/data-docs/expectations/my_suite.html`\r\n\r\n**Expected behavior**\r\nData Docs hosted on AWS S3 can be clicked to redirect to each page inside.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 1.1.0\r\n - Data Source: Spark dataframe\r\n - Cloud environment: AWS\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10775/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10775/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10765", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10765/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10765/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10765/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10765", "id": 2735484914, "node_id": "I_kwDOBiS_IM6jDC_y", "number": 10765, "title": "[BUG] Data docs get deleted sporadically", "user": {"login": "ekeras", "id": 185069168, "node_id": "U_kgDOCwfucA", "avatar_url": "https://avatars.githubusercontent.com/u/185069168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekeras", "html_url": "https://github.com/ekeras", "followers_url": "https://api.github.com/users/ekeras/followers", "following_url": "https://api.github.com/users/ekeras/following{/other_user}", "gists_url": "https://api.github.com/users/ekeras/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekeras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekeras/subscriptions", "organizations_url": "https://api.github.com/users/ekeras/orgs", "repos_url": "https://api.github.com/users/ekeras/repos", "events_url": "https://api.github.com/users/ekeras/events{/privacy}", "received_events_url": "https://api.github.com/users/ekeras/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-12-12T10:24:10Z", "updated_at": "2025-01-29T13:50:10Z", "closed_at": "2025-01-29T13:50:09Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nData docs get deleted from the Google Cloud Storage sporadically. \r\n\r\n**To Reproduce**\r\nI haven't found a way how to reproduce this. It can happen after 4 runs, 6 runs, 2 runs, 10 runs, I can never tell. \r\n\r\nIt calculates validations correctly and to my understanding it fails when it tries to update data docs on UpdateDataDocsAction.\r\n\r\n\r\nI am attaching my code of the workflow. Basically, we have framework which extracts data, transforms it and then before putting it into the bucket, it validates the data. \r\n```python\r\nclass GreatExpectationsValidator(BaseValidator):\r\n\r\n    def __init__(self, session: SparkSession, params: dict[str, str]):\r\n        super().__init__(session, params)\r\n\r\n        self._data_source = self._params['data_source']\r\n        self._data_name = self._params['data_name']\r\n        self._project = self._params['project']\r\n        self._bucket = self._params['bucket']\r\n        self._prefix = self._params['reports_prefix']\r\n\r\n        self._context = self._create_context()\r\n        target = f\"{self._data_source}-{self._data_name}\"\r\n        self._batch_name = f\"batch_definition_{target}\"\r\n        self._suite_name = f\"expectation_suite_{target}\"\r\n        self._validation_name = f\"validation_definition_{target}\"\r\n        self._checkpoint_name = f\"checkpoint_{target}\"\r\n\r\n    def create_expectations(self) -> list[Expectation]:\r\n        raise NotImplementedError(\"Method create_expectations must be implemented in child class\")\r\n\r\n    def _create_context(self):\r\n\r\n        context_config = DataContextConfig(\r\n            store_backend_defaults=GCSStoreBackendDefaults(\r\n                default_project_name=self._project,\r\n                default_bucket_name=self._bucket,\r\n                expectations_store_prefix=f\"{self._prefix}/expectations\",\r\n                data_docs_prefix=f\"{self._prefix}/data_docs\",\r\n                checkpoint_store_prefix=f\"{self._prefix}/checkpoints\",\r\n                validation_results_store_prefix=f\"{self._prefix}/validations\",\r\n                validation_definition_store_prefix=f\"{self._prefix}/validation_definitions\",\r\n            )\r\n        )\r\n\r\n        context = gx.get_context(project_config=context_config, mode=\"file\")\r\n        return context\r\n\r\n    def _create_batch(self):\r\n\r\n        data_source = self._context.data_sources.add_or_update_spark(name=self._data_source)\r\n        data_asset = data_source.add_dataframe_asset(name=self._data_name)\r\n\r\n        batch_definition = data_asset.add_batch_definition_whole_dataframe(\r\n            self._batch_name\r\n        )\r\n        return batch_definition\r\n\r\n    def _create_expectations_suite(self):\r\n\r\n        try:\r\n            self._context.suites.delete(self._suite_name)\r\n        except DataContextError as e:\r\n            _logger.info(f\"Expectation suite with name {self._suite_name} does not exist yet: {e}\")\r\n\r\n        suite = gx.ExpectationSuite(name=self._suite_name, id=self._suite_name)\r\n        for expectation in self.create_expectations():\r\n            suite.add_expectation(expectation)\r\n        self._context.suites.add(suite)\r\n\r\n    def _create_action_list(self):\r\n\r\n        action_list = []\r\n\r\n        if 'slack_channel' in self._params:\r\n            action_list.append(\r\n                SlackNotificationAction(\r\n                    name=\"send_slack_notification_on_failed_expectations\",\r\n                    slack_token=self._params['slack_token'],\r\n                    slack_channel=self._params['slack_channel'],\r\n                    notify_on=\"failure\",\r\n                    show_failed_expectations=True,\r\n                ),\r\n            )\r\n\r\n        action_list.append(\r\n            UpdateDataDocsAction(\r\n                name=\"update_all_data_docs\",\r\n            ),\r\n        )\r\n        return action_list\r\n\r\n    def _create_validation(self, batch: Batch):\r\n\r\n        try:\r\n            validation_definition = self._context.validation_definitions.get(self._validation_name)\r\n        except DataContextError as e:\r\n            _logger.info(\r\n                \"Could not find an existing validation definition with name\"\r\n                f\"{self._validation_name}: {e}.\\n\"\r\n                \"Creating new validation definition.\"\r\n            )\r\n            validation_definition = gx.ValidationDefinition(\r\n                data=batch,\r\n                suite=self._context.suites.get(self._suite_name),\r\n                name=self._validation_name,\r\n            )\r\n            self._context.validation_definitions.add(validation_definition)\r\n\r\n    def _create_checkpoint(self):\r\n\r\n        action_list = self._create_action_list()\r\n        try:\r\n            self._context.checkpoints.delete(self._checkpoint_name)\r\n        except DataContextError as e:\r\n            _logger.info(f\"Checkpoint with name {self._checkpoint_name} does not exist yet: {e}\")\r\n\r\n        checkpoint = gx.Checkpoint(\r\n            id=self._checkpoint_name,\r\n            name=self._checkpoint_name,\r\n            validation_definitions=[\r\n                self._context.validation_definitions.get(self._validation_name)\r\n            ],\r\n            actions=action_list,\r\n            result_format={\"result_format\": \"COMPLETE\"},\r\n        )\r\n        self._context.checkpoints.add(checkpoint)\r\n\r\n    def validate(self, df: DataFrame):\r\n        batch_definition = self._create_batch()\r\n        self._create_expectations_suite()\r\n        self._create_validation(batch_definition)\r\n        self._create_checkpoint()\r\n\r\n        run_results = self._context.checkpoints.get(self._checkpoint_name).run(\r\n            batch_parameters={\"dataframe\": df},\r\n            run_id=RunIdentifier(\r\n                run_name=self._job_id,\r\n                run_time=datetime.now(),\r\n            ),\r\n        ).run_results\r\n\r\n        success_percent = list(run_results.values())[0]['statistics']['success_percent']\r\n        if success_percent < self._pass_success_percent:\r\n            raise ValidationException(f\"Validation failed. Success percent: {success_percent}\")\r\n```\r\n\r\n**Expected behavior**\r\nData docs doesn't get deleted.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS, Linux\r\n - Great Expectations Version: 1.2.5\r\n - Data Source: Spark Dataframe\r\n - Cloud environment: Google Cloud\r\n\r\n**Additional context**\r\nhttps://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1733301818679899\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10765/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10765/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10757", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10757/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10757/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10757/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10757", "id": 2730928102, "node_id": "I_kwDOBiS_IM6ixqfm", "number": 10757, "title": "[BUG] Custom expectation takes too long to execute when the {batch} parameter is used in a custom query but when you pass the table name to the query instead execution time becomes lesser", "user": {"login": "Erua-chijioke", "id": 110530873, "node_id": "U_kgDOBpaROQ", "avatar_url": "https://avatars.githubusercontent.com/u/110530873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erua-chijioke", "html_url": "https://github.com/Erua-chijioke", "followers_url": "https://api.github.com/users/Erua-chijioke/followers", "following_url": "https://api.github.com/users/Erua-chijioke/following{/other_user}", "gists_url": "https://api.github.com/users/Erua-chijioke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erua-chijioke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erua-chijioke/subscriptions", "organizations_url": "https://api.github.com/users/Erua-chijioke/orgs", "repos_url": "https://api.github.com/users/Erua-chijioke/repos", "events_url": "https://api.github.com/users/Erua-chijioke/events{/privacy}", "received_events_url": "https://api.github.com/users/Erua-chijioke/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-12-10T18:50:01Z", "updated_at": "2024-12-10T18:51:00Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing Great expectations version 1.2.4 I created a custom expectation using sql and on the query i used the {batch} parameter as shown in the documentation [https://docs.greatexpectations.io/docs/core/customize_expectations/use_sql_to_define_a_custom_expectation](url)\r\nto create the custom expectation, then on the checkpoint I passed the batch parameter which is a dataframe (This dataframe's number of rows is actually huge) and it took 17minutes to run the checpoint and return the validation result. Now I executed this custom query using spark on databricks and it took less than 1 minute to execute. \r\n\r\n**To Reproduce**\r\ncreate data source, asset, batch definition and expectation suite**\r\ndf = spark.sql(\"SELECT * FROM xxx\")       #ensure that this will have a large number of rows up to 30million rows\r\ncontext = gx.get_context(project_root_dir=\"/dbfs/xxx\")\r\n\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\nsuite_name = \"d365_enriched_generaljournaltransaction_expectation_suite\"\r\nvalidation_definition_name=\"d365_enriched_generaljournaltransaction_validation_definition\"\r\ncheckpoint_name=\"d365_enriched_generaljournaltransaction_checkpoint\"\r\n\r\ndata_source = context.data_sources.add_or_update_spark(name=data_source_name)\r\ntry:\r\ndata_asset=data_source.add_dataframe_asset(name=data_asset_name)\r\nexcept Exception as e:\r\ndata_asset = context.data_sources.get(data_source_name).get_asset(data_asset_name)\r\n\r\ntry:\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(batch_definition_name)\r\nexcept Exception as e:\r\nbatch_definition = data_asset.get_batch_definition(batch_definition_name)\r\n\r\n\r\ntry:\r\nsuite = gx.ExpectationSuite(name=suite_name)\r\nsuite = context.suites.add(suite)\r\nexcept Exception as e:\r\nsuite = context.suites.get(name=suite_name)\r\n\r\n#now lets create a custom expectation using sql\r\nclass ExpectValidLineItemSum(gx.expectations.UnexpectedRowsExpectation):\r\nunexpected_rows_query: str = (\"\"\"SELECT CrayonCompanyIdRef, SUM(accountingcurrencyamount) AS total_amount\r\nFROM {batch}\r\nWHERE accountingdate >= MAKE_DATE(YEAR(CURRENT_DATE) - 1, 1, 1)\r\nAND accountingdate <= MAKE_DATE(YEAR(CURRENT_DATE) - 1, 12, 31)\r\nGROUP BY CrayonCompanyIdRef\r\nHAVING SUM(accountingcurrencyamount) NOT BETWEEN -1 AND 1\"\"\")\r\ndescription: str = \"Line items should have a valid sum between -1 amd +1\"\r\n\r\nexpectation = ExpectValidLineItemSum()\r\n\r\ntry:\r\nsuite.add_expectation(expectation)\r\nexcept Exception as e:\r\nprint(\"Expectation already exists in the suite\")\r\n\r\ntry:\r\n    validation_definition = gx.ValidationDefinition(\r\n        data=batch_definition, suite=suite, name=validation_definition_name\r\n    )\r\n    validation_definition = context.validation_definitions.add(\r\n        validation_definition\r\n    )\r\nexcept Exception as e:\r\n    validation_definition = context.validation_definitions.get(\r\n        validation_definition_name\r\n    )\r\n\r\nvalidation_definitions = [validation_definition]\r\nvalidation_definitions\r\n\r\n\r\ntry:\r\n    checkpoint = gx.Checkpoint(\r\n        name=checkpoint_name,\r\n        validation_definitions=validation_definitions,\r\n        actions=[\r\n            # This Action updates the Data Docs static website with the Validation\r\n            #   Results after the Checkpoint is run.\r\n            gx.checkpoint.UpdateDataDocsAction(\r\n                name=\"update_all_data_docs\",\r\n            ),\r\n        ],\r\n        result_format={\"result_format\": \"COMPLETE\"},\r\n    )\r\n    context.checkpoints.add(checkpoint)\r\nexcept Exception as e:\r\n    checkpoint = context.checkpoints.get(checkpoint_name)\r\n\r\nbatch_parameters = {\"dataframe\": df}\r\n\r\nrun_id = gx.RunIdentifier(run_name=f\"validation_checkpoint_for_{batch_definition_name}\", run_time=datetime.now())\r\n\r\nvalidation_result = checkpoint.run(batch_parameters=batch_parameters, run_id=run_id)\r\n\r\nImage attached below to show you when it took 17mins\r\n![image](https://github.com/user-attachments/assets/4be00fb7-0896-4fa2-a90d-2cf514fd84cf)\r\n\r\n\r\n**Expected behavior**\r\nIt should not take that long to just run one expectation on a dataframe. I ran the custom query on spark by using the table name instead of {batch} and everything ran in less than 5 seconds. I attached an image for your perusal. \r\n\r\n![image](https://github.com/user-attachments/assets/19d9c8c7-1f5e-46af-ba49-86344dfddd25)\r\n\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.2.4\r\n - Data Source: Spark Dataframe\r\n - Cloud environment: Databricks\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10757/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10757/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10756", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10756/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10756/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10756/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10756", "id": 2730806608, "node_id": "I_kwDOBiS_IM6ixM1Q", "number": 10756, "title": "[BUG] Custom expectation created using  SQL becomes missing after initializing the datacontext", "user": {"login": "Erua-chijioke", "id": 110530873, "node_id": "U_kgDOBpaROQ", "avatar_url": "https://avatars.githubusercontent.com/u/110530873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erua-chijioke", "html_url": "https://github.com/Erua-chijioke", "followers_url": "https://api.github.com/users/Erua-chijioke/followers", "following_url": "https://api.github.com/users/Erua-chijioke/following{/other_user}", "gists_url": "https://api.github.com/users/Erua-chijioke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erua-chijioke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erua-chijioke/subscriptions", "organizations_url": "https://api.github.com/users/Erua-chijioke/orgs", "repos_url": "https://api.github.com/users/Erua-chijioke/repos", "events_url": "https://api.github.com/users/Erua-chijioke/events{/privacy}", "received_events_url": "https://api.github.com/users/Erua-chijioke/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-12-10T17:58:23Z", "updated_at": "2025-01-23T14:15:35Z", "closed_at": "2025-01-16T16:01:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing Great expectations version 1.2.4 I created a custom expectation using sql and added the expectation to the expectation suite. After the current python session ended (my data bricks cluster was turned off because of inactivity ), I turned on my databricks cluster and  I re-initialized the already created data context which was meant to hold the expectation suite. When I tried to access the expectation suite to see the content, i discovered that the custom expectation i created earlier is no longer present and it is throwing an an error.\r\n\r\n**To Reproduce**\r\ncreate data source, asset, batch definition and expectation suite**\r\ndataframe = spark.sql(\"SELECT * FROM xxx\")\r\ncontext = gx.get_context(project_root_dir=\"/dbfs/xxx\")\r\n\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\n\r\ndata_source = context.data_sources.add_or_update_spark(name=data_source_name)\r\ntry:\r\n    data_asset=data_source.add_dataframe_asset(name=data_asset_name)\r\nexcept Exception as e:\r\n    data_asset = context.data_sources.get(data_source_name).get_asset(data_asset_name)\r\n\r\ntry:\r\n    batch_definition = data_asset.add_batch_definition_whole_dataframe(batch_definition_name)\r\nexcept Exception as e:\r\n    batch_definition = data_asset.get_batch_definition(batch_definition_name) \r\n\r\nsuite_name = \"d365_enriched_generaljournaltransaction_expectation_suite\"\r\ntry:\r\n    suite = gx.ExpectationSuite(name=suite_name)\r\n    suite = context.suites.add(suite)\r\nexcept Exception as e:\r\n    suite = context.suites.get(name=suite_name)\r\n\r\n#now lets create a custom expectation using sql\r\nclass ExpectValidLineItemSum(gx.expectations.UnexpectedRowsExpectation):\r\n    unexpected_rows_query: str = (\"\"\"SELECT CrayonCompanyIdRef, SUM(accountingcurrencyamount) AS total_amount\r\n                                FROM {batch}\r\n                                WHERE accountingdate >= MAKE_DATE(YEAR(CURRENT_DATE) - 1, 1, 1)  \r\n                                AND accountingdate <= MAKE_DATE(YEAR(CURRENT_DATE) - 1, 12, 31)  \r\n                                GROUP BY CrayonCompanyIdRef\r\n                                HAVING SUM(accountingcurrencyamount) NOT BETWEEN -1 AND 1\"\"\")\r\n    description: str = \"Line items should have a valid sum between -1 amd +1\"\r\n\r\nexpectation = ExpectValidLineItemSum()\r\n\r\ntry: \r\n    suite.add_expectation(expectation)\r\nexcept Exception as e:\r\n    print(\"Expectation already exists in the suite\")\r\n\r\nNow the expectation was added successfully to the expectation suite.\r\nTry ending the current python session (in my case restarting the databricks cluster will do that)\r\nrun the following line of codes to get the expectation suite you saved in the last python session \r\n\r\ncreate data source, asset, batch definition and expectation suite**\r\n\r\ncontext = gx.get_context(project_root_dir=\"/dbfs/xxx\")\r\n\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\n\r\nsuite_name = \"d365_enriched_generaljournaltransaction_expectation_suite\"\r\ntry:\r\n    suite = gx.ExpectationSuite(name=suite_name)\r\n    suite = context.suites.add(suite)\r\nexcept Exception as e:\r\n    suite = context.suites.get(name=suite_name)\r\n\r\n\r\n\r\n**This is the error it throws**\r\nERROR:great_expectations.core.expectation_suite:Could not add expectation; provided configuration is not valid: Could not add expectation; provided configuration is not valid: expect_valid_line_item_sum not found\r\nTraceback (most recent call last):\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/core/expectation_suite.py\", line 639, in _build_expectation\r\n    expectation = expectation_configuration.to_domain_obj()\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/expectations/expectation_configuration.py\", line 447, in to_domain_obj\r\n    expectation_impl = self._get_expectation_impl()\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/expectations/expectation_configuration.py\", line 444, in _get_expectation_impl\r\n    return get_expectation_impl(self.type)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/expectations/registry.py\", line 396, in get_expectation_impl\r\n    raise gx_exceptions.ExpectationNotFoundError(f\"{expectation_name} not found\")  # noqa: TRY003\r\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\ngreat_expectations.exceptions.exceptions.ExpectationNotFoundError: expect_valid_line_item_sum not found\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/core/expectation_suite.py\", line 94, in __init__\r\n    self.expectations.append(self._process_expectation(exp))\r\n                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/core/expectation_suite.py\", line 216, in _process_expectation\r\n    return self._build_expectation(expectation_configuration=expectation_like)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/core/expectation_suite.py\", line 646, in _build_expectation\r\n    raise gx_exceptions.InvalidExpectationConfigurationError(  # noqa: TRY003\r\ngreat_expectations.exceptions.exceptions.InvalidExpectationConfigurationError: Could not add expectation; provided configuration is not valid: expect_valid_line_item_sum not found\r\n**Expected behavior**\r\nThe expectation which I saved on the expectation suite should be able to be retrieved even after I restart an ended python session. This is because it is meant to persist this expectation in the expectation suite which is a json file inside the data context.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.2.4\r\n - Data Source: Spark Dataframe\r\n - Cloud environment: Databricks\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10756/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10756/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10741", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10741/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10741/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10741/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10741", "id": 2720585726, "node_id": "I_kwDOBiS_IM6iKNf-", "number": 10741, "title": "Unexpected Index list and Values not populating", "user": {"login": "chandruexf", "id": 131357907, "node_id": "U_kgDOB9Rc0w", "avatar_url": "https://avatars.githubusercontent.com/u/131357907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chandruexf", "html_url": "https://github.com/chandruexf", "followers_url": "https://api.github.com/users/chandruexf/followers", "following_url": "https://api.github.com/users/chandruexf/following{/other_user}", "gists_url": "https://api.github.com/users/chandruexf/gists{/gist_id}", "starred_url": "https://api.github.com/users/chandruexf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chandruexf/subscriptions", "organizations_url": "https://api.github.com/users/chandruexf/orgs", "repos_url": "https://api.github.com/users/chandruexf/repos", "events_url": "https://api.github.com/users/chandruexf/events{/privacy}", "received_events_url": "https://api.github.com/users/chandruexf/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-12-05T14:35:09Z", "updated_at": "2024-12-16T16:54:42Z", "closed_at": "2024-12-16T16:54:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen I use **result_format={'result_format': 'COMPLETE'}**, we expected the output to give us the unexpected index list, unexpected value list, but none of them are comming in the result, even I set the return_unexpected_index_query true.\r\n\r\n**To Reproduce**\r\nimport great_expectations as ge\r\ndata_context = ge.get_context()\r\ndata_source = data_context.data_sources.add_pandas(\"pandas\")\r\ndata_asset = data_source.add_dataframe_asset(name=\"pd dataframe asset\")\r\ndata_batch_definition = data_asset.add_batch_definition_whole_dataframe(\"batch definition\")\r\n\r\nimport pandas as pd\r\ndata = {\r\n    \"ID\": [1, 2, 3, 4, 5],\r\n    \"Name\": [\"Alice\", \"Bob\", \"Charlie\", \"David\", \"Eve\"],\r\n    \"Age\": [25, 30, 35, 40, None],\r\n    \"City\": [\"New York\", \"Los Angeles\", \"Chicago\", \"Houston\", \"Phoenix\"]\r\n}\r\n\r\n\r\ndf = pd.DataFrame(data)\r\n\r\ndata_batch = data_batch_definition.get_batch(batch_parameters={\"dataframe\": df})\r\nresult = data_batch.validate(\r\n    ge.expectations.ExpectColumnValuesToBeNull(\r\n        column=\"Age\", result_format={'result_format': 'COMPLETE'}\r\n    )\r\n) \r\nprint the result you wont be able to see the unexpected index list and values.\r\n\r\n**Expected behavior**\r\n{\r\n  \"success\": false,\r\n  \"expectation_config\": {\r\n    \"type\": \"expect_column_values_to_be_null\",\r\n    \"kwargs\": {\r\n      \"result_format\": {\r\n        \"result_format\": \"SUMMARY\",\r\n        \"return_unexpected_index_query\": false\r\n      },\r\n      \"batch_id\": \"pandas-pd dataframe asset\",\r\n      \"column\": \"Age\"\r\n    },\r\n    \"meta\": {}\r\n  },\r\n  \"result\": {\r\n    \"element_count\": 5,\r\n    \"unexpected_count\": 4,\r\n    \"unexpected_percent\": 80.0,\r\n    \"unexpected_list\":[\r\n      25.0,\r\n      30.0,\r\n      35.0,\r\n      40.0\r\n    ],\r\n    \"unexpected_index_list\":[\r\n      0,\r\n      1,\r\n      2,\r\n      3\r\n    ],\r\n    \"partial_unexpected_list\": [\r\n      25.0,\r\n      30.0,\r\n      35.0,\r\n      40.0\r\n    ],\r\n    \"partial_unexpected_counts\": [\r\n      {\r\n        \"value\": 25.0,\r\n        \"count\": 1\r\n      },\r\n      {\r\n        \"value\": 30.0,\r\n        \"count\": 1\r\n      },\r\n      {\r\n        \"value\": 35.0,\r\n        \"count\": 1\r\n      },\r\n      {\r\n        \"value\": 40.0,\r\n        \"count\": 1\r\n      }\r\n    ],\r\n    \"partial_unexpected_index_list\": [\r\n      0,\r\n      1,\r\n      2,\r\n      3\r\n    ]\r\n  },\r\n  \"meta\": {},\r\n  \"exception_info\": {\r\n    \"raised_exception\": false,\r\n    \"exception_traceback\": null,\r\n    \"exception_message\": null\r\n  }\r\n}.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Windows]\r\n - Great Expectations Version: [1.2.4]\r\n - Data Source: [Pandas]\r\n - Cloud environment: []\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10741/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10741/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10740", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10740/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10740/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10740/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10740", "id": 2720354585, "node_id": "I_kwDOBiS_IM6iJVEZ", "number": 10740, "title": "[DOCS] GX Gallery ExpectColumnValuesToBeOfType", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-12-05T12:59:22Z", "updated_at": "2025-01-23T14:17:49Z", "closed_at": "2025-01-21T12:00:15Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "The gallery documentation says the output result for this Expectation is:\r\n```\r\n\"result\": {\r\n    \"element_count\": 3,\r\n    \"unexpected_count\": 3,\r\n    \"unexpected_percent\": 100.0,\r\n    \"partial_unexpected_list\": [\r\n        \"12345\",\r\n        \"abcde\",\r\n        \"1b3d5\"\r\n    ],\r\n    \"missing_count\": 0,\r\n    \"missing_percent\": 0.0,\r\n    \"unexpected_percent_total\": 100.0,\r\n    \"unexpected_percent_nonmissing\": 100.0 ...\r\n```\r\nBut when I execute this Expectation I get:\r\n```{\r\n  \"success\": false,\r\n  \"expectation_config\": {\r\n    \"type\": \"expect_column_values_to_be_of_type\",\r\n    \"kwargs\": {\r\n      \"batch_id\": \"main.bronze.brnz_sharepoint_data_chairman_succ_chairman_nominee-brnz_sharepoint_data_chairman_succ_chairman_nominee\",\r\n      \"column\": \"employee_id\",\r\n      \"type_\": \"IntegerType\"\r\n    },\r\n    \"meta\": {}\r\n  },\r\n  \"result\": {\r\n    \"observed_value\": \"DoubleType\"\r\n  },\r\n  \"meta\": {},\r\n  \"exception_info\": {\r\n    \"raised_exception\": false,\r\n    \"exception_traceback\": null,\r\n    \"exception_message\": null\r\n  }\r\n}```\r\n\r\n\r\nIs the documentation okey?", "closed_by": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10740/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10739", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10739/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10739/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10739/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10739", "id": 2719748832, "node_id": "I_kwDOBiS_IM6iHBLg", "number": 10739, "title": "Cannot render validations section of Data Docs", "user": {"login": "niewol-pixel", "id": 190706097, "node_id": "U_kgDOC13xsQ", "avatar_url": "https://avatars.githubusercontent.com/u/190706097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niewol-pixel", "html_url": "https://github.com/niewol-pixel", "followers_url": "https://api.github.com/users/niewol-pixel/followers", "following_url": "https://api.github.com/users/niewol-pixel/following{/other_user}", "gists_url": "https://api.github.com/users/niewol-pixel/gists{/gist_id}", "starred_url": "https://api.github.com/users/niewol-pixel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niewol-pixel/subscriptions", "organizations_url": "https://api.github.com/users/niewol-pixel/orgs", "repos_url": "https://api.github.com/users/niewol-pixel/repos", "events_url": "https://api.github.com/users/niewol-pixel/events{/privacy}", "received_events_url": "https://api.github.com/users/niewol-pixel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-12-05T08:40:23Z", "updated_at": "2024-12-12T16:36:39Z", "closed_at": "2024-12-12T16:36:32Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn my project I wrote a function to update the data docs of my great expectations project. The function is as follows: \r\n\r\n```python\r\ndef update_data_docs(context: FileDataContext) -> None:\r\n    site_config = {\r\n        \"class_name\": \"SiteBuilder\",\r\n        \"site_index_builder\": {\"class_name\": \"DefaultSiteIndexBuilder\"},\r\n        \"store_backend\": {\r\n            \"class_name\": \"TupleFilesystemStoreBackend\",\r\n            \"base_directory\": \"uncommitted/data_docs/local_site/\",\r\n        },\r\n    }\r\n    site_name = \"mygx\"\r\n    try:\r\n        context.update_data_docs_site(site_name, site_config)\r\n    except InvalidKeyError:\r\n        context.add_data_docs_site(site_name=site_name,\r\n                                   site_config=site_config)\r\n    context.build_data_docs()\r\n```\r\n\r\nWhen I try to update an existing site \"mygx\", I cannot render the 'validations' section on my site, even though this is a pretty similar set-up to the documentation. \r\n\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\ngreat_expectations.yml:\r\n```yaml\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 4.0\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: validation_definitions/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidation_results_store_name: validation_results_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n  bkrgx:\r\n    class_name: SiteBuilder\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\nfluent_datasources:\r\n  afas_data_source:\r\n    type: spark\r\n    id: 16977468-a8e1-418a-ab06-1b7a5cee4b6d\r\n    assets:\r\n      branches_dataframe_data_asset:\r\n        type: dataframe\r\n        id: e3602234-3801-46f6-be40-d688e2b321f4\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          branches_batch_definition:\r\n            id: 850d2e7e-142b-45c3-8694-e735aad654df\r\n            partitioner:\r\n  gestandaardiseerd_data_source:\r\n    type: spark\r\n    id: 9f6bb7b9-c820-497b-9b14-72b72d6e9381\r\n    assets:\r\n      afas_branches_dataframe_data_asset:\r\n        type: dataframe\r\n        id: 5c96188c-9952-427a-8875-3b1144ebf85f\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          afas_branches_batch_definition:\r\n            id: 5815a4fc-7793-4ae1-9174-ab63a24cdfcb\r\n            partitioner:\r\n      afas_verkooprelatie_dataframe_data_asset:\r\n        type: dataframe\r\n        id: c2e29668-5f6d-44c9-b481-eda9fd5b3f0c\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          afas_verkooprelatie_batch_definition:\r\n            id: 58907bcc-db9a-4b10-bc7e-37900b398356\r\n            partitioner:\r\nanalytics_enabled:\r\ndata_context_id: 655338a7-0f2f-41b7-878a-45c067dca00e\r\n```\r\n\r\nThe code I execute:\r\n```python\r\ndef update_data_docs(context: FileDataContext) -> None:\r\n    site_config = {\r\n        \"class_name\": \"SiteBuilder\",\r\n        \"site_index_builder\": {\"class_name\": \"DefaultSiteIndexBuilder\"},\r\n        \"store_backend\": {\r\n            \"class_name\": \"TupleFilesystemStoreBackend\",\r\n            \"base_directory\": \"uncommitted/data_docs/local_site/\",\r\n        },\r\n    }\r\n    site_name = \"mygx\"\r\n    try:\r\n        context.update_data_docs_site(site_name, site_config)\r\n    except InvalidKeyError:\r\n        context.add_data_docs_site(site_name=site_name,\r\n                                   site_config=site_config)\r\n    context.build_data_docs()\r\n\r\ncontext = gx.get_context(mode=\"file\", project_root_dir=project_root_dir)\r\nupdate_data_docs(context)\r\n```\r\n\r\nFull stack trace:\r\n```\r\nAn unexpected Exception occurred during data docs rendering.  Because of this error, certain parts of data docs will not be rendered properly and/or may not appear altogether.  Please use the trace, included in this message, to diagnose and repair the underlying issue.  Detailed information follows:\r\n                KeyError: \"'run_id'\".  Traceback: \"Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/site-packages/great_expectations/render/renderer/site_builder.py\", line 460, in build\r\n    rendered_content = self.renderer_class.render(resource)\r\n  File \"/usr/local/lib/python3.10/site-packages/great_expectations/render/renderer/page_renderer.py\", line 78, in render\r\n    run_name, run_time = self._parse_run_values(validation_results)\r\n  File \"/usr/local/lib/python3.10/site-packages/great_expectations/render/renderer/page_renderer.py\", line 136, in _parse_run_values\r\n    run_id: Union[str, dict, RunIdentifier] = validation_results.meta[\"run_id\"]\r\nKeyError: 'run_id'\r\n\".\r\n```\r\n\r\n**Expected behavior**\r\nI expect to be able to render the 'Validation Results' section of my Data Docs by using `context.build_data_docs()`.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.2.4\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: Azure\r\n\r\n**Additional context**\r\nOpening up page_renderer.py shows the following lines around line 136:\r\n```python\r\n    def _parse_run_values(\r\n        self, validation_results: ExpectationSuiteValidationResult\r\n    ) -> Tuple[str, str]:\r\n        run_id: Union[str, dict, RunIdentifier] = validation_results.meta[\"run_id\"]\r\n        if isinstance(run_id, str):\r\n            try:\r\n                run_time = parse(run_id).strftime(\"%Y-%m-%dT%H:%M:%S.%fZ\")\r\n            except (ValueError, TypeError):\r\n                run_time = \"__none__\"\r\n            run_name = run_id\r\n```\r\n\r\nprinting 'validation_results.meta' indeed does not show the key \"run_id\", but it does show the key \"id\". However, when I replace \"run_id\" with \"id\", I still receive the same error (but for \"id\"), as if it weren't a key.\r\n\r\nIf I replace the dictionary lookup here (and in line 414 in the _render_validation_info class method) with a regular string, like \"cool_run_id\", then my page renders, but my 'Run Name' column only contains __none__ values.\r\n\r\nCould it have something to do with my validations? I run my validations as follows:\r\n```python\r\nvalidation_definition_name = f\"{entiteit}_{laag}_validation_definition\"\r\n\r\n    try:\r\n        validation_definition = context.validation_definitions.get(validation_definition_name)\r\n    except DataContextError:\r\n        validation_definition = ValidationDefinition(\r\n            data=batch_definition, suite=expectation_suite, name=validation_definition_name\r\n        )\r\n        validation_definition = context.validation_definitions.add(validation_definition)\r\n\r\nvalidation_results = validation_definition.run(batch_parameters=batch_parameters)\r\n```\r\n\r\nI leave the `run_id` argument empty, as is recommended in the documentation:\r\n\r\nrun_id\r\nAn identifier for this run. Typically, this should be set to None and it will be generated by this call.\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10739/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10739/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10738", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10738/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10738/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10738/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10738", "id": 2719227785, "node_id": "I_kwDOBiS_IM6iFB-J", "number": 10738, "title": "Enable Duckdb sqlalchemy data source", "user": {"login": "zschira", "id": 18427156, "node_id": "MDQ6VXNlcjE4NDI3MTU2", "avatar_url": "https://avatars.githubusercontent.com/u/18427156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zschira", "html_url": "https://github.com/zschira", "followers_url": "https://api.github.com/users/zschira/followers", "following_url": "https://api.github.com/users/zschira/following{/other_user}", "gists_url": "https://api.github.com/users/zschira/gists{/gist_id}", "starred_url": "https://api.github.com/users/zschira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zschira/subscriptions", "organizations_url": "https://api.github.com/users/zschira/orgs", "repos_url": "https://api.github.com/users/zschira/repos", "events_url": "https://api.github.com/users/zschira/events{/privacy}", "received_events_url": "https://api.github.com/users/zschira/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-12-05T03:34:49Z", "updated_at": "2025-01-16T16:00:02Z", "closed_at": "2025-01-16T16:00:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\n[duckdb-engine](https://pypi.org/project/duckdb_engine/) provides a sqlalchemy driver for duckdb, which I wanted to test with great expectations. I'm able to get a data source setup easily, but when I test an expectation I always run into the same error:\r\n\r\n```\r\n{\r\n  \"success\": false,\r\n  \"expectation_config\": {\r\n    \"type\": \"expect_column_max_to_be_between\",\r\n    \"kwargs\": {\r\n      \"column\": \"passenger_count\",\r\n      \"min_value\": 1.0,\r\n      \"max_value\": 6.0,\r\n      \"batch_id\": \"duckdb-test\"\r\n    },\r\n    \"meta\": {}\r\n  },\r\n  \"result\": {},\r\n  \"meta\": {},\r\n  \"exception_info\": {\r\n    \"('table.row_count', '02f890ec1f22e1cb927a8ed609303838', ())\": {\r\n      \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/path/to/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/path/to/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 1042, in resolve_metric_bundle\\n    f\\\"\\\"\\\"SqlAlchemyExecutionEngine computed {len(res[0])} metrics on domain_id \\\\\\n                                                ~~~^^^\\nIndexError: list index out of range\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/path/to/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/path/to/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/path/to/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: list index out of range\\n\",\r\n      \"exception_message\": \"list index out of range\",\r\n      \"raised_exception\": true\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nI did a little bit of debugging and I think what's happening is that the db connection is being closed before calling `fetchall` on a query, so it ends up returning an empty list. I think if duckdb was included in  `_PERSISTED_CONNECTION_DIALECTS` in `great_expectations/execution_engine/sqlalchemy_execution_engine.py` that this problem would go away. There may be other issues with the duckdb dialect, but it would at least be a start to being able to test it out.\r\n\r\n**Describe the solution you'd like**\r\nAdd a new duckdb dialect to `great_expectations/execution_engine/sqlalchemy_dialect.py` and include this in `_PERSISTED_CONNECTION_DIALECTS`. This seems pretty straightforward, and I'd be happy to put a PR together to do this, but I'm not sure if there are any other considerations needed to add a new dialect like this. \r\n\r\n**Describe alternatives you've considered**\r\nAn alternative option could be to add just add the `OTHER` dialect to `_PERSISTED_CONNECTION_DIALECTS`. This seems reasonable to me and might be best practice to default to keeping the engine alive while still interacting with a cursor.\r\n\r\n**Additional context**\r\nSteps to recreate the issue:\r\n1. Create a duckdb file with a test table\r\n```py\r\nimport duckdb\r\nimport pandas as pd\r\n\r\ntest_df = pd.DataFrame({\"test_col\": [0, 1, 2]})\r\n\r\nwith duckdb.connect(\"test.db\") as con:\r\n    con.sql(\r\n        \"CREATE TABLE test_table AS \"\r\n        f\"SELECT * FROM test_df;\"\r\n    )\r\n    con.table(\"test_table\").show()\r\n```\r\n\r\n2. Add db as a data source\r\n```py\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\ncontext.data_sources.add_sql(\r\n    name=\"duckdb\", connection_string=\"duckdb:///test.db\"\r\n)\r\n```\r\n\r\n3. Create a table asset/batch\r\n```py\r\ndata_source = context.data_sources.get(\"duckdb\")\r\n\r\ntable_data_asset = data_source.add_table_asset(\r\n    table_name=\"test_table\", name=\"test_asset\"\r\n)\r\n\r\nfull_table_batch_definition = table_data_asset.add_batch_definition_whole_table(\r\n    name=\"test_table\"\r\n)\r\nbatch = full_table_batch_definition.get_batch()\r\nbatch.head()\r\n```\r\n\r\n4. Test an expectation\r\n```py\r\nexpectation = gx.expectations.ExpectColumnMaxToBeBetween(\r\n    column=\"passenger_count\", min_value=1, max_value=6\r\n)\r\nbatch.validate(expectation)\r\n```", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10738/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10738/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10714", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10714/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10714/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10714/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10714", "id": 2711699173, "node_id": "I_kwDOBiS_IM6hoT7l", "number": 10714, "title": "Is the Documentation on Usage Statistics Outdated? ", "user": {"login": "niklasr22", "id": 75939868, "node_id": "MDQ6VXNlcjc1OTM5ODY4", "avatar_url": "https://avatars.githubusercontent.com/u/75939868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niklasr22", "html_url": "https://github.com/niklasr22", "followers_url": "https://api.github.com/users/niklasr22/followers", "following_url": "https://api.github.com/users/niklasr22/following{/other_user}", "gists_url": "https://api.github.com/users/niklasr22/gists{/gist_id}", "starred_url": "https://api.github.com/users/niklasr22/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niklasr22/subscriptions", "organizations_url": "https://api.github.com/users/niklasr22/orgs", "repos_url": "https://api.github.com/users/niklasr22/repos", "events_url": "https://api.github.com/users/niklasr22/events{/privacy}", "received_events_url": "https://api.github.com/users/niklasr22/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-12-02T12:01:03Z", "updated_at": "2025-01-16T17:32:54Z", "closed_at": "2025-01-16T17:32:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Description:**\r\n\r\nIt seems that the information in the [usage statistics documentation](https://github.com/great-expectations/great_expectations/blob/44382ef6a4c1682ead45f9059cac07d407ba8879/docs/docusaurus/docs/reference/learn/usage_statistics.md) might be outdated. Specifically, the [V0 to V1 migration guide](https://docs.greatexpectations.io/docs/reference/learn/migration_guide/#data-context-variables:~:text=unchanged%20in%20V1.-,anonymous_usage_statistics%3A,usage_statistics_url%3A%20This%20field%20is%20no%20longer%20configurable.,-fluent_datasources%3A%20While%20this) indicates that the field `anonymous_usage_statistics.enabled` was renamed to `analytics_enabled`. \r\n\r\nAdditionally, I find the description used in the documentation to be potentially misleading. For instance, the [article on toggling analytics events](https://docs.greatexpectations.io/docs/core/configure_project_settings/toggle_analytics_events/) discusses \"analytics\" but does not clearly convey that it refers to sending usage statistics.\r\n\r\nCould the team review and update the documentation to reflect these changes and ensure clarity? Thank you!\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10714/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10714/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10713", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10713/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10713/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10713/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10713", "id": 2704440610, "node_id": "I_kwDOBiS_IM6hMn0i", "number": 10713, "title": "Cascading and spillover of exception_traceback info all over other expectations", "user": {"login": "indresh-singh", "id": 102150194, "node_id": "U_kgDOBhawMg", "avatar_url": "https://avatars.githubusercontent.com/u/102150194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/indresh-singh", "html_url": "https://github.com/indresh-singh", "followers_url": "https://api.github.com/users/indresh-singh/followers", "following_url": "https://api.github.com/users/indresh-singh/following{/other_user}", "gists_url": "https://api.github.com/users/indresh-singh/gists{/gist_id}", "starred_url": "https://api.github.com/users/indresh-singh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/indresh-singh/subscriptions", "organizations_url": "https://api.github.com/users/indresh-singh/orgs", "repos_url": "https://api.github.com/users/indresh-singh/repos", "events_url": "https://api.github.com/users/indresh-singh/events{/privacy}", "received_events_url": "https://api.github.com/users/indresh-singh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 7709810534, "node_id": "LA_kwDOBiS_IM8AAAABy4pfZg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/backlog", "name": "backlog", "color": "6FBDAB", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-11-29T09:03:43Z", "updated_at": "2025-01-21T12:11:41Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Bug:**  If one expectation fails (e.g., due to a data type mismatch), the failure prevents the rest of the expectations from being executed successfully. All the expectations in my Great Expectations results object show the same error traceback, which actually corresponds to only one expectation (expect_column_values_to_match_strftime_format)\r\n\r\n**To Reproduce**\r\nHere's the Expectation_suite:\r\n\r\n{\r\n  \"name\": \"my_expectation_suite\",\r\n  \"id\": \"ac5bc98b-a950-4111-8fb2-c0e76d8eaf06\",\r\n  \"expectations\": [\r\n    {\r\n      \"type\": \"expect_column_values_to_not_be_null\",\r\n      \"kwargs\": {\r\n        \"catch_exceptions\": false,\r\n        \"column\": \"sku_id\"\r\n      },\r\n      \"meta\": {},\r\n      \"id\": \"39ce50e4-57d2-4791-909d-c43a0d1d0417\"\r\n    },\r\n    {\r\n      \"type\": \"expect_column_values_to_not_be_null\",\r\n      \"kwargs\": {\r\n        \"catch_exceptions\": false,\r\n        \"column\": \"location_id\"\r\n      },\r\n      \"meta\": {},\r\n      \"id\": \"ded50f35-018e-4e7a-a2f3-b27adc64ba2f\"\r\n    },\r\n    {\r\n      \"type\": \"expect_column_values_to_match_regex\",\r\n      \"kwargs\": {\r\n        \"catch_exceptions\": false,\r\n        \"column\": \"forecast_date\",\r\n        \"regex\": \"@gmail.com\"\r\n      },\r\n      \"meta\": {},\r\n      \"id\": \"a36daa82-8637-45e0-b3c5-9bb8fefedbab\"\r\n    },\r\n    {\r\n      \"type\": \"expect_column_values_to_match_strftime_format\",\r\n      \"kwargs\": {\r\n        \"catch_exceptions\": false,\r\n        \"column\": \"snapshotdate\",\r\n        \"strftime_format\": \"%Y-%m-%d\"\r\n      },\r\n      \"meta\": {},\r\n      \"id\": \"58df67c0-77bf-4e2e-bda3-0e07f622baf6\"\r\n    }\r\n  ],\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"1.2.4\"\r\n  },\r\n  \"notes\": null\r\n}\r\n\r\n### Here's the output received (notice how exception_traceback is the same for every expectation, ideally this exception_traceback should be only contained for expectation - expect_column_values_to_match_strftime_format\r\n\r\n{\r\n    \"success\": false,\r\n    \"results\": [\r\n      {\r\n        \"success\": false,\r\n        \"expectation_config\": {\r\n          \"type\": \"expect_column_values_to_not_be_null\",\r\n          \"kwargs\": {\r\n            \"catch_exceptions\": false,\r\n            \"column\": \"sku_id\",\r\n            \"batch_id\": \"bronze_wc_forecast-my_dataframe_data_asset\"\r\n          },\r\n          \"meta\": {},\r\n          \"id\": \"39ce50e4-57d2-4791-909d-c43a0d1d0417\"\r\n        },\r\n        \"result\": {},\r\n        \"meta\": {},\r\n        \"exception_info\": {\r\n          \"('column_values.nonnull.unexpected_count', 'e8bf7e0f55c1614aa69feae117c3a61e', ())\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 904, in resolve_metric_bundle\\n    res = df.agg(*aggregate[\\\"column_aggregates\\\"]).collect()\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          }\r\n        }\r\n      },\r\n      {\r\n        \"success\": false,\r\n        \"expectation_config\": {\r\n          \"type\": \"expect_column_values_to_not_be_null\",\r\n          \"kwargs\": {\r\n            \"catch_exceptions\": false,\r\n            \"column\": \"location_id\",\r\n            \"batch_id\": \"bronze_wc_forecast-my_dataframe_data_asset\"\r\n          },\r\n          \"meta\": {},\r\n          \"id\": \"ded50f35-018e-4e7a-a2f3-b27adc64ba2f\"\r\n        },\r\n        \"result\": {},\r\n        \"meta\": {},\r\n        \"exception_info\": {\r\n          \"('column_values.nonnull.unexpected_count', '5830051c38d53711d10f1b4d04301826', ())\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 904, in resolve_metric_bundle\\n    res = df.agg(*aggregate[\\\"column_aggregates\\\"]).collect()\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          }\r\n        }\r\n      },\r\n      {\r\n        \"success\": false,\r\n        \"expectation_config\": {\r\n          \"type\": \"expect_column_values_to_match_regex\",\r\n          \"kwargs\": {\r\n            \"catch_exceptions\": false,\r\n            \"column\": \"forecast_date\",\r\n            \"regex\": \"@gmail.com\",\r\n            \"batch_id\": \"bronze_wc_forecast-my_dataframe_data_asset\"\r\n          },\r\n          \"meta\": {},\r\n          \"id\": \"a36daa82-8637-45e0-b3c5-9bb8fefedbab\"\r\n        },\r\n        \"result\": {},\r\n        \"meta\": {},\r\n        \"exception_info\": {\r\n          \"('column_values.match_regex.unexpected_count', 'eb97dc1c342c4a0c0b4028e3b0a435d9', 'regex=@gmail.com')\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 904, in resolve_metric_bundle\\n    res = df.agg(*aggregate[\\\"column_aggregates\\\"]).collect()\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          },\r\n          \"('column_values.nonnull.unexpected_count', 'eb97dc1c342c4a0c0b4028e3b0a435d9', ())\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 904, in resolve_metric_bundle\\n    res = df.agg(*aggregate[\\\"column_aggregates\\\"]).collect()\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          }\r\n        }\r\n      },\r\n      {\r\n        \"success\": false,\r\n        \"expectation_config\": {\r\n          \"type\": \"expect_column_values_to_match_strftime_format\",\r\n          \"kwargs\": {\r\n            \"catch_exceptions\": false,\r\n            \"column\": \"snapshotdate\",\r\n            \"strftime_format\": \"%Y-%m-%d\",\r\n            \"batch_id\": \"bronze_wc_forecast-my_dataframe_data_asset\"\r\n          },\r\n          \"meta\": {},\r\n          \"id\": \"58df67c0-77bf-4e2e-bda3-0e07f622baf6\"\r\n        },\r\n        \"result\": {},\r\n        \"meta\": {},\r\n        \"exception_info\": {\r\n          \"('column_values.match_strftime_format.unexpected_values', 'e15033a11125fa0bba03afdbfd94e870', '71ebb60c1d1cd456f6ac2098748e502f')\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 532, in _process_direct_and_bundled_metric_computation_configurations\\n    metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/map_metric_provider/column_map_condition_auxilliary_methods.py\\\", line 309, in _spark_column_map_condition_values\\n    return [row[column_name] for row in query.collect()]\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 537, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          },\r\n          \"('column_values.nonnull.unexpected_count', 'e15033a11125fa0bba03afdbfd94e870', ())\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 904, in resolve_metric_bundle\\n    res = df.agg(*aggregate[\\\"column_aggregates\\\"]).collect()\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          },\r\n          \"('column_values.match_strftime_format.unexpected_count', 'e15033a11125fa0bba03afdbfd94e870', 'strftime_format=%Y-%m-%d')\": {\r\n            \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 904, in resolve_metric_bundle\\n    res = df.agg(*aggregate[\\\"column_aggregates\\\"]).collect()\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/sql/dataframe.py\\\", line 1218, in collect\\n    sock_info = self._jdf.collectToPython()\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/py4j/java_gateway.py\\\", line 1322, in __call__\\n    return_value = get_return_value(\\n  File \\\"/opt/spark/python/lib/pyspark.zip/pyspark/errors/exceptions/captured.py\\\", line 175, in deco\\n    raise converted from None\\npyspark.errors.exceptions.captured.PythonException: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: \\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\\n\",\r\n            \"exception_message\": \"\\n  An exception was thrown from the Python worker. Please see the stack trace below.\\nTraceback (most recent call last):\\n  File \\\"/home/trusted-service-user/cluster-env/clonedenv/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_strftime_format.py\\\", line 55, in is_parseable_by_format\\n    raise TypeError(  # noqa: TRY003\\nTypeError: Values passed to expect_column_values_to_match_strftime_format must be of type string.\\nIf you want to validate a column of dates or timestamps, please call the expectation before converting from string format.\\n\",\r\n            \"raised_exception\": true\r\n          }\r\n        }\r\n      }\r\n    ],\r\n    \"suite_name\": \"my_expectation_suite\",\r\n    \"suite_parameters\": {},\r\n    \"statistics\": {\r\n      \"evaluated_expectations\": 4,\r\n      \"successful_expectations\": 0,\r\n      \"unsuccessful_expectations\": 4,\r\n      \"success_percent\": 0.0\r\n    },\r\n    \"meta\": {\r\n      \"great_expectations_version\": \"1.2.4\",\r\n      \"batch_spec\": {\r\n        \"batch_data\": \"SparkDataFrame\"\r\n      },\r\n      \"batch_markers\": {\r\n        \"ge_load_time\": \"20241129T085618.749891Z\"\r\n      },\r\n      \"active_batch_definition\": {\r\n        \"datasource_name\": \"bronze_wc_forecast\",\r\n        \"data_connector_name\": \"fluent\",\r\n        \"data_asset_name\": \"my_dataframe_data_asset\",\r\n        \"batch_identifiers\": {\r\n          \"dataframe\": \"<DATAFRAME>\"\r\n        }\r\n      },\r\n      \"validation_id\": \"287d27f5-2581-4471-a0f8-541013889773\",\r\n      \"checkpoint_id\": null,\r\n      \"batch_parameters\": {\r\n        \"dataframe\": \"<DATAFRAME>\"\r\n      }\r\n    },\r\n    \"id\": null\r\n  }\r\n  \r\n\r\n**Expected behavior**\r\nException_traceback with the errors should be contained only to the erroneous expectation: column_values_match_strftime_format instead of spilling over to exception_traceback of all other expectations as well.\r\n\r\n**Environment:**\r\n - Operating System: MacOS \r\n - Great Expectations Version: 1.2.4\r\n - Data Source: Dataframe\r\n  - Cloud environment: MS Fabric\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10713/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10712", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10712/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10712/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10712/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10712", "id": 2703328964, "node_id": "I_kwDOBiS_IM6hIYbE", "number": 10712, "title": "RuntimeBatchRequest object has no attribute 'options'", "user": {"login": "Bidek56", "id": 26748923, "node_id": "MDQ6VXNlcjI2NzQ4OTIz", "avatar_url": "https://avatars.githubusercontent.com/u/26748923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bidek56", "html_url": "https://github.com/Bidek56", "followers_url": "https://api.github.com/users/Bidek56/followers", "following_url": "https://api.github.com/users/Bidek56/following{/other_user}", "gists_url": "https://api.github.com/users/Bidek56/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bidek56/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bidek56/subscriptions", "organizations_url": "https://api.github.com/users/Bidek56/orgs", "repos_url": "https://api.github.com/users/Bidek56/repos", "events_url": "https://api.github.com/users/Bidek56/events{/privacy}", "received_events_url": "https://api.github.com/users/Bidek56/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-11-28T21:47:26Z", "updated_at": "2024-12-03T21:11:36Z", "closed_at": "2024-12-03T21:11:35Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Using the following code:\r\n\r\n```\r\nimport os\r\nos.environ[\"GX_ANALYTICS_ENABLED\"] = \"false\"\r\n\r\nimport great_expectations as gx\r\nimport pandas as pd\r\nfrom great_expectations.core.batch import RuntimeBatchRequest\r\n\r\ncontext = gx.get_context()\r\n\r\ndata_source = context.data_sources.add_pandas(\"data_source\")\r\ndata_asset = data_source.add_dataframe_asset(\"data_asset\")\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe( \"data_batch\")\r\n\r\nsuite = context.suites.add(gx.ExpectationSuite(\"suite\",\r\n        expectations=[ gx.expectations.ExpectColumnValueLengthsToBeBetween(column=\"Track\", min_value=1, max_value=4),],\r\n    ))\r\n\r\ndataframe = pd.DataFrame({'value': [0.10, 0.01]})\r\n\r\nruntime_batch_request = RuntimeBatchRequest(\r\n    datasource_name=\"data_source\",\r\n    data_connector_name=\"runtime_data_connector_name\",\r\n    data_asset_name=\"data_asset\",\r\n    runtime_parameters={\"batch_data\": dataframe},\r\n    batch_identifiers={ \"default_identifier_name\": \"run_id\", },\r\n)\r\nbatch = context.get_validator(\r\n    batch_request=runtime_batch_request,\r\n    expectation_suite_name=\"suite\",\r\n)\r\n```\r\nI get the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"pvalidate2.py\", line 41, in <module>\r\n    batch = context.get_validator(\r\n            ^^^^^^^^^^^^^^^^^^^^^^\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 1114, in get_validator\r\n    batch_list = self._get_batch_list_from_inputs(\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 1199, in _get_batch_list_from_inputs\r\n    self.get_last_batch(\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 1392, in get_last_batch\r\n    return self._get_last_batch(\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 1473, in _get_last_batch\r\n    return datasource.get_batch(batch_request=result)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/datasource/fluent/interfaces.py\", line 775, in get_batch\r\n    return data_asset.get_batch(batch_request)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/datasource/fluent/pandas_datasource.py\", line 453, in get_batch\r\n    self._validate_batch_request(batch_request)\r\n  File \".venv/lib/python3.12/site-packages/great_expectations/datasource/fluent/pandas_datasource.py\", line 430, in _validate_batch_request\r\n    and batch_request.options\r\n        ^^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: 'RuntimeBatchRequest' object has no attribute 'options'\r\n```\r\n\r\n**Environment:**\r\n - Operating System: MacOS  Darwin Kernel Version 23.6.0\r\n - Great Expectations Version: 1.2.4\r\n - Data Source: Pandas\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10712/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10711", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10711/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10711/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10711/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10711", "id": 2698416003, "node_id": "I_kwDOBiS_IM6g1o-D", "number": 10711, "title": "Missing Failed Row Identification in Results for expect_column_values_to_be_type and expect_column_values_to_be_in_type_list Expectations", "user": {"login": "akmahi", "id": 20583083, "node_id": "MDQ6VXNlcjIwNTgzMDgz", "avatar_url": "https://avatars.githubusercontent.com/u/20583083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akmahi", "html_url": "https://github.com/akmahi", "followers_url": "https://api.github.com/users/akmahi/followers", "following_url": "https://api.github.com/users/akmahi/following{/other_user}", "gists_url": "https://api.github.com/users/akmahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/akmahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akmahi/subscriptions", "organizations_url": "https://api.github.com/users/akmahi/orgs", "repos_url": "https://api.github.com/users/akmahi/repos", "events_url": "https://api.github.com/users/akmahi/events{/privacy}", "received_events_url": "https://api.github.com/users/akmahi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 7709810534, "node_id": "LA_kwDOBiS_IM8AAAABy4pfZg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/backlog", "name": "backlog", "color": "6FBDAB", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-11-27T12:42:55Z", "updated_at": "2025-05-14T23:25:13Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe expect_column_values_to_be_type and expect_column_values_to_be_in_type_list expectations do not provide failed row identification in their results.\r\n\r\n**Expected behavior**\r\nThe documentation([https://greatexpectations.io/expectations/expect_column_values_to_be_of_type]) includes the result format as\r\n\r\n`\r\n{\r\n  \"exception_info\": {\r\n    \"raised_exception\": false,\r\n    \"exception_traceback\": null,\r\n    \"exception_message\": null\r\n  },\r\n  \"result\": {\r\n    \"element_count\": 3,\r\n    \"unexpected_count\": 3,\r\n    \"unexpected_percent\": 100.0,\r\n    \"partial_unexpected_list\": [\r\n        \"12345\",\r\n        \"abcde\",\r\n        \"1b3d5\"\r\n    ],\r\n    \"missing_count\": 0,\r\n    \"missing_percent\": 0.0,\r\n    \"unexpected_percent_total\": 100.0,\r\n    \"unexpected_percent_nonmissing\": 100.0\r\n  },\r\n  \"meta\": {},\r\n  \"success\": false\r\n}\r\n`\r\n\r\nBut , actual output is \r\n\r\n`{\r\n      \"success\": false,\r\n      \"expectation_config\": {\r\n        \"type\": \"expect_column_values_to_be_of_type\",\r\n        \"kwargs\": {\r\n          \"batch_id\": \"spark_data_source-my_data_asset\",\r\n          \"column\": \"Location\",\r\n          \"type_\": \"IntegerType\"\r\n        },\r\n        \"meta\": {}\r\n      },\r\n      \"result\": {\r\n        \"observed_value\": \"StringType\"\r\n      },\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"raised_exception\": false,\r\n        \"exception_traceback\": null,\r\n        \"exception_message\": null\r\n      }\r\n    }\r\n`\r\n**Environment (please complete the following information):**\r\n - Operating System: { Linux]\r\n - Great Expectations Version: [1.2.0]\r\n - Data Source: [spark]\r\n\r\n\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10711/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10711/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10710", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10710/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10710/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10710/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10710", "id": 2696396776, "node_id": "I_kwDOBiS_IM6gt7_o", "number": 10710, "title": "[BUG] Errors with snowflake-sqlalchemy 1.7.0", "user": {"login": "TrangPham", "id": 2117313, "node_id": "MDQ6VXNlcjIxMTczMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2117313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TrangPham", "html_url": "https://github.com/TrangPham", "followers_url": "https://api.github.com/users/TrangPham/followers", "following_url": "https://api.github.com/users/TrangPham/following{/other_user}", "gists_url": "https://api.github.com/users/TrangPham/gists{/gist_id}", "starred_url": "https://api.github.com/users/TrangPham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TrangPham/subscriptions", "organizations_url": "https://api.github.com/users/TrangPham/orgs", "repos_url": "https://api.github.com/users/TrangPham/repos", "events_url": "https://api.github.com/users/TrangPham/events{/privacy}", "received_events_url": "https://api.github.com/users/TrangPham/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-11-26T23:14:01Z", "updated_at": "2025-08-04T17:04:54Z", "closed_at": "2025-08-04T17:04:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nhttps://pypi.org/project/snowflake-sqlalchemy/1.7.0/ Released on Nov 21st \r\n\r\nwill cause the project to error on:\r\n\r\n```\r\nImportError while loading conftest '/Users/phamt/code/work/great_expectations/tests/conftest.py'.\r\ntests/conftest.py:74: in <module>\r\n    from great_expectations.self_check.util import (\r\ngreat_expectations/self_check/util.py:337: in <module>\r\n    \"BOOLEAN\": snowflake.snowflakedialect.BOOLEAN,\r\nE   AttributeError: module 'snowflake.sqlalchemy.snowdialect' has no attribute 'BOOLEAN'\r\n```\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\nInstall GX with https://pypi.org/project/snowflake-sqlalchemy/1.7.0 and run any tests\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nNo error should happen\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: latest/dev env\r\n - Data Source: Snowflake\r\n - Cloud environment: N/A\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n\r\nThis was fixed yesterday: https://github.com/snowflakedb/snowflake-sqlalchemy/pull/551\r\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10710/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10710/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10709", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10709/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10709/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10709/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10709", "id": 2696282966, "node_id": "I_kwDOBiS_IM6gtgNW", "number": 10709, "title": "All expectations fail if one fails with 'unrecognized condition_parser None for Spark execution engine'", "user": {"login": "iamamutt", "id": 1099347, "node_id": "MDQ6VXNlcjEwOTkzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/1099347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iamamutt", "html_url": "https://github.com/iamamutt", "followers_url": "https://api.github.com/users/iamamutt/followers", "following_url": "https://api.github.com/users/iamamutt/following{/other_user}", "gists_url": "https://api.github.com/users/iamamutt/gists{/gist_id}", "starred_url": "https://api.github.com/users/iamamutt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iamamutt/subscriptions", "organizations_url": "https://api.github.com/users/iamamutt/orgs", "repos_url": "https://api.github.com/users/iamamutt/repos", "events_url": "https://api.github.com/users/iamamutt/events{/privacy}", "received_events_url": "https://api.github.com/users/iamamutt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 7709810534, "node_id": "LA_kwDOBiS_IM8AAAABy4pfZg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/backlog", "name": "backlog", "color": "6FBDAB", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-11-26T22:37:19Z", "updated_at": "2025-01-16T15:53:18Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nFailure to specify `condition_parser` for a single expectation results in all expectations failing.\r\n\r\n**To Reproduce**\r\n\r\n```python\r\n\r\nimport tempfile\r\n\r\nfrom pprint import pprint\r\n\r\nimport great_expectations as gx\r\nimport pandas as pd\r\n\r\ndata = {\r\n    'col1': [1, 2, 3, 4, 5],\r\n    'col2': ['A', 'B', 'C', 'D', None],\r\n    'col3': [1.1, None, 3.3, 4.4, 5.5],\r\n}\r\n\r\n\r\ndef validate(dir_path: str, file_name: str):\r\n    context = gx.get_context(mode='ephemeral')\r\n    suite = context.suites.add(\r\n        gx.ExpectationSuite(\r\n            name='test-suite',\r\n            expectations=[\r\n                gx.expectations.ExpectColumnValuesToNotBeNull(\r\n                    column='col1', result_format='COMPLETE'\r\n                ),\r\n                gx.expectations.ExpectColumnValuesToBeInSet(\r\n                    column='col2',\r\n                    value_set=['A', 'B', 'C'],\r\n                    row_condition='col3 IS NOT NULL',\r\n                    mostly=0.665,\r\n                    # condition_parser='spark',\r\n                    result_format='COMPLETE',\r\n                ),\r\n            ],\r\n        )\r\n    )\r\n\r\n    return gx.ValidationDefinition(\r\n        name='test-validation',\r\n        data=(\r\n            context.data_sources.add_spark_filesystem(\r\n                name='test-spark-fs',\r\n                base_directory=dir_path,\r\n            )\r\n            .add_csv_asset(\r\n                name='csv-asset',\r\n                sep=',',\r\n                header=True,\r\n                infer_schema=True,\r\n            )\r\n            .add_batch_definition_path(\r\n                name='test-data',\r\n                path=file_name,\r\n            )\r\n        ),\r\n        suite=suite,\r\n    ).run()\r\n\r\n\r\nwith tempfile.TemporaryDirectory() as dir_path:\r\n    file_name = 'data.csv'\r\n    pd.DataFrame(data).to_csv(f'{dir_path}/{file_name}', index=False)\r\n    result = validate(dir_path, file_name)\r\n    pprint(result.to_json_dict(), sort_dicts=False, width=100)\r\n```\r\n\r\n**Expected behavior**\r\nOnly expectations with errors should fail and show exception info\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.2.4\r\n - Data Source: Spark file\r\n\r\n**Additional context**\r\n\r\n<details>\r\n\r\n```json\r\n{\r\n  \"success\": false,\r\n  \"results\": [\r\n    {\r\n      \"success\": false,\r\n      \"expectation_config\": {\r\n        \"type\": \"expect_column_values_to_not_be_null\",\r\n        \"kwargs\": {\r\n          \"result_format\": \"COMPLETE\",\r\n          \"column\": \"col1\",\r\n          \"batch_id\": \"test-spark-fs-csv-asset\"\r\n        },\r\n        \"meta\": {},\r\n        \"id\": \"0e734de0-e872-43e7-adc7-07c868c689d7\"\r\n      },\r\n      \"result\": {},\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"('table.row_count', '0dfa72ce94f9f181a7dc04305a6c30f7', ())\": {\r\n          \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 900, in resolve_metric_bundle\\n    df: pyspark.DataFrame = self.get_domain_records(domain_kwargs=domain_kwargs)\\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 681, in get_domain_records\\n    raise GreatExpectationsError(  # noqa: TRY003\\ngreat_expectations.exceptions.exceptions.GreatExpectationsError: unrecognized condition_parser None for Spark execution engine\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: unrecognized condition_parser None for Spark execution engine\\n\",\r\n          \"exception_message\": \"unrecognized condition_parser None for Spark execution engine\",\r\n          \"raised_exception\": true\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"success\": false,\r\n      \"expectation_config\": {\r\n        \"type\": \"expect_column_values_to_be_in_set\",\r\n        \"kwargs\": {\r\n          \"result_format\": \"COMPLETE\",\r\n          \"column\": \"col2\",\r\n          \"mostly\": 0.665,\r\n          \"row_condition\": \"col3 IS NOT NULL\",\r\n          \"value_set\": [\r\n            \"A\",\r\n            \"B\",\r\n            \"C\"\r\n          ],\r\n          \"batch_id\": \"test-spark-fs-csv-asset\"\r\n        },\r\n        \"meta\": {},\r\n        \"id\": \"c648e872-154c-4374-9cf1-cb8751e1c6d2\"\r\n      },\r\n      \"result\": {},\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"('table.column_types', 'e48bc318d7e9c92e270e3f7ab807c1b8', 'include_nested=True')\": {\r\n          \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 532, in _process_direct_and_bundled_metric_computation_configurations\\n    metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/expectations/metrics/metric_provider.py\\\", line 60, in inner_func\\n    return metric_fn(*args, **kwargs)\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/expectations/metrics/table_metrics/table_column_types.py\\\", line 81, in _spark\\n    df, _, _ = execution_engine.get_compute_domain(\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 800, in get_compute_domain\\n    data: pyspark.DataFrame = self.get_domain_records(domain_kwargs=domain_kwargs)\\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 681, in get_domain_records\\n    raise GreatExpectationsError(  # noqa: TRY003\\ngreat_expectations.exceptions.exceptions.GreatExpectationsError: unrecognized condition_parser None for Spark execution engine\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 537, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: unrecognized condition_parser None for Spark execution engine\\n\",\r\n          \"exception_message\": \"unrecognized condition_parser None for Spark execution engine\",\r\n          \"raised_exception\": true\r\n        },\r\n        \"('table.row_count', 'e48bc318d7e9c92e270e3f7ab807c1b8', ())\": {\r\n          \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 545, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 900, in resolve_metric_bundle\\n    df: pyspark.DataFrame = self.get_domain_records(domain_kwargs=domain_kwargs)\\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/sparkdf_execution_engine.py\\\", line 681, in get_domain_records\\n    raise GreatExpectationsError(  # noqa: TRY003\\ngreat_expectations.exceptions.exceptions.GreatExpectationsError: unrecognized condition_parser None for Spark execution engine\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/home/jburling/.local/conda/envs/stonevalley/lib/python3.12/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 549, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: unrecognized condition_parser None for Spark execution engine\\n\",\r\n          \"exception_message\": \"unrecognized condition_parser None for Spark execution engine\",\r\n          \"raised_exception\": true\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"suite_name\": \"test-suite\",\r\n  \"suite_parameters\": {},\r\n  \"statistics\": {\r\n    \"evaluated_expectations\": 2,\r\n    \"successful_expectations\": 0,\r\n    \"unsuccessful_expectations\": 2,\r\n    \"success_percent\": 0.0\r\n  },\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"1.2.4\",\r\n    \"batch_spec\": {\r\n      \"path\": \"/tmp/tmpgf8032g5/data.csv\",\r\n      \"reader_method\": \"csv\",\r\n      \"reader_options\": {\r\n        \"sep\": \",\",\r\n        \"header\": true,\r\n        \"inferSchema\": true\r\n      }\r\n    },\r\n    \"batch_markers\": {\r\n      \"ge_load_time\": \"20241126T222652.157081Z\"\r\n    },\r\n    \"active_batch_definition\": {\r\n      \"datasource_name\": \"test-spark-fs\",\r\n      \"data_connector_name\": \"fluent\",\r\n      \"data_asset_name\": \"csv-asset\",\r\n      \"batch_identifiers\": {\r\n        \"path\": \"data.csv\"\r\n      },\r\n      \"batching_regex\": \"(?P<path>data.csv)\"\r\n    },\r\n    \"validation_id\": \"cd188ea7-bedf-4f8a-9898-1cf823b69b5f\",\r\n    \"checkpoint_id\": null,\r\n    \"batch_parameters\": null\r\n  },\r\n  \"id\": null\r\n}\r\n\r\n```\r\n\r\n</details>", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10709/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10705", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10705/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10705/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10705/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10705", "id": 2693631951, "node_id": "I_kwDOBiS_IM6gjY_P", "number": 10705, "title": "Add Option to Disable Persistence in Spark Expectations for Serverless Compatibility", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-11-26T08:06:25Z", "updated_at": "2025-07-11T09:06:34Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am encountering an issue while working with serverless compute in Databricks, which does not support any form of persistence. Specifically, when using the following call:\r\n\r\n```python\r\nresult: ExpectationValidationResult = df.expect_column_values_to_not_be_null(\r\n    column=column, meta=self.meta, catch_exceptions=False\r\n)\r\n```\r\nThe method `expect_column_values_to_not_be_null` internally calls:\r\n```python\r\ncol_df = self.spark_df.select(F.col(eval_col))  # pyspark.sql.DataFrame\r\n\r\n# A couple of tests indicate that caching here helps performance\r\ncol_df.persist()\r\n```\r\nThis is located in `.../great_expectations/dataset/sparkdf_dataset.py`. \r\nSince `col_df.persist()` is not supported on serverless compute, it results in a failure.\r\n\r\n**To Reproduce**\r\n1. Start a serverless compute environment in Databricks.\r\n2. Run the expect_column_values_to_not_be_null method on a Spark DataFrame.\r\n\r\n**Expected behavior**\r\nI would expect there to be an option (e.g., a parameter) to enable or disable persistence, allowing compatibility with environments that do not support persistence.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.18\r\n - Data Source: Spark\r\n - Cloud environment: DataBricks\r\n\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10705/timeline", "performed_via_github_app": null, "state_reason": "reopened"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10702", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10702/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10702/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10702/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10702", "id": 2687791648, "node_id": "I_kwDOBiS_IM6gNHIg", "number": 10702, "title": "Use Narwhals instead of Pandas", "user": {"login": "akmalsoliev", "id": 24494206, "node_id": "MDQ6VXNlcjI0NDk0MjA2", "avatar_url": "https://avatars.githubusercontent.com/u/24494206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akmalsoliev", "html_url": "https://github.com/akmalsoliev", "followers_url": "https://api.github.com/users/akmalsoliev/followers", "following_url": "https://api.github.com/users/akmalsoliev/following{/other_user}", "gists_url": "https://api.github.com/users/akmalsoliev/gists{/gist_id}", "starred_url": "https://api.github.com/users/akmalsoliev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akmalsoliev/subscriptions", "organizations_url": "https://api.github.com/users/akmalsoliev/orgs", "repos_url": "https://api.github.com/users/akmalsoliev/repos", "events_url": "https://api.github.com/users/akmalsoliev/events{/privacy}", "received_events_url": "https://api.github.com/users/akmalsoliev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-11-24T14:30:43Z", "updated_at": "2024-11-30T00:49:13Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nCurrently, there is a limitation in the adoption of a new DataFrame library due to the dominance of a single DataFrame library (pandas). Narwhals is a DataFrame agnostic library that is gaining popularity for its simplicity and ability to use multiple DataFrame libraries through a single API. However, users who prefer different libraries face a significant hurdle as they are forced to use Pandas and/or Spark with GE.\r\n\r\n**Describe the solution you'd like**\r\nA potential solution would be to integrate Narwhals into Great Expectations (GE), allowing users to leverage GE's powerful data validation capabilities with their preferred DataFrame library. This integration would provide a more flexible and inclusive environment for data practitioners, enabling them to use GE seamlessly with libraries such as Pandas, Spark, Polars and etc.. through the Narwhals API.\r\n\r\n**Describe alternatives you've considered**\r\nThere are currently no alternatives, users would be forced to convert into Pandas to use GE, which is already not compatible with `numpy>2.0`\r\n\r\n**Additional context**\r\nNarwhals page:\r\nhttps://github.com/narwhals-dev/narwhals\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10702/reactions", "total_count": 18, "+1": 5, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 13, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10702/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10701", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10701/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10701/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10701/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10701", "id": 2687577178, "node_id": "I_kwDOBiS_IM6gMSxa", "number": 10701, "title": "unexpected_index_query", "user": {"login": "niatos99", "id": 45820515, "node_id": "MDQ6VXNlcjQ1ODIwNTE1", "avatar_url": "https://avatars.githubusercontent.com/u/45820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niatos99", "html_url": "https://github.com/niatos99", "followers_url": "https://api.github.com/users/niatos99/followers", "following_url": "https://api.github.com/users/niatos99/following{/other_user}", "gists_url": "https://api.github.com/users/niatos99/gists{/gist_id}", "starred_url": "https://api.github.com/users/niatos99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niatos99/subscriptions", "organizations_url": "https://api.github.com/users/niatos99/orgs", "repos_url": "https://api.github.com/users/niatos99/repos", "events_url": "https://api.github.com/users/niatos99/events{/privacy}", "received_events_url": "https://api.github.com/users/niatos99/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-11-24T11:13:20Z", "updated_at": "2025-07-28T02:12:05Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI want to execute the unexpected_index_query, so that i can find the broken records in run-time.\r\n\r\nBut the unexpected_index_query does not work as-is.\r\n\r\n1. For the output of the `gxe.ExpectColumnValuesToBeUnique(column=\"Navn\")`\r\nit seems to be broken with the `\"unspecifiedframe$\"`. \r\nThe result format/output of the validation gives this query: `df.filter(F.expr(NOT (count(1) OVER (PARTITION BY Navn unspecifiedframe$()) <= 1)))`\r\nand when editing it to `dataframe.filter(F.expr(f\"NOT (count(1) OVER (PARTITION BY Navn) <= 1)\"))`\r\nit says \"AnalysisException: It is not allowed to use window functions inside WHERE clause\". \r\n\r\nIt could be nice to use it in run-time, so that we can find and quarentine bad records\r\n\r\n2. The same is for the exepctation: `gxe.ExpectColumnValuesToNotBeNull(column=\"ID\")`\r\nwhich gives following index_query: `df.filter(F.expr(NOT (ID IS NOT NULL)))`\r\nBut we have to manually give it quotation marks `df.filter(F.expr(\"NOT (ID IS NOT NULL)\"))` to make it work properly.\r\n\r\nIt could be very nice, to have the mark \"\" around the expression per default. in this way, we can filter out bad records and do so many flows. \r\n\r\n\r\n\r\n\r\n\r\n\r\n**To Reproduce**\r\n```\r\nfrom pyspark.sql import SparkSession\r\nimport great_expectations as gx\r\nimport great_expectations.expectations as gxe\r\n\r\n# Start en Spark session\r\nspark = SparkSession.builder.appName(\"example\").getOrCreate()\r\n\r\n# Opret data og DataFrame\r\ndata = [\r\n    (2, \"Brian\", 25, \"Aarhus\"),\r\n    (3, \"Cecilie\", 28, \"Odense\"),\r\n    (4, \"David\", 22, \"Aalborg\"),  ## Duplikatr\u00e6kke\r\n    (4, \"David\", 22, \"Aalborg\"),  ## Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"), # Duplikatr\u00e6kke\r\n    (1, \"Anna\", 30, \"K\u00f8benhavn\"),  # Duplikatr\u00e6kke\r\n    (6, \"Thomas\", 30, \"K\u00f8benhavn\"),  # Duplikatr\u00e6kke p\u00e5 navn\r\n    (5, \"Thomas\", 30, \"K\u00f8benhavn\"),  # Duplikatr\u00e6kke p\u00e5 navn\r\n]\r\n\r\ndataframe = spark.createDataFrame(data, [\"ID\", \"Navn\", \"Alder\", \"By\"])\r\n\r\ndataframe.show()\r\n\r\nspark_config = str(uuid.uuid4()) \r\n\r\n# i know it is not meant to be used like this, but this is just to reproduce it for you guys \r\ncontext = gx.get_context()\r\ncreate_spark_configuration = context.data_sources.add_or_update_spark(name=spark_config).add_dataframe_asset(name=spark_config).add_batch_definition_whole_dataframe(spark_config) # opretter konfigurationerne\r\nget_spark_configuration = context.data_sources.get(spark_config).get_asset(spark_config).get_batch_definition(spark_config) # henter konfigurationerne\r\n# i know it is not meant to be used like this, but this is just to reproduce it for you guys \r\ngx_suite = context.suites.add(gx.ExpectationSuite(name=datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"))) # opretter en TEMPLATE, s\u00e5 vi kan inds\u00e6tte vores regler for vores data\r\nexpectation = gx_suite.add_expectation(gxe.ExpectColumnValuesToNotBeNull(column=\"ID\"))  # rule1: ExpectColumnValuesToNotBeNull\r\n\r\nexpectation = gx_suite.add_expectation(gxe.ExpectColumnValuesToBeUnique(column=\"Navn\"))   # rule3: ExpectColumnValuesToBeUnique\r\n\r\n\r\nvalidator = get_spark_configuration.get_batch(batch_parameters={\"dataframe\": dataframe}).validate(gx_suite, result_format={\r\n        \"result_format\": \"COMPLETE\"\r\n    }) \r\nvalidator\r\n```\r\n\r\n**Expected behavior**\r\nI expect it to return valid and usable queries that can be used and queried immediately and where we do not have to be edited manually. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 1.2.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nThis is the key to be able to remove bad records and would make the library so much more than data testing and data quality. I have seen from others that this is a wished feature. \r\nOur alternative right now is to for each expectation to create the code dynamically on run-time but for EACH expectation, which creates overhead. simply all the queries just need \"\" around the expression and they work. \r\n\r\nThis would be a biiig help, which can make it more enterprise scale :-)\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10701/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10699", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10699/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10699/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10699/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10699", "id": 2683821943, "node_id": "I_kwDOBiS_IM6f9993", "number": 10699, "title": "Warning: Result Format", "user": {"login": "VytSep", "id": 180197437, "node_id": "U_kgDOCr2YPQ", "avatar_url": "https://avatars.githubusercontent.com/u/180197437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VytSep", "html_url": "https://github.com/VytSep", "followers_url": "https://api.github.com/users/VytSep/followers", "following_url": "https://api.github.com/users/VytSep/following{/other_user}", "gists_url": "https://api.github.com/users/VytSep/gists{/gist_id}", "starred_url": "https://api.github.com/users/VytSep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VytSep/subscriptions", "organizations_url": "https://api.github.com/users/VytSep/orgs", "repos_url": "https://api.github.com/users/VytSep/repos", "events_url": "https://api.github.com/users/VytSep/events{/privacy}", "received_events_url": "https://api.github.com/users/VytSep/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-11-22T16:44:46Z", "updated_at": "2024-12-02T22:22:40Z", "closed_at": "2024-12-02T22:22:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi team,\r\ni'm recieving the following message:\r\n\r\nINFO:great_expectations.data_context.types.base:Created temporary directory '/tmp/tmp8h2win61' for ephemeral docs site\r\nWARNING:py.warnings:/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1518: UserWarning: `result_format` configured at the Validator-level will not be persisted. Please add the configuration to your Checkpoint config or checkpoint_run() method instead.\r\n  warnings.warn(\r\n\r\nI already remove the result format from the validator but i still having this warning:\r\n**To Reproduce**\r\nHere is my code:\r\n\r\n        context = gx.get_context()\r\n        asset = context.sources.add_spark(f\"{self.deltaTable}_spark\").add_dataframe_asset(f\"{self.deltaTable}_df_asset\")\r\n        tempDf = ut.add_gx_temp_key(tempDf)\r\n        context.add_or_update_expectation_suite(expectation_suite_name)\r\n        validator = context.get_validator(\r\n            batch_request=asset.build_batch_request(dataframe=tempDf), \r\n            expectation_suite_name=expectation_suite_name\r\n        )\r\n        meta = {\"is_hard_expectation\": True}\r\n        validator.expect_column_values_to_not_be_null(\"column_a\", meta=meta)\r\n        validator.expect_column_values_to_be_between(\"date\", None, str(date.today()), False, False, meta=meta)\r\n        validator.expect_column_values_to_be_between(\"date_ts\", None, str(datetime.now()), False, meta=meta)\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\nand the checkpoint is:\r\n        checkpoint = Checkpoint(\r\n            name=f\"{self.deltaTable}-checkpoint\",\r\n            run_name_template=f\"{self.source}-{self.deltaTable}-%Y-%m-%dT%H:%M:%S.%f%z\",\r\n            data_context=context,\r\n            batch_request=asset.build_batch_request(dataframe=tempDf),\r\n            expectation_suite_name=expectation_suite_name,\r\n            action_list=[\r\n                {\"name\": \"store_validation_result\", \"action\": {\"class_name\": \"StoreValidationResultAction\"}},\r\n            ],\r\n            runtime_configuration={\r\n                \"result_format\": {\"result_format\": \"COMPLETE\", \"unexpected_index_column_names\": [\"gx_temp_key\"], \"return_unexpected_index_query\": True, \"include_unexpected_rows\": True}\r\n            }\r\n        )\r\n        context.add_or_update_checkpoint(checkpoint=checkpoint)\r\n        self.checkpoint_result = checkpoint.run()\r\n        self.write_checkpoint_result()\r\n\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Windows]\r\n - Great Expectations Version: [e.g. 0.18.5]\r\n - Data Source: [Spark DF]\r\n - Cloud environment: [Databricks]\r\n\r\n**Additional context**\r\nHow should I proceed in this situation?\r\n\r\nThank you!\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10699/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10699/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10687", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10687/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10687/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10687/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10687", "id": 2670880796, "node_id": "I_kwDOBiS_IM6fMmgc", "number": 10687, "title": "[BUG] Missing 'dataframe' in add_dataframe_asset", "user": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-11-19T05:58:24Z", "updated_at": "2024-12-03T21:12:58Z", "closed_at": "2024-12-02T15:43:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAccording to the code docstring, `dataframe` should be part of the argument of add_dataframe_asset(). However, this is not the case. I'm trying to run on GX 1.2.3 and I don't know where should i link my dataframe to. Previously in 0.18.x, it is available as part of the function\r\n\r\n<img width=\"950\" alt=\"image\" src=\"https://github.com/user-attachments/assets/4ed458ec-e159-4a8f-b51e-7f3ab9a7e59f\">\r\n\r\n\r\n**To Reproduce**\r\n\r\n\r\n**Expected behavior**\r\nIt should have a `dataframe` argument\r\n\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows] MacOs\r\n - Great Expectations Version: [e.g. 0.13.2] 1.2.3\r\n - Data Source: [e.g. Pandas, Snowflake] Spark\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP] Local machine\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10687/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10687/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10659", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10659/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10659/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10659/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10659", "id": 2654459206, "node_id": "I_kwDOBiS_IM6eN9VG", "number": 10659, "title": "Get all expectations that gx supports", "user": {"login": "ayaan-ak-1", "id": 69572282, "node_id": "MDQ6VXNlcjY5NTcyMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/69572282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayaan-ak-1", "html_url": "https://github.com/ayaan-ak-1", "followers_url": "https://api.github.com/users/ayaan-ak-1/followers", "following_url": "https://api.github.com/users/ayaan-ak-1/following{/other_user}", "gists_url": "https://api.github.com/users/ayaan-ak-1/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayaan-ak-1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayaan-ak-1/subscriptions", "organizations_url": "https://api.github.com/users/ayaan-ak-1/orgs", "repos_url": "https://api.github.com/users/ayaan-ak-1/repos", "events_url": "https://api.github.com/users/ayaan-ak-1/events{/privacy}", "received_events_url": "https://api.github.com/users/ayaan-ak-1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-11-13T07:02:18Z", "updated_at": "2024-12-05T17:23:35Z", "closed_at": "2024-11-15T16:57:55Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "If someone want to get all the expectations that GX supports they cannot get it right now.\r\n\r\nSolution -\r\ncreate a GX API which will give a comprehensive list of expectations with their parameters respectively\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10659/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10652", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10652/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10652/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10652/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10652", "id": 2650672661, "node_id": "I_kwDOBiS_IM6d_g4V", "number": 10652, "title": "Wrong count from expect_column_unique_value_count_to_be_between", "user": {"login": "rayjan0114", "id": 47523852, "node_id": "MDQ6VXNlcjQ3NTIzODUy", "avatar_url": "https://avatars.githubusercontent.com/u/47523852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayjan0114", "html_url": "https://github.com/rayjan0114", "followers_url": "https://api.github.com/users/rayjan0114/followers", "following_url": "https://api.github.com/users/rayjan0114/following{/other_user}", "gists_url": "https://api.github.com/users/rayjan0114/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayjan0114/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayjan0114/subscriptions", "organizations_url": "https://api.github.com/users/rayjan0114/orgs", "repos_url": "https://api.github.com/users/rayjan0114/repos", "events_url": "https://api.github.com/users/rayjan0114/events{/privacy}", "received_events_url": "https://api.github.com/users/rayjan0114/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-11-11T23:53:18Z", "updated_at": "2024-11-27T22:33:12Z", "closed_at": "2024-11-27T22:32:49Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nWrong counting of label\r\n**The correct count is 2231 while the API giving 4078**\r\nIn [2]: df.label.nunique()\r\nOut[2]: 2231\r\n\r\nIn [3]: {type(l) for l in df.label}\r\nOut[3]: {str}\r\n\r\n`df.expect_column_unique_value_count_to_be_between(\"label\", min_value=1287.3, max_value=2758.5)`\r\n\r\n```\r\n{\r\n  \"success\": false,\r\n  \"expectation_config\": {\r\n    \"expectation_type\": \"expect_column_unique_value_count_to_be_between\",\r\n    \"kwargs\": {\r\n      \"column\": \"label\",\r\n      \"min_value\": 1287.3,\r\n      \"max_value\": 2758.5,\r\n      \"result_format\": \"BASIC\"\r\n    },\r\n    \"meta\": {}\r\n  },\r\n  \"result\": {\r\n    \"observed_value\": 4078,\r\n    \"element_count\": 27,\r\n    \"missing_count\": null,\r\n    \"missing_percent\": null\r\n  },\r\n  \"meta\": {},\r\n  \"exception_info\": {\r\n    \"raised_exception\": false,\r\n    \"exception_traceback\": null,\r\n    \"exception_message\": null\r\n  }\r\n}\r\n```\r\n\r\n**Tried**\r\nI have tried:\r\n1. delete the whole environment and install again\r\n2. install different versions:  0.15.50, 0.18.22\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.15.50, 0.18.22\r\n - Pandas Version: 2.2.3\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10652/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10644", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10644/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10644/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10644/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10644", "id": 2642680501, "node_id": "I_kwDOBiS_IM6dhBq1", "number": 10644, "title": "Issue Using condition_parser in Great Expectations within Kedro Pipeline", "user": {"login": "fabio-scarel", "id": 114494196, "node_id": "U_kgDOBtMK9A", "avatar_url": "https://avatars.githubusercontent.com/u/114494196?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabio-scarel", "html_url": "https://github.com/fabio-scarel", "followers_url": "https://api.github.com/users/fabio-scarel/followers", "following_url": "https://api.github.com/users/fabio-scarel/following{/other_user}", "gists_url": "https://api.github.com/users/fabio-scarel/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabio-scarel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabio-scarel/subscriptions", "organizations_url": "https://api.github.com/users/fabio-scarel/orgs", "repos_url": "https://api.github.com/users/fabio-scarel/repos", "events_url": "https://api.github.com/users/fabio-scarel/events{/privacy}", "received_events_url": "https://api.github.com/users/fabio-scarel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-11-08T02:48:42Z", "updated_at": "2025-01-23T14:56:43Z", "closed_at": "2025-01-16T15:48:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Describe the bug \r\nWhen integrating Great Expectations with Kedro, using the condition_parser within a pipeline does not yield expected results. Specifically, setting a row_condition in an expectation suite within the pipeline is failing. I've used other expectations successfully but this is the first using conditioning.\r\n\r\nSteps to reproduce the issue:\r\n\r\nAdd an expectation to the suite with ExpectColumnPairValuesToBeInSet.\r\nConfigure the value_pairs_set, column_A, and column_B.\r\nSet condition_parser to 'pandas' and add a row_condition.\r\n\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnPairValuesToBeInSet(\r\n        value_pairs_set=<EXPECTED_SET>,\r\n        column_A=\"colA\",\r\n        column_B=\"colB\",\r\n        condition_parser='pandas',\r\n        row_condition='<ROW_CONDITION>',\r\n    )\r\n)\r\n\r\nExpected behavior \r\nExpectation should execute successfully within the Kedro pipeline with the row condition applied as specified.\r\n\r\nEnvironment:\r\n\r\nOperating System: Windows\r\nGreat Expectations Version: 1.1.3\r\nData Source: Pandas\r\nAdditional context: This issue arises only when running within a Kedro pipeline.\r\n\r\ndata docs expectation result: \r\n```\r\nexpect_column_pair_values_to_be_in_set raised an exception:\r\nTraceback (most recent call last):\r\nFile \".../site-packages/great_expectations/validator/validator.py\", line 650, in graph_validate\r\nresult = expectation.metrics_validate(\r\nFile \".../site-packages/great_expectations/expectations/expectation.py\", line 1113, in metrics_validate\r\nevr: ExpectationValidationResult = self._build_evr(\r\nFile \".../site-packages/great_expectations/expectations/expectation.py\", line 1130, in _build_evr\r\nevr = ExpectationValidationResult(**raw_response)\r\nFile \".../site-packages/great_expectations/core/expectation_validation_result.py\", line 96, in __init__\r\nraise gx_exceptions.InvalidCacheValueError(result)\r\n\r\ngreat_expectations.exceptions.exceptions.InvalidCacheValueError: Invalid result values were found when trying to instantiate an ExpectationValidationResult.\r\n- Invalid result values are likely caused by inconsistent cache values.\r\n- Great Expectations enables caching by default.\r\n- Please ensure that caching behavior is consistent between the underlying Dataset (e.g. Spark) and Great Expectations.\r\nResult: {\r\n\"element_count\": 760,\r\n\"unexpected_count\": 98321,\r\n\"unexpected_percent\": 100.0,\r\n\"missing_count\": -97561, \"missing_percent\": -12836.973684210525, \"unexpected_percent_total\": 12936.973684210525, \"unexpected_percent_nonmissing\": 100.0,\r\n```\r\n\r\nI've removed some sensitive information but if anything else is needed I can try to help\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10644/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10644/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10637", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10637/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10637/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10637/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10637", "id": 2641582672, "node_id": "I_kwDOBiS_IM6dc1pQ", "number": 10637, "title": "Can't apply conditional expectation using spark parser", "user": {"login": "pishGold", "id": 184228877, "node_id": "U_kgDOCvscDQ", "avatar_url": "https://avatars.githubusercontent.com/u/184228877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pishGold", "html_url": "https://github.com/pishGold", "followers_url": "https://api.github.com/users/pishGold/followers", "following_url": "https://api.github.com/users/pishGold/following{/other_user}", "gists_url": "https://api.github.com/users/pishGold/gists{/gist_id}", "starred_url": "https://api.github.com/users/pishGold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pishGold/subscriptions", "organizations_url": "https://api.github.com/users/pishGold/orgs", "repos_url": "https://api.github.com/users/pishGold/repos", "events_url": "https://api.github.com/users/pishGold/events{/privacy}", "received_events_url": "https://api.github.com/users/pishGold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-11-07T16:42:54Z", "updated_at": "2025-01-23T14:56:55Z", "closed_at": "2024-11-14T14:22:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm trying to run expectations on a spark DF, created by reading from a delta table on databricks.\r\n\r\nI define the expectation as such:\r\nexpectation = gx.expectations.ExpectColumnValuesToNotBeNull(\r\n    column=\"founded\",\r\n    condition_parser='spark',\r\n    row_condition='company_id IS NOT NULL'\r\n)\r\n\r\nBut no matter what I do, I keep getting an exception:\r\nraise convert_exception(\\npyspark.errors.exceptions.connect.AnalysisException: [CANNOT_RESOLVE_DATAFRAME_COLUMN] Cannot resolve dataframe column \\\"founded\\\". It's probably because of illegal references like `df1.select(df2.col(\\\"a\\\"))`\r\n\r\nThis happens only when using an expectation that requires a 'column' parameter.\r\nFor example, this expectation works fine:\r\n\r\n expectation = gx.expectations.ExpectTableRowCountToBeBetween(\r\n    min_value=1500,\r\n    condition_parser='spark',\r\n    row_condition='company_id IS NOT NULL'\r\n    )\r\n\r\nI should state that converting the DF to a pandas DF and running with 'pandas' engine instead of 'spark' works, although performance is terrible...", "closed_by": {"login": "pishGold", "id": 184228877, "node_id": "U_kgDOCvscDQ", "avatar_url": "https://avatars.githubusercontent.com/u/184228877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pishGold", "html_url": "https://github.com/pishGold", "followers_url": "https://api.github.com/users/pishGold/followers", "following_url": "https://api.github.com/users/pishGold/following{/other_user}", "gists_url": "https://api.github.com/users/pishGold/gists{/gist_id}", "starred_url": "https://api.github.com/users/pishGold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pishGold/subscriptions", "organizations_url": "https://api.github.com/users/pishGold/orgs", "repos_url": "https://api.github.com/users/pishGold/repos", "events_url": "https://api.github.com/users/pishGold/events{/privacy}", "received_events_url": "https://api.github.com/users/pishGold/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10637/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10637/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10635", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10635/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10635/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10635/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10635", "id": 2639032405, "node_id": "I_kwDOBiS_IM6dTHBV", "number": 10635, "title": "Incorrect display of expectation in data_docs", "user": {"login": "tatianayunina", "id": 155171846, "node_id": "U_kgDOCT-8Bg", "avatar_url": "https://avatars.githubusercontent.com/u/155171846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianayunina", "html_url": "https://github.com/tatianayunina", "followers_url": "https://api.github.com/users/tatianayunina/followers", "following_url": "https://api.github.com/users/tatianayunina/following{/other_user}", "gists_url": "https://api.github.com/users/tatianayunina/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianayunina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianayunina/subscriptions", "organizations_url": "https://api.github.com/users/tatianayunina/orgs", "repos_url": "https://api.github.com/users/tatianayunina/repos", "events_url": "https://api.github.com/users/tatianayunina/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianayunina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-11-06T19:31:02Z", "updated_at": "2024-11-19T23:28:04Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn data_docs, the expectation \"expect_column_value_z_scores_to_be_less_than\" is displayed with the parameters. And highlighted in yellow. Tested in two different versions GX.\r\n\r\nexpect_column_value_z_scores_to_be_less_than(**{'batch_id': 'my_filesystem_data_source-Name', 'column': 'Columna', 'double_sided': True, 'threshold': 1.96})\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows10 and 11\r\n - Great Expectations Version: 1.2.1 and 0.18.21\r\n - Data Source: Pandas\r\n - Cloud environment: -\r\n![2024-11-06_202736](https://github.com/user-attachments/assets/09e7b761-eca5-47c5-8d47-696f041766ad)\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10635/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10635/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10621", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10621/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10621/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10621/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10621", "id": 2631918336, "node_id": "I_kwDOBiS_IM6c3-MA", "number": 10621, "title": "Pandas > 2.2 compatibility required ", "user": {"login": "ayaan-ak-1", "id": 69572282, "node_id": "MDQ6VXNlcjY5NTcyMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/69572282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayaan-ak-1", "html_url": "https://github.com/ayaan-ak-1", "followers_url": "https://api.github.com/users/ayaan-ak-1/followers", "following_url": "https://api.github.com/users/ayaan-ak-1/following{/other_user}", "gists_url": "https://api.github.com/users/ayaan-ak-1/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayaan-ak-1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayaan-ak-1/subscriptions", "organizations_url": "https://api.github.com/users/ayaan-ak-1/orgs", "repos_url": "https://api.github.com/users/ayaan-ak-1/repos", "events_url": "https://api.github.com/users/ayaan-ak-1/events{/privacy}", "received_events_url": "https://api.github.com/users/ayaan-ak-1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2024-11-04T05:59:59Z", "updated_at": "2025-12-03T15:04:16Z", "closed_at": "2025-12-03T15:04:15Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nSQream connection requires pysqream-sqlalchemy which supports pandas >2.2 but GX need pandas <2.2 so its not compatible\r\n\r\n**Describe the solution you'd like**\r\nIt would be good if pandas >2.2 compatibility is available\r\n", "closed_by": {"login": "dctalbot", "id": 17692467, "node_id": "MDQ6VXNlcjE3NjkyNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/17692467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dctalbot", "html_url": "https://github.com/dctalbot", "followers_url": "https://api.github.com/users/dctalbot/followers", "following_url": "https://api.github.com/users/dctalbot/following{/other_user}", "gists_url": "https://api.github.com/users/dctalbot/gists{/gist_id}", "starred_url": "https://api.github.com/users/dctalbot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dctalbot/subscriptions", "organizations_url": "https://api.github.com/users/dctalbot/orgs", "repos_url": "https://api.github.com/users/dctalbot/repos", "events_url": "https://api.github.com/users/dctalbot/events{/privacy}", "received_events_url": "https://api.github.com/users/dctalbot/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10621/reactions", "total_count": 20, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 19, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10621/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10607", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10607/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10607/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10607/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10607", "id": 2627094631, "node_id": "I_kwDOBiS_IM6clkhn", "number": 10607, "title": "Improve OpenSSF Scorecard Report - remove critical issue by changing pr-title-checker.yml CI workflow", "user": {"login": "nils-woxholt", "id": 6480462, "node_id": "MDQ6VXNlcjY0ODA0NjI=", "avatar_url": "https://avatars.githubusercontent.com/u/6480462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nils-woxholt", "html_url": "https://github.com/nils-woxholt", "followers_url": "https://api.github.com/users/nils-woxholt/followers", "following_url": "https://api.github.com/users/nils-woxholt/following{/other_user}", "gists_url": "https://api.github.com/users/nils-woxholt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nils-woxholt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nils-woxholt/subscriptions", "organizations_url": "https://api.github.com/users/nils-woxholt/orgs", "repos_url": "https://api.github.com/users/nils-woxholt/repos", "events_url": "https://api.github.com/users/nils-woxholt/events{/privacy}", "received_events_url": "https://api.github.com/users/nils-woxholt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-10-31T15:04:40Z", "updated_at": "2024-11-06T21:54:32Z", "closed_at": "2024-11-06T21:54:32Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nNoticed when viewing the OpenSSF scorecard for the Great Expectations library at:\r\nhttps://scorecard.dev/viewer/?uri=github.com/great-expectations/great_expectations\r\n\r\nThere is a critical *Dangerous-Workflow* pattern detected - the error is as follows:\r\n\r\n> Warn: script injection with untrusted input ' github.event.pull_request.title ': .github/workflows/pr-title-checker.yml:17\r\n\r\nThe workflow checks passes the pull_request.title value to a script command, which introduces a possible script injection issue.\r\n\r\n\r\n\r\n**To Reproduce**\r\nThe issue is in the github workflow in this file:\r\n- https://github.com/great-expectations/great_expectations/blob/develop/.github/workflows/pr-title-checker.yml\r\n\r\n**Expected behavior**\r\n\r\nTo avoid the OpenSSF warning about script injection in the pull_request.title value, we could use GitHub Actions' built-in if condition to validate the PR title. This approach avoids using shell commands that could be vulnerable to injection attacks. Here's a revised version of the workflow:\r\n\r\n```\r\njobs:\r\n  check:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - name: Check PR title validity\r\n        if: \"!contains(github.event.pull_request.title, '[FEATURE]') && !contains(github.event.pull_request.title, '[BUGFIX]') && !contains(github.event.pull_request.title, '[DOCS]') && !contains(github.event.pull_request.title, '[MAINTENANCE]') && !contains(github.event.pull_request.title, '[CONTRIB]') && !contains(github.event.pull_request.title, '[RELEASE]')\"\r\n        run: |\r\n          echo \"Invalid PR title - please prefix with one of: [FEATURE] | [BUGFIX] | [DOCS] | [MAINTENANCE] | [CONTRIB] | [RELEASE]\"\r\n          exit 1\r\n        env:\r\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\r\n```\r\n\r\nThis version uses the `if` condition to check if the PR title contains any of the accepted prefixes. If none of the prefixes are found, it outputs an error message and exits with a status of 1. \r\n\r\nThis approach mitigates the risk of script injection by avoiding the use of shell commands to process the PR title.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: any\r\n - Great Expectations Version: 1.2.0\r\n - Data Source: n/a\r\n - Cloud environment: n/a\r\n\r\n**Additional context**\r\n\r\n- https://github.com/ossf/scorecard/blob/367426ed5d9cc62f4944dc4a2174f3bbb5e22169/docs/checks.md#dangerous-workflow\r\n- https://docs.github.com/en/actions/security-for-github-actions/security-guides/security-hardening-for-github-actions#understanding-the-risk-of-script-injections\r\n\r\n", "closed_by": {"login": "cdkini", "id": 49923762, "node_id": "MDQ6VXNlcjQ5OTIzNzYy", "avatar_url": "https://avatars.githubusercontent.com/u/49923762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdkini", "html_url": "https://github.com/cdkini", "followers_url": "https://api.github.com/users/cdkini/followers", "following_url": "https://api.github.com/users/cdkini/following{/other_user}", "gists_url": "https://api.github.com/users/cdkini/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdkini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdkini/subscriptions", "organizations_url": "https://api.github.com/users/cdkini/orgs", "repos_url": "https://api.github.com/users/cdkini/repos", "events_url": "https://api.github.com/users/cdkini/events{/privacy}", "received_events_url": "https://api.github.com/users/cdkini/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10607/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10607/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10603", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10603/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10603/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10603/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10603", "id": 2625522155, "node_id": "I_kwDOBiS_IM6cfknr", "number": 10603, "title": "add_or_update_expectation suite is gone. will there be an update added to the SuiteFactory?", "user": {"login": "isaacmartin1", "id": 45830500, "node_id": "MDQ6VXNlcjQ1ODMwNTAw", "avatar_url": "https://avatars.githubusercontent.com/u/45830500?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isaacmartin1", "html_url": "https://github.com/isaacmartin1", "followers_url": "https://api.github.com/users/isaacmartin1/followers", "following_url": "https://api.github.com/users/isaacmartin1/following{/other_user}", "gists_url": "https://api.github.com/users/isaacmartin1/gists{/gist_id}", "starred_url": "https://api.github.com/users/isaacmartin1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isaacmartin1/subscriptions", "organizations_url": "https://api.github.com/users/isaacmartin1/orgs", "repos_url": "https://api.github.com/users/isaacmartin1/repos", "events_url": "https://api.github.com/users/isaacmartin1/events{/privacy}", "received_events_url": "https://api.github.com/users/isaacmartin1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-10-30T22:45:22Z", "updated_at": "2025-02-14T16:53:55Z", "closed_at": "2025-02-13T03:03:25Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "It looks in v 1.2.0 like suite factory only has CRUD methods: delete, add, and all. Will there be an update so that a suite of a particular name can be updated as was possible in previous versions where you could run add_or_update_expectation_suite on the great expectations context like was possible in version 0.18.17?", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10603/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10603/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10587", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10587/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10587/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10587/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10587", "id": 2621240113, "node_id": "I_kwDOBiS_IM6cPPMx", "number": 10587, "title": "URL Masking not working for azure blob storage connection string", "user": {"login": "hemalrajput18", "id": 14954069, "node_id": "MDQ6VXNlcjE0OTU0MDY5", "avatar_url": "https://avatars.githubusercontent.com/u/14954069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hemalrajput18", "html_url": "https://github.com/hemalrajput18", "followers_url": "https://api.github.com/users/hemalrajput18/followers", "following_url": "https://api.github.com/users/hemalrajput18/following{/other_user}", "gists_url": "https://api.github.com/users/hemalrajput18/gists{/gist_id}", "starred_url": "https://api.github.com/users/hemalrajput18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hemalrajput18/subscriptions", "organizations_url": "https://api.github.com/users/hemalrajput18/orgs", "repos_url": "https://api.github.com/users/hemalrajput18/repos", "events_url": "https://api.github.com/users/hemalrajput18/events{/privacy}", "received_events_url": "https://api.github.com/users/hemalrajput18/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-10-29T13:19:55Z", "updated_at": "2024-11-13T18:00:50Z", "closed_at": "2024-11-13T18:00:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am currently getting constant warnings about not having SQL Alchemy installed when the mask_db_url for the following config_variables.yml entry:\r\n\r\nAZURE_STORAGE_CONNECTION_STRING: \"DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=<redacted>;AccountKey=<redacted>\"\r\n\r\nI have removed the account name and account key for this example\r\n\r\n**To Reproduce**\r\n\r\nInclude above entry in config_variables.yml\r\n\r\nHere is my great_expectations.yml config:\r\n\r\n```\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\nplugins_directory: plugins/\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: validation_definitions/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidation_results_store_name: validation_results_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\n  azure_docs_site:\r\n    class_name: SiteBuilder\r\n    store_backend:\r\n      class_name: TupleAzureBlobStoreBackend\r\n      container: \\$web\r\n      connection_string: ${AZURE_STORAGE_CONNECTION_STRING}\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\n  my_data_docs_site:\r\n    class_name: SiteBuilder\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: /dbfs/mnt/web/\r\nfluent_datasources:\r\n  spark_generic_technical_columns_template_suite:\r\n    type: spark\r\n    id: 1b8640f5-1461-4acc-b48f-509b50487332\r\n    assets:\r\n      dataframe_asset_generic_technical_columns_template_suite:\r\n        type: dataframe\r\n        id: 65b363e5-4f4c-4ec1-b989-951e1c3f24ce\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          generic_technical_columns_template_batch_definition:\r\n            id: 136d1a85-e2d4-4543-b239-9afecec2859b\r\n            partitioner:\r\n  spark_sap_s4_sap_s4_x8_openhub_sap_bw_sap_bw_commitments_management_line_items_suite:\r\n    type: spark\r\n    id: 1a329ac9-da93-43ad-8588-46519e410315\r\n    assets:\r\n      dataframe_asset_sap_s4_sap_s4_x8_openhub_sap_bw_sap_bw_commitments_management_line_items_suite:\r\n        type: dataframe\r\n        id: 64cde889-e875-48ad-ad00-8da951924121\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          sap_s4_sap_s4_x8_openhub_sap_bw_sap_bw_commitments_management_line_items_batch_definition:\r\n            id: b532cafb-d79a-4652-9b0f-dea16541c701\r\n            partitioner:\r\nanalytics_enabled:\r\ndata_context_id: 9b7e3388-812e-4325-a3bc-7f48736d52e7\r\n```\r\n\r\nI get this warning message all the time for most operations using the GE Framework. Simplest example would be:\r\n\r\nge_context = ge.get_context(context_root_dir=\"/dbfs/mnt/config/gx/\")\r\n\r\nI get the output:\r\n\r\n/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/data_context/util.py:196: UserWarning: SQLAlchemy is not installed, using urlparse to mask database url password which ignores **kwargs.\r\n  warnings.warn(\r\n\r\n**Expected behavior**\r\nLooking at the source code for the mask_db_url function I see that there is a special case included for the azure blob storage strings _obfuscate_azure_blobstore_connection_string. But the function seems to fail the check if url.startswith(\"DefaultEndpointsProtocol\") for some reason.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.2.0\r\n - Data Source: Spark\r\n - Cloud environment: Databricks\r\n", "closed_by": {"login": "tyler-hoffman", "id": 5400974, "node_id": "MDQ6VXNlcjU0MDA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5400974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyler-hoffman", "html_url": "https://github.com/tyler-hoffman", "followers_url": "https://api.github.com/users/tyler-hoffman/followers", "following_url": "https://api.github.com/users/tyler-hoffman/following{/other_user}", "gists_url": "https://api.github.com/users/tyler-hoffman/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyler-hoffman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyler-hoffman/subscriptions", "organizations_url": "https://api.github.com/users/tyler-hoffman/orgs", "repos_url": "https://api.github.com/users/tyler-hoffman/repos", "events_url": "https://api.github.com/users/tyler-hoffman/events{/privacy}", "received_events_url": "https://api.github.com/users/tyler-hoffman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10587/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10587/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10559", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10559/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10559/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10559/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10559", "id": 2611937277, "node_id": "I_kwDOBiS_IM6brv_9", "number": 10559, "title": "[BUG] ExpectColumnPairValuesAToBeGreaterThanB Spark Databricks", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-10-24T15:27:40Z", "updated_at": "2025-01-30T06:15:19Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI'm using an Spark Data Source and Spark Dataframes as Data Assets. When I try to validate the ExpectColumnPairValuesAToBeGreaterThanB expectation it raises an error. I'm going to copy a small part of the exception raised:\r\n\r\n{\r\n      \"success\": false,\r\n      \"expectation_config\": {\r\n        \"type\": \"expect_column_pair_values_a_to_be_greater_than_b\",\r\n        \"kwargs\": {\r\n          \"column_A\": \"tpep_dropoff_datetime\",\r\n          \"column_B\": \"tpep_pickup_datetime\",\r\n          \"batch_id\": \"ds_samples_nyctaxi-da_df_trips\"\r\n        },\r\n        \"meta\": {\r\n          \"columns\": [\r\n            \"tpep_pickup_datetime\",\r\n            \"tpep_dropoff_datetime\"\r\n          ]\r\n        },\r\n        \"id\": \"7310fd00-2153-43e9-8673-e8d7c4688abd\"\r\n      },\r\n      \"result\": {},\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"('column_pair_values.a_greater_than_b.unexpected_count', '452c8f1abbd4f1d85e1503a16beb23ec', 'or_equal=None')\": {\r\n          \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 533, in _process_direct_and_bundled_metric_computation_configurations\\n    metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/expectations/metrics/map_metric_provider/map_condition_auxilliary_methods.py\\\", line 625, in _spark_map_condition_unexpected_count_value\\n    return filtered.count()\\n           ^^^^^^^^^^^^^^^^\\n  File \\\"/databricks/spark/python/pyspark/sql/connect/dataframe.py\\\", line 300, in count\\n    table, _ = self.agg(F._invoke_function(\\\"count\\\", F.lit(1)))._to_table()\\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/databricks/spark/python/pyspark/sql/connect/dataframe.py\\\", line 1971, in _to_table\\n    table, schema, self._execution_info = self._session.client.to_table(\\n                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/databricks/spark/python/pyspark/sql/connect/client/core.py\\\", line 1014, in to_table\\n    table, schema, metrics, observed_metrics, _ = self._execute_and_fetch(req, observations)\\n                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/databricks/spark/python/pyspark/sql/connect/client/core.py\\\", line 1755, in _execute_and_fetch\\n    for response in self._execute_and_fetch_as_iterator(\\n  File \\\"/databricks/spark/python/pyspark/sql/connect/client/core.py\\\", line 1731, in _execute_and_fetch_as_iterator\\n\r\n...\r\n\"exception_message\": \"[CANNOT_RESOLVE_DATAFRAME_COLUMN] Cannot resolve dataframe column \\\"tpep_dropoff_datetime\\\". It's probably because of illegal references like `df1.select(df2.col(\\\"a\\\"))`. SQLSTATE: 42704\\n\\nJVM stacktrace:\\norg...}\"\r\n\r\n\r\n**To Reproduce**\r\n```\r\ndata_source = context.data_sources.add_spark(name=data_source_name)\r\ndata_asset = data_source.add_dataframe_asset(name=asset_name)\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(batch_def_name)\r\ndf = spark.read.table(f\"{catalog}.{schema}.{table}\") # samples.nyxtaxi.trips\r\n\r\ndate_expectation = gx.expectations.ExpectColumnPairValuesAToBeGreaterThanB(\r\n    column_A=\"tpep_dropoff_datetime\",\r\n    column_B=\"tpep_pickup_datetime\",\r\n    or_equal=True \r\n)\r\n\r\nbatch = batch_definition.get_batch(batch_parameters={'dataframe': df})\r\nval_results = batch.validate(date_expectation)\r\n```\r\n\r\n**Expected behavior**\r\nNot an Exception error.\r\n\r\n**Environment:**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.1.3\r\n - Data Source: Spark DataFrame\r\n - Cloud environment: Azure Databricks\r\n\r\n**Additional context**\r\nI tried with a Pandas DF and it worked, but I need to use the UnexpectedRowsExpectation expectation for other more complex validations. I replaced the ExpectColumnPairValuesAToBeGreaterThanB for UnexpectedRowsExpectation to workaround this datetime validation.\r\n\r\n`unexpected = gx.expectations.UnexpectedRowsExpectation(\r\n    unexpected_rows_query = (\r\n        \"SELECT * FROM {batch} WHERE tpep_dropoff_datetime < tpep_pickup_datetime\"\r\n    )\r\n)`\r\n\r\nSeems to work for now, but I wanted to raise this bug.\r\nThank you :)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10559/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10559/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10553", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10553/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10553/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10553/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10553", "id": 2608697530, "node_id": "I_kwDOBiS_IM6bfZC6", "number": 10553, "title": "INFO: _get_default_value called with key \"table\", but it is not a known field in logs", "user": {"login": "VolkovGeoPhy", "id": 117853378, "node_id": "U_kgDOBwZMwg", "avatar_url": "https://avatars.githubusercontent.com/u/117853378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VolkovGeoPhy", "html_url": "https://github.com/VolkovGeoPhy", "followers_url": "https://api.github.com/users/VolkovGeoPhy/followers", "following_url": "https://api.github.com/users/VolkovGeoPhy/following{/other_user}", "gists_url": "https://api.github.com/users/VolkovGeoPhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/VolkovGeoPhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VolkovGeoPhy/subscriptions", "organizations_url": "https://api.github.com/users/VolkovGeoPhy/orgs", "repos_url": "https://api.github.com/users/VolkovGeoPhy/repos", "events_url": "https://api.github.com/users/VolkovGeoPhy/events{/privacy}", "received_events_url": "https://api.github.com/users/VolkovGeoPhy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2024-10-23T13:49:49Z", "updated_at": "2025-02-20T11:29:38Z", "closed_at": "2025-02-19T17:14:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nFor instance I use this type of expectations. (or many other types)\r\n`class ExpectColumnValuesToMatchRegex(ColumnMapExpectation):`\r\n`class ColumnMapExpectation(BatchExpectation, ABC):\r\n    \"\"\"Base class for ColumnMapExpectations.\r\n\r\n    ColumnMapExpectations are evaluated for a column and ask a yes/no question about every row in the column.\r\n    Based on the result, they then calculate the percentage of rows that gave a positive answer.\r\n    If the percentage is high enough, the Expectation considers that data valid.\r\n\r\n    ColumnMapExpectations must implement a `_validate(...)` method containing logic\r\n    for determining whether the Expectation is successfully validated.\r\n\r\n    ColumnMapExpectations may optionally provide implementations of `validate_configuration`,\r\n    which should raise an error if the configuration will not be usable for the Expectation. By default,\r\n    the `validate_configuration` method will return an error if `column` is missing from the configuration.\r\n\r\n    Raises:\r\n        InvalidExpectationConfigurationError: If `column` is missing from configuration.\r\n    Args:\r\n        domain_keys (tuple): A tuple of the keys used to determine the domain of the\r\n            expectation.\r\n        success_keys (tuple): A tuple of the keys used to determine the success of\r\n            the expectation.\r\n    \"\"\"  # noqa: E501\r\n\r\n    column: StrictStr = Field(min_length=1, description=COLUMN_DESCRIPTION)\r\n    mostly: Mostly = 1.0  # type: ignore[assignment] # TODO: Fix in CORE-412\r\n\r\n    catch_exceptions: bool = True\r\n\r\n    map_metric: ClassVar[Optional[str]] = None\r\n    domain_keys: ClassVar[Tuple[str, ...]] = (\r\n        \"batch_id\",\r\n        \"table\",\r\n        \"column\",\r\n        \"row_condition\",\r\n        \"condition_parser\",\r\n    )`\r\n\r\n**To Reproduce**\r\nAdd expectation ExpectColumnValuesToMatchRegex\r\n\r\n**Expected behavior**\r\nEmpty logs\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS (Docker)\r\n - Great Expectations Version: 1.1.3\r\n - Data Source: Redshift sqlalchemy\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10553/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10547", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10547/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10547/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10547/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10547", "id": 2604751840, "node_id": "I_kwDOBiS_IM6bQVvg", "number": 10547, "title": "data docs rendering bug for UnexpectedRowsExpectation", "user": {"login": "VolkovGeoPhy", "id": 117853378, "node_id": "U_kgDOBwZMwg", "avatar_url": "https://avatars.githubusercontent.com/u/117853378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VolkovGeoPhy", "html_url": "https://github.com/VolkovGeoPhy", "followers_url": "https://api.github.com/users/VolkovGeoPhy/followers", "following_url": "https://api.github.com/users/VolkovGeoPhy/following{/other_user}", "gists_url": "https://api.github.com/users/VolkovGeoPhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/VolkovGeoPhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VolkovGeoPhy/subscriptions", "organizations_url": "https://api.github.com/users/VolkovGeoPhy/orgs", "repos_url": "https://api.github.com/users/VolkovGeoPhy/repos", "events_url": "https://api.github.com/users/VolkovGeoPhy/events{/privacy}", "received_events_url": "https://api.github.com/users/VolkovGeoPhy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2024-10-22T08:54:50Z", "updated_at": "2025-12-16T19:36:44Z", "closed_at": "2025-01-10T09:31:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "\r\n\r\n**Describe the bug**\r\nhttps://docs.greatexpectations.io/docs/core/customize_expectations/use_sql_to_define_a_custom_expectation done as it described here.\r\nIn any case it doesn't render it in correct way despite I can see correct results in json file.\r\n\r\n**To Reproduce**\r\nCreate any custom expectation as it described [here](https://docs.greatexpectations.io/docs/core/customize_expectations/use_sql_to_define_a_custom_expectation). build docs. \r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Docker\r\n - Great Expectations Version: 1.1.3\r\n - Data Source: Redshift\r\n - Cloud environment: no\r\n\r\n**Additional context**\r\n![Screenshot 2024-09-30 at 17 44 07](https://github.com/user-attachments/assets/906060b3-d93e-4548-943a-e0bb84e65826)\r\n", "closed_by": {"login": "VolkovGeoPhy", "id": 117853378, "node_id": "U_kgDOBwZMwg", "avatar_url": "https://avatars.githubusercontent.com/u/117853378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VolkovGeoPhy", "html_url": "https://github.com/VolkovGeoPhy", "followers_url": "https://api.github.com/users/VolkovGeoPhy/followers", "following_url": "https://api.github.com/users/VolkovGeoPhy/following{/other_user}", "gists_url": "https://api.github.com/users/VolkovGeoPhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/VolkovGeoPhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VolkovGeoPhy/subscriptions", "organizations_url": "https://api.github.com/users/VolkovGeoPhy/orgs", "repos_url": "https://api.github.com/users/VolkovGeoPhy/repos", "events_url": "https://api.github.com/users/VolkovGeoPhy/events{/privacy}", "received_events_url": "https://api.github.com/users/VolkovGeoPhy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10547/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10547/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10545", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10545/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10545/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10545/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10545", "id": 2603174952, "node_id": "I_kwDOBiS_IM6bKUwo", "number": 10545, "title": "Conditional Expectation great_expectations condition_parser", "user": {"login": "victorgrcp", "id": 81804797, "node_id": "MDQ6VXNlcjgxODA0Nzk3", "avatar_url": "https://avatars.githubusercontent.com/u/81804797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorgrcp", "html_url": "https://github.com/victorgrcp", "followers_url": "https://api.github.com/users/victorgrcp/followers", "following_url": "https://api.github.com/users/victorgrcp/following{/other_user}", "gists_url": "https://api.github.com/users/victorgrcp/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorgrcp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorgrcp/subscriptions", "organizations_url": "https://api.github.com/users/victorgrcp/orgs", "repos_url": "https://api.github.com/users/victorgrcp/repos", "events_url": "https://api.github.com/users/victorgrcp/events{/privacy}", "received_events_url": "https://api.github.com/users/victorgrcp/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2024-10-21T17:05:11Z", "updated_at": "2025-02-21T19:25:02Z", "closed_at": "2024-10-25T17:30:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI'm trying to use a Conditional Expectations for a Databricks table and I'm getting an Exception regarding the condition_parser: \"SqlAlchemyExecutionEngine only supports the great_expectations condition_parser\"\r\n\r\nI'm using a table from a Databricks SQL Warehouse as a data asset.\r\n\r\n**Code**\r\n```\r\ncond_expectation = gxe.ExpectColumnValuesToBeInSet(\r\n    column=\"tpep_dropoff_datetime\",\r\n    value_set=[datetime(2016, 1, 1, 0, 12), datetime(2016, 1, 1, 0, 13)],\r\n    condition_parser=\"great_expectations\",\r\n    row_condition='col(pickup_zip)==10001',\r\n)\r\nbatch.validate(cond_expectation)\r\n```\r\n\r\n**Full stack trace of any error**\r\n\"exception_info\": {\r\n    \"('table.row_count', '6819aaaf24faa4118ff0b899d5019b79', ())\": {\r\n      \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 546, in _process_direct_and_bundled_metric_computation_configurations\\n    self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 1010, in resolve_metric_bundle\\n    selectable: sqlalchemy.Selectable = self.get_domain_records(domain_kwargs=domain_kwargs)\\n                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\\\", line 660, in get_domain_records\\n    raise GreatExpectationsError(  # noqa: TRY003\\ngreat_expectations.exceptions.exceptions.GreatExpectationsError: SqlAlchemyExecutionEngine only supports the great_expectations condition_parser.\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/validator/validation_graph.py\\\", line 276, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 279, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"/local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.11/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 550, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: SqlAlchemyExecutionEngine only supports the great_expectations condition_parser.\\n\",\r\n      \"exception_message\": \"SqlAlchemyExecutionEngine only supports the great_expectations condition_parser.\",\r\n      \"raised_exception\": true\r\n\r\n**Expected behavior**\r\nThat the Expectation is validated agains my batch.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.1.3\r\n - Data Source: Databricks SQL Warehouse\r\n - Cloud environment: Azure Databricks\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10545/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10545/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10539", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10539/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10539/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10539/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10539", "id": 2597476779, "node_id": "I_kwDOBiS_IM6a0lmr", "number": 10539, "title": "Disabling GE_USAGE_STATS Doesn't Prevent Internet Connection Attempts in Databricks", "user": {"login": "MidnightRambo", "id": 80781758, "node_id": "MDQ6VXNlcjgwNzgxNzU4", "avatar_url": "https://avatars.githubusercontent.com/u/80781758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MidnightRambo", "html_url": "https://github.com/MidnightRambo", "followers_url": "https://api.github.com/users/MidnightRambo/followers", "following_url": "https://api.github.com/users/MidnightRambo/following{/other_user}", "gists_url": "https://api.github.com/users/MidnightRambo/gists{/gist_id}", "starred_url": "https://api.github.com/users/MidnightRambo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MidnightRambo/subscriptions", "organizations_url": "https://api.github.com/users/MidnightRambo/orgs", "repos_url": "https://api.github.com/users/MidnightRambo/repos", "events_url": "https://api.github.com/users/MidnightRambo/events{/privacy}", "received_events_url": "https://api.github.com/users/MidnightRambo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-10-18T13:06:21Z", "updated_at": "2024-10-22T15:27:27Z", "closed_at": "2024-10-21T21:21:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am experiencing an issue where setting the environment variable GE_USAGE_STATS to \"false\" does not prevent Great Expectations from attempting to connect to the internet. Specifically, the library is trying to reach posthog.greatexpectations.io to send logging and statistics information when i'm doing a values not null test.\r\n\r\n\r\n**Expected behavior**\r\nSetting os.environ[\"GE_USAGE_STATS\"] = \"false\" should completely disable any attempts to connect to external servers for usage statistics, especially when operating in isolated network environments.\r\n\r\n**Environment (please complete the following information):**\r\nIn my setup, I'm using Great Expectations within Databricks in a private network scenario. Hence, I do not have internet access. Despite this, I encounter numerous connection timeout attempts to posthog.greatexpectations.io.\r\nThese repeated connection attempts result in:\r\nUnnecessary computation overhead due to retries and timeouts.\r\nLog clutter with repeated timeout warnings\r\n\r\n- Great Expectations Version: 1.0.6\r\n- Platform: Databricks\r\n- Network: Private network without internet access\r\n\r\n**Additional context**\r\nPlease investigate and resolve this issue to ensure that setting GE_USAGE_STATS to \"false\" effectively disables any external connections, aligning with strict network access policies. I've seen that there was a similar issue mentioned before, but it seems like it isn't resolved yet. More info can be found here: \r\nhttps://github.com/great-expectations/great_expectations/issues/9966\r\n\r\nThank you!\r\n\r\n\r\n\r\n\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10539/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10539/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10538", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10538/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10538/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10538/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10538", "id": 2597446168, "node_id": "I_kwDOBiS_IM6a0eIY", "number": 10538, "title": "Problem with determining the data type, Pandas", "user": {"login": "Iriomo", "id": 124924412, "node_id": "U_kgDOB3Ix_A", "avatar_url": "https://avatars.githubusercontent.com/u/124924412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Iriomo", "html_url": "https://github.com/Iriomo", "followers_url": "https://api.github.com/users/Iriomo/followers", "following_url": "https://api.github.com/users/Iriomo/following{/other_user}", "gists_url": "https://api.github.com/users/Iriomo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Iriomo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Iriomo/subscriptions", "organizations_url": "https://api.github.com/users/Iriomo/orgs", "repos_url": "https://api.github.com/users/Iriomo/repos", "events_url": "https://api.github.com/users/Iriomo/events{/privacy}", "received_events_url": "https://api.github.com/users/Iriomo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-10-18T12:53:28Z", "updated_at": "2024-10-22T15:06:51Z", "closed_at": "2024-10-22T15:06:51Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n_There is a problem with determining the data type, when running jupiter notepad and the location of the csv file in the system._\r\n\r\n> !pip install great_expectations\r\n> \r\n> import great_expectations as gx\r\n> import pandas as pd\r\n> from great_expectations.core.batch import BatchRequest, RuntimeBatchRequest\r\n> import shutil\r\n> import os\r\n> \r\n> if os.path.exists(\"./context/gx\"):\r\n> shutil.rmtree(\"./context/gx\")\r\n> \r\n> context = gx.get_context(mode=\"file\", project_root_dir=\"./context\")\r\n> \r\n> print(type(context).name)\r\n> \r\n> source_folder = \"C:\\Users\\.....\\data\"\r\n> data_source_name = \"my_filesystem_data_source\"\r\n> data_source = context.data_sources.add_pandas(name=data_source_name)\r\n> \r\n> asset_name = \"World Population\"\r\n> path_to_data = \"C:\\Users\\....\\data\\world_population.csv\"\r\n> asset = data_source.add_csv_asset(asset_name, filepath_or_buffer=path_to_data)\r\n**> ValidationError: 1 validation error for _PandasDataAsset\r\n> type\r\n> field required (type=value_error.missing)**\r\n\r\n_I\u00b4m prescribing the type:_\r\n\r\n> asset_name = \"World Population\"\r\n> path_to_data = \"C:\\Users\\....\\GX\\data\\world_population.csv\"\r\n> asset = data_source.add_csv_asset(asset_name, filepath_or_buffer=path_to_data, type=\"csv\")\r\n\r\n_There is no mistake, let\u00b4s move on_\r\n_With kwargs:_\r\n\r\n> batch_definition_name = \"World Population 2022\"\r\n> batch_definition = asset.add_batch_definition(\r\n> name=batch_definition_name)\r\n> \r\n> batch_parameters = {\"reader_method\": \"read_csv\"}\r\n> batch = batch_definition.get_batch(batch_parameters=batch_parameters)\r\n> print(batch.head())\r\n**> BuildBatchRequestError: Bad input to build_batch_request: options is not currently supported for this DataAsset and must be None or {}.**\r\n\r\n_Without kwargs:_\r\n\r\n> batch_definition_name = \"World Population 2022\"\r\n> batch_definition = asset.add_batch_definition(\r\n> name=batch_definition_name)\r\n> \r\n> batch = batch_definition.get_batch()\r\n> print(batch.head())\r\n**> NotImplementedError: One needs to explicitly provide \"reader_method\" for Pandas DataAsset extensions as temporary work-around, until \"type\" naming convention and method for obtaining 'reader_method' from it are established.**\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows 10\r\n - Great Expectations Version: 1.1.3\r\n - Data Source: Pandas\r\n\r\n**Additional context**\r\n_In this form, everything works fine on Windows 11._\r\n\r\n> source_folder = \"C:\\\\Users\\\\...\\\\GX\\\\data\"\r\n> data_source_name = \"my_filesystem_data_source\"\r\n> data_source = context.data_sources.add_pandas(name=data_source_name)\r\n> \r\n> asset_name = \"World Population\"\r\n> path_to_data = \"C:\\\\Users\\\\...\\\\world_population.csv\"\r\n> asset = data_source.add_csv_asset(asset_name, filepath_or_buffer=path_to_data)\r\n> \r\n> batch_definition_name = \"World Population 2022\"\r\n> batch_definition = asset.add_batch_definition(\r\n>     name=batch_definition_name)\r\n> \r\n> batch = batch_definition.get_batch()\r\n> print(batch.head())\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10538/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10538/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10515", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10515/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10515/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10515/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10515", "id": 2582109571, "node_id": "I_kwDOBiS_IM6Z592D", "number": 10515, "title": "GX Issues Board README", "user": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-10-11T20:06:16Z", "updated_at": "2024-10-11T20:10:21Z", "closed_at": "2024-10-11T20:10:21Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "The [GX issues board](https://github.com/orgs/great-expectations/projects/2) is a GitHub Project that we created in order to create transparency around which GX GitHub issues are GX-supported, and which are community-supported, as well as to serve as a space for GX engineers to  track their progress in the open.\r\n\r\n# Types of issues\r\nFor any issues that comes in, they will fall under one of the following types of issues:\r\n\r\n- Community-supported\r\n- GX-supported\r\n- Not-supported\r\n\r\nWhat an issue is labeled will align with our [integration and support policy](https://docs.greatexpectations.io/docs/1.0-prerelease/application_integration_support/), which outlines what is GX-supported, community-supported, and not supported.\r\n\r\n## GX-supported issues\r\nIf an issue is GX-supported, this means it is related to a part of the code-base that is tested and actively maintained with new GX Core or GX Cloud releases. The steps we will take for these issues are as follows: \r\n\r\nWe will work to reproduce the issue. This may involve us requesting additional information from the person who submitted the issue.\r\nIf the issue can be reproduced on our end, it will be prioritized by engineering.\r\n\r\nYou can find GX-supported issues on the [Issues by Status tab of the GX Issues board](https://github.com/orgs/great-expectations/projects/2/views/6); the [Reported Bugs tab](https://github.com/orgs/great-expectations/projects/2/views/8) shows an additional view with just bugs. Any issues that do not have the community-supported or not-supported label can be assumed to be GX-supported.\r\n\r\n## Community-supported issues\r\nIf an issue is labeled as community-supported, it is related to a part of the code-base that is not tested and actively maintained with new GX Core or GX Cloud releases, and it is up to the community to ensure ongoing maintenance. \r\n\r\nYou can find community-supported issues on the [community-supported tab of the GX issues board](https://github.com/orgs/great-expectations/projects/2/views/1). \r\nProcess for contributing\r\nIf there is an issue that you\u2019re planning to tackle, simply comment on an issue that you\u2019re starting to work on a fix. \r\n\r\nYou can also optionally post in the #contributing channel in the GX slack that you\u2019re taking on that issue, especially if you\u2019re interested in teaming up with others who may be thinking about the same issue.\r\n\r\n## Not-supported\r\nIf an issue is labeled as not-supported, it is something that we at GX will not be maintaining, and we will not support PRs or contributions from the community on the topic. See our [integration and support policy](https://docs.greatexpectations.io/docs/1.0-prerelease/application_integration_support/) for details on what is and is not supported.\r\n\r\n### 0.x issues\r\nMoving forward, we will focus our resources on supporting and improving version 1.0 and beyond. If you find that an issue you previously reported still exists in version 1.0, we encourage you to resubmit it against the new version. \r\nFor help migrating to GX Core, check out the [GX V0 to V1 Migration Guide](https://docs.greatexpectations.io/docs/reference/learn/migration_guide/?utm_campaign=General%20Community%20Promotion&utm_source=GitHub&utm_medium=post&utm_content=migration-guide).\r\n\r\n# Submitting an issue\r\n[Submit issues to the Great Expectations project here](https://github.com/great-expectations/great_expectations/issues).\r\n\r\nWe understand that when you encounter an issue while coding, you want quick and efficient resolution.\r\n\r\nTo help us help you better, we request that you include the following information in your questions:\r\n\r\n1. **Environment**: Please let us know the environment in which you are working in.\r\n  \r\n    - Operating system:\r\n    - Version numbers:\r\n    - Programming language:\r\n\r\n2. **Problem Statement:**\r\n\r\n    - I was trying to do the following:\r\n    - Instead, this is happening:\r\n\r\n3. **Reproducing the issue:** Details necessary to enable us to reproduce the issue and provide a quick resolution. E.g.: What commands or code did you run and/or what actions did you take that led to the issue?\r\nSteps to reproduce the behavior could look something like the following:\r\n\r\n    - I ran this command or piece of code \u2018\u2026\u2019\r\n    - OR I clicked on \u2018\u2026\u2019 and scrolled down to '\u2026\u2019\r\n    - I now see this error or stack trace \u2018\u2026\u2019\r\n\r\n4. **Additional information:** Provide us with any other additional information that could be useful in solving your issue.\r\n\r\nBy providing us with this information, you help us provide you with a quicker and more efficient resolution. We understand that time is of the essence when it comes to coding, and we want to ensure that we can resolve your issue as quickly as possible.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10515/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10515/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10499", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10499/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10499/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10499/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10499", "id": 2577413344, "node_id": "I_kwDOBiS_IM6ZoDTg", "number": 10499, "title": "Failing `test_connection` in `TableAsset.test_connection` for uppercase schema name defined in SQL Server / mssql", "user": {"login": "amirulmenjeni", "id": 10721152, "node_id": "MDQ6VXNlcjEwNzIxMTUy", "avatar_url": "https://avatars.githubusercontent.com/u/10721152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amirulmenjeni", "html_url": "https://github.com/amirulmenjeni", "followers_url": "https://api.github.com/users/amirulmenjeni/followers", "following_url": "https://api.github.com/users/amirulmenjeni/following{/other_user}", "gists_url": "https://api.github.com/users/amirulmenjeni/gists{/gist_id}", "starred_url": "https://api.github.com/users/amirulmenjeni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amirulmenjeni/subscriptions", "organizations_url": "https://api.github.com/users/amirulmenjeni/orgs", "repos_url": "https://api.github.com/users/amirulmenjeni/repos", "events_url": "https://api.github.com/users/amirulmenjeni/events{/privacy}", "received_events_url": "https://api.github.com/users/amirulmenjeni/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}, {"id": 7364350044, "node_id": "LA_kwDOBiS_IM8AAAABtvMQXA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community-supported", "name": "community-supported", "color": "fbca04", "default": false, "description": "supported by the GX community"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2024-10-10T03:01:44Z", "updated_at": "2024-10-24T20:38:23Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Using GX Core version: 1.1.1\r\n\r\nCurrently I'm not able to create a table data asset from the `SQLDatasource`'s `add_table_asset` method when the schema of the table I'm trying to connect to is defined in the database in the uppercase form (e.g., `MY_SCHEMA`):\r\n\r\n```python\r\ndatasource.add_table_asset(\r\n    name=\"asset-name\", \r\n    schema_name=\"S_EC\",\r\n    table_name=\"my_table\",\r\n)\r\n```\r\nInstead I got the following error:\r\n\r\n```\r\ngreat_expectations.datasource.fluent.interfaces.TestConnectionError: Attempt to connect to table: \"my_schema.my_table\" failed because the schema \"my_schema\" does not exist\r\n```\r\n\r\nLooking at the lines below it seems that the `self.schema_name not in inspector.get_schema_names()` check doesn't do case insensitive comparison.\r\n\r\nhttps://github.com/great-expectations/great_expectations/blob/f9aa879a3d3ef0750bd72a24a003ea5631a6f29e/great_expectations/datasource/fluent/sql_datasource.py#L908-L912\r\n\r\nAttempting to bracket the schema with quote characters (e.g., `'MY_SCHEMA'`) does persist the uppercase, but the test fails as well, complaining:\r\n\r\n```\r\ngreat_expectations.datasource.fluent.interfaces.TestConnectionError: Attempt to connect to table: \"\"MY_SCHEMA\".my_table\" failed because the schema \"\"MY_SCHEMA\"\" does not exist\r\n```\r\n\r\nI can still create query asset with `add_query_asset` method, though. ", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10499/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10499/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10484", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10484/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10484/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10484/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10484", "id": 2573157542, "node_id": "I_kwDOBiS_IM6ZX0Sm", "number": 10484, "title": "[BUG] adding a validation definition creates a file without a file extension", "user": {"login": "JBarti", "id": 32981619, "node_id": "MDQ6VXNlcjMyOTgxNjE5", "avatar_url": "https://avatars.githubusercontent.com/u/32981619?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JBarti", "html_url": "https://github.com/JBarti", "followers_url": "https://api.github.com/users/JBarti/followers", "following_url": "https://api.github.com/users/JBarti/following{/other_user}", "gists_url": "https://api.github.com/users/JBarti/gists{/gist_id}", "starred_url": "https://api.github.com/users/JBarti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JBarti/subscriptions", "organizations_url": "https://api.github.com/users/JBarti/orgs", "repos_url": "https://api.github.com/users/JBarti/repos", "events_url": "https://api.github.com/users/JBarti/events{/privacy}", "received_events_url": "https://api.github.com/users/JBarti/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-10-08T13:06:05Z", "updated_at": "2024-10-21T17:25:30Z", "closed_at": "2024-10-21T17:25:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen creating a new validation definition in a local filesystem data context, the file created in the context directory ends up without a file extension (.json).\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**great_expectations.yaml:**\r\n```yaml\r\nconfig_version: 4.0\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: validation_definitions/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidation_results_store_name: validation_results_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanalytics_enabled: true\r\nfluent_datasources:\r\n  bq_podravka_facebook:\r\n    type: sql\r\n    id: 009655e5-5011-44b4-8a06-b78f3a1227c0\r\n    assets:\r\n      basic_campaigns:\r\n        type: table\r\n        id: d85b4659-6de8-41eb-85f8-0f5384e79b1e\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          monthly:\r\n            id: d48fdab0-0e5a-4a7f-a0c3-2262b616d00e\r\n            partitioner:\r\n              column_name: date_start\r\n              sort_ascending: true\r\n              method_name: partition_on_year_and_month\r\n        table_name: basic_campaigns\r\n        schema_name:\r\n    connection_string: ${PODRAVKA_FB_DATASET_CONNECTION_ID}\r\ndata_context_id: 9ce6b16c-ccc7-4cb9-85f1-0524be5e66c1\r\n\r\n```\r\n\r\n**code:**\r\n```python\r\nimport great_expectations as gx\r\nfrom great_expectations.core.partitioners import ColumnPartitionerMonthly\r\nfrom great_expectations.core.validation_definition import BatchDefinition\r\nfrom great_expectations.datasource.fluent.sql_datasource import TableAsset\r\nfrom great_expectations.exceptions import DataContextError\r\n\r\nimport logging\r\n\r\nlogging.getLogger().setLevel(logging.DEBUG)\r\n\r\ncontext = gx.get_context(\r\n    mode=\"file\",\r\n    project_root_dir=\"./context\"\r\n)\r\n\r\n# Add a new data source\r\ndatasource_name = \"bq_podravka_facebook\"\r\ndata_source = context.data_sources.add_or_update_sql(\r\n    name=datasource_name,\r\n    connection_string=\"bigquery://project-id/dataset-id\"\r\n)\r\n\r\n# Create a Table Asset\r\nasset_name = \"basic_campaigns\"\r\ndatabase_table_name = \"basic_campaigns\"\r\ntable_data_asset: TableAsset\r\ntable_data_asset = data_source.add_table_asset(\r\n    name=asset_name,\r\n    table_name=database_table_name, \r\n)\r\n\r\n# Monthly batch definition\r\ndate_column = \"date_start\"\r\nmonthly_batch_definition = table_data_asset.add_batch_definition_monthly(\r\n    name=\"monthly\", column=date_column\r\n)\r\nmonthly_batch_definition: BatchDefinition[ColumnPartitionerMonthly]\r\n\r\n# Create a suite\r\nsuite_name = \"uniqueness\"\r\nsuite = gx.ExpectationSuite(name=suite_name)\r\n# Avoid adding the same suite twice\r\ntry:\r\n    suite = context.suites.get(suite_name)\r\nexcept DataContextError:\r\n    suite = context.suites.add(suite)\r\n\r\n\r\n# Define expectations for a suite\r\nexpectations = [\r\n    gx.expectations.ExpectCompoundColumnsToBeUnique(\r\n        column_list=[\"date_start\", \"campaign_id\", \"account_id\"], # Primary key\r\n    )\r\n]\r\n# Clear the expectations before adding them again\r\nsuite.expectations.clear()\r\nfor expectation in expectations:\r\n    suite.expectations.append(expectation)\r\nsuite.save()\r\n\r\n# Create a Validation Definition\r\nvalidation_name = \"basic_campaigns_monthly_uniqueness\"\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=monthly_batch_definition,\r\n    suite=suite,\r\n    name=validation_name,\r\n)\r\ncontext.validation_definitions.add(validation_definition)\r\n```\r\n\r\n**Expected behavior**\r\nThe creation of a validation should result in a file named:\r\n - `context/gx/validation_definitions/basic_campaigns_monthly_uniqueness.json` \r\n\r\nBut the suffix is not added which results in a file named: \r\n - `context/gx/validation_definitions/basic_campaigns_monthly_uniqueness`\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 1.0.3\r\n - Data Source: BigQuery\r\n - Cloud environment: /\r\n", "closed_by": {"login": "cdkini", "id": 49923762, "node_id": "MDQ6VXNlcjQ5OTIzNzYy", "avatar_url": "https://avatars.githubusercontent.com/u/49923762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdkini", "html_url": "https://github.com/cdkini", "followers_url": "https://api.github.com/users/cdkini/followers", "following_url": "https://api.github.com/users/cdkini/following{/other_user}", "gists_url": "https://api.github.com/users/cdkini/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdkini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdkini/subscriptions", "organizations_url": "https://api.github.com/users/cdkini/orgs", "repos_url": "https://api.github.com/users/cdkini/repos", "events_url": "https://api.github.com/users/cdkini/events{/privacy}", "received_events_url": "https://api.github.com/users/cdkini/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10484/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10484/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10482", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10482/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10482/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10482/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10482", "id": 2571928032, "node_id": "I_kwDOBiS_IM6ZTIHg", "number": 10482, "title": "row_condition with SQLAlchemy not working as documented", "user": {"login": "thomasardha25", "id": 75558449, "node_id": "MDQ6VXNlcjc1NTU4NDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/75558449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasardha25", "html_url": "https://github.com/thomasardha25", "followers_url": "https://api.github.com/users/thomasardha25/followers", "following_url": "https://api.github.com/users/thomasardha25/following{/other_user}", "gists_url": "https://api.github.com/users/thomasardha25/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasardha25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasardha25/subscriptions", "organizations_url": "https://api.github.com/users/thomasardha25/orgs", "repos_url": "https://api.github.com/users/thomasardha25/repos", "events_url": "https://api.github.com/users/thomasardha25/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasardha25/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-10-08T03:01:06Z", "updated_at": "2024-10-29T02:38:15Z", "closed_at": "2024-10-15T03:25:41Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nso i have the same issue as @nenkie76 which is recommended by @molliemarie to use great expectations core (GX 1.0). but when i try it using the latest version, the issue still appears:\r\n\r\n```python\r\nvalidator.expect_column_values_to_not_be_null(\r\n    column='tax_no', \r\n    condition_parser='great_expectations__experimental__', \r\n    row_condition='col(\"nation_cd\") == \"ID\"'\r\n)\r\n``` \r\n\r\nfails with the error: unable to parse condition.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.1.0\r\n - Data Source: Postgresql (SQLAlchemy)", "closed_by": {"login": "thomasardha25", "id": 75558449, "node_id": "MDQ6VXNlcjc1NTU4NDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/75558449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomasardha25", "html_url": "https://github.com/thomasardha25", "followers_url": "https://api.github.com/users/thomasardha25/followers", "following_url": "https://api.github.com/users/thomasardha25/following{/other_user}", "gists_url": "https://api.github.com/users/thomasardha25/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomasardha25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomasardha25/subscriptions", "organizations_url": "https://api.github.com/users/thomasardha25/orgs", "repos_url": "https://api.github.com/users/thomasardha25/repos", "events_url": "https://api.github.com/users/thomasardha25/events{/privacy}", "received_events_url": "https://api.github.com/users/thomasardha25/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10482/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10482/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10475", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10475/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10475/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10475/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10475", "id": 2569416090, "node_id": "I_kwDOBiS_IM6ZJi2a", "number": 10475, "title": "No red or green status markers in data docs in Great Expectations", "user": {"login": "unkind58", "id": 56277583, "node_id": "MDQ6VXNlcjU2Mjc3NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/56277583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/unkind58", "html_url": "https://github.com/unkind58", "followers_url": "https://api.github.com/users/unkind58/followers", "following_url": "https://api.github.com/users/unkind58/following{/other_user}", "gists_url": "https://api.github.com/users/unkind58/gists{/gist_id}", "starred_url": "https://api.github.com/users/unkind58/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/unkind58/subscriptions", "organizations_url": "https://api.github.com/users/unkind58/orgs", "repos_url": "https://api.github.com/users/unkind58/repos", "events_url": "https://api.github.com/users/unkind58/events{/privacy}", "received_events_url": "https://api.github.com/users/unkind58/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2024-10-07T06:05:50Z", "updated_at": "2024-10-29T06:35:15Z", "closed_at": "2024-10-11T18:43:57Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAfter running any of my created checkpoints - I could not see `red` or `green` status markers in data docs in Great Expectations:\r\n![image](https://github.com/user-attachments/assets/4d8c3ae0-d9cb-44b8-b8e6-1f05ddf76db2)\r\n\r\nThe same appears for my collegues and the same appears for older (run, for example 2-5 months ago) data-docs results.\r\n\r\n\r\n**To Reproduce**\r\nRun any Great Expectations checkpoint and build data-docs. \r\n```\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name=f\"{layer}_{datasource}_checkpoint\",\r\n    run_name_template=f\"%Y%m%d-%H%M%S-{layer}-{datasource}\",\r\n    validations=[\r\n        {\r\n            \"batch_request\": b_request, # request variable title\r\n            \"expectation_suite_name\": e_suite, # suite variable title\r\n        },\r\n    ],\r\n    action_list=[\r\n        {\r\n            \"name\": \"store_validation_result\",\r\n            \"action\": {\"class_name\": \"StoreValidationResultAction\"},\r\n        },\r\n        {\"name\": \"update_data_docs\", \"action\": {\"class_name\": \"UpdateDataDocsAction\"}},\r\n    ],\r\n)\r\ncontext.add_or_update_checkpoint(checkpoint=checkpoint)\r\ncheckpoint_result = checkpoint.run()\r\ncontext.build_data_docs()\r\ncontext.open_data_docs()\r\n```\r\n\r\n**Expected behavior**\r\nIn data-docs rendered _html_, in the STATUS cells you can see `green` (if success: True) and `red` (if success: False).\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: tried on both 0.18.19 & 0.18.8\r\n - Data Source: Spark data frames from delta tables and csv files\r\n - Cloud environment: delta tables and csv files are being loaded from AWS S3", "closed_by": {"login": "tyler-hoffman", "id": 5400974, "node_id": "MDQ6VXNlcjU0MDA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5400974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyler-hoffman", "html_url": "https://github.com/tyler-hoffman", "followers_url": "https://api.github.com/users/tyler-hoffman/followers", "following_url": "https://api.github.com/users/tyler-hoffman/following{/other_user}", "gists_url": "https://api.github.com/users/tyler-hoffman/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyler-hoffman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyler-hoffman/subscriptions", "organizations_url": "https://api.github.com/users/tyler-hoffman/orgs", "repos_url": "https://api.github.com/users/tyler-hoffman/repos", "events_url": "https://api.github.com/users/tyler-hoffman/events{/privacy}", "received_events_url": "https://api.github.com/users/tyler-hoffman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10475/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10475/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10473", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10473/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10473/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10473/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10473", "id": 2566725165, "node_id": "I_kwDOBiS_IM6Y_R4t", "number": 10473, "title": "[BUG] Checkpoint json files are being saved with the values substituted, not the placeholders", "user": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-10-04T16:17:11Z", "updated_at": "2024-10-15T18:12:19Z", "closed_at": "2024-10-15T18:12:19Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAfter the correction implemented by https://github.com/great-expectations/great_expectations/pull/10443, the checkpoint json files are being saved with the values substituted, not the placeholders. As this file is intended to be committed alongside the other gx config files, I believe this is not an intended behavior.\r\n\r\n**To Reproduce**\r\n\r\n        actions = [\r\n            # This Action sends a Slack Notification if an Expectation fails.\r\n            gx.checkpoint.SlackNotificationAction(\r\n                name=\"send_slack_notification_on_failed_expectations\",\r\n                slack_token=\"${validation_notification_slack_token}\",\r\n                slack_channel=\"${validation_notification_slack_channel}\",\r\n                notify_on=\"failure\",\r\n                show_failed_expectations=True,\r\n            ),\r\n            gx.checkpoint.actions.UpdateDataDocsAction(\r\n                name=\"update_my_site\", site_names=[site_name]\r\n            )\r\n        ]\r\n        context.checkpoints.add(\r\n            gx.Checkpoint(\r\n                name=checkpoint_name,\r\n                validation_definitions=[\r\n                    full_table_validator_definition,\r\n                    daily_validator_definition,\r\n                    card_token_daily_validator_definition,\r\n                ],\r\n                actions=actions,\r\n            )\r\n        )\r\nThen execute a checkpoint.run()\r\n\r\n**Expected behavior**\r\nI think that the expected behavior should just be like the `connection_string` from the *add_or_update_postgres* method, where the placeholders are saved in the `great_expectations.yml` file.\r\n\r\n**Environment (please complete the following information):**\r\nOperating System: Ubuntu 22.04\r\nGreat Expectations Version: 1.1.0\r\nData Source: Redshift\r\nCloud environment: AWS", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10473/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10473/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10455", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10455/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10455/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10455/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10455", "id": 2560169287, "node_id": "I_kwDOBiS_IM6YmRVH", "number": 10455, "title": "Subclassed checks with an aliased Pydantic Field cannot be validated.", "user": {"login": "vovavili", "id": 64227274, "node_id": "MDQ6VXNlcjY0MjI3Mjc0", "avatar_url": "https://avatars.githubusercontent.com/u/64227274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vovavili", "html_url": "https://github.com/vovavili", "followers_url": "https://api.github.com/users/vovavili/followers", "following_url": "https://api.github.com/users/vovavili/following{/other_user}", "gists_url": "https://api.github.com/users/vovavili/gists{/gist_id}", "starred_url": "https://api.github.com/users/vovavili/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vovavili/subscriptions", "organizations_url": "https://api.github.com/users/vovavili/orgs", "repos_url": "https://api.github.com/users/vovavili/repos", "events_url": "https://api.github.com/users/vovavili/events{/privacy}", "received_events_url": "https://api.github.com/users/vovavili/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-10-01T20:38:25Z", "updated_at": "2024-10-01T22:53:18Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIf I try to subclass a check to define a certain customizable behavior, everything goes well so long as I keep the original name for the input variable. However, if I add an alias for a `Field`, an expectation can be instantiated, but it cannot be validated.\r\n\r\n**To Reproduce**\r\nCode:\r\n```\r\nimport great_expectations as gx\r\n\r\nfrom pydantic import v1 as pydantic_v1\r\nfrom pyspark.sql import SparkSession\r\nfrom pyspark.sql import types as st\r\nfrom great_expectations import expectations as gxe\r\nfrom great_expectations.core.suite_parameters import SuiteParameterDict\r\n\r\n\r\nclass ExpectColumnValuesToStartWith(gxe.ExpectColumnValuesToMatchRegex):\r\n    \"\"\"Pre-fill a regex expression expectation with a caret, and escape all special characters.\"\"\"\r\n\r\n    regex: str | SuiteParameterDict = pydantic_v1.Field(\r\n        default=\"(?s).*\",\r\n        alias=\"startswith\",\r\n        description=\"Expect rows in a given column to start with some particular value.\",\r\n    )\r\n\r\n    @pydantic_v1.validator(\"regex\", pre=True)\r\n    def validate_regex(cls, v: str):\r\n        return (\r\n            \"^\"\r\n            + \"\".join(\r\n                char if char not in set(r\"[@_!#$%^&*()<>?/\\|}{~:]\") else \"\\\\\" + char\r\n                for char in v\r\n            )\r\n            + \".*\"\r\n        )\r\n\r\n    class Config(gxe.ExpectColumnValuesToMatchRegex.Config):\r\n        populate_by_name = True\r\n\r\n\r\ndf = (\r\n    SparkSession.builder.appName(\"spark\")\r\n    .getOrCreate()\r\n    .createDataFrame(\r\n        [(\"aaa\", \"bcc\"), (\"abb\", \"bdd\"), (\"acc\", \"abc\")],\r\n        st.StructType(\r\n            [\r\n                st.StructField(\"col1\", st.StringType(), True),\r\n                st.StructField(\"col2\", st.StringType(), True),\r\n            ]\r\n        ),\r\n    )\r\n)\r\n\r\n\r\n(\r\n    gx.get_context()\r\n    .data_sources.add_spark(name=\"spark_source\")\r\n    .add_dataframe_asset(name=\"dataframe_asset\")\r\n    .add_batch_definition_whole_dataframe(name=\"whole_dataframe\")\r\n    .get_batch(batch_parameters={\"dataframe\": df})\r\n    .validate(ExpectColumnValuesToStartWith(column=\"col2\", startwith=\"a\"))\r\n)\r\n\r\n```\r\n\r\nStack trace:\r\n\r\n```\r\nValidationError                           Traceback (most recent call last)\r\nCell In[25], line 16\r\n     13 exp = ExpectColumnValuesToStartWith(column=\"col2\", startwith=\"^a.*\")\r\n     14 print(\"Expectation instantiated\")\r\n---> 16 batch_definition.get_batch(batch_parameters={\"dataframe\": df}).validate(exp)\r\n     17 print(\"DF validated\")\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/datasource/fluent/interfaces.py:1146, in Batch.validate(self, expect, result_format)\r\n   1143 from great_expectations.expectations.expectation import Expectation\r\n   1145 if isinstance(expect, Expectation):\r\n-> 1146     return self._validate_expectation(expect, result_format=result_format)\r\n   1147 elif isinstance(expect, ExpectationSuite):\r\n   1148     return self._validate_expectation_suite(expect, result_format=result_format)\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/datasource/fluent/interfaces.py:1163, in Batch._validate_expectation(self, expect, result_format)\r\n   1156 def _validate_expectation(\r\n   1157     self,\r\n   1158     expect: Expectation,\r\n   1159     result_format: ResultFormatUnion,\r\n   1160 ) -> ExpectationValidationResult:\r\n   1161     return self._create_validator(\r\n   1162         result_format=result_format,\r\n-> 1163     ).validate_expectation(expect)\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/validator/v1_validator.py:55, in Validator.validate_expectation(self, expectation, expectation_parameters)\r\n     49 def validate_expectation(\r\n     50     self,\r\n     51     expectation: Expectation,\r\n     52     expectation_parameters: Optional[dict[str, Any]] = None,\r\n     53 ) -> ExpectationValidationResult:\r\n     54     \"\"\"Run a single expectation against the batch definition\"\"\"\r\n---> 55     results = self._validate_expectation_configs([expectation.configuration])\r\n     57     assert len(results) == 1\r\n     58     return results[0]\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/validator/v1_validator.py:128, in Validator._validate_expectation_configs(self, expectation_configs, expectation_parameters)\r\n    125 else:\r\n    126     runtime_configuration = {\"result_format\": self.result_format}\r\n--> 128 results = self._wrapped_validator.graph_validate(\r\n    129     configurations=processed_expectation_configs,\r\n    130     runtime_configuration=runtime_configuration,\r\n    131 )\r\n    133 if self._include_rendered_content:\r\n    134     for result in results:\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:602, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n    594 evrs: List[ExpectationValidationResult]\r\n    596 processed_configurations: List[ExpectationConfiguration] = []\r\n    598 (\r\n    599     expectation_validation_graphs,\r\n    600     evrs,\r\n    601     processed_configurations,\r\n--> 602 ) = self._generate_metric_dependency_subgraphs_for_each_expectation_configuration(\r\n    603     expectation_configurations=configurations,\r\n    604     processed_configurations=processed_configurations,\r\n    605     catch_exceptions=catch_exceptions,\r\n    606     runtime_configuration=runtime_configuration,\r\n    607 )\r\n    609 graph: ValidationGraph = self._generate_suite_level_graph_from_expectation_level_sub_graphs(\r\n    610     expectation_validation_graphs=expectation_validation_graphs\r\n    611 )\r\n    613 resolved_metrics: _MetricsDict\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:703, in Validator._generate_metric_dependency_subgraphs_for_each_expectation_configuration(self, expectation_configurations, processed_configurations, catch_exceptions, runtime_configuration)\r\n    700 if self.active_batch_id:\r\n    701     evaluated_config.kwargs.update({\"batch_id\": self.active_batch_id})\r\n--> 703 expectation = evaluated_config.to_domain_obj()\r\n    704 validation_dependencies: ValidationDependencies = (\r\n    705     expectation.get_validation_dependencies(\r\n    706         execution_engine=self._execution_engine,\r\n    707         runtime_configuration=runtime_configuration,\r\n    708     )\r\n    709 )\r\n    711 try:\r\n\r\nFile ~/cluster-env/trident_env/lib/python3.10/site-packages/great_expectations/expectations/expectation_configuration.py:459, in ExpectationConfiguration.to_domain_obj(self)\r\n    457     kwargs.update({\"description\": self.description})\r\n    458 kwargs.update(self.kwargs)\r\n--> 459 return expectation_impl(**kwargs)\r\n\r\nFile /nfs4/pyenv-74aa3c6d-785e-495b-ba94-32a358134de2/lib/python3.10/site-packages/pydantic/v1/main.py:341, in BaseModel.__init__(__pydantic_self__, **data)\r\n    339 values, fields_set, validation_error = validate_model(__pydantic_self__.__class__, data)\r\n    340 if validation_error:\r\n--> 341     raise validation_error\r\n    342 try:\r\n    343     object_setattr(__pydantic_self__, '__dict__', values)\r\n\r\nValidationError: 1 validation error for ExpectColumnValuesToStartWith\r\nregex\r\n  extra fields not permitted (type=value_error.extra)\r\n```\r\n\r\nPlease note that this fails even if I set `extras=\"allowed\"` `Config` class attribute.\r\n\r\n\r\n**Expected behavior**\r\nI expected this check to fail because of a bad row value, but instead, I got a ValidationError because Field alias are not accounted for in the `batch_definition.get_batch(...).validate` method. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 1.0.5\r\n - Data Source: Spark\r\n - Cloud environment: Databricks\r\n\r\n**Additional context**\r\nSee my discussion with Tyler Hoffman [here](https://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1727810902265259).\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10455/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10455/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10454", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10454/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10454/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10454/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10454", "id": 2559909526, "node_id": "I_kwDOBiS_IM6YlR6W", "number": 10454, "title": "SlackNotificationAction not rendering substitutions ", "user": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-10-01T18:20:41Z", "updated_at": "2024-10-01T18:37:24Z", "closed_at": "2024-10-01T18:37:24Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAccording to documentation: https://docs.greatexpectations.io/docs/core/trigger_actions_based_on_results/create_a_checkpoint_with_actions/?procedure=instructions it's possible to use substitution in slack_token and slack_channel. However, the substitutions are not being made, make me having to set the values directly in the function.\r\n\r\n**To Reproduce**\r\n```\r\n        actions = [\r\n            # This Action sends a Slack Notification if an Expectation fails.\r\n            gx.checkpoint.SlackNotificationAction(\r\n                name=\"send_slack_notification_on_failed_expectations\",\r\n                slack_token=\"${validation_notification_slack_token}\",\r\n                slack_channel=\"${validation_notification_slack_channel}\",\r\n                notify_on=\"failure\",\r\n                show_failed_expectations=True,\r\n            ),\r\n            gx.checkpoint.actions.UpdateDataDocsAction(\r\n                name=\"update_my_site\", site_names=[site_name]\r\n            )\r\n        ]\r\n        context.checkpoints.add(\r\n            gx.Checkpoint(\r\n                name=checkpoint_name,\r\n                validation_definitions=[\r\n                    full_table_validator_definition,\r\n                    daily_validator_definition,\r\n                    card_token_daily_validator_definition,\r\n                ],\r\n                actions=actions,\r\n            )\r\n        )\r\n```\r\nThen execute a `checkpoint.run()`\r\n\r\n**Expected behavior**\r\nPlaceholder\r\nThe variables slack_token and slack channel having their value replaced from the placeholder\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 22.04\r\n - Great Expectations Version: 1.0.5\r\n - Data Source: Redshift\r\n - Cloud environment: AWS\r\n\r\n**Additional context**\r\nI've tried both setting evironment variables and defining them in uncommitted/config_variables.yml", "closed_by": {"login": "leodrivera", "id": 23270912, "node_id": "MDQ6VXNlcjIzMjcwOTEy", "avatar_url": "https://avatars.githubusercontent.com/u/23270912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leodrivera", "html_url": "https://github.com/leodrivera", "followers_url": "https://api.github.com/users/leodrivera/followers", "following_url": "https://api.github.com/users/leodrivera/following{/other_user}", "gists_url": "https://api.github.com/users/leodrivera/gists{/gist_id}", "starred_url": "https://api.github.com/users/leodrivera/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leodrivera/subscriptions", "organizations_url": "https://api.github.com/users/leodrivera/orgs", "repos_url": "https://api.github.com/users/leodrivera/repos", "events_url": "https://api.github.com/users/leodrivera/events{/privacy}", "received_events_url": "https://api.github.com/users/leodrivera/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10454/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10454/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10445", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10445/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10445/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10445/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10445", "id": 2557269134, "node_id": "I_kwDOBiS_IM6YbNSO", "number": 10445, "title": "TupleGCSStoreBackend removing every validation definition, regardless key", "user": {"login": "mw-otto", "id": 139122600, "node_id": "U_kgDOCErXqA", "avatar_url": "https://avatars.githubusercontent.com/u/139122600?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mw-otto", "html_url": "https://github.com/mw-otto", "followers_url": "https://api.github.com/users/mw-otto/followers", "following_url": "https://api.github.com/users/mw-otto/following{/other_user}", "gists_url": "https://api.github.com/users/mw-otto/gists{/gist_id}", "starred_url": "https://api.github.com/users/mw-otto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mw-otto/subscriptions", "organizations_url": "https://api.github.com/users/mw-otto/orgs", "repos_url": "https://api.github.com/users/mw-otto/repos", "events_url": "https://api.github.com/users/mw-otto/events{/privacy}", "received_events_url": "https://api.github.com/users/mw-otto/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-09-30T17:29:42Z", "updated_at": "2024-12-12T18:17:23Z", "closed_at": "2024-10-21T23:07:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen deleting a validation definition from a store with TupleGCSStoreBackend backend it deletes every validation definition in the configured bucket.\r\n\r\n**To Reproduce**\r\nAdd multiple validation definition with GCS backend and try to delete one of them. All will be deleted in the GCP bucket.\r\n\r\n**Expected behavior**\r\nI expected only the key to be deleted. If I look into into the source code of remove_key for the class TupleGCSStoreBackend there is no filter on the key at all. It just deletes every object in the bucket.\r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: 1.0.5\r\n - Cloud environment: GCP\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10445/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10445/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10427", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10427/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10427/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10427/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10427", "id": 2537314104, "node_id": "I_kwDOBiS_IM6XPFc4", "number": 10427, "title": "row ids not displayed in data docs for Spark, SQLAlchemy if specifying unexpected_index_column_names in result_format", "user": {"login": "NathanJM", "id": 25042729, "node_id": "MDQ6VXNlcjI1MDQyNzI5", "avatar_url": "https://avatars.githubusercontent.com/u/25042729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanJM", "html_url": "https://github.com/NathanJM", "followers_url": "https://api.github.com/users/NathanJM/followers", "following_url": "https://api.github.com/users/NathanJM/following{/other_user}", "gists_url": "https://api.github.com/users/NathanJM/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanJM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanJM/subscriptions", "organizations_url": "https://api.github.com/users/NathanJM/orgs", "repos_url": "https://api.github.com/users/NathanJM/repos", "events_url": "https://api.github.com/users/NathanJM/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanJM/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-09-19T20:32:16Z", "updated_at": "2025-01-29T13:44:20Z", "closed_at": "2025-01-29T13:44:20Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIf running a validation using Spark or SQLAlchemy and specifying values for unexpected_index_column_names, the row ids are not displayed in the data docs.\r\n\r\n**To Reproduce**\r\nRun any expectation suite containing a rule, such as expect_column_value_lengths_to_be, and define a column list for unexpected_index_column_names within the result format object when invoking a checkpoint. This bug is present on all versions of GX. \r\n\r\n**Expected behavior**\r\nThe column name/values of the failed rows should be rendered\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows] All\r\n - Great Expectations Version: [e.g. 0.13.2] 0.18.x and 1.0.x, probably others\r\n - Data Source: [e.g. Pandas, Snowflake] SparkDF\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nthe root of the issue appears to be\r\ngreat_expectations/render/util.py: _convert_unexpected_indices_to_df(), line 422:\r\nset(first_unexpected_index.keys()).difference(set(unexpected_index_column_names))\r\n\r\nthis ALWAYS evaluates to the empty list, [], causing an exception to be raised later in that same function on line 442 when that empty list is passed to the .groupby() method, aborting the rendering of the failed row indices.", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10427/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10427/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10418", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10418/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10418/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10418/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10418", "id": 2533472270, "node_id": "I_kwDOBiS_IM6XAbgO", "number": 10418, "title": "checkpoint.run() changes the checkpoint config", "user": {"login": "HuhtaLauri", "id": 16299982, "node_id": "MDQ6VXNlcjE2Mjk5OTgy", "avatar_url": "https://avatars.githubusercontent.com/u/16299982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HuhtaLauri", "html_url": "https://github.com/HuhtaLauri", "followers_url": "https://api.github.com/users/HuhtaLauri/followers", "following_url": "https://api.github.com/users/HuhtaLauri/following{/other_user}", "gists_url": "https://api.github.com/users/HuhtaLauri/gists{/gist_id}", "starred_url": "https://api.github.com/users/HuhtaLauri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HuhtaLauri/subscriptions", "organizations_url": "https://api.github.com/users/HuhtaLauri/orgs", "repos_url": "https://api.github.com/users/HuhtaLauri/repos", "events_url": "https://api.github.com/users/HuhtaLauri/events{/privacy}", "received_events_url": "https://api.github.com/users/HuhtaLauri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-09-18T11:28:09Z", "updated_at": "2024-10-09T19:37:08Z", "closed_at": "2024-10-09T19:37:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen creating a checkpoint as instructed in the documentation:\r\n```\r\ncheckpoint = gx.Checkpoint(\r\n    name=checkpoint_name,\r\n    validation_definitions=validation_definitions,\r\n    actions=action_list,\r\n    result_format={\"result_format\": \"COMPLETE\"},\r\n)\r\n```\r\nAfter you run the checkpoint, it will change the configuration by adding two keys to the result_format options: include_unexpected_rows: false and partial_unexpected_count: 20.\r\n\r\nThis becomes a nuisance when you run a checkpoint twice in a row as an error is thrown:  \r\n```\r\n\"Checkpoint 'my-checkpoint' has changed since it has last been saved. Please update with `<CHECKPOINT_OBJECT>.save()`, then try your action again.\"\r\n```\r\n\r\nIf these two configs are required, could they be added in as defaults when creating the checkpoint in the first place?\r\n\r\n**To Reproduce**\r\n1. Create a checkpoint\r\n2. Run it twice\r\n3. The bugs are coming to town\r\n\r\n**Expected behavior**\r\nThe checkpoint runs twice without throwing an error about underlying configs changing\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.0.4\r\n - Data Source: Pandas (probably the same results with any source)\r\n - Cloud environment: local\r\n\r\n\r\n**Quick fix**\r\nUse the following code when creating a checkpoint\r\n```\r\ncheckpoint = gx.Checkpoint(\r\n    name=checkpoint_name,\r\n    validation_definitions=validation_definitions,\r\n    actions=action_list,\r\n    result_format = {\r\n            \"result_format\": \"COMPLETE\",\r\n            \"include_unexpected_rows\": False,\r\n            \"partial_unexpected_count\": 20,\r\n        }\r\n)\r\n```\r\n", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10418/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10418/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10410", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10410/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10410/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10410/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10410", "id": 2531473344, "node_id": "I_kwDOBiS_IM6W4zfA", "number": 10410, "title": "[BUG] Exception during validation of ExpectColumnValuesToNotBeNull", "user": {"login": "Utkarsh-Krishna", "id": 25566283, "node_id": "MDQ6VXNlcjI1NTY2Mjgz", "avatar_url": "https://avatars.githubusercontent.com/u/25566283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Utkarsh-Krishna", "html_url": "https://github.com/Utkarsh-Krishna", "followers_url": "https://api.github.com/users/Utkarsh-Krishna/followers", "following_url": "https://api.github.com/users/Utkarsh-Krishna/following{/other_user}", "gists_url": "https://api.github.com/users/Utkarsh-Krishna/gists{/gist_id}", "starred_url": "https://api.github.com/users/Utkarsh-Krishna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Utkarsh-Krishna/subscriptions", "organizations_url": "https://api.github.com/users/Utkarsh-Krishna/orgs", "repos_url": "https://api.github.com/users/Utkarsh-Krishna/repos", "events_url": "https://api.github.com/users/Utkarsh-Krishna/events{/privacy}", "received_events_url": "https://api.github.com/users/Utkarsh-Krishna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2024-09-17T15:31:41Z", "updated_at": "2024-11-19T06:52:19Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am using a spark/pandas dataframe. The dataframe has multiple columns and I am using one of them as a parameter for this expectation. If I use a column which has no null values then there is no exception and I get the expected result. Now when I pass some other column (also does not have any null value) or some columns which have nulls, I see exceptions.\r\n\r\n\r\n**To Reproduce**\r\n**Traceback:**\r\n\"exception_info\": {\r\n                        \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-6e39b63e-ade0-4e51-94c2-99c6cf2319a5/lib/python3.9/site-packages/great_expectations/validator/validator.py\\\", line 648, in graph_validate\\n    result = expectation.metrics_validate(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-6e39b63e-ade0-4e51-94c2-99c6cf2319a5/lib/python3.9/site-packages/great_expectations/expectations/expectation.py\\\", line 1081, in metrics_validate\\n    _validate_dependencies_against_available_metrics(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-6e39b63e-ade0-4e51-94c2-99c6cf2319a5/lib/python3.9/site-packages/great_expectations/expectations/expectation.py\\\", line 2773, in _validate_dependencies_against_available_metrics\\n    raise InvalidExpectationConfigurationError(  # noqa: TRY003\\ngreat_expectations.exceptions.exceptions.InvalidExpectationConfigurationError: Metric ('column_values.nonnull.unexpected_count', '657e384d8614677fff7d7be97ee019fe', ()) is not available for validation of configuration. Please check your configuration.\\n\",\r\n                        \"exception_message\": \"Metric ('column_values.nonnull.unexpected_count', '657e384d8614677fff7d7be97ee019fe', ()) is not available for validation of configuration. Please check your configuration.\",\r\n                        \"raised_exception\": true\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Databricks runtime 12.2 LTS\r\n - GX version 1.0.4\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10410/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10410/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10407", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10407/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10407/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10407/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10407", "id": 2529805719, "node_id": "I_kwDOBiS_IM6WycWX", "number": 10407, "title": "Does the Library support Greater Than, Less than type validations?", "user": {"login": "skondoji", "id": 72623465, "node_id": "MDQ6VXNlcjcyNjIzNDY1", "avatar_url": "https://avatars.githubusercontent.com/u/72623465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skondoji", "html_url": "https://github.com/skondoji", "followers_url": "https://api.github.com/users/skondoji/followers", "following_url": "https://api.github.com/users/skondoji/following{/other_user}", "gists_url": "https://api.github.com/users/skondoji/gists{/gist_id}", "starred_url": "https://api.github.com/users/skondoji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skondoji/subscriptions", "organizations_url": "https://api.github.com/users/skondoji/orgs", "repos_url": "https://api.github.com/users/skondoji/repos", "events_url": "https://api.github.com/users/skondoji/events{/privacy}", "received_events_url": "https://api.github.com/users/skondoji/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-09-17T01:53:46Z", "updated_at": "2024-09-27T01:42:19Z", "closed_at": "2024-09-17T16:50:08Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi\r\nI am Continuing my evaluation and surprisingly, I am not seeing a way to add Column validations like Greater than, Less than (column greater than 100 or column less than 20 ) etc.\r\nI am using 1.0.x version\r\nDoes the library also support validations of computed columns? I do see some examples like Column A greater than Column B, but not something like column C = Column A times Column B. \r\n\r\nThanks\r\nSri", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10407/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10398", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10398/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10398/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10398/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10398", "id": 2528298541, "node_id": "I_kwDOBiS_IM6WssYt", "number": 10398, "title": "[BUG-CheckpointRelatedResourcesFreshnessError] Checkpoint fails when \"send notification to Teams channel\" is present in the Action list ", "user": {"login": "Erua-chijioke", "id": 110530873, "node_id": "U_kgDOBpaROQ", "avatar_url": "https://avatars.githubusercontent.com/u/110530873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erua-chijioke", "html_url": "https://github.com/Erua-chijioke", "followers_url": "https://api.github.com/users/Erua-chijioke/followers", "following_url": "https://api.github.com/users/Erua-chijioke/following{/other_user}", "gists_url": "https://api.github.com/users/Erua-chijioke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erua-chijioke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erua-chijioke/subscriptions", "organizations_url": "https://api.github.com/users/Erua-chijioke/orgs", "repos_url": "https://api.github.com/users/Erua-chijioke/repos", "events_url": "https://api.github.com/users/Erua-chijioke/events{/privacy}", "received_events_url": "https://api.github.com/users/Erua-chijioke/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-09-16T12:14:15Z", "updated_at": "2024-10-09T20:57:03Z", "closed_at": "2024-10-09T19:37:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Describe the bug\r\nUsing Great expectations version 1.0.3, I created an action inside a checkpoint to send a notification to a teams channel through a webhook but when I run the checkpoint It displays this error below:\r\n\r\nNote: I tried running the checkpoint without this particular action in the action list and everything works just fine. I only get this error when MicrosoftTeamsNotificationAction is used in the action list.\r\n\r\nTo Reproduce:\r\n\r\n**create data source, asset, batch definition and expectation suite**\r\ndataframe = spark.sql(\"SELECT * FROM xxx\")\r\ncontext = gx.get_context(project_root_dir=\"/dbfs/xxx\")\r\n\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\ndata_source = context.data_sources.add_or_update_spark(name=data_source_name)\r\ndata_asset=data_source.add_dataframe_asset(name=data_asset_name)\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(batch_definition_name)\r\n\r\n\r\nsuite_name = \"my_expectation_suite\"\r\nsuite = gx.ExpectationSuite(name=suite_name)\r\nsuite = context.suites.add(suite)\r\n\r\ntable_row_count=dataframe.count()\r\ntable_row_count_expectationn = gxe.ExpectTableRowCountToEqual(value=table_row_count)\r\nsuite.add_expectation(table_row_count_expectationn)\r\n\r\n**Retrieve the expectation suite and create validation definition**\r\nexpectation_suite_name = \"my_expectation_suite\"\r\nexpectation_suite = context.suites.get(name=expectation_suite_name)\r\n\r\ndefinition_name = \"my_validation_definition\"\r\nvalidation_definition = gx.ValidationDefinition(\r\n        data=batch_definition, suite=expectation_suite, name=definition_name)\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\n validation_definitions = [\r\n    context.validation_definitions.get(\"my_validation_definition\")]\r\n\r\nvalidation_notification_microsoft_teams_webhook = \"xxx\"\r\n\r\n**create an action list**\r\naction_list = [\r\n    # This Action sends a Team Notification if an Expectation fails.\r\n    gx.checkpoint.MicrosoftTeamsNotificationAction(\r\n        name=\"send_microsoft_teams_notification_on_validation_result\",\r\n        teams_webhook= validation_notification_microsoft_teams_webhook,\r\n        notify_on= \"all\",\r\n    ),\r\n    # This Action updates the Data Docs static website with the Validation\r\n    #   Results after the Checkpoint is run.\r\n    gx.checkpoint.UpdateDataDocsAction(\r\n        name=\"update_all_data_docs\",\r\n    ),\r\n]\r\n\r\n**create a checkpoint**\r\ncheckpoint_name = \"my_checkpoint\"\r\n    checkpoint = gx.Checkpoint(\r\n        name=checkpoint_name,\r\n        validation_definitions=validation_definitions,\r\n        actions=action_list,\r\n        result_format={\"result_format\": \"COMPLETE\"},\r\n    )\r\n    context.checkpoints.add(checkpoint)\r\n\r\n\r\ndef get_validation_result(checkpoint: Checkpoint, batch_definition: str, batch_parameters: Dict):\r\n\r\n    run_id = gx.RunIdentifier(run_name=f\"validation_checkpoint_for_{batch_definition}\", run_time=datetime.now())\r\n\r\n    validation_result = checkpoint.run(batch_parameters, run_id=run_id)\r\n\r\n    if not validation_result.success:\r\n        print(\"Validation failed! Notification has been sent.\")\r\n    return validation_result\r\n\r\n\r\n\r\nbatch_parameters = {\"dataframe\": dataframe}\r\n\r\nvalidation_result = get_validation_result(checkpoint=checkpoint, batch_definition='xxx', batch_parameters=batch_parameters)\r\n\r\n**Below is the error message\r\n\r\nCheckpointRelatedResourcesFreshnessError: \r\n\tCheckpoint 'my_checkpoint' has changed since it has last been saved. Please update with `<CHECKPOINT_OBJECT>.save()`, then try your action again.\r\n---------------------------------------------------------------------------\r\nCheckpointRelatedResourcesFreshnessError  Traceback (most recent call last)\r\nFile <command-4197947471275293>, line 1\r\n----> 1 validation_result = get_validation_result(checkpoint=checkpoint, batch_definition='xxx', batch_parameters=batch_parameters)\r\n\r\nFile <command-4197947471275220>, line 5, in get_validation_result(checkpoint, batch_definition, batch_parameters, expectation_parameters)\r\n      1 def get_validation_result(checkpoint: Checkpoint, batch_definition: str, batch_parameters: Dict, expectation_parameters: Dict):\r\n      3     run_id = gx.RunIdentifier(run_name=f\"validation_checkpoint_for_{batch_definition}\", run_time=datetime.now())\r\n----> 5     validation_result = checkpoint.run(batch_parameters, run_id=run_id)\r\n      7     if not validation_result.success:\r\n      8         print(\"Validation failed! Notification has been sent.\")\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/checkpoint/checkpoint.py:182, in Checkpoint.run(self, batch_parameters, expectation_parameters, run_id)\r\n    180         self._add_to_store()\r\n    181     else:\r\n--> 182         diagnostics.raise_for_error()\r\n    184 run_id = run_id or RunIdentifier(run_time=dt.datetime.now(dt.timezone.utc))\r\n    185 run_results = self._run_validation_definitions(\r\n    186     batch_parameters=batch_parameters,\r\n \r\n    187     result_format=self.result_format,\r\n    188     run_id=run_id,\r\n    189 )\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/core/freshness_diagnostics.py:90, in _ParentFreshnessDiagnostics.raise_for_error(self)\r\n     87 @override\r\n     88 def raise_for_error(self) -> None:\r\n     89     if not self.success:\r\n---> 90         raise self.raise_for_error_class(errors=self.errors)\r\n\r\nCheckpointRelatedResourcesFreshnessError: \r\n\tCheckpoint 'my_checkpoint' has changed since it has last been saved. Please update with `<CHECKPOINT_OBJECT>.save()`, then try your action again.\r\n\r\n\r\nNote: I have also tried checkpoint.save()  but the error still persists\r\n\t\r\nExpected behavior\r\nThe checkpoint is expected to run and send a notification to a teams channel through the teams webhook provided.\r\n\r\nEnvironment:\r\n\r\nOperating System: Windows\r\nGreat Expectations Version: 1.0.3\r\nData Source: Spark Dataframe\r\nCloud environment: Databricks\t", "closed_by": {"login": "joshua-stauffer", "id": 66793731, "node_id": "MDQ6VXNlcjY2NzkzNzMx", "avatar_url": "https://avatars.githubusercontent.com/u/66793731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshua-stauffer", "html_url": "https://github.com/joshua-stauffer", "followers_url": "https://api.github.com/users/joshua-stauffer/followers", "following_url": "https://api.github.com/users/joshua-stauffer/following{/other_user}", "gists_url": "https://api.github.com/users/joshua-stauffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshua-stauffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshua-stauffer/subscriptions", "organizations_url": "https://api.github.com/users/joshua-stauffer/orgs", "repos_url": "https://api.github.com/users/joshua-stauffer/repos", "events_url": "https://api.github.com/users/joshua-stauffer/events{/privacy}", "received_events_url": "https://api.github.com/users/joshua-stauffer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10398/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10398/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10397", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10397/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10397/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10397/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10397", "id": 2527977725, "node_id": "I_kwDOBiS_IM6WreD9", "number": 10397, "title": "% string duplication prevents using PARSE_DATE() SQL function", "user": {"login": "strunov", "id": 107578051, "node_id": "U_kgDOBmmCww", "avatar_url": "https://avatars.githubusercontent.com/u/107578051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/strunov", "html_url": "https://github.com/strunov", "followers_url": "https://api.github.com/users/strunov/followers", "following_url": "https://api.github.com/users/strunov/following{/other_user}", "gists_url": "https://api.github.com/users/strunov/gists{/gist_id}", "starred_url": "https://api.github.com/users/strunov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/strunov/subscriptions", "organizations_url": "https://api.github.com/users/strunov/orgs", "repos_url": "https://api.github.com/users/strunov/repos", "events_url": "https://api.github.com/users/strunov/events{/privacy}", "received_events_url": "https://api.github.com/users/strunov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 7419419004, "node_id": "LA_kwDOBiS_IM8AAAABujtZfA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fix-in-prog", "name": "fix-in-prog", "color": "B64E55", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-09-16T09:44:03Z", "updated_at": "2025-01-16T15:20:42Z", "closed_at": "2025-01-16T15:20:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nIf I use a SQL data asset or a SQL unexpected rows expectation using % format \r\nthen the query gets changed - the % gets duplicated.\r\n\r\nEscaping the query with `\\%` produces `\\%%` query string.\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n* I'm using an ephemeral context\r\n* there is no runtime error\r\n* the error is at database engine level\r\n* query gets mangled\r\n\r\n**Expected behavior**\r\nRaw queries should be treated as is IMO\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: windows\r\n - Great Expectations Version: 1.0.2\r\n - Data Source: BigQuery\r\n - Cloud environment: local\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10397/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10397/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10395", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10395/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10395/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10395/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10395", "id": 2525835334, "node_id": "I_kwDOBiS_IM6WjTBG", "number": 10395, "title": "[BUG] Exception 'type' during validation of ExpectColumnValuesToBeOfType and ExpectColumnValuesToBeInTypeList", "user": {"login": "jarcpro97", "id": 69561420, "node_id": "MDQ6VXNlcjY5NTYxNDIw", "avatar_url": "https://avatars.githubusercontent.com/u/69561420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jarcpro97", "html_url": "https://github.com/jarcpro97", "followers_url": "https://api.github.com/users/jarcpro97/followers", "following_url": "https://api.github.com/users/jarcpro97/following{/other_user}", "gists_url": "https://api.github.com/users/jarcpro97/gists{/gist_id}", "starred_url": "https://api.github.com/users/jarcpro97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jarcpro97/subscriptions", "organizations_url": "https://api.github.com/users/jarcpro97/orgs", "repos_url": "https://api.github.com/users/jarcpro97/repos", "events_url": "https://api.github.com/users/jarcpro97/events{/privacy}", "received_events_url": "https://api.github.com/users/jarcpro97/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7550155696, "node_id": "LA_kwDOBiS_IM8AAAABwgY7sA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/non-fluent-datasource", "name": "non-fluent-datasource", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-09-13T23:05:36Z", "updated_at": "2024-10-22T15:58:21Z", "closed_at": "2024-10-02T22:26:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nCreating expectation for PostgreSQL and Athena I have the next Exception with ExpectColumnValuesToBeOfType and ExpectColumnValuesToBeInTypeList\r\n\r\n{\r\n  \"success\": false,\r\n  \"expectation_config\": {\r\n    \"type\": \"expect_column_values_to_be_of_type\",\r\n    \"kwargs\": {\r\n      \"column\": \"id\",\r\n      \"type_\": \"INTEGER\",\r\n      \"batch_id\": \"postgresql_datasource\"\r\n    },\r\n    \"meta\": {}\r\n  },\r\n  \"result\": {},\r\n  \"meta\": {},\r\n  \"exception_info\": {\r\n    \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"c:\\\\Users\\\\Administrator\\\\Documents\\\\datalake-ingest\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\validator\\\\validator.py\\\", line 648, in graph_validate\\n    result = expectation.metrics_validate(\\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\\n  File \\\"c:\\\\Users\\\\Administrator\\\\Documents\\\\datalake-ingest\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\expectation.py\\\", line 1093, in metrics_validate\\n    expectation_validation_result: Union[ExpectationValidationResult, dict] = self._validate(\\n                                                                              ^^^^^^^^^^^^^^^\\n  File \\\"c:\\\\Users\\\\Administrator\\\\Documents\\\\datalake-ingest\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\core\\\\expect_column_values_to_be_of_type.py\\\", line 595, in _validate\\n    actual_column_type = [\\n                         ^\\n  File \\\"c:\\\\Users\\\\Administrator\\\\Documents\\\\datalake-ingest\\\\venv\\\\Lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\core\\\\expect_column_values_to_be_of_type.py\\\", line 596, in <listcomp>\\n    type_dict[\\\"type\\\"]\\n    ~~~~~~~~~^^^^^^^^\\nKeyError: 'type'\\n\",\r\n    \"exception_message\": \"'type'\",\r\n    \"raised_exception\": true\r\n  }\r\n**To Reproduce**\r\n\r\norigin_data_source_name = \"postgresql_datasource\"\r\npostgresql_source = context.data_sources.add_or_update_postgres(origin_data_source_name, connection_string=connection_string)\r\n\r\nasset_name = \"postgresql_query_asset\"\r\nasset_query = f'SELECT * FROM {schema_name}.\"{table_name}\"'\r\nquery_data_asset = postgresql_source.add_query_asset(query=asset_query, name=asset_name)\r\n\r\nfull_table_batch_definition = query_data_asset.add_batch_definition_whole_table(\r\n    name=\"FULL_TABLE_ORIGIN\"\r\n)\r\nfull_table_batch = full_table_batch_definition.get_batch()\r\nfull_table_batch.head()\r\n\r\nworks well until here, but when I validate this expectations\r\n\r\nexpectation = gx.expectations.ExpectColumnValuesToBeOfType(column=\"id\", type_=\"INTEGER\")\r\nvalidation_results = full_table_batch.validate(expectation)\r\n\r\nI got the exception\r\n\r\n\r\n**Expected behavior**\r\nReturn success true or false\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Windows]\r\n - Great Expectations Version: [1.0.3]\r\n - Data Source: [PostgreSQL and Athena]\r\n- gx core\r\n-\r\n**Additional context**\r\nSQLAlchemy                2.0.34\r\npsycopg2-binary           2.9.9\r\npandas                    2.1.4", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10395/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10395/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10371", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10371/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10371/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10371/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10371", "id": 2516671389, "node_id": "I_kwDOBiS_IM6WAVud", "number": 10371, "title": "[BUG] Exception during validation of ExpectColumnValuesToBeInSet", "user": {"login": "Terma1", "id": 105071630, "node_id": "U_kgDOBkNEDg", "avatar_url": "https://avatars.githubusercontent.com/u/105071630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Terma1", "html_url": "https://github.com/Terma1", "followers_url": "https://api.github.com/users/Terma1/followers", "following_url": "https://api.github.com/users/Terma1/following{/other_user}", "gists_url": "https://api.github.com/users/Terma1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Terma1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Terma1/subscriptions", "organizations_url": "https://api.github.com/users/Terma1/orgs", "repos_url": "https://api.github.com/users/Terma1/repos", "events_url": "https://api.github.com/users/Terma1/events{/privacy}", "received_events_url": "https://api.github.com/users/Terma1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-09-10T14:40:59Z", "updated_at": "2024-10-03T01:24:52Z", "closed_at": "2024-10-03T01:24:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI created a test expectation and tried to validate it , but i got this exception.\r\nMy data:\r\n`data = {\r\n    \"Letters\": [\"AB\",\"BB\"]\r\n}`\r\n\r\nthen i created expectation:\r\n`expectation = gx.expectations.ExpectColumnValuesToBeInSet(\r\n    column=\"letters\", value_set = [\"AB\",\"BB\"]\r\n)`\r\n\r\n`ExpectColumnValuesToBeInSet(id=None, meta=None, notes=None, result_format=<ResultFormat.BASIC: 'BASIC'>, description=None, catch_exceptions=True, rendered_content=None, batch_id=None, row_condition=None, condition_parser=None, column='letters', mostly=1.0, value_set=['AB', 'BB'])`\r\n\r\nand tried to run the Expectation on the Batch of data.\r\n\r\n`batch.validate(expectation)`\r\n\r\n**To Reproduce**\r\ntraceback: \r\n`\"exception_info\": {\r\n    \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-ee0ab0a9-1d18-41ef-af90-fd5a799d88b4/lib/python3.10/site-packages/great_expectations/validator/validator.py\\\", line 648, in graph_validate\\n    result = expectation.metrics_validate(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-ee0ab0a9-1d18-41ef-af90-fd5a799d88b4/lib/python3.10/site-packages/great_expectations/expectations/expectation.py\\\", line 1064, in metrics_validate\\n    _validate_dependencies_against_available_metrics(\\n  File \\\"/local_disk0/.ephemeral_nfs/envs/pythonEnv-ee0ab0a9-1d18-41ef-af90-fd5a799d88b4/lib/python3.10/site-packages/great_expectations/expectations/expectation.py\\\", line 2754, in _validate_dependencies_against_available_metrics\\n    raise InvalidExpectationConfigurationError(  # noqa: TRY003\\ngreat_expectations.exceptions.exceptions.InvalidExpectationConfigurationError: Metric ('column_values.nonnull.unexpected_count', '578fe538ff4b7c5a0e8c361ada4ba88d', ()) is not available for validation of configuration. Please check your configuration.\\n\",\r\n    \"exception_message\": \"Metric ('column_values.nonnull.unexpected_count', '578fe538ff4b7c5a0e8c361ada4ba88d', ()) is not available for validation of configuration. Please check your configuration.\",\r\n    \"raised_exception\": true\r\n  }`\r\n\r\n**Environment (please complete the following information):**\r\nDatabricks, GX version: 1.0.2 ", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10371/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10371/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10370", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10370/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10370/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10370/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10370", "id": 2515744781, "node_id": "I_kwDOBiS_IM6V8zgN", "number": 10370, "title": "[BUG] Fluent data sources not updated in in-memory data context", "user": {"login": "jschra", "id": 25622698, "node_id": "MDQ6VXNlcjI1NjIyNjk4", "avatar_url": "https://avatars.githubusercontent.com/u/25622698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschra", "html_url": "https://github.com/jschra", "followers_url": "https://api.github.com/users/jschra/followers", "following_url": "https://api.github.com/users/jschra/following{/other_user}", "gists_url": "https://api.github.com/users/jschra/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschra/subscriptions", "organizations_url": "https://api.github.com/users/jschra/orgs", "repos_url": "https://api.github.com/users/jschra/repos", "events_url": "https://api.github.com/users/jschra/events{/privacy}", "received_events_url": "https://api.github.com/users/jschra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2024-09-10T08:19:14Z", "updated_at": "2024-10-02T17:00:34Z", "closed_at": "2024-10-02T16:47:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhenever I run logic to create a new data source, in my example a pandas data source, it does not get added/updated in the in-memory data-context, whereas I would expect it to be added/updated in the fluent_datasources section of the in-memory data-context.\r\n\r\nNOTE: if using a file data-context, that file counterpart of the in-memory data context does get updated.\r\n\r\n**To Reproduce**\r\nThe script below can be run to reproduce. The script itself creates a fresh great_expectations.yml, so no need to attach one. I will again add the test data for easy repro on your part.\r\n\r\nIf you run the script in its entirety, what you will see is that the fluent data source is added to the great_expectations.yml file, but it is not in the in-memory counterpart. Only if you re-run get_context, does it now appear in-memory. I would expect it to be updated in both places simultaneously.\r\n\r\nNote that the example includes a file data context, but the same happens for an ephemeral data context: no fluent data sources are added in-memory.\r\n\r\n```python\r\nimport great_expectations as gx\r\nimport pandas as pd\r\n\r\n# -- Set GX constants for artifact creation\r\nNAME_DATA_SOURCE = \"pandas\"\r\nNAME_DATA_ASSET = \"tutorial_data\"\r\nNAME_BATCH_DEF = \"pandas_tutorial\"\r\nNAME_EXPECTATION_SUITE = \"tutorial\"\r\nNAME_VALIDATION_DEF = \"pandas-validation\"\r\nNAME_CHECKPOINT = \"pandas\"\r\n\r\n# -- Load data for configuration\r\nFILE_CONFIGURE = \"data/yellow_tripdata_2021-11.csv\"\r\ndf_configure = pd.read_csv(FILE_CONFIGURE)\r\n\r\n# -- 1. Initialize GX for configuration\r\ncontext = gx.get_context(mode=\"file\")\r\n\r\ndata_source = context.data_sources.add_pandas(name=NAME_DATA_SOURCE)\r\ndata_asset = data_source.add_dataframe_asset(name=NAME_DATA_ASSET)\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(NAME_BATCH_DEF)\r\n\r\n# -- 2. Configure expectation suite to be called over runtime data later\r\nexpectation_suite = gx.ExpectationSuite(name=NAME_EXPECTATION_SUITE)\r\nexpectation_suite = context.suites.add(expectation_suite)\r\n\r\n# -- 2.1. Define table level expectations\r\ncolumns = list(df_configure.columns)\r\nexpectation = gx.expectations.ExpectTableColumnsToMatchSet(column_set=columns)\r\nexpectation_suite.add_expectation(expectation)\r\n\r\n# -- 2.2. Define column level expectations\r\nexpectation = gx.expectations.ExpectColumnValuesToNotBeNull(column=\"VendorID\")\r\nexpectation_suite.add_expectation(expectation)\r\n\r\nexpected_values = [1, 2]\r\nexpectation = gx.expectations.ExpectColumnValuesToBeInSet(\r\n    column=\"VendorID\", value_set=expected_values\r\n)\r\nexpectation_suite.add_expectation(expectation)\r\n\r\n# -- 2.3. Evaluate results on test dataset\r\nbatch_parameters = {\"dataframe\": df_configure}\r\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\r\nvalidation_results = batch.validate(expectation_suite)\r\n\r\n# -- 3. Bundle suite and batch into validation definition and checkpoint w/ bundled\r\n# --    actions for easy execution later\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=expectation_suite, name=NAME_VALIDATION_DEF\r\n)\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\naction_list = [\r\n    gx.checkpoint.UpdateDataDocsAction(\r\n        name=\"update_all_data_docs\",\r\n    ),\r\n]\r\ncheckpoint = gx.Checkpoint(\r\n    name=NAME_CHECKPOINT,\r\n    validation_definitions=[validation_definition],\r\n    actions=action_list,\r\n    result_format={\r\n        \"result_format\": \"COMPLETE\",\r\n    },\r\n)\r\ncontext.checkpoints.add(checkpoint)\r\n\r\n# -- 4. Run checkpoint to validate if everything works properly\r\nrunid = gx.RunIdentifier(run_name=\"Configuration run\")\r\nresults = checkpoint.run(batch_parameters=batch_parameters, run_id=runid)\r\n```\r\n\r\n**Expected behavior**\r\nWhen adding fluent data sources, I would expect these to be added both to the in-memory data context and its file counterpart (if running a file based data context).\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 1.0.2\r\n - Data Source: Pandas\r\n - Cloud environment: N/A\r\n\r\n**Additional context**\r\nFollow-up from AMA", "closed_by": {"login": "tyler-hoffman", "id": 5400974, "node_id": "MDQ6VXNlcjU0MDA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5400974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tyler-hoffman", "html_url": "https://github.com/tyler-hoffman", "followers_url": "https://api.github.com/users/tyler-hoffman/followers", "following_url": "https://api.github.com/users/tyler-hoffman/following{/other_user}", "gists_url": "https://api.github.com/users/tyler-hoffman/gists{/gist_id}", "starred_url": "https://api.github.com/users/tyler-hoffman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tyler-hoffman/subscriptions", "organizations_url": "https://api.github.com/users/tyler-hoffman/orgs", "repos_url": "https://api.github.com/users/tyler-hoffman/repos", "events_url": "https://api.github.com/users/tyler-hoffman/events{/privacy}", "received_events_url": "https://api.github.com/users/tyler-hoffman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10370/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10370/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10368", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10368/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10368/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10368/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10368", "id": 2515452493, "node_id": "I_kwDOBiS_IM6V7sJN", "number": 10368, "title": "Column Expectations on Druid datasource", "user": {"login": "Frigus007", "id": 34317944, "node_id": "MDQ6VXNlcjM0MzE3OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/34317944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Frigus007", "html_url": "https://github.com/Frigus007", "followers_url": "https://api.github.com/users/Frigus007/followers", "following_url": "https://api.github.com/users/Frigus007/following{/other_user}", "gists_url": "https://api.github.com/users/Frigus007/gists{/gist_id}", "starred_url": "https://api.github.com/users/Frigus007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Frigus007/subscriptions", "organizations_url": "https://api.github.com/users/Frigus007/orgs", "repos_url": "https://api.github.com/users/Frigus007/repos", "events_url": "https://api.github.com/users/Frigus007/events{/privacy}", "received_events_url": "https://api.github.com/users/Frigus007/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-09-10T05:43:50Z", "updated_at": "2024-09-12T08:25:12Z", "closed_at": "2024-09-11T15:33:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When using Great Expectations (GE) to add validation checks on a Druid datasource, two expectations were applied to columns p1 and p2. However, the SQL query generated by GE includes duplicate column names, which Druid does not support. Specifically, the query contains two columns named \"column_values.nonnull.unexpected_count\", which causes Druid to fail in returning data. The issue arises because the same column name is assigned to different expressions in the SQL query.\r\n\r\n\r\n**To Reproduce**\r\n\r\nAdd expectations on the p1 and p2 columns of a Druid datasource.\r\n\r\nRun the validation with the following expectations:\r\n{\r\n      \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n      \"kwargs\": {\r\n        \"column\": \"p1\",\r\n         \"mostly\":0.66\r\n      }\r\n    },\r\n    {\r\n      \"expectation_type\": \"expect_column_values_to_be_in_set\",\r\n      \"kwargs\": {\r\n        \"column\": \"p2\",\r\n        \"value_set\": [\r\n          \"0\",\r\n          \"1\",\r\n          \"2\",\r\n          \"3\",\r\n          \"4\",\r\n          \"5\",\r\n          \"6\",\r\n          \"7\",\r\n          \"unknown\"\r\n        ],\r\n         \"mostly\":0.661\r\n      }\r\n    }\r\nThis generates a query similar to:\r\nSELECT sum(CASE WHEN (\"p1\" IS NOT NULL AND (\"p1\" NOT IN ('0', '1', '2', '3', '4', '5', '6', '7'))) THEN 1 ELSE 0 END) AS \"column_values.in_set.unexpected_count\", \r\nsum(CASE WHEN (\"p2\" IS NULL) THEN 1 ELSE 0 END) AS \"column_values.nonnull.unexpected_count\", \r\nsum(CASE WHEN (\"p1\" IS NULL) THEN 1 ELSE 0 END) AS \"column_values.nonnull.unexpected_count\" \r\nFROM (SELECT * FROM t WHERE __time >= timestamp '2024-09-04 00:00:00' and __time <= timestamp '2024-09-04 23:59:59') AS \"anon_1\";\r\nDruid fails to return data due to the duplicate column names.\r\n\r\n**Expected behaviour** \r\nThe query should generate unique column names for each expectation, allowing Druid to process and return the validation results successfully.\r\n\r\nThe issue likely occurs because the same alias \"column_values.nonnull.unexpected_count\" is assigned to both null checks for p1 and p2. This needs to be fixed so that column names in the SQL query are distinct.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10368/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10368/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10367", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10367/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10367/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10367/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10367", "id": 2515447162, "node_id": "I_kwDOBiS_IM6V7q16", "number": 10367, "title": "Unable to convert Checkpoint results to serialized json format", "user": {"login": "PDebasish", "id": 19893149, "node_id": "MDQ6VXNlcjE5ODkzMTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/19893149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PDebasish", "html_url": "https://github.com/PDebasish", "followers_url": "https://api.github.com/users/PDebasish/followers", "following_url": "https://api.github.com/users/PDebasish/following{/other_user}", "gists_url": "https://api.github.com/users/PDebasish/gists{/gist_id}", "starred_url": "https://api.github.com/users/PDebasish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PDebasish/subscriptions", "organizations_url": "https://api.github.com/users/PDebasish/orgs", "repos_url": "https://api.github.com/users/PDebasish/repos", "events_url": "https://api.github.com/users/PDebasish/events{/privacy}", "received_events_url": "https://api.github.com/users/PDebasish/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-09-10T05:39:27Z", "updated_at": "2024-09-16T16:36:49Z", "closed_at": "2024-09-16T16:36:49Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am trying to convert the results obtained from checkpoint to a json normalized format and read into a pyspark dataframe.  Appreciate your help on the same.\r\n[Environment Set up.txt](https://github.com/user-attachments/files/16939992/Environment.Set.up.txt)\r\n\r\n**To Reproduce**\r\nI have included the code in the attachment.\r\n\r\n**Expected behavior**\r\nA normalized json format which can be read to a pyspark dataframe.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: NA\r\n - Great Expectations Version: 1.0.2\r\n - Data Source: Pandas dataframe(using Fabric lakehouse files)\r\n - Cloud environment: Microsoft Fabric\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10367/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10367/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10363", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10363/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10363/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10363/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10363", "id": 2513220158, "node_id": "I_kwDOBiS_IM6VzLI-", "number": 10363, "title": "[BUG] GX unable to send notification to Teams channel after data validation in the checkpoint", "user": {"login": "Erua-chijioke", "id": 110530873, "node_id": "U_kgDOBpaROQ", "avatar_url": "https://avatars.githubusercontent.com/u/110530873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Erua-chijioke", "html_url": "https://github.com/Erua-chijioke", "followers_url": "https://api.github.com/users/Erua-chijioke/followers", "following_url": "https://api.github.com/users/Erua-chijioke/following{/other_user}", "gists_url": "https://api.github.com/users/Erua-chijioke/gists{/gist_id}", "starred_url": "https://api.github.com/users/Erua-chijioke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Erua-chijioke/subscriptions", "organizations_url": "https://api.github.com/users/Erua-chijioke/orgs", "repos_url": "https://api.github.com/users/Erua-chijioke/repos", "events_url": "https://api.github.com/users/Erua-chijioke/events{/privacy}", "received_events_url": "https://api.github.com/users/Erua-chijioke/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-09-09T08:04:22Z", "updated_at": "2024-09-19T16:24:55Z", "closed_at": "2024-09-10T21:13:37Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing Great expectations version 1.0.2, I created an action inside a checkpoint to send a notification to a teams channel through a webhook but It is unable to do that and displays this error:\r\n\r\n\r\n**To Reproduce**\r\n```python\r\n**create data source, asset, batch definition and expectation suite**\r\ndataframe = spark.sql(\"SELECT * FROM xxx\")\r\ncontext = gx.get_context(project_root_dir=\"/dbfs/xxx\")\r\n\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\ndata_source = context.data_sources.add_or_update_spark(name=data_source_name)\r\ndata_asset=data_source.add_dataframe_asset(name=data_asset_name)\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(batch_definition_name)\r\n\r\n\r\nsuite_name = \"my_expectation_suite\"\r\nsuite = gx.ExpectationSuite(name=suite_name)\r\nsuite = context.suites.add(suite)\r\n\r\ntable_row_count=dataframe.count()\r\ntable_row_count_expectationn = gxe.ExpectTableRowCountToEqual(value=table_row_count)\r\nsuite.add_expectation(table_row_count_expectationn)\r\n\r\n**Retrieve the expectation suite and create validation definition**\r\nexpectation_suite_name = \"my_expectation_suite\"\r\nexpectation_suite = context.suites.get(name=expectation_suite_name)\r\n\r\ndefinition_name = \"my_validation_definition\"\r\nvalidation_definition = gx.ValidationDefinition(\r\n        data=batch_definition, suite=expectation_suite, name=definition_name)\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\n validation_definitions = [\r\n    context.validation_definitions.get(\"my_validation_definition\")]\r\n\r\nvalidation_notification_microsoft_teams_webhook = \"xxx\"\r\n\r\n**create an action list**\r\naction_list = [\r\n    # This Action sends a Team Notification if an Expectation fails.\r\n    gx.checkpoint.MicrosoftTeamsNotificationAction(\r\n        name=\"send_microsoft_teams_notification_on_validation_result\",\r\n        teams_webhook= validation_notification_microsoft_teams_webhook,\r\n        notify_on= \"all\",\r\n    ),\r\n    # This Action updates the Data Docs static website with the Validation\r\n    #   Results after the Checkpoint is run.\r\n    gx.checkpoint.UpdateDataDocsAction(\r\n        name=\"update_all_data_docs\",\r\n    ),\r\n]\r\n\r\n**create a checkpoint**\r\ncheckpoint_name = \"my_checkpoint\"\r\n    checkpoint = gx.Checkpoint(\r\n        name=checkpoint_name,\r\n        validation_definitions=validation_definitions,\r\n        actions=action_list,\r\n        result_format={\"result_format\": \"COMPLETE\"},\r\n    )\r\n    context.checkpoints.add(checkpoint)\r\n\r\n\r\nbatch_parameters = {\"dataframe\": dataframe}\r\n\r\nvalidation_results = checkpoint.run(\r\n    batch_parameters=batch_parameters,)\r\n\r\n\r\n**Below is the error message I get**\r\nFile /local_disk0/.ephemeral_nfs/envs/pythonEnv-7048a166-73a8-4fdf-aa6c-fb34a0b4805e/lib/python3.10/site-packages/great_expectations/render/renderer/microsoft_teams_renderer.py:114, in MicrosoftTeamsRenderer._render_data_docs_links(self, data_docs_pages)\r\n    112 if docs_link_key == \"class\":\r\n    113     continue\r\n--> 114 docs_link = data_docs_pages[docs_link_key]\r\n    115 report_element = self._get_report_element(docs_link)\r\n    116 elements.append(report_element)\r\n\r\nTypeError: list indices must be integers or slices, not ValidationResultIdentifier\r\n```\r\n\r\n\r\n**Expected behavior**\r\nThe checkpoint is expected to send a notification to a teams channel through the teams webhook provided.\r\n\r\n**Environment:**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.0.2\r\n - Data Source: Spark Dataframe\r\n - Cloud environment: Databricks\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10363/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10363/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10361", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10361/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10361/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10361/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10361", "id": 2512455453, "node_id": "I_kwDOBiS_IM6VwQcd", "number": 10361, "title": "[Bug]  Notifiy MS team", "user": {"login": "superbeer", "id": 20677737, "node_id": "MDQ6VXNlcjIwNjc3NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/20677737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/superbeer", "html_url": "https://github.com/superbeer", "followers_url": "https://api.github.com/users/superbeer/followers", "following_url": "https://api.github.com/users/superbeer/following{/other_user}", "gists_url": "https://api.github.com/users/superbeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/superbeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/superbeer/subscriptions", "organizations_url": "https://api.github.com/users/superbeer/orgs", "repos_url": "https://api.github.com/users/superbeer/repos", "events_url": "https://api.github.com/users/superbeer/events{/privacy}", "received_events_url": "https://api.github.com/users/superbeer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-09-08T16:00:43Z", "updated_at": "2024-10-29T02:40:01Z", "closed_at": "2024-09-09T15:09:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10361/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10361/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10360", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10360/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10360/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10360/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10360", "id": 2512455163, "node_id": "I_kwDOBiS_IM6VwQX7", "number": 10360, "title": "refer", "user": {"login": "superbeer", "id": 20677737, "node_id": "MDQ6VXNlcjIwNjc3NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/20677737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/superbeer", "html_url": "https://github.com/superbeer", "followers_url": "https://api.github.com/users/superbeer/followers", "following_url": "https://api.github.com/users/superbeer/following{/other_user}", "gists_url": "https://api.github.com/users/superbeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/superbeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/superbeer/subscriptions", "organizations_url": "https://api.github.com/users/superbeer/orgs", "repos_url": "https://api.github.com/users/superbeer/repos", "events_url": "https://api.github.com/users/superbeer/events{/privacy}", "received_events_url": "https://api.github.com/users/superbeer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-09-08T16:00:09Z", "updated_at": "2024-10-29T02:40:07Z", "closed_at": "2024-09-09T15:24:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10360/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10360/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10355", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10355/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10355/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10355/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10355", "id": 2511050253, "node_id": "I_kwDOBiS_IM6Vq5YN", "number": 10355, "title": "bgjb", "user": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-09-06T19:11:58Z", "updated_at": "2024-09-06T19:12:08Z", "closed_at": "2024-09-06T19:12:08Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10355/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10355/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10352", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10352/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10352/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10352/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10352", "id": 2510181800, "node_id": "I_kwDOBiS_IM6VnlWo", "number": 10352, "title": "[DOCS] 'PandasFilesystemDatasource' object has no attribute 'add_directory_csv_asset'", "user": {"login": "HuhtaLauri", "id": 16299982, "node_id": "MDQ6VXNlcjE2Mjk5OTgy", "avatar_url": "https://avatars.githubusercontent.com/u/16299982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HuhtaLauri", "html_url": "https://github.com/HuhtaLauri", "followers_url": "https://api.github.com/users/HuhtaLauri/followers", "following_url": "https://api.github.com/users/HuhtaLauri/following{/other_user}", "gists_url": "https://api.github.com/users/HuhtaLauri/gists{/gist_id}", "starred_url": "https://api.github.com/users/HuhtaLauri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HuhtaLauri/subscriptions", "organizations_url": "https://api.github.com/users/HuhtaLauri/orgs", "repos_url": "https://api.github.com/users/HuhtaLauri/repos", "events_url": "https://api.github.com/users/HuhtaLauri/events{/privacy}", "received_events_url": "https://api.github.com/users/HuhtaLauri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-09-06T11:06:10Z", "updated_at": "2024-09-09T18:30:38Z", "closed_at": "2024-09-09T17:30:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThis [page](https://docs.greatexpectations.io/docs/core/connect_to_data/filesystem_data/) in the docs, when taking the \"Directory Data Asset\" path tells you to create the asset with `data_source.add_directory_csv_asset()` but that method does not exist anymore.\r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: 1.0.2\r\n - Data Source: Pandas\r\n\r\nSidenote: There has been so many issues with the docs since the 1.0.0 release. Please go through them thoroughly.", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10352/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10352/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10351", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10351/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10351/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10351/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10351", "id": 2509796690, "node_id": "I_kwDOBiS_IM6VmHVS", "number": 10351, "title": "Not able to Install great_expectations", "user": {"login": "rishabhgupta28", "id": 98794493, "node_id": "U_kgDOBeN7_Q", "avatar_url": "https://avatars.githubusercontent.com/u/98794493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabhgupta28", "html_url": "https://github.com/rishabhgupta28", "followers_url": "https://api.github.com/users/rishabhgupta28/followers", "following_url": "https://api.github.com/users/rishabhgupta28/following{/other_user}", "gists_url": "https://api.github.com/users/rishabhgupta28/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabhgupta28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabhgupta28/subscriptions", "organizations_url": "https://api.github.com/users/rishabhgupta28/orgs", "repos_url": "https://api.github.com/users/rishabhgupta28/repos", "events_url": "https://api.github.com/users/rishabhgupta28/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabhgupta28/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-09-06T08:07:59Z", "updated_at": "2024-09-10T13:15:26Z", "closed_at": "2024-09-10T13:15:26Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Getting below error while sending setting up great_expectations.\r\n`(new_venv) (base) Rishabh_Gupta@M-C02FG03EMD6V ~ % great_expectations --version\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/Rishabh_Gupta/new_venv/bin/great_expectations\", line 5, in <module>\r\n    from great_expectations.cli import main\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/__init__.py\", line 6, in <module>\r\n    from great_expectations.data_context.migrator.cloud_migrator import CloudMigrator\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/data_context/__init__.py\", line 1, in <module>\r\n    from great_expectations.data_context.data_context import (\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/data_context/data_context/__init__.py\", line 1, in <module>\r\n    from great_expectations.data_context.data_context.abstract_data_context import (\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 61, in <module>\r\n    from great_expectations.core.datasource_dict import CacheableDatasourceDict\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/core/datasource_dict.py\", line 13, in <module>\r\n    from great_expectations.datasource.fluent import Datasource as FluentDatasource\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/datasource/fluent/__init__.py\", line 5, in <module>\r\n    from great_expectations.datasource.fluent.interfaces import (\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/great_expectations/datasource/fluent/interfaces.py\", line 739, in <module>\r\n    class Batch(FluentBaseModel):\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/pydantic/main.py\", line 286, in __new__\r\n    cls.__try_update_forward_refs__()\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/pydantic/main.py\", line 808, in __try_update_forward_refs__\r\n    update_model_forward_refs(cls, cls.__fields__.values(), cls.__config__.json_encoders, localns, (NameError,))\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/pydantic/typing.py\", line 554, in update_model_forward_refs\r\n    update_field_forward_refs(f, globalns=globalns, localns=localns)\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/pydantic/typing.py\", line 520, in update_field_forward_refs\r\n    field.type_ = evaluate_forwardref(field.type_, globalns, localns or None)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/Rishabh_Gupta/new_venv/lib/python3.12/site-packages/pydantic/typing.py\", line 66, in evaluate_forwardref\r\n    return cast(Any, type_)._evaluate(globalns, localns, set())\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nTypeError: ForwardRef._evaluate() missing 1 required keyword-only argument: 'recursive_guard'\r\n(new_venv) (base) Rishabh_Gupta@M-C02FG03EMD6V ~ % \r\n`\r\n\r\n\r\n\r\nAlso tried below steps to overcome with the error but no luck.\r\nrm -rf <path_to_new_venv>\r\npython3 -m venv <path_to_new_venv>\r\nsource <path_to_new_venv>/bin/activate\r\n\r\npip install pydantic==1.10.12 great_expectations\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10351/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10351/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10343", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10343/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10343/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10343/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10343", "id": 2508140801, "node_id": "I_kwDOBiS_IM6VfzEB", "number": 10343, "title": "[BUG] Incorrect representation of value_set in expectation", "user": {"login": "Terma1", "id": 105071630, "node_id": "U_kgDOBkNEDg", "avatar_url": "https://avatars.githubusercontent.com/u/105071630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Terma1", "html_url": "https://github.com/Terma1", "followers_url": "https://api.github.com/users/Terma1/followers", "following_url": "https://api.github.com/users/Terma1/following{/other_user}", "gists_url": "https://api.github.com/users/Terma1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Terma1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Terma1/subscriptions", "organizations_url": "https://api.github.com/users/Terma1/orgs", "repos_url": "https://api.github.com/users/Terma1/repos", "events_url": "https://api.github.com/users/Terma1/events{/privacy}", "received_events_url": "https://api.github.com/users/Terma1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-09-05T15:39:18Z", "updated_at": "2024-09-09T18:31:02Z", "closed_at": "2024-09-09T17:32:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen writing code \r\n`expectation = gx.expectations.ExpectColumnValuesToBeInSet( column=\"letters\", value_set = ['AB','BB','BC','AS','AD'])`\r\nvalue_set stored in to expectation as a dictionary. \r\n`ExpectColumnValuesToBeInSet(id=None, meta=None, notes=None, result_format=<ResultFormat.BASIC: 'BASIC'>, catch_exceptions=True, rendered_content=None, batch_id=None, row_condition=None, condition_parser=None, column='letters', mostly=1.0, value_set={'A': 'D', 'B': 'C'})`\r\n\r\n**value_set={'A': 'D', 'B': 'C'})**\r\n\r\nThis always happend when the list components consist of two elements\r\n\r\n**Expected behavior**\r\n\r\nValue_set is stored as a list. **value_set={'AB','BB','BC','AS','AD'}**\r\n\r\n\r\n**Environment:**\r\nDatabricks and spark DataFrame\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10343/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10340", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10340/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10340/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10340/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10340", "id": 2507411128, "node_id": "I_kwDOBiS_IM6VdA64", "number": 10340, "title": "[Bug] MS team notify ", "user": {"login": "superbeer", "id": 20677737, "node_id": "MDQ6VXNlcjIwNjc3NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/20677737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/superbeer", "html_url": "https://github.com/superbeer", "followers_url": "https://api.github.com/users/superbeer/followers", "following_url": "https://api.github.com/users/superbeer/following{/other_user}", "gists_url": "https://api.github.com/users/superbeer/gists{/gist_id}", "starred_url": "https://api.github.com/users/superbeer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/superbeer/subscriptions", "organizations_url": "https://api.github.com/users/superbeer/orgs", "repos_url": "https://api.github.com/users/superbeer/repos", "events_url": "https://api.github.com/users/superbeer/events{/privacy}", "received_events_url": "https://api.github.com/users/superbeer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-09-05T10:35:16Z", "updated_at": "2024-09-09T20:35:55Z", "closed_at": "2024-09-05T18:14:24Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n- can not sent notify for ms team\r\n- add gx.checkpoint.UpdateDataDocsAction after ms team it is error\r\n     \r\n```\r\n - action_list = [\r\n          gx.checkpoint.MicrosoftTeamsNotificationAction(\r\n                  name=\"send_microsoft_teams_notification_on_failed_expectations\",\r\n                  teams_webhook=\"xxx\",\r\n                  notify_on=\"all\",\r\n                  # show_failed_expectations=False,\r\n              ),\r\n          \r\n      \r\n          gx.checkpoint.UpdateDataDocsAction(\r\n              name=\"update_all_data_docs\",\r\n          ),\r\n      ]\r\n```\r\n\r\n-  intelligent show args microsoft_teams_webhook but  can not use it . it can use  teams_webhook instand\r\n\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n```\r\nimport pandas as pd\r\nimport great_expectations as gx\r\ncontext = gx.get_context()\r\n# Create a sample Pandas DataFrame\r\ndata = {\r\n    'customer_id': [1, 2, 3, 4, 5],\r\n    'name': ['John', 'Jane', 'Tom', 'Jerry', 'Anna'],\r\n    'age': [29, 34, 23, 44, 27],\r\n    'email': ['john@example.com', 'jane@example.com', 'tom@example.com', None, 'anna@example.com'],\r\n    'signup_date': ['2021-01-01', '2021-06-15', '2022-03-22', '2022-11-11', '2023-02-20']\r\n}\r\ndata_source_name = \"my_data_source\"\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\nbatch_definition_name = \"my_batch_definition\"\r\n\r\ndata_source = context.data_sources.add_pandas(name=data_source_name)\r\ndata_asset = data_source.add_dataframe_asset(name=data_asset_name)\r\n\r\n\r\n\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\r\n    batch_definition_name\r\n)\r\n\r\nbatch_definition = (\r\n    context.data_sources.get(data_source_name)\r\n    .get_asset(data_asset_name)\r\n    .get_batch_definition(batch_definition_name)\r\n)\r\n\r\n\r\ndf = pd.DataFrame(data)\r\n\r\n\r\nbatch_parameters = {\"dataframe\": df}\r\n\r\n\r\n\r\nexpectation = gx.expectations.ExpectColumnValuesToNotBeNull(\r\n    column=\"customer_id\"\r\n)\r\n\r\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\r\n\r\nvalidation_results = batch.validate(expectation)\r\n\r\n\r\nsuite_name = \"my_expectation_suite\"\r\n\r\nsuite = gx.ExpectationSuite(name=suite_name)\r\nsuite = context.suites.add(suite)\r\nsuite.add_expectation(expectation)\r\n\r\n# Create a Validation Definition\r\ndefinition_name = \"my_validation_definition\"\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=suite, name=definition_name\r\n)\r\n\r\n# Add the Validation Definition to the Data Context\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\naction_list = [\r\n    gx.checkpoint.MicrosoftTeamsNotificationAction(\r\n            name=\"send_microsoft_teams_notification_on_failed_expectations\",\r\n            teams_webhook=\"xxx\",\r\n            notify_on=\"all\",\r\n            # show_failed_expectations=False,\r\n        ),\r\n    \r\n\r\n    gx.checkpoint.UpdateDataDocsAction(\r\n        name=\"update_all_data_docs\",\r\n    ),\r\n    gx.checkpoint.MicrosoftTeamsNotificationAction()\r\n]\r\n\r\n\r\nvalidation_definitions = [\r\n    context.validation_definitions.get(\"my_validation_definition\")\r\n]\r\n\r\ncheckpoint_name = \"my_checkpoint\"\r\ncheckpoint = gx.Checkpoint(\r\n    name=checkpoint_name,\r\n    validation_definitions=validation_definitions,\r\n    actions=action_list,\r\n    result_format={\"result_format\": \"COMPLETE\"},\r\n)\r\n\r\nresult=checkpoint.run(batch_parameters=batch_parameters)\r\n\r\n\r\n```\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [1.0.0]\r\n - Data Source: [e.g. Pandas]\r\n\r\n\r\n**Additional context**\r\n```\r\npython3.11/site-packages/great_expectations/render/renderer/microsoft_teams_renderer.py\", line 114, in _render_data_docs_links\r\n    docs_link = data_docs_pages[docs_link_key]\r\n```\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "cdkini", "id": 49923762, "node_id": "MDQ6VXNlcjQ5OTIzNzYy", "avatar_url": "https://avatars.githubusercontent.com/u/49923762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdkini", "html_url": "https://github.com/cdkini", "followers_url": "https://api.github.com/users/cdkini/followers", "following_url": "https://api.github.com/users/cdkini/following{/other_user}", "gists_url": "https://api.github.com/users/cdkini/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdkini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdkini/subscriptions", "organizations_url": "https://api.github.com/users/cdkini/orgs", "repos_url": "https://api.github.com/users/cdkini/repos", "events_url": "https://api.github.com/users/cdkini/events{/privacy}", "received_events_url": "https://api.github.com/users/cdkini/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10340/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10340/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10339", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10339/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10339/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10339/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10339", "id": 2507024510, "node_id": "I_kwDOBiS_IM6Vbih-", "number": 10339, "title": "[BUG] Asset name is rendered as empty string in Data Docs", "user": {"login": "jschra", "id": 25622698, "node_id": "MDQ6VXNlcjI1NjIyNjk4", "avatar_url": "https://avatars.githubusercontent.com/u/25622698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschra", "html_url": "https://github.com/jschra", "followers_url": "https://api.github.com/users/jschra/followers", "following_url": "https://api.github.com/users/jschra/following{/other_user}", "gists_url": "https://api.github.com/users/jschra/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschra/subscriptions", "organizations_url": "https://api.github.com/users/jschra/orgs", "repos_url": "https://api.github.com/users/jschra/repos", "events_url": "https://api.github.com/users/jschra/events{/privacy}", "received_events_url": "https://api.github.com/users/jschra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-09-05T07:39:35Z", "updated_at": "2024-09-09T20:35:59Z", "closed_at": "2024-09-05T18:46:46Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen using checkpoint to validate a pandas data asset based on an in-memory data frame, the resulting validation result rendered in the Data Docs website has an empty asset name.\r\n\r\n**To Reproduce**\r\nTo reproduce the error, you can run this single script in its entirety along with the data file I have attached to this post. Within it, a new file based context will be created with all default values, so there is no need to share the great_expectations.yml file.\r\n\r\n```python\r\nimport great_expectations as gx\r\nimport pandas as pd\r\n\r\n# -- Set GX constants for artifact creation\r\nNAME_DATA_SOURCE = \"pandas\"\r\nNAME_DATA_ASSET = \"tutorial_data\"\r\nNAME_BATCH_DEF = \"pandas_tutorial\"\r\nNAME_EXPECTATION_SUITE = \"tutorial\"\r\nNAME_VALIDATION_DEF = \"pandas-validation\"\r\nNAME_CHECKPOINT = \"pandas\"\r\n\r\n# -- Load data for configuration\r\nFILE_CONFIGURE = \"data/yellow_tripdata_2021-11.csv\"\r\ndf_configure = pd.read_csv(FILE_CONFIGURE)\r\n\r\n# -- 1. Initialize GX for configuration\r\ncontext = gx.get_context(mode=\"file\")\r\n\r\ndata_source = context.data_sources.add_pandas(name=NAME_DATA_SOURCE)\r\ndata_asset = data_source.add_dataframe_asset(name=NAME_DATA_ASSET)\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(NAME_BATCH_DEF)\r\n\r\n# -- 2. Configure expectation suite to be called over runtime data later\r\nexpectation_suite = gx.ExpectationSuite(name=NAME_EXPECTATION_SUITE)\r\nexpectation_suite = context.suites.add(expectation_suite)\r\n\r\n# -- 2.1. Define table level expectations\r\ncolumns = list(df_configure.columns)\r\nexpectation = gx.expectations.ExpectTableColumnsToMatchSet(column_set=columns)\r\nexpectation_suite.add_expectation(expectation)\r\n\r\n# -- 2.2. Define column level expectations\r\nexpectation = gx.expectations.ExpectColumnValuesToNotBeNull(column=\"VendorID\")\r\nexpectation_suite.add_expectation(expectation)\r\n\r\nexpected_values = [1, 2]\r\nexpectation = gx.expectations.ExpectColumnValuesToBeInSet(\r\n    column=\"VendorID\", value_set=expected_values\r\n)\r\nexpectation_suite.add_expectation(expectation)\r\n\r\n# -- 2.3. Evaluate results on test dataset\r\nbatch_parameters = {\"dataframe\": df_configure}\r\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\r\nvalidation_results = batch.validate(expectation_suite)\r\n\r\n# -- 3. Bundle suite and batch into validation definition and checkpoint w/ bundled\r\n# --    actions for easy execution later\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=expectation_suite, name=NAME_VALIDATION_DEF\r\n)\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\naction_list = [\r\n    gx.checkpoint.UpdateDataDocsAction(\r\n        name=\"update_all_data_docs\",\r\n    ),\r\n]\r\ncheckpoint = gx.Checkpoint(\r\n    name=NAME_CHECKPOINT,\r\n    validation_definitions=[validation_definition],\r\n    actions=action_list,\r\n    result_format={\r\n        \"result_format\": \"COMPLETE\",\r\n    },\r\n)\r\ncontext.checkpoints.add(checkpoint)\r\n\r\n# -- 4. Run checkpoint to validate if everything works properly\r\nrunid = gx.RunIdentifier(run_name=\"Configuration run\")\r\nresults = checkpoint.run(batch_parameters=batch_parameters, run_id=runid)\r\n```\r\n\r\n**Expected behavior**\r\nI would expected that asset name of the data asset used to invoke the checkpoint over to show up in the asset name section, but instead it is empty.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 1.0.1\r\n - Data Source: Pandas\r\n - Cloud environment: N/A\r\n \r\n[yellow_tripdata_2021-11.csv](https://github.com/user-attachments/files/16885718/yellow_tripdata_2021-11.csv)\r\n\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10339/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10339/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10333", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10333/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10333/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10333/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10333", "id": 2505478475, "node_id": "I_kwDOBiS_IM6VVpFL", "number": 10333, "title": "[BUG] Incorrect schema name handling in selectable for SQLAlchemy (Bigquery)", "user": {"login": "TaerimL", "id": 175730239, "node_id": "U_kgDOCnluPw", "avatar_url": "https://avatars.githubusercontent.com/u/175730239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaerimL", "html_url": "https://github.com/TaerimL", "followers_url": "https://api.github.com/users/TaerimL/followers", "following_url": "https://api.github.com/users/TaerimL/following{/other_user}", "gists_url": "https://api.github.com/users/TaerimL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaerimL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaerimL/subscriptions", "organizations_url": "https://api.github.com/users/TaerimL/orgs", "repos_url": "https://api.github.com/users/TaerimL/repos", "events_url": "https://api.github.com/users/TaerimL/events{/privacy}", "received_events_url": "https://api.github.com/users/TaerimL/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2272326499, "node_id": "MDU6TGFiZWwyMjcyMzI2NDk5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:big_query", "name": "stack:big_query", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2024-09-04T14:05:43Z", "updated_at": "2025-01-13T18:40:22Z", "closed_at": "2025-01-13T18:40:22Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am encountering an issue when running validation with SQLAlchemy (BigQuery). Specifically, when generating a selectable with a query, the returned table object for temporary table has the schema referenced twice: once within the table name and another time within the schema attribute.\r\n\r\nConsequently, the table reference, built using selectatble, is incorrectly formatted as `schema_name.schema_name.table_name`.  instead of `schema_name.table_name`. This is problematic in BigQuery because the table name is already qualified with its schema name. This incorrectly formatted Table object is referenced during validations and fails.\r\n\r\n It seems that the issue was handled for the function [_generate_selectable_from_schema_name_and_table_name](https://github.com/great-expectations/great_expectations/blob/4bb324aaf92a4e2174f4b536643c4c4d6032ddb8/great_expectations/execution_engine/sqlalchemy_batch_data.py#L328) but not on generating it with a query.\r\n\r\n\r\n**To Reproduce**\r\nThis behavior can be observed with the following arguments to the function [_generate_selectable_from_query](https://github.com/great-expectations/great_expectations/blob/0c042619c85116e4b587696c3ef571700562a9a3/great_expectations/execution_engine/sqlalchemy_batch_data.py#L366) when the `dialect = GXSqlDialect.BIGQUERY`.\r\n```\r\n\"create_temp_table\" = True\r\n\"temp_table_schema_name\" = \"sample_schema_name\"\r\n\"query\" = \"sample_query\"\r\n```\r\n\r\n**Expected behavior**\r\nIn the function \"_generate_selectable_from_query\", the selectable should be in the format `schema_name.table_name` when `dialect = GXSqlDialect.BIGQUERY`.\r\n\r\n \r\nI would like to suggest a possible solution below: \r\n\r\n```\r\ndef _generate_selectable_from_query(\r\n        self,\r\n        query: str,\r\n        dialect: GXSqlDialect,\r\n        create_temp_table: bool,\r\n        temp_table_schema_name: Optional[str] = None,\r\n    ) -> sqlalchemy.Table | sqlalchemy.TextClause:\r\n        \"\"\"Helper method to generate Selectable from query string.\r\n\r\n        Args:\r\n            query (str): query passed in as RuntimeBatchRequest.\r\n            dialect (GXSqlDialect): Needed for _create_temporary_table, since different backends name temp_tables differently.\r\n            create_temp_table (bool): Should we create a temp_table? If not a `TextClause` will be returned instead of a Table.\r\n            temp_table_schema_name (Optional[str], optional): Optional string for temp_table schema.  Defaults to None.\r\n\r\n        Returns:\r\n            sqlalchemy.Table: SqlAlchemy Table that is Selectable or a TextClause.\r\n        \"\"\"\r\n\r\n        if not create_temp_table:\r\n            return sa.text(query)\r\n        _, temp_table_name = self._create_temporary_table(\r\n            dialect=dialect,\r\n            query=query,\r\n            temp_table_schema_name=temp_table_schema_name,\r\n        )\r\n\r\n        if dialect == GXSqlDialect.BIGQUERY:\r\n            if temp_table_schema_name is not None:\r\n                logger.warning(\r\n                    \"schema_name should not be used when passing a table_name for biquery. Instead, include the schema name in the table_name string.\"\r\n                )\r\n            # In BigQuery the table name is already qualified with its schema name\r\n            return sa.Table(\r\n                temp_table_name,\r\n                sa.MetaData(),\r\n                schema=None,\r\n            )\r\n\r\n        return sa.Table(\r\n            temp_table_name,\r\n            sa.MetaData(),\r\n            schema=temp_table_schema_name,\r\n        )\r\n\r\n```\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.19\r\n - Data Source: Sqlalchemy(BigQuery)\r\n - Cloud environment: GCP\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10333/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10333/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10327", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10327/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10327/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10327/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10327", "id": 2502927695, "node_id": "I_kwDOBiS_IM6VL6VP", "number": 10327, "title": "BUG: entire dataframe ending up in validation results JSON", "user": {"login": "jschra", "id": 25622698, "node_id": "MDQ6VXNlcjI1NjIyNjk4", "avatar_url": "https://avatars.githubusercontent.com/u/25622698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschra", "html_url": "https://github.com/jschra", "followers_url": "https://api.github.com/users/jschra/followers", "following_url": "https://api.github.com/users/jschra/following{/other_user}", "gists_url": "https://api.github.com/users/jschra/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschra/subscriptions", "organizations_url": "https://api.github.com/users/jschra/orgs", "repos_url": "https://api.github.com/users/jschra/repos", "events_url": "https://api.github.com/users/jschra/events{/privacy}", "received_events_url": "https://api.github.com/users/jschra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2024-09-03T13:44:55Z", "updated_at": "2024-09-11T17:39:49Z", "closed_at": "2024-09-05T23:14:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing GX 1.0.1 with an in-memory pandas data source and related asset and batch definition, whenever I run an expectation suite over in-memory data passed via said data source and asset, the entire dataframe ends up in the validation result JSON in the meta section under keys [\"active_batch_definition\"][\"batch_identifiers\"][\"dataframe\"], which in my eyes is data leakage. The validation JSON should only contain results related to the validation and some meta data, but never the original data. \r\n\r\n**To Reproduce**\r\nTo reproduce the error using GX 1.0.1, I have added mock data to this issue. Please find below (1) the logic I run and (2) the GX yaml file, although it is not necessary as it is the default one that gets created by the logic of the script\r\n\r\nsetup_gx.py\r\n```python\r\nimport great_expectations as gx\r\nimport pandas as pd\r\n\r\n# -- Set GX constants for artifact creation\r\nNAME_DATA_SOURCE = \"pandas\"\r\nNAME_DATA_ASSET = \"tutorial_data\"\r\nNAME_BATCH_DEF = \"pandas_tutorial\"\r\nNAME_EXPECTATION_SUITE = \"tutorial\"\r\nNAME_VALIDATION_DEF = \"pandas-validation\"\r\nNAME_CHECKPOINT = \"pandas\"\r\n\r\n# -- Load data for configuration\r\nFILE_CONFIGURE = \"data/yellow_tripdata_2021-11.csv\"\r\ndf_configure = pd.read_csv(FILE_CONFIGURE)\r\n\r\n# -- 1. Initialize GX for configuration\r\ncontext = gx.get_context(mode=\"file\")\r\n\r\ndata_source = context.data_sources.add_pandas(name=NAME_DATA_SOURCE)\r\ndata_asset = data_source.add_dataframe_asset(name=NAME_DATA_ASSET)\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(NAME_BATCH_DEF)\r\n\r\n# -- 2. Configure expectation suite to be called over runtime data later\r\nexpectation_suite = gx.ExpectationSuite(name=NAME_EXPECTATION_SUITE)\r\nexpectation_suite = context.suites.add(expectation_suite)\r\n\r\n# -- 2.1. Define table level expectations\r\ncolumns = list(df_configure.columns)\r\nexpectation = gx.expectations.ExpectTableColumnsToMatchSet(column_set=columns)\r\nexpectation_suite.add_expectation(expectation)\r\n\r\n# -- 2.2. Define column level expectations\r\nexpectation = gx.expectations.ExpectColumnValuesToNotBeNull(column=\"VendorID\")\r\nexpectation_suite.add_expectation(expectation)\r\n\r\nexpected_values = [1, 2]\r\nexpectation = gx.expectations.ExpectColumnValuesToBeInSet(\r\n    column=\"VendorID\", value_set=expected_values\r\n)\r\nexpectation_suite.add_expectation(expectation)\r\n\r\n# -- 2.3. Evaluate results on test dataset\r\nbatch_parameters = {\"dataframe\": df_configure}\r\nbatch = batch_definition.get_batch(batch_parameters=batch_parameters)\r\nvalidation_results = batch.validate(expectation_suite)\r\n\r\n# -- 3. Bundle suite and batch into validation definition and checkpoint w/ bundled\r\n# --    actions for easy execution later\r\nvalidation_definition = gx.ValidationDefinition(\r\n    data=batch_definition, suite=expectation_suite, name=NAME_VALIDATION_DEF\r\n)\r\nvalidation_definition = context.validation_definitions.add(validation_definition)\r\n\r\naction_list = [\r\n    gx.checkpoint.UpdateDataDocsAction(\r\n        name=\"update_all_data_docs\",\r\n    ),\r\n]\r\ncheckpoint = gx.Checkpoint(\r\n    name=NAME_CHECKPOINT,\r\n    validation_definitions=[validation_definition],\r\n    actions=action_list,\r\n    result_format={\r\n        \"result_format\": \"COMPLETE\",\r\n    },\r\n)\r\ncontext.checkpoints.add(checkpoint)\r\n\r\n# -- 4. Run checkpoint to validate if everything works properly\r\nrunid = gx.RunIdentifier(run_name=\"Configuration run\")\r\nresults = checkpoint.run(batch_parameters=batch_parameters, run_id=runid)\r\n```\r\ngreat_expectations.yml\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 4.0\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: validation_definitions/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidation_results_store_name: validation_results_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanalytics_enabled: true\r\nfluent_datasources:\r\n  pandas:\r\n    type: pandas\r\n    id: 8aa2879f-d6d8-426e-8e81-0c191c22855e\r\n    assets:\r\n      tutorial_data:\r\n        type: dataframe\r\n        id: 8cea57b7-0178-4bd0-8054-c9f43429dd52\r\n        batch_metadata: {}\r\n        batch_definitions:\r\n          pandas_tutorial:\r\n            id: 8a5753fa-d227-4d4a-a5b4-cb61ffacb946\r\n            partitioner:\r\ndata_context_id: ea5099b6-79ea-4de8-a1f5-180b722d64a1\r\n```\r\n\r\n**Expected behavior**\r\nI would expect that the contents of the dataframe would not end up in the validation JSON or at least would be redacted, as is already applied in the batch_parameters section. I will create a PR for a possible fix which mimicks the behavior used for batch_parameters later.\r\n\r\nEDIT* proposed PR for fix: https://github.com/great-expectations/great_expectations/pull/10328\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 1.0.1\r\n - Data Source: Pandas\r\n - Cloud environment: N/A\r\n\r\n**Additional context**\r\nNone at this time\r\n\r\n[yellow_tripdata_2021-11.csv](https://github.com/user-attachments/files/16849664/yellow_tripdata_2021-11.csv)\r\n", "closed_by": {"login": "billdirks", "id": 12725591, "node_id": "MDQ6VXNlcjEyNzI1NTkx", "avatar_url": "https://avatars.githubusercontent.com/u/12725591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billdirks", "html_url": "https://github.com/billdirks", "followers_url": "https://api.github.com/users/billdirks/followers", "following_url": "https://api.github.com/users/billdirks/following{/other_user}", "gists_url": "https://api.github.com/users/billdirks/gists{/gist_id}", "starred_url": "https://api.github.com/users/billdirks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billdirks/subscriptions", "organizations_url": "https://api.github.com/users/billdirks/orgs", "repos_url": "https://api.github.com/users/billdirks/repos", "events_url": "https://api.github.com/users/billdirks/events{/privacy}", "received_events_url": "https://api.github.com/users/billdirks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10327/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10327/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10324", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10324/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10324/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10324/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10324", "id": 2501203826, "node_id": "I_kwDOBiS_IM6VFVdy", "number": 10324, "title": "Why has EmailAction / EmailRenderer deactivated sending the data docs link?", "user": {"login": "MarcelBeining", "id": 1278660, "node_id": "MDQ6VXNlcjEyNzg2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1278660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcelBeining", "html_url": "https://github.com/MarcelBeining", "followers_url": "https://api.github.com/users/MarcelBeining/followers", "following_url": "https://api.github.com/users/MarcelBeining/following{/other_user}", "gists_url": "https://api.github.com/users/MarcelBeining/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcelBeining/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcelBeining/subscriptions", "organizations_url": "https://api.github.com/users/MarcelBeining/orgs", "repos_url": "https://api.github.com/users/MarcelBeining/repos", "events_url": "https://api.github.com/users/MarcelBeining/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcelBeining/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-09-02T15:18:01Z", "updated_at": "2024-10-30T15:09:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nPreviously, it was possible to add data doc links to the sent email, such that on validation failures, people could directly go to the corresponding data doc site.\r\nNow, this seems to have been removed, even though the EmailRenderer still has an unused method `_get_report_element` for this and other Actions/Renderers like the `MicrosoftTeamsNotificationAction` nicely get the corresponding link from the `action_context` and render it.\r\n\r\n\r\n**Describe the solution you'd like**\r\nThe Email Action / Renderer should support this, too and it should be really straightforward to implement this there like it is in MicrosoftTeams Action/Renderer, too.\r\nI would even do a PR for it, provided there was no higher level decision or whatever, why this has been removed (?).", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10324/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10324/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10323", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10323/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10323/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10323/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10323", "id": 2501168691, "node_id": "I_kwDOBiS_IM6VFM4z", "number": 10323, "title": "expect_column_pair_values_a_to_be_greater_than_b fail to show unexpected rows", "user": {"login": "VytSep", "id": 180197437, "node_id": "U_kgDOCr2YPQ", "avatar_url": "https://avatars.githubusercontent.com/u/180197437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VytSep", "html_url": "https://github.com/VytSep", "followers_url": "https://api.github.com/users/VytSep/followers", "following_url": "https://api.github.com/users/VytSep/following{/other_user}", "gists_url": "https://api.github.com/users/VytSep/gists{/gist_id}", "starred_url": "https://api.github.com/users/VytSep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VytSep/subscriptions", "organizations_url": "https://api.github.com/users/VytSep/orgs", "repos_url": "https://api.github.com/users/VytSep/repos", "events_url": "https://api.github.com/users/VytSep/events{/privacy}", "received_events_url": "https://api.github.com/users/VytSep/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2024-09-02T14:57:47Z", "updated_at": "2026-01-30T16:50:54Z", "closed_at": "2026-01-30T16:50:54Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe expectation expect_column_pair_values_a_to_be_greater_than_b is not generating the unexpected rows\r\n\r\n**To Reproduce**\r\nThe expectation is configured this way:\r\nCOMPLETE={\"result_format\": \"COMPLETE\", \"include_unexpected_rows\": True}\r\nexpectation = gx.expectations.ExpectColumnPairValuesAToBeGreaterThanB(\r\n    column_A=\"date_a\",\r\n    column_B=\"date_b\",\r\n    or_equal=True,\r\n    result_format=COMPLETE,\r\n)\r\n\r\nThe checkpoint is configured this way:\r\ncheckpoint_name = \"my_checkpoint\"\r\ncheckpoint = gx.Checkpoint(\r\n    name=checkpoint_name,\r\n    validation_definitions=validation_definitions,\r\n    result_format={\"result_format\": \"COMPLETE\", \"include_unexpected_rows\": True},\r\n)\r\n\r\n\r\n\r\n\r\n**Expected behavior**\r\nHave in the validation result the unexpected rows for this expectation\r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: [1.0.0]\r\n - Cloud environment: [Databricks]\r\n\r\n**Additional context**\r\nFor other expectations like expect_column_values_to_be_in_set I do have the unexpected rows generated\r\n", "closed_by": {"login": "wookasz", "id": 14184925, "node_id": "MDQ6VXNlcjE0MTg0OTI1", "avatar_url": "https://avatars.githubusercontent.com/u/14184925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wookasz", "html_url": "https://github.com/wookasz", "followers_url": "https://api.github.com/users/wookasz/followers", "following_url": "https://api.github.com/users/wookasz/following{/other_user}", "gists_url": "https://api.github.com/users/wookasz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wookasz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wookasz/subscriptions", "organizations_url": "https://api.github.com/users/wookasz/orgs", "repos_url": "https://api.github.com/users/wookasz/repos", "events_url": "https://api.github.com/users/wookasz/events{/privacy}", "received_events_url": "https://api.github.com/users/wookasz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10323/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10323/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10321", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10321/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10321/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10321/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10321", "id": 2500767469, "node_id": "I_kwDOBiS_IM6VDq7t", "number": 10321, "title": "Get Started link is broken", "user": {"login": "Stuzanna", "id": 66328800, "node_id": "MDQ6VXNlcjY2MzI4ODAw", "avatar_url": "https://avatars.githubusercontent.com/u/66328800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stuzanna", "html_url": "https://github.com/Stuzanna", "followers_url": "https://api.github.com/users/Stuzanna/followers", "following_url": "https://api.github.com/users/Stuzanna/following{/other_user}", "gists_url": "https://api.github.com/users/Stuzanna/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stuzanna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stuzanna/subscriptions", "organizations_url": "https://api.github.com/users/Stuzanna/orgs", "repos_url": "https://api.github.com/users/Stuzanna/repos", "events_url": "https://api.github.com/users/Stuzanna/events{/privacy}", "received_events_url": "https://api.github.com/users/Stuzanna/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-09-02T11:50:44Z", "updated_at": "2025-01-23T14:17:59Z", "closed_at": "2024-09-03T19:18:18Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nOn the README of the repo, the Get Started link is to an old page, 404.\r\n\r\n**To Reproduce**\r\nClick the link on the README.\r\n\r\n**Expected behavior**\r\nTakes you to the best get started resource\r\n\r\n**Environment (please complete the following information):**\r\nN/A\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10316", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10316/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10316/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10316/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10316", "id": 2497725428, "node_id": "I_kwDOBiS_IM6U4EP0", "number": 10316, "title": "result_format and include_unexpected_rows does not work in expectation", "user": {"login": "Terma1", "id": 105071630, "node_id": "U_kgDOBkNEDg", "avatar_url": "https://avatars.githubusercontent.com/u/105071630?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Terma1", "html_url": "https://github.com/Terma1", "followers_url": "https://api.github.com/users/Terma1/followers", "following_url": "https://api.github.com/users/Terma1/following{/other_user}", "gists_url": "https://api.github.com/users/Terma1/gists{/gist_id}", "starred_url": "https://api.github.com/users/Terma1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Terma1/subscriptions", "organizations_url": "https://api.github.com/users/Terma1/orgs", "repos_url": "https://api.github.com/users/Terma1/repos", "events_url": "https://api.github.com/users/Terma1/events{/privacy}", "received_events_url": "https://api.github.com/users/Terma1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-08-30T16:29:27Z", "updated_at": "2024-09-09T18:28:24Z", "closed_at": "2024-09-04T17:47:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen I create a new expectation with a parameter result_format = {\"result_format\" : \"COMPLETE\", \"include_unexpected_rows\": True} , and then batch.validate(expectation), the result is default\r\n\r\n**Expected behavior**\r\nAt the output I want to receive complete results and  table rows that do not correspond to the expectation (success false)\r\n\r\n**Environment (please complete the following information):**\r\nDatabricks, i work with SparkDataframe\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10316/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10316/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10314", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10314/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10314/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10314/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10314", "id": 2497042370, "node_id": "I_kwDOBiS_IM6U1dfC", "number": 10314, "title": "[BUG] active_batch_definition is converted to dict but required as DictDot later", "user": {"login": "MarcelBeining", "id": 1278660, "node_id": "MDQ6VXNlcjEyNzg2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1278660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcelBeining", "html_url": "https://github.com/MarcelBeining", "followers_url": "https://api.github.com/users/MarcelBeining/followers", "following_url": "https://api.github.com/users/MarcelBeining/following{/other_user}", "gists_url": "https://api.github.com/users/MarcelBeining/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcelBeining/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcelBeining/subscriptions", "organizations_url": "https://api.github.com/users/MarcelBeining/orgs", "repos_url": "https://api.github.com/users/MarcelBeining/repos", "events_url": "https://api.github.com/users/MarcelBeining/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcelBeining/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 7364350044, "node_id": "LA_kwDOBiS_IM8AAAABtvMQXA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community-supported", "name": "community-supported", "color": "fbca04", "default": false, "description": "supported by the GX community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-08-30T12:03:47Z", "updated_at": "2024-09-11T17:37:43Z", "closed_at": "2024-09-05T18:14:49Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen using the EmailRenderer on some run result from expectation suites, I get the the following error:\r\n\r\n> AttributeError: 'dict' object has no attribute 'data_asset_name'\r\n\r\nI digged into it and found that in line 522 of `great_expectations/core/expectation_validation_result.py` the data_asset_name is called by dot reference which only works on your DictDots, but `self.meta[\"active_batch_definition\"]` is a Dict at that point:\r\n```\r\n    @property\r\n    def asset_name(self) -> str | None:\r\n        if \"active_batch_definition\" in self.meta:\r\n            return self.meta[\"active_batch_definition\"].data_asset_name\r\n        return None\r\n```\r\nSince I used the original Expectations without manipulation I knew it must be a bug on your side, so I digged further and found that in line 87 of `great_expectations/validator/v1_validator.py` the original DictDot gets converted into a normal dict:\r\n```\r\n            meta={\r\n                ...\r\n                \"active_batch_definition\": convert_to_json_serializable(\r\n                    self._wrapped_validator.active_batch_definition\r\n                ),\r\n            },\r\n```\r\n\r\nI do not know if that conversion has a purpose on that line, so either you need to remove the conversion when you create the ExpectationSuiteValidationResult or you have to change the way `active_batch_definition ` gets accessed\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows 11  64 bit\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: Pandas\r\n - Cloud environment: - ", "closed_by": {"login": "cdkini", "id": 49923762, "node_id": "MDQ6VXNlcjQ5OTIzNzYy", "avatar_url": "https://avatars.githubusercontent.com/u/49923762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdkini", "html_url": "https://github.com/cdkini", "followers_url": "https://api.github.com/users/cdkini/followers", "following_url": "https://api.github.com/users/cdkini/following{/other_user}", "gists_url": "https://api.github.com/users/cdkini/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdkini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdkini/subscriptions", "organizations_url": "https://api.github.com/users/cdkini/orgs", "repos_url": "https://api.github.com/users/cdkini/repos", "events_url": "https://api.github.com/users/cdkini/events{/privacy}", "received_events_url": "https://api.github.com/users/cdkini/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10314/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10314/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10313", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10313/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10313/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10313/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10313", "id": 2496946602, "node_id": "I_kwDOBiS_IM6U1GGq", "number": 10313, "title": "Issue in Slack notifications", "user": {"login": "masfworld", "id": 10010875, "node_id": "MDQ6VXNlcjEwMDEwODc1", "avatar_url": "https://avatars.githubusercontent.com/u/10010875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masfworld", "html_url": "https://github.com/masfworld", "followers_url": "https://api.github.com/users/masfworld/followers", "following_url": "https://api.github.com/users/masfworld/following{/other_user}", "gists_url": "https://api.github.com/users/masfworld/gists{/gist_id}", "starred_url": "https://api.github.com/users/masfworld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masfworld/subscriptions", "organizations_url": "https://api.github.com/users/masfworld/orgs", "repos_url": "https://api.github.com/users/masfworld/repos", "events_url": "https://api.github.com/users/masfworld/events{/privacy}", "received_events_url": "https://api.github.com/users/masfworld/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 7364350044, "node_id": "LA_kwDOBiS_IM8AAAABtvMQXA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community-supported", "name": "community-supported", "color": "fbca04", "default": false, "description": "supported by the GX community"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-08-30T11:13:09Z", "updated_at": "2024-09-09T18:27:47Z", "closed_at": "2024-09-05T18:14:14Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nGX returns an error trying to send a Slack notifications.\r\n```\r\n  File \"/Users/miguel/code/data_integrity/venv/lib/python3.12/site-packages/great_expectations/core/expectation_validation_result.py\", line 522, in asset_name\r\n    return self.meta[\"active_batch_definition\"].data_asset_name\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: 'dict' object has no attribute 'data_asset_name'\r\n```\r\n\r\n**To Reproduce**\r\n`great_expectations.yml`\r\n```\r\nconfig_version: 4.0\r\nfluent_datasources:\r\n  pg_api_datasource_readonly:\r\n    type: postgres\r\n    connection_string: postgresql+psycopg2://data_integrity:${XXX}@host.docker.internal:5432/api\r\n  sf_api_datasource:\r\n    type: snowflake\r\n    connection_string: \r\n      snowflake://DATA_INTEGRITY_PROD:${DATA_INTEGRITY_SF_PASS}@XXX/XXX/XXX?warehouse=LOAD_AND_TRANSFORM&role=CORE_API_SENSITIVE_DATA_ACCESS&application=great_expectations_oss\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\nplugins_directory: plugins/\r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: ./var/data/expectations/\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: ./validation_definitions/\r\nexpectations_store_name: expectations_store\r\ncheckpoint_store_name: checkpoint_store\r\nvalidation_results_store_name: validation_results_store\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: ./var/data/uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n```\r\n\r\n**Expected behavior**\r\nSlack notifiaction should be sent\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: Pandas, PostgreSQL and Snowflake\r\n - Cloud environment: Local laptop\r\n\r\n**Additional context**\r\nCode returning the error:\r\n```\r\n# Create a validation\r\n    validation_name = \"_\".join(['bmy_validation_definition',date_time])\r\n    validation_definition = context.validation_definitions.add(\r\n        gx.ValidationDefinition(\r\n            data=batch_definition_merge, suite=suite, name=validation_name, \r\n        )\r\n    )\r\n    \r\n    # Create the Checkpoint\r\n    checkpoint_name = \"_\".join(['my_checkpoint_name',date_time])\r\n    print(f'Validation Definition: {validation_definition}')\r\n    checkpoint = gx.Checkpoint(\r\n        name=checkpoint_name,\r\n        validation_definitions=[validation_definition],\r\n        actions=getActionLists(),\r\n        result_format={\"result_format\": \"COMPLETE\"},\r\n    )\r\n    \r\n    # Save the Checkpoint to the Data Context\r\n    context.checkpoints.add(checkpoint)\r\n    \r\n    # merged_data is a Pandas Dataframe\r\n    checkpoint.run(\r\n        batch_parameters={\"dataframe\": merged_data}\r\n    )\r\n    \r\n    context.build_data_docs()\r\n\r\ndef getActionLists():\r\n    slack_webhook = os.getenv('SLACK_WEBHOOK', None)\r\n    if not slack_webhook:\r\n        return []\r\n    \r\n    return [\r\n        # This Action sends a Slack Notification if an Expectation fails.\r\n        gx.checkpoint.SlackNotificationAction(\r\n            name=\"send_slack_notification_on_failed_expectations\",\r\n            slack_webhook=slack_webhook,\r\n            notify_on=\"all\",\r\n            show_failed_expectations=False\r\n        ),\r\n        # This Action updates the Data Docs static website with the Validation\r\n        #   Results after the Checkpoint is run.\r\n        gx.checkpoint.UpdateDataDocsAction(\r\n            name=\"update_all_data_docs\",\r\n        ),\r\n    ]\r\n```\r\nMore info in this [Slack thread](https://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1724832931078659)\r\n", "closed_by": {"login": "cdkini", "id": 49923762, "node_id": "MDQ6VXNlcjQ5OTIzNzYy", "avatar_url": "https://avatars.githubusercontent.com/u/49923762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdkini", "html_url": "https://github.com/cdkini", "followers_url": "https://api.github.com/users/cdkini/followers", "following_url": "https://api.github.com/users/cdkini/following{/other_user}", "gists_url": "https://api.github.com/users/cdkini/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdkini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdkini/subscriptions", "organizations_url": "https://api.github.com/users/cdkini/orgs", "repos_url": "https://api.github.com/users/cdkini/repos", "events_url": "https://api.github.com/users/cdkini/events{/privacy}", "received_events_url": "https://api.github.com/users/cdkini/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10313/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10313/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10305", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10305/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10305/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10305/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10305", "id": 2493474663, "node_id": "I_kwDOBiS_IM6Un2dn", "number": 10305, "title": "Azure SQL Table Asset throwing \u201cNoneType object is not iterable\u201d while validating in azure databricks - gx 1.0.0", "user": {"login": "DineshBaratam-5", "id": 170718340, "node_id": "U_kgDOCiz0hA", "avatar_url": "https://avatars.githubusercontent.com/u/170718340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DineshBaratam-5", "html_url": "https://github.com/DineshBaratam-5", "followers_url": "https://api.github.com/users/DineshBaratam-5/followers", "following_url": "https://api.github.com/users/DineshBaratam-5/following{/other_user}", "gists_url": "https://api.github.com/users/DineshBaratam-5/gists{/gist_id}", "starred_url": "https://api.github.com/users/DineshBaratam-5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DineshBaratam-5/subscriptions", "organizations_url": "https://api.github.com/users/DineshBaratam-5/orgs", "repos_url": "https://api.github.com/users/DineshBaratam-5/repos", "events_url": "https://api.github.com/users/DineshBaratam-5/events{/privacy}", "received_events_url": "https://api.github.com/users/DineshBaratam-5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-08-29T05:18:22Z", "updated_at": "2024-09-09T18:27:37Z", "closed_at": "2024-08-30T23:51:25Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAfter creating data context using dbfs path in azure databricks, connected to azure sql server data source and a table asset. Created a expectation suite and tried to validate the expectations on top of the table asset. Validator is throwing an issue shown as \"NoneType object is not iterable\". I have tried the same in local environment instead of databricks and got the same issue. **Please note that the issue is with using SQL data asset to connect to Azure SQL Server but not Azure Storage account.**\r\n\r\n**To Reproduce**\r\nPFB the code snippet I executed in azure databricks cloud environment\r\n\r\n`\r\nimport great_expectations as gx\r\nfrom great_expectations.checkpoint import Checkpoint\r\nimport pandas as pd\r\nimport sqlalchemy as sa\r\nimport sqlalchemy.engine as sae\r\n\r\ncontext_root_dir = \"/dbfs/great_expectations/\"\r\ncontext = gx.get_context(mode=\"file\", project_root_dir=context_root_dir)\r\n\r\nconnection_url = sae.URL.create(\r\n    \"mssql+pyodbc\",\r\n    username=targetDbUserName,\r\n    password=targetDbPassword,\r\n    host=targetSQLServerName,\r\n    database=targetDataBaseName,\r\n    query={\"driver\": \"ODBC Driver 18 for SQL Server\"}\r\n)\r\n\r\nconnectionString = connection_url.render_as_string(hide_password=False)\r\n\r\ndatasource = context.data_sources.add_or_update_sql(name=\"TargetSQLDataSource\", connection_string=connectionString)\r\nasset_name = \"ProductAsset\"\r\ndataasset = datasource.add_table_asset(name=asset_name, table_name=targetTableName)\r\nbatch_request = dataasset.build_batch_request()\r\nexpectation_suite_name = \"TargetSQL_expectation_suite\"\r\nsuite = gx.ExpectationSuite(expectation_suite_name)\r\ntry:\r\n    context.suites.add(suite)\r\nexcept gx.exceptions.DataContextError as DCE:\r\n    context.suites.delete(expectation_suite_name)\r\n    context.suites.add(suite)\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request,\r\n    expectation_suite_name=expectation_suite_name\r\n)\r\n\r\nvalidator.expect_column_values_to_not_be_null(column=\"ProductID\")\r\nvalidator.expect_column_values_to_be_between(column=\"StandardCost\", min_value=0, max_value=100000)\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)\r\n`\r\n\r\nAfter executing above code everything is working fine till creation of validator and an error is being thrown at the line \"validator.expect_column_values_to_not_be_null(column=\"ProductID\")\". PFB the total error trace.\r\n\r\nMetricResolutionError: 'NoneType' object is not iterable\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:533, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    531 try:\r\n    532     resolved_metrics[metric_computation_configuration.metric_configuration.id] = (\r\n--> 533         metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    534             **metric_computation_configuration.metric_provider_kwargs\r\n    535         )\r\n    536     )\r\n    537 except Exception as e:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py:60, in metric_value.<locals>.wrapper.<locals>.inner_func(*args, **kwargs)\r\n     58 @wraps(metric_fn)\r\n     59 def inner_func(*args: P.args, **kwargs: P.kwargs):\r\n---> 60     return metric_fn(*args, **kwargs)\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/metrics/table_metrics/table_columns.py:49, in TableColumns._sqlalchemy(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, metrics, runtime_configuration)\r\n     48 column_metadata = metrics[\"table.column_types\"]\r\n---> 49 return [col[\"name\"] for col in column_metadata]\r\n\r\nTypeError: 'NoneType' object is not iterable\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nFile <command-1625200873249524>, line 1\r\n----> 1 validator.expect_column_values_to_not_be_null(column=\"ProductID\")\r\n      2 # validator.expect_column_values_to_be_between(column=\"StandardCost\", min_value=0, max_value=100000)\r\n      3 validator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:547, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    541         validation_result = ExpectationValidationResult(\r\n    542             success=False,\r\n    543             exception_info=exception_info,\r\n    544             expectation_config=configuration,\r\n    545         )\r\n    546     else:\r\n--> 547         raise err  # noqa: TRY201\r\n    549 if self._include_rendered_content:\r\n    550     validation_result.render()\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:505, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    501     validation_result = ExpectationValidationResult(\r\n    502         expectation_config=copy.deepcopy(configuration)\r\n    503     )\r\n    504 else:\r\n--> 505     validation_result = expectation.validate_(\r\n    506         validator=self,\r\n    507         suite_parameters=self._expectation_suite.suite_parameters,\r\n    508         data_context=self._data_context,\r\n    509         runtime_configuration=basic_runtime_configuration,\r\n    510     )\r\n    512 # If validate has set active_validation to true, then we do not save the config to avoid  # noqa: E501\r\n    513 # saving updating expectation configs to the same suite during validation runs\r\n    514 if self._active_validation is True:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1236, in Expectation.validate_(self, validator, suite_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1230 self._warn_if_result_format_config_in_expectation_configuration(configuration=configuration)\r\n   1232 configuration.process_suite_parameters(\r\n   1233     suite_parameters, interactive_evaluation, data_context\r\n   1234 )\r\n   1235 expectation_validation_result_list: list[ExpectationValidationResult] = (\r\n-> 1236     validator.graph_validate(\r\n   1237         configurations=[configuration],\r\n   1238         runtime_configuration=runtime_configuration,\r\n   1239     )\r\n   1240 )\r\n   1241 return expectation_validation_result_list[0]\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:640, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n    638         return evrs\r\n    639     else:\r\n--> 640         raise err  # noqa: TRY201\r\n    642 configuration: ExpectationConfiguration\r\n    643 result: ExpectationValidationResult\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:619, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n    612 resolved_metrics: _MetricsDict\r\n    614 try:\r\n    615     (\r\n    616         resolved_metrics,\r\n    617         evrs,\r\n    618         processed_configurations,\r\n--> 619     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n    620         graph=graph,\r\n    621         runtime_configuration=runtime_configuration,\r\n    622         expectation_validation_graphs=expectation_validation_graphs,\r\n    623         evrs=evrs,\r\n    624         processed_configurations=processed_configurations,\r\n    625         show_progress_bars=self._determine_progress_bars(),\r\n    626     )\r\n    627 except Exception as err:\r\n    628     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then  # noqa: E501\r\n    629     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.  # noqa: E501\r\n    630     if catch_exceptions:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:775, in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n    770 resolved_metrics: _MetricsDict\r\n    771 aborted_metrics_info: _AbortedMetricsInfoDict\r\n    772 (\r\n    773     resolved_metrics,\r\n    774     aborted_metrics_info,\r\n--> 775 ) = self._metrics_calculator.resolve_validation_graph(\r\n    776     graph=graph,\r\n    777     runtime_configuration=runtime_configuration,\r\n    778     min_graph_edges_pbar_enable=0,\r\n    779 )\r\n    781 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.  # noqa: E501\r\n    782 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:265, in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    263 resolved_metrics: _MetricsDict\r\n    264 aborted_metrics_info: _AbortedMetricsInfoDict\r\n--> 265 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    266     runtime_configuration=runtime_configuration,\r\n    267     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    268     show_progress_bars=self._show_progress_bars,\r\n    269 )\r\n    270 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:205, in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    202 resolved_metrics: Dict[_MetricKey, MetricValue] = {}\r\n    204 # updates graph with aborted metrics\r\n--> 205 aborted_metrics_info: _AbortedMetricsInfoDict = self._resolve(\r\n    206     metrics=resolved_metrics,\r\n    207     runtime_configuration=runtime_configuration,\r\n    208     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    209     show_progress_bars=show_progress_bars,\r\n    210 )\r\n    212 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:305, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    302                 failed_metric_info[failed_metric.id][\"exception_info\"] = exception_info\r\n    304     else:\r\n--> 305         raise err  # noqa: TRY201\r\n    306 except Exception as e:\r\n    307     if catch_exceptions:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:276, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    271         computable_metrics.add(metric)\r\n    273 try:\r\n    274     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.  # noqa: E501\r\n    275     metrics.update(\r\n--> 276         self._execution_engine.resolve_metrics(\r\n    277             metrics_to_resolve=computable_metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    278             metrics=metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    279             runtime_configuration=runtime_configuration,\r\n    280         )\r\n    281     )\r\n    282     progress_bar.update(len(computable_metrics))\r\n    283     progress_bar.refresh()\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:279, in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    270 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    271 (\r\n    272     metric_fn_direct_configurations,\r\n    273     metric_fn_bundle_configurations,\r\n   (...)\r\n    277     runtime_configuration=runtime_configuration,\r\n    278 )\r\n--> 279 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    280     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    281     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    282 )\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:538, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    532         resolved_metrics[metric_computation_configuration.metric_configuration.id] = (\r\n    533             metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    534                 **metric_computation_configuration.metric_provider_kwargs\r\n    535             )\r\n    536         )\r\n    537     except Exception as e:\r\n--> 538         raise gx_exceptions.MetricResolutionError(\r\n    539             message=str(e),\r\n    540             failed_metrics=(metric_computation_configuration.metric_configuration,),\r\n    541         ) from e\r\n    543 try:\r\n    544     # an engine-specific way of computing metrics together\r\n    545     resolved_metric_bundle: Dict[Tuple[str, str, str], MetricValue] = (\r\n    546         self.resolve_metric_bundle(metric_fn_bundle=metric_fn_bundle_configurations)\r\n    547     )\r\n\r\nMetricResolutionError: 'NoneType' object is not iterable\r\n\r\n\r\n**Expected behavior**\r\nGx workflow should execute, and the validator should save the expectation suite after validating the given expectation.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n- Great Expectations Version: 1.0.0\r\n- Data Source: Azure SQL Server\r\n- Cloud environment: Azure Databricks", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10305/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10305/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10304", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10304/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10304/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10304/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10304", "id": 2493305210, "node_id": "I_kwDOBiS_IM6UnNF6", "number": 10304, "title": "Bad input to build_batch_request: Can not build batch request for dataframe asset without a dataframe for Spark dataframe", "user": {"login": "messi101-ml", "id": 70933955, "node_id": "MDQ6VXNlcjcwOTMzOTU1", "avatar_url": "https://avatars.githubusercontent.com/u/70933955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messi101-ml", "html_url": "https://github.com/messi101-ml", "followers_url": "https://api.github.com/users/messi101-ml/followers", "following_url": "https://api.github.com/users/messi101-ml/following{/other_user}", "gists_url": "https://api.github.com/users/messi101-ml/gists{/gist_id}", "starred_url": "https://api.github.com/users/messi101-ml/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messi101-ml/subscriptions", "organizations_url": "https://api.github.com/users/messi101-ml/orgs", "repos_url": "https://api.github.com/users/messi101-ml/repos", "events_url": "https://api.github.com/users/messi101-ml/events{/privacy}", "received_events_url": "https://api.github.com/users/messi101-ml/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2024-08-29T02:15:48Z", "updated_at": "2024-10-09T20:57:56Z", "closed_at": "2024-09-26T02:34:13Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhile using spark dataframe with latest great-expectations , throwing error\r\n Bad input to build_batch_request: Can not build batch request for dataframe asset without a dataframe.\r\n\r\nFollowing the sample code\r\nhttps://docs.greatexpectations.io/docs/core/connect_to_data/dataframes/?execution_engine=spark&procedure=sample_code\r\n\r\n**To Reproduce**\r\nimport pandas as pd\r\nfrom pyspark.sql import DataFrame\r\nfrom pyspark.rdd import RDD\r\ncsv = \"/Volumes/jsa_external_preprod/external_vols/general_purpose_landing/visits.csv\"\r\n# this is visits.csv in data files\r\ndataframe = spark.read.csv(csv, header=True, inferSchema=True)\r\n\r\nimport great_expectations as gx\r\n\r\n# Retrieve your Data Context\r\ncontext = gx.get_context()\r\n\r\n# Define the Data Source name\r\ndata_source_name = \"my_data_source\"\r\n\r\n# Add the Data Source to the Data Context\r\ndata_source = context.data_sources.add_spark(name=data_source_name)\r\n# Retrieve the Data Source\r\ndata_source = context.data_sources.get(data_source_name)\r\n# Define the Data Asset name\r\ndata_asset_name = \"my_dataframe_data_asset\"\r\n\r\n# Add a Data Asset to the Data Source\r\ndata_asset= data_source.add_dataframe_asset(name=data_asset_name)\r\ndata_asset = context.data_sources.get(data_source_name).get_asset(data_asset_name)\r\n\r\n# Define the Batch Definition name\r\nbatch_definition_name = \"my_batch_definition\"\r\n\r\n# Add a Batch Definition to the Data Asset\r\nbatch_definition  = data_asset.add_batch_definition_whole_dataframe(\r\n    batch_definition_name\r\n)\r\nbatch_parameters = {\"dataframe\": dataframe}\r\nbatch_definition = (\r\n    context.data_sources.get(data_source_name)\r\n    .get_asset(data_asset_name)\r\n    .get_batch_definition(batch_definition_name)\r\n)\r\n# Get the dataframe as a Batch\r\nbatch = batch_definition.get_batch(batch_parameters)\r\n\r\n\r\n**Expected behavior**\r\nIt is spark dataframe. Following check should not fail\r\nf not isinstance(options[\"dataframe\"], DataFrame):\r\n--> 232     raise BuildBatchRequestError(\r\n    233         message=\"Can not build batch request for dataframe asset \" \"without a dataframe.\"\r\n    234     )\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  14.3 LTS (includes Apache Spark 3.5.0, Scala 2.12)\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: csv file \r\n - Cloud environment: Azure\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "messi101-ml", "id": 70933955, "node_id": "MDQ6VXNlcjcwOTMzOTU1", "avatar_url": "https://avatars.githubusercontent.com/u/70933955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/messi101-ml", "html_url": "https://github.com/messi101-ml", "followers_url": "https://api.github.com/users/messi101-ml/followers", "following_url": "https://api.github.com/users/messi101-ml/following{/other_user}", "gists_url": "https://api.github.com/users/messi101-ml/gists{/gist_id}", "starred_url": "https://api.github.com/users/messi101-ml/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/messi101-ml/subscriptions", "organizations_url": "https://api.github.com/users/messi101-ml/orgs", "repos_url": "https://api.github.com/users/messi101-ml/repos", "events_url": "https://api.github.com/users/messi101-ml/events{/privacy}", "received_events_url": "https://api.github.com/users/messi101-ml/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10304/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10304/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10296", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10296/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10296/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10296/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10296", "id": 2490433933, "node_id": "I_kwDOBiS_IM6UcQGN", "number": 10296, "title": "DataContext Issue", "user": {"login": "JCristinaJSalas", "id": 89360648, "node_id": "MDQ6VXNlcjg5MzYwNjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/89360648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JCristinaJSalas", "html_url": "https://github.com/JCristinaJSalas", "followers_url": "https://api.github.com/users/JCristinaJSalas/followers", "following_url": "https://api.github.com/users/JCristinaJSalas/following{/other_user}", "gists_url": "https://api.github.com/users/JCristinaJSalas/gists{/gist_id}", "starred_url": "https://api.github.com/users/JCristinaJSalas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JCristinaJSalas/subscriptions", "organizations_url": "https://api.github.com/users/JCristinaJSalas/orgs", "repos_url": "https://api.github.com/users/JCristinaJSalas/repos", "events_url": "https://api.github.com/users/JCristinaJSalas/events{/privacy}", "received_events_url": "https://api.github.com/users/JCristinaJSalas/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-08-27T21:49:37Z", "updated_at": "2024-12-09T19:43:39Z", "closed_at": "2024-08-28T18:29:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Expected behavior I expected to be able to import DataContext from great_expectations.data_context without encountering an ImportError, allowing me to configure and use Great Expectations within Databricks.\r\n\r\nEnvironment (please complete the following information):\r\n\r\nOperating System: Windows 11\r\nGreat Expectations Version: 1.0.0\r\nData Source: PySpark\r\nCloud environment: Databricks\r\nAdditional context The issue occurs when trying to set up Great Expectations in a Databricks notebook. I have followed the installation and setup instructions, but the import error persists. As well, I cannot find anymore the documentation online :(\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10296/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10296/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10276", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10276/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10276/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10276/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10276", "id": 2487351246, "node_id": "I_kwDOBiS_IM6UQffO", "number": 10276, "title": "add_batch_definition_path() does not work", "user": {"login": "matthiasgomolka", "id": 6517388, "node_id": "MDQ6VXNlcjY1MTczODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6517388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiasgomolka", "html_url": "https://github.com/matthiasgomolka", "followers_url": "https://api.github.com/users/matthiasgomolka/followers", "following_url": "https://api.github.com/users/matthiasgomolka/following{/other_user}", "gists_url": "https://api.github.com/users/matthiasgomolka/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiasgomolka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiasgomolka/subscriptions", "organizations_url": "https://api.github.com/users/matthiasgomolka/orgs", "repos_url": "https://api.github.com/users/matthiasgomolka/repos", "events_url": "https://api.github.com/users/matthiasgomolka/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiasgomolka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-08-26T17:12:52Z", "updated_at": "2024-09-09T18:26:52Z", "closed_at": "2024-08-29T15:24:58Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI want to add batches to a pandas file system asset (a parquet file) as described here: https://docs.greatexpectations.io/docs/core/connect_to_data/filesystem_data/?batch_definition=path&partition_type=yearly\r\n\r\nBut I get an error which states that the \r\n> Provided path was not able to be resolved\r\n\r\nThis seems like a bug, because the file definitely exists (verified with `Pathlib.Path().exists()`).\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n<details>\r\n  <summary>great_expectations.yml</summary>\r\n\r\n```yaml\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 4.0\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: validation_definitions/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidation_results_store_name: validation_results_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanalytics_enabled: true\r\nfluent_datasources:\r\n  my_ds:\r\n    type: pandas_filesystem\r\n    id: b4b3e487-73bb-4eb9-84f7-8f4003de3afe\r\n    assets:\r\n      my_asset:\r\n        type: parquet\r\n        id: f7b5139a-9b62-41f0-a899-d47f7cbc122c\r\n    base_directory: my_path\r\ndata_context_id: 1b8ad082-88c4-49cb-86c9-fd9d2eaa7cd2\r\n```\r\n</details>\r\n\r\nMy Code:\r\n\r\n```python\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context(mode=\"file\", project_root_dir=\"..\")\r\ndata_source = context.data_sources.add_or_update_pandas_filesystem(name=\"my_ds\", base_directory=\"my_path\")\r\nasset = data_source.add_parquet_asset(name=\"my_asset\")\r\nasset.add_batch_definition_path(name=\"first_batch\", path=\"subdir1/year=2014/first.parquet\" # the directory is hive partitioned\r\n```\r\n\r\nStacktrace:\r\n\r\n```python\r\n ---------------------------------------------------------------------------\r\nPathNotFoundError                         Traceback (most recent call last)\r\nCell In[11], line 1\r\n----> 1 asset.add_batch_definition_path(\r\n      2     name=\"first_batch\",\r\n      3     path=\"subdir1/year=2014/first.parquet\"\r\n      4 )\r\n\r\nFile [...\\.venv\\Lib\\site-packages\\great_expectations\\datasource\\fluent\\data_asset\\path\\file_asset.py:89](.../.venv/Lib/site-packages/great_expectations/datasource/fluent/data_asset/path/file_asset.py:89), in FileDataAsset.add_batch_definition_path(self, name, path)\r\n     87 # we require path to match exactly 1 file\r\n     88 if matched_data_references < 1:\r\n---> 89     raise PathNotFoundError(path=path)\r\n     90 elif matched_data_references > 1:\r\n     91     raise AmbiguousPathError(path=path)\r\n\r\nPathNotFoundError: Provided path was not able to be resolved: subdir1/year=2014/first.parquet\r\n```\r\n\r\n**Expected behavior**\r\nI should be able to add batches based on existing file paths.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: Pandas\r\n - Cloud environment: None\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10276/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10272", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10272/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10272/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10272/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10272", "id": 2486906131, "node_id": "I_kwDOBiS_IM6UOy0T", "number": 10272, "title": "Add the ability to specify ExternalId and Tags in the boto3_options of TupleS3StoreBackend", "user": {"login": "rosspb3", "id": 1711606, "node_id": "MDQ6VXNlcjE3MTE2MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1711606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rosspb3", "html_url": "https://github.com/rosspb3", "followers_url": "https://api.github.com/users/rosspb3/followers", "following_url": "https://api.github.com/users/rosspb3/following{/other_user}", "gists_url": "https://api.github.com/users/rosspb3/gists{/gist_id}", "starred_url": "https://api.github.com/users/rosspb3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rosspb3/subscriptions", "organizations_url": "https://api.github.com/users/rosspb3/orgs", "repos_url": "https://api.github.com/users/rosspb3/repos", "events_url": "https://api.github.com/users/rosspb3/events{/privacy}", "received_events_url": "https://api.github.com/users/rosspb3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7418418615, "node_id": "LA_kwDOBiS_IM8AAAABuiwVtw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature-request", "name": "feature-request", "color": "55C3DC", "default": false, "description": "feature request"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-08-26T13:40:25Z", "updated_at": "2024-09-12T00:03:13Z", "closed_at": null, "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Is your feature request related to a problem? Please describe.\r\n\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\nInability to run Great Expectation with a TupleS3StoreBackend in a cross-account scenario where the role assumed has an AWS policy that restricts role access by ExternalId and Tags.\r\n\r\nDescribe the solution you'd like\r\nThe ability to specify an ExternalId and Tags when the role is assumed.\r\n\r\nDescribe alternatives you've considered\r\nA less restrictive policy for assuming the role, or running Great Expectation within the same account. However, corporate security makes those changes difficult.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10272/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10272/timeline", "performed_via_github_app": null, "state_reason": null}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10271", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10271/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10271/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10271/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10271", "id": 2486389731, "node_id": "I_kwDOBiS_IM6UM0vj", "number": 10271, "title": "Unable to retrieve validation definition name='XXX' id='XXX' from store (type=value_error)", "user": {"login": "SiddhantSadangi", "id": 41324509, "node_id": "MDQ6VXNlcjQxMzI0NTA5", "avatar_url": "https://avatars.githubusercontent.com/u/41324509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SiddhantSadangi", "html_url": "https://github.com/SiddhantSadangi", "followers_url": "https://api.github.com/users/SiddhantSadangi/followers", "following_url": "https://api.github.com/users/SiddhantSadangi/following{/other_user}", "gists_url": "https://api.github.com/users/SiddhantSadangi/gists{/gist_id}", "starred_url": "https://api.github.com/users/SiddhantSadangi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SiddhantSadangi/subscriptions", "organizations_url": "https://api.github.com/users/SiddhantSadangi/orgs", "repos_url": "https://api.github.com/users/SiddhantSadangi/repos", "events_url": "https://api.github.com/users/SiddhantSadangi/events{/privacy}", "received_events_url": "https://api.github.com/users/SiddhantSadangi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-08-26T09:25:48Z", "updated_at": "2024-10-22T13:51:27Z", "closed_at": "2024-08-30T15:28:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nCannot convert an ephemeral data context to a file context\r\n\r\n**To Reproduce**\r\n\r\ngreat_expectations.yml\r\n```yml\r\n\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 4\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validation_results_store:\r\n    class_name: ValidationResultsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  validation_definition_store:\r\n    class_name: ValidationDefinitionStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: validation_definitions/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidation_results_store_name: validation_results_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    # set to false to hide how-to buttons in Data Docs\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n        class_name: TupleFilesystemStoreBackend\r\n        base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n        class_name: DefaultSiteIndexBuilder\r\n\r\nanalytics_enabled: True\r\n```\r\n\r\nThe code is a copy of the tutorial available in the GX Core docs [here](https://docs.greatexpectations.io/docs/core/introduction/try_gx#validate-data-in-a-sql-table), with `context.convert_to_file_context()` appended to the end.\r\n\r\n```py\r\n# Import required modules from GX library.\r\nimport great_expectations as gx\r\n\r\n# Create Data Context.\r\ncontext = gx.get_context()\r\n\r\n# Connect to data.\r\n# Create Data Source, Data Asset, Batch Definition, and Batch.\r\nconnection_string = \"postgresql+psycopg2://try_gx:try_gx@postgres.workshops.greatexpectations.io/gx_example_db\"\r\n\r\ndata_source = context.data_sources.add_postgres(\r\n    \"postgres db\", connection_string=connection_string\r\n)\r\ndata_asset = data_source.add_table_asset(name=\"taxi data\", table_name=\"nyc_taxi_data\")\r\n\r\nbatch_definition = data_asset.add_batch_definition_whole_table(\"batch definition\")\r\nbatch = batch_definition.get_batch()\r\n\r\n# Create Expectation Suite containing two Expectations.\r\nsuite = context.suites.add(\r\n    gx.core.expectation_suite.ExpectationSuite(name=\"expectations\")\r\n)\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToBeBetween(\r\n        column=\"passenger_count\", min_value=1, max_value=6\r\n    )\r\n)\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToBeBetween(column=\"fare_amount\", min_value=0)\r\n)\r\n\r\n# Create Validation Definition.\r\nvalidation_definition = context.validation_definitions.add(\r\n    gx.core.validation_definition.ValidationDefinition(\r\n        name=\"validation definition\",\r\n        data=batch_definition,\r\n        suite=suite,\r\n    )\r\n)\r\n\r\n# Create Checkpoint, run Checkpoint, and capture result.\r\ncheckpoint = context.checkpoints.add(\r\n    gx.checkpoint.checkpoint.Checkpoint(\r\n        name=\"checkpoint\", validation_definitions=[validation_definition]\r\n    )\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\nprint(checkpoint_result.describe())\r\n\r\ncontext.convert_to_file_context()\r\n```\r\n\r\nTraceback\r\n```\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\siddh\\Code\\Neptune\\adhoc\\test.py\", line 51, in <module>\r\n    context.convert_to_file_context()\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\data_context\\data_context\\ephemeral_data_context.py\", line 94, in convert_to_file_context\r\n    return migrator.migrate()\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\data_context\\migrator\\file_migrator.py\", line 63, in migrate\r\n    self._migrate_primary_stores(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\data_context\\migrator\\file_migrator.py\", line 89, in _migrate_primary_stores\r\n    self._migrate_store(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\data_context\\migrator\\file_migrator.py\", line 110, in _migrate_store\r\n    source_obj = source_store.get(key)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\data_context\\store\\store.py\", line 235, in get\r\n    return self.deserialize(value)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\data_context\\store\\checkpoint_store.py\", line 79, in deserialize\r\n    return Checkpoint.parse_raw(value)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\pydantic\\v1\\main.py\", line 549, in parse_raw\r\n    return cls.parse_obj(obj)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\pydantic\\v1\\main.py\", line 526, in parse_obj\r\n    return cls(**obj)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\pydantic\\v1\\main.py\", line 341, in __init__\r\n    raise validation_error\r\npydantic.v1.error_wrappers.ValidationError: 1 validation error for Checkpoint\r\nvalidation_definitions\r\n  Unable to retrieve validation definition name='validation definition' id='d7087430-af5f-42e3-a38c-8515e36e9e8e' from store (type=value_error)\r\n```\r\n\r\n**Expected behavior**\r\nSuccessfully export ephemeral context to file\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows11\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: PostgreSQL\r\n - Cloud environment: NA\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10271/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10271/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10270", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10270/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10270/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10270/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10270", "id": 2486370467, "node_id": "I_kwDOBiS_IM6UMwCj", "number": 10270, "title": "Bad input to build_batch_request: options must contain exactly 1 key, 'dataframe'.", "user": {"login": "SiddhantSadangi", "id": 41324509, "node_id": "MDQ6VXNlcjQxMzI0NTA5", "avatar_url": "https://avatars.githubusercontent.com/u/41324509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SiddhantSadangi", "html_url": "https://github.com/SiddhantSadangi", "followers_url": "https://api.github.com/users/SiddhantSadangi/followers", "following_url": "https://api.github.com/users/SiddhantSadangi/following{/other_user}", "gists_url": "https://api.github.com/users/SiddhantSadangi/gists{/gist_id}", "starred_url": "https://api.github.com/users/SiddhantSadangi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SiddhantSadangi/subscriptions", "organizations_url": "https://api.github.com/users/SiddhantSadangi/orgs", "repos_url": "https://api.github.com/users/SiddhantSadangi/repos", "events_url": "https://api.github.com/users/SiddhantSadangi/events{/privacy}", "received_events_url": "https://api.github.com/users/SiddhantSadangi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2024-08-26T09:16:45Z", "updated_at": "2025-04-08T11:24:58Z", "closed_at": "2024-08-28T22:09:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nCannot run a checkpoint on a validation suite when using a dataframe asset\r\n\r\n**To Reproduce**\r\nCode:\r\n```py\r\nimport great_expectations as gx\r\nimport pandas as pd\r\n\r\ndf = pd.read_csv(\r\n    \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\"\r\n)\r\n\r\ncontext = gx.get_context()\r\n\r\ndata_source = context.data_sources.add_pandas(\"pandas\")\r\ndata_asset = data_source.add_dataframe_asset(name=\"pd dataframe asset\")\r\n\r\nbatch_definition = data_asset.add_batch_definition_whole_dataframe(\"batch definition\")\r\nbatch = batch_definition.get_batch(batch_parameters={\"dataframe\": df})\r\n\r\nsuite = context.suites.add(\r\n    gx.core.expectation_suite.ExpectationSuite(name=\"expectations\")\r\n)\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToBeBetween(\r\n        column=\"passenger_count\", min_value=1, max_value=6\r\n    )\r\n)\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToBeBetween(column=\"fare_amount\", min_value=0)\r\n)\r\nsuite.add_expectation(\r\n    gx.expectations.ExpectColumnValuesToNotBeNull(column=\"pickup_datetime\")\r\n)\r\n\r\nvalidation_definition = context.validation_definitions.add(\r\n    gx.core.validation_definition.ValidationDefinition(\r\n        name=\"validation definition\",\r\n        data=batch_definition,\r\n        suite=suite,\r\n    )\r\n)\r\n\r\ncheckpoint = context.checkpoints.add(\r\n    gx.checkpoint.checkpoint.Checkpoint(\r\n        name=\"checkpoint\", validation_definitions=[validation_definition]\r\n    )\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\nprint(checkpoint_result.describe())\r\n```\r\n\r\nStack trace:\r\n```\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\siddh\\Code\\Neptune\\adhoc\\test.py\", line 45, in <module>\r\n    checkpoint_result = checkpoint.run()\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\checkpoint\\checkpoint.py\", line 178, in run\r\n    run_results = self._run_validation_definitions(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\checkpoint\\checkpoint.py\", line 199, in _run_validation_definitions\r\n    validation_result = validation_definition.run(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\core\\validation_definition.py\", line 234, in run\r\n    results = validator.validate_expectation_suite(self.suite, expectation_parameters)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\validator\\v1_validator.py\", line 63, in validate_expectation_suite\r\n    results = self._validate_expectation_configs(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\validator\\v1_validator.py\", line 117, in _validate_expectation_configs\r\n    processed_expectation_configs = self._wrapped_validator.process_expectations_for_validation(\r\n  File \"C:\\Users\\siddh\\AppData\\Local\\Programs\\Python\\Python310\\lib\\functools.py\", line 981, in __get__\r\n    val = self.func(instance)\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\validator\\v1_validator.py\", line 106, in _wrapped_validator\r\n    batch_request = self._batch_definition.build_batch_request(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\core\\batch_definition.py\", line 56, in build_batch_request\r\n    return self.data_asset.build_batch_request(\r\n  File \"C:\\Users\\siddh\\python_envs\\py310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\pandas_datasource.py\", line 407, in build_batch_request\r\n    raise BuildBatchRequestError(message=\"options must contain exactly 1 key, 'dataframe'.\")\r\ngreat_expectations.exceptions.exceptions.BuildBatchRequestError: Bad input to build_batch_request: options must contain exactly 1 key, 'dataframe'.\r\n```\r\n\r\n**Expected behavior**\r\nCheckpoint run without any issues\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows11\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: Pandas\r\n - Cloud environment: NA\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10270/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10270/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10269", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10269/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10269/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10269/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10269", "id": 2484852704, "node_id": "I_kwDOBiS_IM6UG9fg", "number": 10269, "title": "Not seeing complete list of unexpected rows or list of unexpeted indexes ", "user": {"login": "skondoji", "id": 72623465, "node_id": "MDQ6VXNlcjcyNjIzNDY1", "avatar_url": "https://avatars.githubusercontent.com/u/72623465?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skondoji", "html_url": "https://github.com/skondoji", "followers_url": "https://api.github.com/users/skondoji/followers", "following_url": "https://api.github.com/users/skondoji/following{/other_user}", "gists_url": "https://api.github.com/users/skondoji/gists{/gist_id}", "starred_url": "https://api.github.com/users/skondoji/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skondoji/subscriptions", "organizations_url": "https://api.github.com/users/skondoji/orgs", "repos_url": "https://api.github.com/users/skondoji/repos", "events_url": "https://api.github.com/users/skondoji/events{/privacy}", "received_events_url": "https://api.github.com/users/skondoji/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7440925312, "node_id": "LA_kwDOBiS_IM8AAAABu4OCgA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/request-for-help", "name": "request-for-help", "color": "0C4631", "default": false, "description": "request for help"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2024-08-24T20:38:19Z", "updated_at": "2024-09-09T18:25:40Z", "closed_at": "2024-08-29T18:44:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi\r\nI am doing my evaluation of GE and bit frustrated as I am stuck.  My requirement is simple.\r\nI am suing my pandas dataframe as my source of data to do data validation. As a result, I want list of index ids for all the unexpected column values. Currently I am only seeing 20 which I believe is hardcoded default. I am running this locally and would like to see if I can set some config to relax the default to unlimited. I am using 1.0.0 release of GE with Python 3.9+ on Windows\r\n\r\nOr is there an example code where I can split the dataframe into batches of 20 and aggregate the results after all batches are run?\r\nThanks\r\nSri\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10269/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10265", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10265/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10265/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10265/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10265", "id": 2482779181, "node_id": "I_kwDOBiS_IM6T_DQt", "number": 10265, "title": "SparkDatasource Missing Arguments ", "user": {"login": "arjun-hareendran", "id": 13396362, "node_id": "MDQ6VXNlcjEzMzk2MzYy", "avatar_url": "https://avatars.githubusercontent.com/u/13396362?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arjun-hareendran", "html_url": "https://github.com/arjun-hareendran", "followers_url": "https://api.github.com/users/arjun-hareendran/followers", "following_url": "https://api.github.com/users/arjun-hareendran/following{/other_user}", "gists_url": "https://api.github.com/users/arjun-hareendran/gists{/gist_id}", "starred_url": "https://api.github.com/users/arjun-hareendran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arjun-hareendran/subscriptions", "organizations_url": "https://api.github.com/users/arjun-hareendran/orgs", "repos_url": "https://api.github.com/users/arjun-hareendran/repos", "events_url": "https://api.github.com/users/arjun-hareendran/events{/privacy}", "received_events_url": "https://api.github.com/users/arjun-hareendran/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-08-23T09:58:11Z", "updated_at": "2024-09-09T18:24:27Z", "closed_at": "2024-08-26T16:21:25Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Missing Argument in add_dataframe_asset method**\r\nOur test cases are failing from today and was wondering if this is related to the new release. The documentation states the method accepts data frame as an input in the source code as well as documentation. The method definition states otherwise \r\n\r\n- spark_datasource.py\r\n- https://docs.greatexpectations.io/docs/reference/api/datasource/fluent/SparkDatasource_class\r\n\r\n**To Reproduce**\r\nRunning the below code in databricks results in the error \r\n```\r\nimport great_expectations as gx\r\nimport pyspark.sql.functions as F\r\nfrom great_expectations.checkpoint import Checkpoint\r\n\r\n# Input table details\r\nREGION = \"zzzz\"\r\nDATABASE_NAME = \"yyyy\"\r\nTABLE = \"xxx\"\r\nPROCESS_NAME = f\"{DATABASE_NAME.lower()}_{TABLE}\"\r\n\r\n# Data Preparation\r\ntable_to_be_valdiated = spark.table(f\"{DATABASE_NAME}.{TABLE}\")\r\n\r\n\r\n# Generate Context\r\ncontext_root_dir = f\"/zzzzz/{REGION}/{PROCESS_NAME}\"\r\ncontext = gx.get_context(context_root_dir=context_root_dir)\r\n\r\n# Define type of soruce\r\ndataframe_datasource = context.sources.add_or_update_spark(\r\n    name=REGION,\r\n)\r\n\r\n\r\n# Define Assest for Great Expectations\r\ndataframe_asset = dataframe_datasource.add_dataframe_asset(\r\n    name=f\"{PROCESS_NAME}\",\r\n    dataframe=table_to_be_valdiated,\r\n)\r\n```\r\n\r\n**Expected behavior**\r\nAdd Data frame as an argument? \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Databricks Notebook in Azure\r\n - Great Expectations Version: 1.0.0\r\n - Data Source: SparkDataSource\r\n - Cloud environment:  Azure, Databricks\r\n\r\n\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10265/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10265/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10264", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10264/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10264/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10264/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10264", "id": 2482343399, "node_id": "I_kwDOBiS_IM6T9Y3n", "number": 10264, "title": "BaseDataContext is not available in the new release 1.0.0", "user": {"login": "liqi6811", "id": 48280760, "node_id": "MDQ6VXNlcjQ4MjgwNzYw", "avatar_url": "https://avatars.githubusercontent.com/u/48280760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liqi6811", "html_url": "https://github.com/liqi6811", "followers_url": "https://api.github.com/users/liqi6811/followers", "following_url": "https://api.github.com/users/liqi6811/following{/other_user}", "gists_url": "https://api.github.com/users/liqi6811/gists{/gist_id}", "starred_url": "https://api.github.com/users/liqi6811/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liqi6811/subscriptions", "organizations_url": "https://api.github.com/users/liqi6811/orgs", "repos_url": "https://api.github.com/users/liqi6811/repos", "events_url": "https://api.github.com/users/liqi6811/events{/privacy}", "received_events_url": "https://api.github.com/users/liqi6811/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7424477502, "node_id": "LA_kwDOBiS_IM8AAAABuoiJPg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/point-to-docs", "name": "point-to-docs", "color": "7415D5", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-08-23T05:30:55Z", "updated_at": "2024-09-09T18:24:16Z", "closed_at": "2024-08-26T16:30:55Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nOur current code is using BaseDataContext, however, we got import error after this morning release of 1.0.0 version. I tried to use other datacontext, such as AbstractDataContext and getcontext(), but since we are using below two methods within previous BaseDataContext, the new datacontext does not work. \r\n\r\ncontext = BaseDataContext(project_config=MyConfig)\r\ncontext.test_yaml_config(MySparkDSConfig)\r\ncontext.add_datasource(**yaml.load(MySparkDSConfig), verbose=False)\r\n\r\n**To Reproduce**\r\nfrom great_expectations.data_context import BaseDataContext\r\n\r\n**Expected behavior**\r\nHope to find out if BaseDataContext is still available in the new version, if yes, where to import. If no, how to test yaml config for spark datasource and add datasource\r\n", "closed_by": {"login": "adeola-ak", "id": 67931373, "node_id": "MDQ6VXNlcjY3OTMxMzcz", "avatar_url": "https://avatars.githubusercontent.com/u/67931373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeola-ak", "html_url": "https://github.com/adeola-ak", "followers_url": "https://api.github.com/users/adeola-ak/followers", "following_url": "https://api.github.com/users/adeola-ak/following{/other_user}", "gists_url": "https://api.github.com/users/adeola-ak/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeola-ak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeola-ak/subscriptions", "organizations_url": "https://api.github.com/users/adeola-ak/orgs", "repos_url": "https://api.github.com/users/adeola-ak/repos", "events_url": "https://api.github.com/users/adeola-ak/events{/privacy}", "received_events_url": "https://api.github.com/users/adeola-ak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10264/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10264/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10233", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10233/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10233/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10233/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10233", "id": 2473636662, "node_id": "I_kwDOBiS_IM6TcLM2", "number": 10233, "title": "Dev container - You'll need a new app to open this vscode-remote link", "user": {"login": "ai-learner-00", "id": 158079614, "node_id": "U_kgDOCWwafg", "avatar_url": "https://avatars.githubusercontent.com/u/158079614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ai-learner-00", "html_url": "https://github.com/ai-learner-00", "followers_url": "https://api.github.com/users/ai-learner-00/followers", "following_url": "https://api.github.com/users/ai-learner-00/following{/other_user}", "gists_url": "https://api.github.com/users/ai-learner-00/gists{/gist_id}", "starred_url": "https://api.github.com/users/ai-learner-00/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ai-learner-00/subscriptions", "organizations_url": "https://api.github.com/users/ai-learner-00/orgs", "repos_url": "https://api.github.com/users/ai-learner-00/repos", "events_url": "https://api.github.com/users/ai-learner-00/events{/privacy}", "received_events_url": "https://api.github.com/users/ai-learner-00/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-08-19T15:27:45Z", "updated_at": "2024-08-23T00:55:27Z", "closed_at": "2024-08-23T00:55:27Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am having the same issue as #8590. The line `context.view_validation_result(checkpoint_result)` from the quickstart doesn't work on Windows. I tried creating a dev container, but I am not able to open the link.\r\n\r\n![image](https://github.com/user-attachments/assets/e34798d4-2814-41cd-868d-11b9a0b8d293)\r\n\r\n**To Reproduce**\r\n[quickstart.zip](https://github.com/user-attachments/files/16662236/quickstart.zip)\r\nI am running the code from the [Quickstart](https://docs.greatexpectations.io/docs/oss/tutorials/quickstart/) inside a dev container. I attached above the files needed to create the container. \r\n1. Open the folder in vscode\r\n2. Reopen in dev container (docker needs to be installed)\r\n3. Run the `_experiments/docs/quickstart.ipynb` file\r\n\r\n**Expected behavior**\r\nI was expecting the link to be opened. In the context of servers, I know that vscode automatically forwards the port, but maybe it is different for static files. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.18.19\r\n - Data Source: Pandas\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nI am developing on Windows and I am wondering how to make great_expectations work.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10233/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10231", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10231/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10231/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10231/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10231", "id": 2473289020, "node_id": "I_kwDOBiS_IM6Ta2U8", "number": 10231, "title": "Expectations execute more than once, result is slow in airflow and unusual errror about env variable which is present", "user": {"login": "cedric-ejara", "id": 131764205, "node_id": "U_kgDOB9qP7Q", "avatar_url": "https://avatars.githubusercontent.com/u/131764205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cedric-ejara", "html_url": "https://github.com/cedric-ejara", "followers_url": "https://api.github.com/users/cedric-ejara/followers", "following_url": "https://api.github.com/users/cedric-ejara/following{/other_user}", "gists_url": "https://api.github.com/users/cedric-ejara/gists{/gist_id}", "starred_url": "https://api.github.com/users/cedric-ejara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cedric-ejara/subscriptions", "organizations_url": "https://api.github.com/users/cedric-ejara/orgs", "repos_url": "https://api.github.com/users/cedric-ejara/repos", "events_url": "https://api.github.com/users/cedric-ejara/events{/privacy}", "received_events_url": "https://api.github.com/users/cedric-ejara/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-08-19T12:52:18Z", "updated_at": "2024-08-23T00:55:05Z", "closed_at": "2024-08-23T00:55:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nGreat expectation executives more than once, and getting the results takes like forever, I limited my data row to 10 and it's still takes a good amount of time to execute the second time and return the result.\r\n\r\n**To Reproduce**\r\nI created a class to configure gx called GreatExpectation on airflow and run custom expectations.\r\n![Screenshot from 2024-08-19 13-36-22](https://github.com/user-attachments/assets/8c06ab34-9f97-4737-b0aa-96173690b869)\r\n![Screenshot from 2024-08-19 13-37-03](https://github.com/user-attachments/assets/a298bdc3-b83b-4683-ab71-49800d163549)\r\n![Screenshot from 2024-08-19 13-36-47](https://github.com/user-attachments/assets/48ee320f-f968-427c-b252-f22f412453ff)\r\n\r\nAnd other class for the adding datasources and doing the test call QualityTest\r\n![Screenshot from 2024-08-19 13-38-55](https://github.com/user-attachments/assets/2500d906-468e-4a7a-8b18-4d009dd53eaf)\r\n![Screenshot from 2024-08-19 13-39-16](https://github.com/user-attachments/assets/d8d684d1-7f2f-401e-9ef5-9affeb395b71)\r\n![Screenshot from 2024-08-19 13-39-40](https://github.com/user-attachments/assets/19da5d27-1493-49c2-982f-817ed71cb66a)\r\n\r\nWith a python operator\r\n![Screenshot from 2024-08-19 13-43-34](https://github.com/user-attachments/assets/6724c8e4-897f-470f-ba74-05d3e6fe216c)\r\n\r\n**Here is the output**\r\n![Screenshot from 2024-08-19 13-45-37](https://github.com/user-attachments/assets/39038cc2-af6f-40ff-a3e8-ec22a8ea96f8)\r\n\r\n**From time to time I get this error (No seeing my config variable in the config_variable.yml file which that value is present, sometimes it works other times it doesn't)**\r\n![Screenshot from 2024-08-19 13-46-44](https://github.com/user-attachments/assets/0ccad65c-90b7-4374-9057-581b49a662f7)\r\n\r\n**Expected behavior**\r\nHow can I make the gx execute faster and once and stop this error from occurring with it shouldn't in the 1st place\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Linux]\r\n - Great Expectations Version: [0.18.8]\r\n - Data Source: [Pandas, and Snowflake(Snowpark)]\r\n - Cloud environment: [Airflow 2.9.0]", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10231/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10231/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10163", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10163/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10163/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10163/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10163", "id": 2442484069, "node_id": "I_kwDOBiS_IM6RlVll", "number": 10163, "title": "Allow ruamel.yaml package version > 0.18 to avoid CVE-2019-20478", "user": {"login": "Ravikumarnl", "id": 37181873, "node_id": "MDQ6VXNlcjM3MTgxODcz", "avatar_url": "https://avatars.githubusercontent.com/u/37181873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ravikumarnl", "html_url": "https://github.com/Ravikumarnl", "followers_url": "https://api.github.com/users/Ravikumarnl/followers", "following_url": "https://api.github.com/users/Ravikumarnl/following{/other_user}", "gists_url": "https://api.github.com/users/Ravikumarnl/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ravikumarnl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ravikumarnl/subscriptions", "organizations_url": "https://api.github.com/users/Ravikumarnl/orgs", "repos_url": "https://api.github.com/users/Ravikumarnl/repos", "events_url": "https://api.github.com/users/Ravikumarnl/events{/privacy}", "received_events_url": "https://api.github.com/users/Ravikumarnl/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-08-01T13:33:33Z", "updated_at": "2024-08-23T15:23:12Z", "closed_at": "2024-08-23T14:59:51Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "[This issue](https://nvd.nist.gov/vuln/detail/CVE-2019-20478) appear in all the versions for the ruamel.yaml < 0.18.\r\nthis violations is fixed for the version > 0.18.\r\n\r\n\r\nWould be great if greatexpectation tool is adjusted to use ruamel.yaml package version > 0.18 to get rid of CVE error!\r\n\r\nThanks!\r\n\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10163/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10163/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10162", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10162/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10162/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10162/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10162", "id": 2442380989, "node_id": "I_kwDOBiS_IM6Rk8a9", "number": 10162, "title": "Documentation \"Use Great Expectations with Amazon Web Services using Athena\" example has wrong Python syntax", "user": {"login": "avazhnov-twilio", "id": 163842046, "node_id": "U_kgDOCcQH_g", "avatar_url": "https://avatars.githubusercontent.com/u/163842046?v=4", "gravatar_id": "", "url": "https://api.github.com/users/avazhnov-twilio", "html_url": "https://github.com/avazhnov-twilio", "followers_url": "https://api.github.com/users/avazhnov-twilio/followers", "following_url": "https://api.github.com/users/avazhnov-twilio/following{/other_user}", "gists_url": "https://api.github.com/users/avazhnov-twilio/gists{/gist_id}", "starred_url": "https://api.github.com/users/avazhnov-twilio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/avazhnov-twilio/subscriptions", "organizations_url": "https://api.github.com/users/avazhnov-twilio/orgs", "repos_url": "https://api.github.com/users/avazhnov-twilio/repos", "events_url": "https://api.github.com/users/avazhnov-twilio/events{/privacy}", "received_events_url": "https://api.github.com/users/avazhnov-twilio/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-08-01T12:52:24Z", "updated_at": "2024-08-23T00:54:41Z", "closed_at": "2024-08-23T00:54:41Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nThis Python code example has wrong syntax:\r\n\r\n```python\r\nathena_source: SQLDatasource = context.sources.add_or_update_sql(\r\n    \"my_awsathena_datasource\", connection_string=connection_string\r\n)\r\nathena_table = athena_source.add_table_asset(\"taxitable\", table_name=\"taxitable\")\r\n\r\n\r\nbatch_request = athena_table.build_batch_request()\r\n```\r\n\r\n> E0602: Undefined variable 'SQLDatasource' (undefined-variable)\r\n\r\nURL: https://docs.greatexpectations.io/docs/oss/deployment_patterns/how_to_use_gx_with_aws/how_to_use_gx_with_aws_using_athena/#connect-to-data\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10162/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10161", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10161/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10161/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10161/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10161", "id": 2442250654, "node_id": "I_kwDOBiS_IM6Rkcme", "number": 10161, "title": "GX folder created in the project/context directory when instantiating a Data context based on existing great_expectations.yml", "user": {"login": "aya-elmobayad", "id": 3357525, "node_id": "MDQ6VXNlcjMzNTc1MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/3357525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aya-elmobayad", "html_url": "https://github.com/aya-elmobayad", "followers_url": "https://api.github.com/users/aya-elmobayad/followers", "following_url": "https://api.github.com/users/aya-elmobayad/following{/other_user}", "gists_url": "https://api.github.com/users/aya-elmobayad/gists{/gist_id}", "starred_url": "https://api.github.com/users/aya-elmobayad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aya-elmobayad/subscriptions", "organizations_url": "https://api.github.com/users/aya-elmobayad/orgs", "repos_url": "https://api.github.com/users/aya-elmobayad/repos", "events_url": "https://api.github.com/users/aya-elmobayad/events{/privacy}", "received_events_url": "https://api.github.com/users/aya-elmobayad/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-08-01T11:50:20Z", "updated_at": "2024-08-23T00:54:22Z", "closed_at": "2024-08-23T00:54:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm working with a setup where we need to have multiple GX context directories for different usecases. \r\n\r\n<pre>\r\n\u2514\u2500\u2500 great_expectations\r\n    \u2514\u2500\u2500 use_case_1\r\n        \u2514\u2500\u2500 great_expectations.yml\r\n    \u2514\u2500\u2500 use_case_1\r\n        \u2514\u2500\u2500 great_expectations.yml\r\n</pre>\r\n\r\nBecause we need maximum configurability, I write the data configs in the great_expectations.yml via a script and rely on `DataContext(context_root_dir=context_dir)` or `gx.get_context(context_root_dir=context_dir)` to instantiate the data context. \r\nHowever, I\u2019ve been noticing lately (after switching from version 0.15.50 to 0.18.10) that doing so creates yet another directory named \"gx\", which isn't actually used as an active data context since all the artifacts are created the respective directories we have set up. \r\n\r\nI don\u2019t understand why this is occurring, any guidance would be appreciated.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10161/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10153", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10153/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10153/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10153/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10153", "id": 2438420025, "node_id": "I_kwDOBiS_IM6RV1Y5", "number": 10153, "title": "Bigquery Table validation based on user managed client connections", "user": {"login": "viditjain88", "id": 133728968, "node_id": "U_kgDOB_iKyA", "avatar_url": "https://avatars.githubusercontent.com/u/133728968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viditjain88", "html_url": "https://github.com/viditjain88", "followers_url": "https://api.github.com/users/viditjain88/followers", "following_url": "https://api.github.com/users/viditjain88/following{/other_user}", "gists_url": "https://api.github.com/users/viditjain88/gists{/gist_id}", "starred_url": "https://api.github.com/users/viditjain88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viditjain88/subscriptions", "organizations_url": "https://api.github.com/users/viditjain88/orgs", "repos_url": "https://api.github.com/users/viditjain88/repos", "events_url": "https://api.github.com/users/viditjain88/events{/privacy}", "received_events_url": "https://api.github.com/users/viditjain88/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-30T18:19:39Z", "updated_at": "2024-08-23T00:54:05Z", "closed_at": "2024-08-23T00:54:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nI have to perform bigquery table validation using sqlachemy and sqlachemy_bigquery using custion client connection to connect to bigquery api\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\nI have different compute project that needs to run the validation on bigquery table which is stored in in different project.\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\ntrying to pass before code but it didn't work still the  auto generated validation query still trying to run where data stored.\r\n  bigquery_datasource = \"my_bigquery_datasource\"\r\n  example_yaml = f\"\"\"\r\n  name: {bigquery_datasource}\r\n  class_name: Datasource\r\n  execution_engine:\r\n    class_name: SqlAlchemyExecutionEngine\r\n    connection_string: {connection_string}\r\n    query_project: {compute_project}\r\n**Additional context**\r\nAdd any other context, screenshots, or code samples about the feature request here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10153/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10153/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10151", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10151/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10151/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10151/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10151", "id": 2438286535, "node_id": "I_kwDOBiS_IM6RVUzH", "number": 10151, "title": "GX checkpoint processing in Spark appears to exit without completion - errors are buried in validation results", "user": {"login": "carygeo", "id": 4993745, "node_id": "MDQ6VXNlcjQ5OTM3NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/4993745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carygeo", "html_url": "https://github.com/carygeo", "followers_url": "https://api.github.com/users/carygeo/followers", "following_url": "https://api.github.com/users/carygeo/following{/other_user}", "gists_url": "https://api.github.com/users/carygeo/gists{/gist_id}", "starred_url": "https://api.github.com/users/carygeo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carygeo/subscriptions", "organizations_url": "https://api.github.com/users/carygeo/orgs", "repos_url": "https://api.github.com/users/carygeo/repos", "events_url": "https://api.github.com/users/carygeo/events{/privacy}", "received_events_url": "https://api.github.com/users/carygeo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-30T17:00:07Z", "updated_at": "2024-08-23T00:53:52Z", "closed_at": "2024-08-23T00:53:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen running a checkpoint in spark, when there are errors or issues in a schema GX does not reach 100% progress bar and no logging details are issued in terms of the errors / warnings. To the user it looks as though the checkpoint located my expectations, attempts to run but only makes it rough halfway and exits skipping all spark jobs / stages without any completion or errors.   This is similar to latent bug/defect although intentional in this case since you want the remaining processing to still take place rather than stop all processing.  It is important that the user knows this is happening when monitoring in python.\r\n\r\nThis is key to users who do not only rely on the HTML data docs for feedback but instead parse validation results output to determine success or failure. \r\n\r\n**To Reproduce**\r\nLoad a table that does not have all the columns for the expectation_suite in the checkpoint you intend to run.\r\n\r\nCheckpoint:\r\n```\r\n{\r\n  \"action_list\": [\r\n    {\r\n      \"name\": \"update_data_docs\",\r\n      \"action\": {\r\n        \"class_name\": \"UpdateDataDocsAction\"\r\n      }\r\n    }\r\n  ],\r\n  \"batch_request\": {\r\n    \"datasource_name\": \"memory_datasource\",\r\n    \"data_asset_name\": \"complex\",\r\n    \"options\": {}\r\n  },\r\n  \"class_name\": \"Checkpoint\",\r\n  \"config_version\": 1.0,\r\n  \"evaluation_parameters\": {},\r\n  \"expectation_suite_name\": \"complex\",\r\n  \"module_name\": \"great_expectations.checkpoint\",\r\n  \"name\": \"checkpoint_complex\",\r\n  \"profilers\": [],\r\n  \"run_name_template\": \"%Y%m%d-%H%M%S-my-run-name-template\",\r\n  \"runtime_configuration\": {\r\n    \"result_format\": {\r\n      \"result_format\": \"COMPLETE\",\r\n      \"unexpected_index_column_names\": [\r\n        \"point_id\"\r\n      ],\r\n      \"return_unexpected_index_query\": true\r\n    }\r\n  },\r\n  \"validations\": []\r\n}\r\n```\r\n\r\ngx.yml\r\n```\r\nconfig_version: 3\r\ndatasources: {}\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\nplugins_directory: plugins/\r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\nanonymous_usage_statistics:\r\n  enabled: true\r\n  ```\r\n\r\n**Expected behavior**\r\n- Progress bar should indicate that it finished but with another color perhaps\r\n- Warnings or errors from \u201cexception_info\u201d saved into the validation results from the checkpoint run should be logged as INFO for the user\r\n- Demonstrate what the GX checkpoint run is processing and what issues it encounters.\r\n\r\n**Environment (please complete the following information):**\r\n- Databricks / Spark\r\n - Great Expectations Version:\r\nimport great_expectations as ge\r\nprint(ge.version)\r\n\u2192 0.18.19\r\n\r\n - Data Source: Delta Tables\r\n - Cloud environment: Databricks\r\n\r\n**Additional context**\r\nIn general, beyond this specific errors described, more logging INFO should help the user know what processing is taking place in the GX checkpoint run step.  This would help people understand performance issues or troubleshooting steps.\r\n\r\nSee --> https://discourse.greatexpectations.io/t/great-expectations-checkpoint-quits-without-error/1815", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10151/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10151/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10143", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10143/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10143/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10143/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10143", "id": 2431610580, "node_id": "I_kwDOBiS_IM6Q727U", "number": 10143, "title": "How to check partial_unexpected_index_list while working with spark_dataframe ", "user": {"login": "Vector303", "id": 154520992, "node_id": "U_kgDOCTXNoA", "avatar_url": "https://avatars.githubusercontent.com/u/154520992?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vector303", "html_url": "https://github.com/Vector303", "followers_url": "https://api.github.com/users/Vector303/followers", "following_url": "https://api.github.com/users/Vector303/following{/other_user}", "gists_url": "https://api.github.com/users/Vector303/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vector303/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vector303/subscriptions", "organizations_url": "https://api.github.com/users/Vector303/orgs", "repos_url": "https://api.github.com/users/Vector303/repos", "events_url": "https://api.github.com/users/Vector303/events{/privacy}", "received_events_url": "https://api.github.com/users/Vector303/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-26T07:29:31Z", "updated_at": "2024-08-23T00:53:36Z", "closed_at": "2024-08-23T00:53:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Using this \r\nvalidator.expect_column_values_to_not_be_null(\r\n    column=\"Age\",result_format=\"COMPLETE\", include_unexpected_rows=True)\r\nthe above outputs as follows\r\n{\r\n  \"success\": false,\r\n  \"result\": {\r\n    \"element_count\": 1002,\r\n    \"unexpected_count\": 102,\r\n    \"unexpected_percent\": 10.179640718562874,\r\n    \"partial_unexpected_list\": [\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null,\r\n      null\r\n    ],\r\n    \"partial_unexpected_counts\": [\r\n      {\r\n        \"value\": null,\r\n        \"count\": 102\r\n      }\r\n      \r\n      But doesn't give us the index names, to further filter out validated data \r\n    \r\n    ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10143/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10143/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10132", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10132/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10132/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10132/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10132", "id": 2422754018, "node_id": "I_kwDOBiS_IM6QaEri", "number": 10132, "title": "Query containing CTE is not working anymore in get_validator. WITH clause is getting replaced with SELECT", "user": {"login": "yashkasat96", "id": 52992873, "node_id": "MDQ6VXNlcjUyOTkyODcz", "avatar_url": "https://avatars.githubusercontent.com/u/52992873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yashkasat96", "html_url": "https://github.com/yashkasat96", "followers_url": "https://api.github.com/users/yashkasat96/followers", "following_url": "https://api.github.com/users/yashkasat96/following{/other_user}", "gists_url": "https://api.github.com/users/yashkasat96/gists{/gist_id}", "starred_url": "https://api.github.com/users/yashkasat96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yashkasat96/subscriptions", "organizations_url": "https://api.github.com/users/yashkasat96/orgs", "repos_url": "https://api.github.com/users/yashkasat96/repos", "events_url": "https://api.github.com/users/yashkasat96/events{/privacy}", "received_events_url": "https://api.github.com/users/yashkasat96/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-22T12:28:36Z", "updated_at": "2024-08-23T00:53:24Z", "closed_at": "2024-08-23T00:53:24Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI had a validation implemented for comparing two different tables in a SQL query using CTE expression. With version 0.17.9 everything was working but when I updated the great expectation version to 0.18.17, I started getting issues of incorrect SQL query.\r\n\r\n> InvalidRequestException: An error occurred (InvalidRequestException) when calling the StartQueryExecution operation: line 2:24: mismatched input '('. Expecting: <identifier>\r\n\r\nReason for the above failure was because the sql query is getting modified now. The first 6 character of the SQL query is getting modified to SELECT. This is making the query which starts with WITH clause to fail.\r\n\r\nThe issue is happening in the get_validator function, where we are passing the sql query in the batch_request.\r\n\r\nI observed that the above issue is happening because of using selectable in get_batch_data_and_markers function in sqlalchemy_execution_engine.py module.\r\n![Screenshot 2024-07-22 at 5 31 37\u202fPM](https://github.com/user-attachments/assets/13974681-e30f-4948-8d92-921e69e29fa4)\r\n\r\nIf the same query which is written using CTE expression is written using subquery, then the code runs without any issue.\r\n\r\n**To Reproduce**\r\nI cannot provide the file but if there is some more information needed to understand the above issue. I will share more details.\r\n\r\n**Expected behavior**\r\nI am just curious to know if this is an expected behavior or a bug, I mean do we expect some complex query in the get_validator or just a plain select statement.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations 0.18.17\r\n - Data Source: Athena\r\n - Cloud environment: AWS\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10132/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10132/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10113", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10113/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10113/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10113/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10113", "id": 2414023480, "node_id": "I_kwDOBiS_IM6P4xM4", "number": 10113, "title": "Metric Provider Overwrite Warning with Custom Expectations", "user": {"login": "mishbahr", "id": 1264089, "node_id": "MDQ6VXNlcjEyNjQwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/1264089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mishbahr", "html_url": "https://github.com/mishbahr", "followers_url": "https://api.github.com/users/mishbahr/followers", "following_url": "https://api.github.com/users/mishbahr/following{/other_user}", "gists_url": "https://api.github.com/users/mishbahr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mishbahr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mishbahr/subscriptions", "organizations_url": "https://api.github.com/users/mishbahr/orgs", "repos_url": "https://api.github.com/users/mishbahr/repos", "events_url": "https://api.github.com/users/mishbahr/events{/privacy}", "received_events_url": "https://api.github.com/users/mishbahr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-17T16:13:26Z", "updated_at": "2024-07-17T21:39:08Z", "closed_at": "2024-07-17T21:39:08Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Issue: Metric Provider Overwrite Warning with Custom Expectations\r\n\r\n#### Description\r\n\r\nI've created two custom expectations that use the same custom table metric. \r\n\r\nHowever, I'm seeing a warning in the log:\r\n\r\n```\r\nmetric <redacted> is being registered with different metric_provider; overwriting metric_provider\r\n```\r\n\r\n#### Directory Structure\r\n\r\nThe metric definition and the first custom expectation are in one file, while the second custom expectation using the same metric is in a different file.\r\n\r\n```\r\n.\r\n\u251c\u2500\u2500 __init__.py\r\n\u251c\u2500\u2500 module1.py\r\n\u251c\u2500\u2500 module2.py\r\n\u251c\u2500\u2500 expectations\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u251c\u2500\u2500 expect_table_column_to_match_types.py\r\n\u2502   \u2514\u2500\u2500 expect_table_column_to_have_specific_types.py\r\n\u2514\u2500\u2500 main.py\r\n```\r\n\r\n#### Code Details\r\n\r\n**Metric Definition and First Custom Expectation (`expect_table_column_to_match_types.py`):**\r\n\r\n```python\r\nfrom typing import Tuple\r\nfrom great_expectations.execution_engine import PandasExecutionEngine\r\nfrom great_expectations.expectations.metrics import TableMetricProvider, metric_value\r\nfrom great_expectations.expectations.expectation import TableExpectation\r\n\r\n# Metric definition\r\nclass TableColumnTypesMetric(TableMetricProvider):\r\n    metric_name: str = \"table.column.types.metric\"\r\n\r\n    @metric_value(engine=PandasExecutionEngine)\r\n    def _pandas(cls, *args, **kwargs):\r\n        pass\r\n\r\n# First custom expectation using the metric\r\nclass ExpectTableColumnToMatchTypes(TableExpectation):\r\n    metric_dependencies: Tuple[str, ...] = (\"table.column.types.metric\",)\r\n\r\n    def _validate(self, *args, **kwargs):\r\n        return {\r\n            \"success\": True,\r\n            \"result\": {\r\n                # Implementation details\r\n            }\r\n        }\r\n```\r\n\r\n**Second Custom Expectation (`expect_table_column_to_have_specific_types.py`):**\r\n\r\n```python\r\nfrom typing import Tuple\r\nfrom great_expectations.expectations.expectation import TableExpectation\r\n\r\n# Second custom expectation using the same metric\r\nclass ExpectTableColumnToHaveSpecificTypes(TableExpectation):\r\n    metric_dependencies: Tuple[str, ...] = (\"table.column.types.metric\",)\r\n\r\n    def _validate(self, *args, **kwargs):\r\n        return {\r\n            \"success\": True,\r\n            \"result\": {\r\n                # Implementation details\r\n            }\r\n        }\r\n```\r\n\r\n#### Problem\r\n\r\nThe warning suggests that the metric is being registered with a different `metric_provider`, which leads to overwriting the existing `metric_provider`. This happens even though both custom expectations use the same metric.\r\n\r\n#### Request\r\n\r\nI would like to understand why this warning is occurring and how to resolve it so that the metric provider is registered correctly without any overwriting issues.\r\n", "closed_by": {"login": "mishbahr", "id": 1264089, "node_id": "MDQ6VXNlcjEyNjQwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/1264089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mishbahr", "html_url": "https://github.com/mishbahr", "followers_url": "https://api.github.com/users/mishbahr/followers", "following_url": "https://api.github.com/users/mishbahr/following{/other_user}", "gists_url": "https://api.github.com/users/mishbahr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mishbahr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mishbahr/subscriptions", "organizations_url": "https://api.github.com/users/mishbahr/orgs", "repos_url": "https://api.github.com/users/mishbahr/repos", "events_url": "https://api.github.com/users/mishbahr/events{/privacy}", "received_events_url": "https://api.github.com/users/mishbahr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10113/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10098", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10098/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10098/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10098/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10098", "id": 2402986278, "node_id": "I_kwDOBiS_IM6POqkm", "number": 10098, "title": " AttributeError: 'NoneType' object has no attribute 'sc'", "user": {"login": "RONGYM", "id": 130277530, "node_id": "U_kgDOB8Pgmg", "avatar_url": "https://avatars.githubusercontent.com/u/130277530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RONGYM", "html_url": "https://github.com/RONGYM", "followers_url": "https://api.github.com/users/RONGYM/followers", "following_url": "https://api.github.com/users/RONGYM/following{/other_user}", "gists_url": "https://api.github.com/users/RONGYM/gists{/gist_id}", "starred_url": "https://api.github.com/users/RONGYM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RONGYM/subscriptions", "organizations_url": "https://api.github.com/users/RONGYM/orgs", "repos_url": "https://api.github.com/users/RONGYM/repos", "events_url": "https://api.github.com/users/RONGYM/events{/privacy}", "received_events_url": "https://api.github.com/users/RONGYM/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831220927, "node_id": "MDU6TGFiZWwyODMxMjIwOTI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/incomplete-report", "name": "incomplete-report", "color": "CD3237", "default": false, "description": "The report does not conform to the bug report template and/or does not not have sufficient info."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-11T11:51:37Z", "updated_at": "2024-08-23T00:53:08Z", "closed_at": "2024-08-23T00:53:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10098/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10098/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10086", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10086/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10086/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10086/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10086", "id": 2394066380, "node_id": "I_kwDOBiS_IM6Oso3M", "number": 10086, "title": "PostgreSQL Table asset throwing \u201cInvalidExpectationConfigurationError\u201d while validating in azure databricks", "user": {"login": "DineshBaratam-5", "id": 170718340, "node_id": "U_kgDOCiz0hA", "avatar_url": "https://avatars.githubusercontent.com/u/170718340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DineshBaratam-5", "html_url": "https://github.com/DineshBaratam-5", "followers_url": "https://api.github.com/users/DineshBaratam-5/followers", "following_url": "https://api.github.com/users/DineshBaratam-5/following{/other_user}", "gists_url": "https://api.github.com/users/DineshBaratam-5/gists{/gist_id}", "starred_url": "https://api.github.com/users/DineshBaratam-5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DineshBaratam-5/subscriptions", "organizations_url": "https://api.github.com/users/DineshBaratam-5/orgs", "repos_url": "https://api.github.com/users/DineshBaratam-5/repos", "events_url": "https://api.github.com/users/DineshBaratam-5/events{/privacy}", "received_events_url": "https://api.github.com/users/DineshBaratam-5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-07T13:54:34Z", "updated_at": "2024-08-23T00:52:58Z", "closed_at": "2024-08-23T00:52:58Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing Azure databricks and great expectations to perform data testing on PostgreSQL Server currently. Recently I started implementing SQL Data Asset in place of In memory data asset to perform our validations. While using table asset I am getting a new error as ** InvalidExpectationConfigurationError: Metric (\u2018column_values.nonnull.unexpected_count\u2019, \u20188cbdcf4d8ebf45f01f38a392cc8da758\u2019, ()) is not available for validation. **\r\n\r\n\r\n**To Reproduce**\r\nPFB the code snippet I executed in azure databricks cloud environment\r\n\r\n```python\r\ncontextDirecotry = \"/dbfs/great_expectations/\"\r\ncontext = gx.get_context(context_root_dir=contextDirecotry)\r\n\r\nconnection_url = sa.URL.create(\r\n    \"postgresql+psycopg2\",\r\n    username=targetDbUserName,\r\n    password=targetDbPassword,\r\n    host=targetSQLServerName,\r\n    database=targetDataBaseName,\r\n    port=targetSQLPort\r\n)\r\nconnectionString = connection_url.render_as_string(hide_password=False)\r\n\r\ndatasource = context.sources.add_or_update_postgres(name=\"postgresqlDataSource\", connection_string=connectionString)\r\nasset_name = \"ProductAsset\"\r\ndataasset = datasource.add_table_asset(name=asset_name, table_name=targetTableName)\r\n\r\nvalidator.expect_column_values_to_not_be_null(column=\"ProductID\")\r\nvalidator.expect_column_values_to_be_between(column=\"StandardCost\", min_value=0, max_value=100000)\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)`\r\n```\r\n\r\nAfter executing above code everything is working fine till creation of validator and an error is being thrown at the line \"validator.expect_column_values_to_not_be_null(column=\"ProductID\")\". PFB the total error trace.\r\n\r\n`InvalidExpectationConfigurationError: Metric ('column_values.nonnull.unexpected_count', 'fda39409dabeab873ee95301ea648db7', ()) is not available for validation of {\r\n  \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n  \"kwargs\": {\r\n    \"column\": \"ProductID\",\r\n    \"batch_id\": \"postgresqlDataSource-ProductAsset\"\r\n  },\r\n  \"meta\": {}\r\n}. Please check your configuration.\r\n---------------------------------------------------------------------------\r\nInvalidExpectationConfigurationError      Traceback (most recent call last)\r\nFile <command-4169892293888056>, line 1\r\n----> 1 validator.expect_column_values_to_not_be_null(column=\"ProductID\")\r\n      2 validator.expect_column_values_to_be_between(column=\"StandardCost\", min_value=0, max_value=100000)\r\n      3 validator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:590, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    584         validation_result = ExpectationValidationResult(\r\n    585             success=False,\r\n    586             exception_info=exception_info,\r\n    587             expectation_config=configuration,\r\n    588         )\r\n    589     else:\r\n--> 590         raise err\r\n    592 if self._include_rendered_content:\r\n    593     validation_result.render()\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:553, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    549     validation_result = ExpectationValidationResult(\r\n    550         expectation_config=copy.deepcopy(expectation.configuration)\r\n    551     )\r\n    552 else:\r\n--> 553     validation_result = expectation.validate(\r\n    554         validator=self,\r\n    555         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    556         data_context=self._data_context,\r\n    557         runtime_configuration=basic_runtime_configuration,\r\n    558     )\r\n    560 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    561 # saving updating expectation configs to the same suite during validation runs\r\n    562 if self._active_validation is True:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1314, in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1305 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1306     configuration=configuration\r\n   1307 )\r\n   1309 configuration.process_evaluation_parameters(\r\n   1310     evaluation_parameters, interactive_evaluation, data_context\r\n   1311 )\r\n   1312 expectation_validation_result_list: list[\r\n   1313     ExpectationValidationResult\r\n-> 1314 ] = validator.graph_validate(\r\n   1315     configurations=[configuration],\r\n   1316     runtime_configuration=runtime_configuration,\r\n   1317 )\r\n   1318 return expectation_validation_result_list[0]\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:1089, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1082             evrs = self._catch_exceptions_in_failing_expectation_validations(\r\n   1083                 exception_traceback=exception_traceback,\r\n   1084                 exception=err,\r\n   1085                 failing_expectation_configurations=[configuration],\r\n   1086                 evrs=evrs,\r\n   1087             )\r\n   1088         else:\r\n-> 1089             raise err\r\n   1091 return evrs\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:1073, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1070 try:\r\n   1071     runtime_configuration_default = copy.deepcopy(runtime_configuration)\r\n-> 1073     result = configuration.metrics_validate(\r\n   1074         metrics=resolved_metrics,\r\n   1075         execution_engine=self._execution_engine,\r\n   1076         runtime_configuration=runtime_configuration_default,\r\n   1077     )\r\n   1078     evrs.append(result)\r\n   1079 except Exception as err:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/core/expectation_configuration.py:1494, in ExpectationConfiguration.metrics_validate(self, metrics, runtime_configuration, execution_engine, **kwargs)\r\n   1492 expectation_impl: Type[Expectation] = self._get_expectation_impl()\r\n   1493 # noinspection PyCallingNonCallable\r\n-> 1494 return expectation_impl(self).metrics_validate(\r\n   1495     metrics=metrics,\r\n   1496     runtime_configuration=runtime_configuration,\r\n   1497     execution_engine=execution_engine,\r\n   1498 )\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1088, in Expectation.metrics_validate(self, metrics, configuration, runtime_configuration, execution_engine, **kwargs)\r\n   1082 runtime_configuration[\"result_format\"] = validation_dependencies.result_format\r\n   1084 validation_dependencies_metric_configurations: List[\r\n   1085     MetricConfiguration\r\n   1086 ] = validation_dependencies.get_metric_configurations()\r\n-> 1088 _validate_dependencies_against_available_metrics(\r\n   1089     validation_dependencies=validation_dependencies_metric_configurations,\r\n   1090     metrics=metrics,\r\n   1091     configuration=configuration,\r\n   1092 )\r\n   1094 metric_name: str\r\n   1095 metric_configuration: MetricConfiguration\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:3766, in _validate_dependencies_against_available_metrics(validation_dependencies, metrics, configuration)\r\n   3764 for metric_config in validation_dependencies:\r\n   3765     if metric_config.id not in metrics:\r\n-> 3766         raise InvalidExpectationConfigurationError(\r\n   3767             f\"Metric {metric_config.id} is not available for validation of {configuration}. Please check your configuration.\"\r\n   3768         )\r\n\r\nInvalidExpectationConfigurationError: Metric ('column_values.nonnull.unexpected_count', 'fda39409dabeab873ee95301ea648db7', ()) is not available for validation of {\r\n  \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n  \"kwargs\": {\r\n    \"column\": \"ProductID\",\r\n    \"batch_id\": \"postgresqlDataSource-ProductAsset\"\r\n  },\r\n  \"meta\": {}\r\n}. Please check your configuration.`\r\n\r\n\r\n\r\n**Expected behavior**\r\nGx workflow should execute, and the validator should save the expectation suite after validating the given expectation.\r\n\r\n\r\n**Environment: **\r\n- Great Expectations Version: 0.18.13\r\n- Data Source: Azure SQL Server\r\n- Cloud environment: Azure Databricks\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10086/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10086/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10078", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10078/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10078/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10078/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10078", "id": 2386824675, "node_id": "I_kwDOBiS_IM6ORA3j", "number": 10078, "title": "No way to pass reader_options in the fluent method of pandass3datasource", "user": {"login": "Abhipank", "id": 102601915, "node_id": "U_kgDOBh2Uuw", "avatar_url": "https://avatars.githubusercontent.com/u/102601915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Abhipank", "html_url": "https://github.com/Abhipank", "followers_url": "https://api.github.com/users/Abhipank/followers", "following_url": "https://api.github.com/users/Abhipank/following{/other_user}", "gists_url": "https://api.github.com/users/Abhipank/gists{/gist_id}", "starred_url": "https://api.github.com/users/Abhipank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Abhipank/subscriptions", "organizations_url": "https://api.github.com/users/Abhipank/orgs", "repos_url": "https://api.github.com/users/Abhipank/repos", "events_url": "https://api.github.com/users/Abhipank/events{/privacy}", "received_events_url": "https://api.github.com/users/Abhipank/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2571313834, "node_id": "MDU6TGFiZWwyNTcxMzEzODM0", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/as-designed", "name": "as-designed", "color": "8ceab5", "default": false, "description": ""}, {"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}, {"id": 7013958946, "node_id": "LA_kwDOBiS_IM8AAAABohCFIg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/aws", "name": "aws", "color": "B6E959", "default": false, "description": "Related to GX usage with AWS"}, {"id": 7158843995, "node_id": "LA_kwDOBiS_IM8AAAABqrNKWw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/pandas_s3", "name": "pandas_s3", "color": "FFFF00", "default": false, "description": "Related to the S3 pandas filesystem datasource"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-07-02T17:47:58Z", "updated_at": "2024-07-03T17:38:18Z", "closed_at": "2024-07-03T17:38:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Basically in the batch request or runtimebatchrequest , we can pass , reader_options in batch_spec_passthrough .Such a function is not in the following case.\r\n\r\n1. create a s3pandas data source using add_pandas_s3\r\n2. then doing add_json_asset\r\n\r\nIn this steps , where to pass reader_method ?\r\nbasically , I want to pass following :-\r\n```python\r\nbatch_spec_passthrough={\r\n       \"reader_method\": \"read_json\",  \r\n    \"reader_options\": {\r\n          \"lines\": True\r\n        }\r\n```\r\n\r\nThe thing the file which I want to read a file which has many dictionaries(basically json records) separated by \\n .but I cannot achieve it without passing reader_options .\r\n\r\n**To Reproduce**\r\nPlease tell if it is possible , or accept it as a bug\r\n\r\n**Expected behavior**\r\nThere  should be explicit description of such a thing in GX documentation if it is there or say no .\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: macOS\r\n - Great Expectations Version: 0.18\r\n - Data Source: pandass3datasource\r\n - Cloud environment: AWS\r\n\r\n", "closed_by": {"login": "Abhipank", "id": 102601915, "node_id": "U_kgDOBh2Uuw", "avatar_url": "https://avatars.githubusercontent.com/u/102601915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Abhipank", "html_url": "https://github.com/Abhipank", "followers_url": "https://api.github.com/users/Abhipank/followers", "following_url": "https://api.github.com/users/Abhipank/following{/other_user}", "gists_url": "https://api.github.com/users/Abhipank/gists{/gist_id}", "starred_url": "https://api.github.com/users/Abhipank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Abhipank/subscriptions", "organizations_url": "https://api.github.com/users/Abhipank/orgs", "repos_url": "https://api.github.com/users/Abhipank/repos", "events_url": "https://api.github.com/users/Abhipank/events{/privacy}", "received_events_url": "https://api.github.com/users/Abhipank/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10078/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10078/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10074", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10074/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10074/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10074/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10074", "id": 2385063599, "node_id": "I_kwDOBiS_IM6OKS6v", "number": 10074, "title": "Add the ability to specify ExternalId and Tags in the boto3_options of TupleS3StoreBackend", "user": {"login": "rosspb3", "id": 1711606, "node_id": "MDQ6VXNlcjE3MTE2MDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1711606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rosspb3", "html_url": "https://github.com/rosspb3", "followers_url": "https://api.github.com/users/rosspb3/followers", "following_url": "https://api.github.com/users/rosspb3/following{/other_user}", "gists_url": "https://api.github.com/users/rosspb3/gists{/gist_id}", "starred_url": "https://api.github.com/users/rosspb3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rosspb3/subscriptions", "organizations_url": "https://api.github.com/users/rosspb3/orgs", "repos_url": "https://api.github.com/users/rosspb3/repos", "events_url": "https://api.github.com/users/rosspb3/events{/privacy}", "received_events_url": "https://api.github.com/users/rosspb3/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7013958946, "node_id": "LA_kwDOBiS_IM8AAAABohCFIg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/aws", "name": "aws", "color": "B6E959", "default": false, "description": "Related to GX usage with AWS"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-02T02:32:58Z", "updated_at": "2024-08-23T00:52:47Z", "closed_at": "2024-08-23T00:52:47Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\nInability to run Great Expectation with a TupleS3StoreBackend in a cross-account scenario where the role assumed has an AWS policy that restricts role access by ExternalId and Tags.\r\n\r\n**Describe the solution you'd like**\r\nThe ability to specify an ExternalId and Tags when the role is assumed.\r\n\r\n**Describe alternatives you've considered**\r\nA less restrictive policy for assuming the role, or running Great Expectation within the same account.  However, corporate security makes those changes difficult.\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10074/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10074/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10073", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10073/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10073/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10073/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10073", "id": 2384018308, "node_id": "I_kwDOBiS_IM6OGTuE", "number": 10073, "title": "Missing result for \"expect_column_values_to_be_of_type\" in Great expectation result", "user": {"login": "aysegulcayir", "id": 49029525, "node_id": "MDQ6VXNlcjQ5MDI5NTI1", "avatar_url": "https://avatars.githubusercontent.com/u/49029525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aysegulcayir", "html_url": "https://github.com/aysegulcayir", "followers_url": "https://api.github.com/users/aysegulcayir/followers", "following_url": "https://api.github.com/users/aysegulcayir/following{/other_user}", "gists_url": "https://api.github.com/users/aysegulcayir/gists{/gist_id}", "starred_url": "https://api.github.com/users/aysegulcayir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aysegulcayir/subscriptions", "organizations_url": "https://api.github.com/users/aysegulcayir/orgs", "repos_url": "https://api.github.com/users/aysegulcayir/repos", "events_url": "https://api.github.com/users/aysegulcayir/events{/privacy}", "received_events_url": "https://api.github.com/users/aysegulcayir/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-07-01T14:32:31Z", "updated_at": "2024-08-23T00:52:04Z", "closed_at": "2024-08-23T00:52:04Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nwith this  \"rule_name\": \"expect_column_values_to_be_of_type\", I could not get the element_count,partial_unexpected_list, partial_unexpected_counts in results\r\n\r\n**To Reproduce**\r\nthe code is running in DBX\r\n**Expected behavior**\r\nget the element_count,partial_unexpected_list, partial_unexpected_counts in results\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: windows\r\n - Great Expectations Version:0.18.17\r\n - Data Source: Pandas\r\n - Cloud environment: Databricks\r\n\r\n**Additional context**\r\nthis is my rule:\r\n```\r\nrule = {\r\n                        \"rule_name\": \"expect_column_values_to_be_of_type\",\r\n                        \"parameters\": [\r\n                            {\r\n                                \"column\": column,\r\n                                \"type_\": column_type.capitalize() + \"Type\",\r\n                                \"result_format\" : {\"result_format\": \"COMPLETE\"}\r\n                            }\r\n                        ]\r\n                    }\r\n```\r\nbut result is:\r\n```\r\n{\r\n      \"success\": true,\r\n      \"expectation_config\": {\r\n        \"expectation_type\": \"expect_column_values_to_be_of_type\",\r\n        \"kwargs\": {\r\n          \"column\": \"id\",\r\n          \"type_\": \"IntegerType\",\r\n          \"batch_id\": \"my_spark_in_memory_datasource_poc-poc\"\r\n        },\r\n        \"meta\": {}\r\n      },\r\n      \"result\": {\r\n        \"observed_value\": \"IntegerType\"\r\n      },\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"raised_exception\": false,\r\n        \"exception_traceback\": null,\r\n        \"exception_message\": null\r\n      }\r\n    }\r\n```\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10073/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10073/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10058", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10058/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10058/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10058/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10058", "id": 2372359836, "node_id": "I_kwDOBiS_IM6NZ1ac", "number": 10058, "title": "row_condition error in great_expectations for spark ", "user": {"login": "raman0453", "id": 43921486, "node_id": "MDQ6VXNlcjQzOTIxNDg2", "avatar_url": "https://avatars.githubusercontent.com/u/43921486?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raman0453", "html_url": "https://github.com/raman0453", "followers_url": "https://api.github.com/users/raman0453/followers", "following_url": "https://api.github.com/users/raman0453/following{/other_user}", "gists_url": "https://api.github.com/users/raman0453/gists{/gist_id}", "starred_url": "https://api.github.com/users/raman0453/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raman0453/subscriptions", "organizations_url": "https://api.github.com/users/raman0453/orgs", "repos_url": "https://api.github.com/users/raman0453/repos", "events_url": "https://api.github.com/users/raman0453/events{/privacy}", "received_events_url": "https://api.github.com/users/raman0453/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2272329621, "node_id": "MDU6TGFiZWwyMjcyMzI5NjIx", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:spark", "name": "stack:spark", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-06-25T10:50:05Z", "updated_at": "2024-08-23T00:51:53Z", "closed_at": "2024-08-23T00:51:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "\"exception_message\": \"TypeError: SparkDFDataset.expect_column_values_to_be_in_set() got an unexpected keyword argument 'row_condition'\". row_condition is working for pandas but not with spark. In the documentation it is mentioned that 'condition_parser': \"great_expectations__experimental__\" can solve the issue but not working", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10058/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10058/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10056", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10056/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10056/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10056/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10056", "id": 2371051835, "node_id": "I_kwDOBiS_IM6NU2E7", "number": 10056, "title": "FIx/Document Plugins with EphermalDataContext", "user": {"login": "ibbykhazanchi", "id": 65377513, "node_id": "MDQ6VXNlcjY1Mzc3NTEz", "avatar_url": "https://avatars.githubusercontent.com/u/65377513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibbykhazanchi", "html_url": "https://github.com/ibbykhazanchi", "followers_url": "https://api.github.com/users/ibbykhazanchi/followers", "following_url": "https://api.github.com/users/ibbykhazanchi/following{/other_user}", "gists_url": "https://api.github.com/users/ibbykhazanchi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibbykhazanchi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibbykhazanchi/subscriptions", "organizations_url": "https://api.github.com/users/ibbykhazanchi/orgs", "repos_url": "https://api.github.com/users/ibbykhazanchi/repos", "events_url": "https://api.github.com/users/ibbykhazanchi/events{/privacy}", "received_events_url": "https://api.github.com/users/ibbykhazanchi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-06-24T20:39:13Z", "updated_at": "2025-01-23T14:19:22Z", "closed_at": "2024-08-23T00:51:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nI am following the [gx, openlineage integration tutorial](https://docs.greatexpectations.io/docs/oss/guides/validation/validation_actions/how_to_collect_openlineage_metadata_using_a_validation_action/). This tutorial assumes you are using yaml configuration to define your action list, but I am using an ephemeral data context. The way I instantiate my action list is by doing the following:\r\n\r\n```\r\n        return self._context.add_or_update_checkpoint(name=\"checkpoint\", validator=self._validator, \r\n            action_list=[\r\n                {\r\n                    \"name\": \"open_lineage\",\r\n                    \"action\": {\r\n                        \"class_name\": \"OpenLineageValidationAction\",\r\n                        \"module_name\": \"openlineage.common.provider.great_expectations\",\r\n                        \"openlineage_host\": openlineage_host,\r\n                        \"openlineage_namespace\": \"my-namespace\",\r\n                        \"job_name\": \"my-job-name\"\r\n                    },\r\n                }\r\n            ],\r\n        )\r\n```\r\nDuring runtime, the validation fails due to this error:\r\n`'No module named `openlineage.common.provider.great_expectations` could be found in your plugins directory.\\n    - Please verify your plugins directory is configured correctly.\\n    - Please verify you have a module named `openlineage.common.provider.great_expectations` in your plugins directory.\\n`\r\n\r\nI am using an ephemeral data context, and in no shape or form is using plugins documented, so I would not expect to see this error.\r\n\r\n**Describe the solution you'd like**\r\nIf using plugins is mandatory to use the openlineage integration, please document how one can do so if they're using an `ephemeraldatacontext`.\r\n\r\n\r\n**Describe alternatives you've considered**\r\nI have experimented with creating my own plugin folder in my root, populating the folder with the openlineage integration code, and manually specifying my plugin folder like this:\r\n```\r\n        defaults = gx.data_context.types.base.InMemoryStoreBackendDefaults()\r\n        config = gx.data_context.types.base.DataContextConfig(\r\n            anonymous_usage_statistics={\"enabled\": False},\r\n            fluent_datasources={},\r\n            data_docs_sites={},\r\n            store_backend_defaults=defaults,\r\n            plugins_directory=os.path.join(os.getcwd(), \"src/expectations_svc/plugins\")\r\n        )\r\n        self._context = gx.get_context(config)\r\n\r\n```\r\nBut this does not work either. \r\n\r\n**Additional context**\r\nIf any more context is required, I'm happy to provide!\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10056/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10056/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10039", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10039/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10039/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10039/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10039", "id": 2357057469, "node_id": "I_kwDOBiS_IM6Mfde9", "number": 10039, "title": "GX fails with SAP HANA", "user": {"login": "Someone894", "id": 43947920, "node_id": "MDQ6VXNlcjQzOTQ3OTIw", "avatar_url": "https://avatars.githubusercontent.com/u/43947920?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Someone894", "html_url": "https://github.com/Someone894", "followers_url": "https://api.github.com/users/Someone894/followers", "following_url": "https://api.github.com/users/Someone894/following{/other_user}", "gists_url": "https://api.github.com/users/Someone894/gists{/gist_id}", "starred_url": "https://api.github.com/users/Someone894/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Someone894/subscriptions", "organizations_url": "https://api.github.com/users/Someone894/orgs", "repos_url": "https://api.github.com/users/Someone894/repos", "events_url": "https://api.github.com/users/Someone894/events{/privacy}", "received_events_url": "https://api.github.com/users/Someone894/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-06-17T11:03:10Z", "updated_at": "2024-08-23T00:51:30Z", "closed_at": "2024-08-23T00:51:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nCurrently I am testing out how GX could integrate in our existing infrastructure. We store most of oure Bussines Data within the [SAP HANA](https://en.wikipedia.org/wiki/SAP_HANA). Since [GX](https://docs.greatexpectations.io/docs/oss/guides/connecting_to_your_data/fluent/database/connect_sql_source_data) uses SQLAlchemy and its [Dialects](https://docs.sqlalchemy.org/en/20/dialects/index.html#external-dialects) support SAP HANA via [`sqlalchemy-hana`](https://github.com/SAP/sqlalchemy-hana) I hoped that GX could work with SAP HANA too, but it throws an error when I try out the \"[Get started with GX and SQL](https://docs.greatexpectations.io/docs/oss/get_started/get_started_with_gx_and_sql)\" tutorial with the HANA DB. See the details below.\r\n\r\n**To Reproduce**\r\n\r\nHere is the first part of the code till the line that produces the error:\r\n\r\n```Python\r\ncontext = gx.get_context(project_root_dir=to_absolute_path(\"./gx_hana\"))\r\n\r\ndatasource = context.sources.add_or_update_sql(\r\n    name=\"PHT\",\r\n    connection_string=\"hana+hdbcli://${hana_username}:${hana_password}@${hana_host}:${hana_port}\",\r\n)\r\n\r\n# datasource.add_table_asset(name=\"POS\", table_name=\"POS_DATA.RESULT_BY_ID\")\r\ndatasource.add_query_asset(name=\"POS\", query=\"SELECT * FROM POS_DATA.RESULT_BY_ID;\")\r\n\r\nbatch_request = datasource.get_asset(\"POS\").build_batch_request()\r\n\r\nexpectation_suite_name = \"insert_your_expectation_suite_name_here\"\r\ncontext.add_or_update_expectation_suite(expectation_suite_name=expectation_suite_name)\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request,\r\n    expectation_suite_name=expectation_suite_name,\r\n)\r\n\r\nvalidator.expect_column_values_to_not_be_null(column=\"COUNTRY\")\r\n```\r\n\r\nWhere the last line is the problematic one and creates the following error:\r\n\r\n```\r\nvalidator.expect_column_values_to_not_be_null(column=\"COUNTRY\")\r\n2\r\n\r\nCalculating Metrics:   0%|                                                                                                                                                              | 0/8 [00:00<?, ?it/s]\r\nTraceback (most recent call last):\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\r\n    self.dialect.do_execute(\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 924, in do_execute\r\n    cursor.execute(statement, parameters)\r\nhdbcli.dbapi.ProgrammingError: (257, 'sql syntax error: incorrect syntax near \"FROM\": line 2 col 43 (at pos 53)')\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 548, in _process_direct_and_bundled_metric_computation_configurations\r\n    ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\expectations\\metrics\\metric_provider.py\", line 60, in inner_func\r\n    return metric_fn(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\expectations\\metrics\\table_metrics\\table_column_types.py\", line 73, in _sqlalchemy\r\n    return _get_sqlalchemy_column_metadata(execution_engine, batch_data)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\expectations\\metrics\\table_metrics\\table_column_types.py\", line 112, in _get_sqlalchemy_column_metadata\r\n    return get_sqlalchemy_column_metadata(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\expectations\\metrics\\util.py\", line 427, in get_sqlalchemy_column_metadata\r\n    columns = column_reflection_fallback(\r\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\expectations\\metrics\\util.py\", line 679, in column_reflection_fallback\r\n    result_object = connection.execute(query)\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1418, in execute\r\n    return meth(\r\n           ^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\sql\\elements.py\", line 515, in _execute_on_connection\r\n    return connection._execute_clauseelement(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1640, in _execute_clauseelement\r\n    ret = self._execute_context(\r\n          ^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1846, in _execute_context\r\n    return self._exec_single_context(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1986, in _exec_single_context\r\n    self._handle_dbapi_exception(\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 2353, in _handle_dbapi_exception\r\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\base.py\", line 1967, in _exec_single_context\r\n    self.dialect.do_execute(\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\sqlalchemy\\engine\\default.py\", line 924, in do_execute\r\n    cursor.execute(statement, parameters)\r\nsqlalchemy.exc.ProgrammingError: (hdbcli.dbapi.ProgrammingError) (257, 'sql syntax error: incorrect syntax near \"FROM\": line 2 col 43 (at pos 53)')\r\n[SQL: SELECT *\r\nFROM (SELECT * FROM POS_DATA.RESULT_BY_ID FROM DUMMY) AS anon_1\r\nWHERE true = TRUE]\r\n(Background on this error at: https://sqlalche.me/e/20/f405)\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validator.py\", line 590, in inst_expectation\r\n    raise err\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validator.py\", line 553, in inst_expectation\r\n    validation_result = expectation.validate(\r\n                        ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\expectations\\expectation.py\", line 1314, in validate\r\n    ] = validator.graph_validate(\r\n        ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validator.py\", line 1065, in graph_validate\r\n    raise err\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validator.py\", line 1044, in graph_validate\r\n    ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validator.py\", line 1200, in _resolve_suite_level_graph_and_process_metric_evaluation_errors\r\n    ) = self._metrics_calculator.resolve_validation_graph(\r\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\metrics_calculator.py\", line 274, in resolve_validation_graph\r\n    resolved_metrics, aborted_metrics_info = graph.resolve(\r\n                                             ^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 202, in resolve\r\n    aborted_metrics_info: _AbortedMetricsInfoDict = self._resolve(\r\n                                                    ^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 302, in _resolve\r\n    raise err\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 269, in _resolve\r\n    self._execution_engine.resolve_metrics(\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 283, in resolve_metrics\r\n    return self._process_direct_and_bundled_metric_computation_configurations(\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"<PATH>\\great_expectation_test\\.venv\\Lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 552, in _process_direct_and_bundled_metric_computation_configurations\r\n    raise gx_exceptions.MetricResolutionError(\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: (hdbcli.dbapi.ProgrammingError) (257, 'sql syntax error: incorrect syntax near \"FROM\": line 2 col 43 (at pos 53)')\r\n[SQL: SELECT *\r\nFROM (SELECT * FROM POS_DATA.RESULT_BY_ID FROM DUMMY) AS anon_1\r\nWHERE true = TRUE]\r\n(Background on this error at: https://sqlalche.me/e/20/f405)\r\n```\r\n\r\nHere is my `great_expectations.yml` file\r\n\r\n```yml\r\nconfig_version: 3.0\r\n\r\ndatasources: {}\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: false\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: e41e7ae4-9958-4d80-a3b8-8668e6f1a11a\r\n  enabled: false\r\nfluent_datasources:\r\n  PHT:\r\n    type: sql\r\n    assets:\r\n      POS:\r\n        type: query\r\n        order_by: []\r\n        batch_metadata: {}\r\n        query: SELECT * FROM POS_DATA.RESULT_BY_ID;\r\n    connection_string: hana+hdbcli://${hana_username}:${hana_password}@${hana_host}:${hana_port}\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n```\r\n\r\n**Expected behavior**\r\n\r\nI expected GX to be able to check the expectation without crashing.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n- Operating System: Windows 11 (but its only for testing and development, in production i would use docker containers on linux)\r\n- Great Expectations Version: 0.18.15\r\n  - sqlalchemy: 2.0.30\r\n  - sqlalchemy-hana: 2.1.0\r\n- Data Source: SAP HANA\r\n- Cloud environment: None\r\n\r\n**Additional context**\r\n\r\nI also went ahead and tested the SAP HANA connection (and connection string) via\r\nSQLAlchemy directly, which worked great:\r\n\r\n```Python\r\nimport pandas as pd\r\nfrom sqlalchemy import create_engine\r\n\r\nengine = create_engine(\"hana+hdbcli://${hana_username}:${hana_password}@${hana_host}:${hana_port}\", echo=True)\r\npd.read_sql('SELECT * FROM \"POS_DATA\".\"RESULT_BY_ID\";', con=engine)\r\n```\r\n\r\nSo im pretty sure that the SQL code GX is generating clashes with what the SAP HANA is expecting\r\nsince when I run the GX generated code in the SAP HANA natively it also throws the same error:\r\n\r\n```SQL\r\nSELECT * FROM (SELECT * FROM \"POS_DATA\".\"RESULT_BY_ID\" FROM DUMMY) AS anon_1 WHERE true = TRUE;\r\n\r\nCould not execute 'SELECT * FROM (SELECT * FROM \"POS_DATA\".\"RESULT_BY_ID\" FROM DUMMY) AS anon_1 WHERE true = TRUE'\r\nSAP DBTech JDBC: [257]: sql syntax error: incorrect syntax near \"FROM\": line 1 col 56 (at pos 56)\r\n```\r\n\r\nThen I changed the SQL statement to this:\r\n\r\n```SQL\r\nSELECT * FROM (SELECT * FROM \"POS_DATA\".\"RESULT_BY_ID\") AS anon_1 WHERE true = TRUE;\r\n```\r\n\r\nand it worked out fine in the SAP HANA Studio.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10039/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10039/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10017", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10017/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10017/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10017/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10017", "id": 2339651355, "node_id": "I_kwDOBiS_IM6LdD8b", "number": 10017, "title": "how to append multiple validation results in a doc site", "user": {"login": "valentinenkemka", "id": 115810074, "node_id": "U_kgDOBucfGg", "avatar_url": "https://avatars.githubusercontent.com/u/115810074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/valentinenkemka", "html_url": "https://github.com/valentinenkemka", "followers_url": "https://api.github.com/users/valentinenkemka/followers", "following_url": "https://api.github.com/users/valentinenkemka/following{/other_user}", "gists_url": "https://api.github.com/users/valentinenkemka/gists{/gist_id}", "starred_url": "https://api.github.com/users/valentinenkemka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/valentinenkemka/subscriptions", "organizations_url": "https://api.github.com/users/valentinenkemka/orgs", "repos_url": "https://api.github.com/users/valentinenkemka/repos", "events_url": "https://api.github.com/users/valentinenkemka/events{/privacy}", "received_events_url": "https://api.github.com/users/valentinenkemka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-06-07T06:02:43Z", "updated_at": "2024-06-16T02:10:25Z", "closed_at": "2024-06-12T17:07:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am following the instructions in https://legacy.017.docs.greatexpectations.io/docs/0.15.50/deployment_patterns/how_to_use_great_expectations_with_google_cloud_platform_and_bigquery/#part-1-local-configuration-of-great-expectations-that-connects-to-google-cloud-platform\r\n\r\nand used this for doc site configuration\r\n```# Define data docs site configuration\r\ndata_docs_sites = {\r\n    \"doc_wesite\": {\r\n        \"class_name\": \"SiteBuilder\",\r\n        \"store_backend\": {\r\n            \"class_name\": \"TupleGCSStoreBackend\",\r\n            \"project\": project_id,\r\n            \"bucket\": gcs_bucket\r\n        },\r\n        \"site_index_builder\": {\r\n            \"class_name\": \"DefaultSiteIndexBuilder\"\r\n        }\r\n    }\r\n}```\r\n\r\nWith the above settings, I only get  the latest validation results in the doc site in GCS bucket. I would like to write multiple validation results in the same site on GCS", "closed_by": {"login": "valentinenkemka", "id": 115810074, "node_id": "U_kgDOBucfGg", "avatar_url": "https://avatars.githubusercontent.com/u/115810074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/valentinenkemka", "html_url": "https://github.com/valentinenkemka", "followers_url": "https://api.github.com/users/valentinenkemka/followers", "following_url": "https://api.github.com/users/valentinenkemka/following{/other_user}", "gists_url": "https://api.github.com/users/valentinenkemka/gists{/gist_id}", "starred_url": "https://api.github.com/users/valentinenkemka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/valentinenkemka/subscriptions", "organizations_url": "https://api.github.com/users/valentinenkemka/orgs", "repos_url": "https://api.github.com/users/valentinenkemka/repos", "events_url": "https://api.github.com/users/valentinenkemka/events{/privacy}", "received_events_url": "https://api.github.com/users/valentinenkemka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10007", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10007/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10007/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10007/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/10007", "id": 2337666442, "node_id": "I_kwDOBiS_IM6LVfWK", "number": 10007, "title": "KeyError 'table.head' when running `validator.head()`", "user": {"login": "matthiasgomolka", "id": 6517388, "node_id": "MDQ6VXNlcjY1MTczODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6517388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiasgomolka", "html_url": "https://github.com/matthiasgomolka", "followers_url": "https://api.github.com/users/matthiasgomolka/followers", "following_url": "https://api.github.com/users/matthiasgomolka/following{/other_user}", "gists_url": "https://api.github.com/users/matthiasgomolka/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiasgomolka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiasgomolka/subscriptions", "organizations_url": "https://api.github.com/users/matthiasgomolka/orgs", "repos_url": "https://api.github.com/users/matthiasgomolka/repos", "events_url": "https://api.github.com/users/matthiasgomolka/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiasgomolka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-06-06T08:35:22Z", "updated_at": "2024-08-23T00:51:14Z", "closed_at": "2024-08-23T00:51:14Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen I create a validator and run `validator.head()` afterwards, I get the following error:\r\n\r\n> KeyError: ('table.head', 'batch_id=my_batch_id', 'd3dccd4afc8415bdf36b6279ee0a8929')\r\n\r\n**To Reproduce**\r\n```python\r\nimport great_expectations as gx\r\n\r\nconnect_url_impala_ldap = \"impala://$USERNAME:$PW@my.server.de:8443/my_db\"\r\nconnect_args_impala_ldap = {\r\n    \"use_ssl\": True,\r\n    \"auth_mechanism\": \"LDAP\",\r\n    \"use_http_transport\": True,\r\n    \"http_path\": \"my/gateway/impala\",\r\n}\r\n\r\ncontext = gx.get_context()\r\n\r\ndatasource = context.sources.add_or_update_sql(\r\n    name=\"my_ds\",\r\n    connection_string=connect_url_impala_ldap,\r\n    kwargs={\"connect_args\": connect_args_impala_ldap},\r\n)\r\n\r\nasset_name = \"bilanzen\"\r\n\r\nif asset_name not in datasource.get_asset_names():\r\n    datasource.add_table_asset(\r\n        name=asset_name,\r\n        table_name=\"bilanzen\",\r\n        schema_name=\"my_schema_name\"\r\n    )\r\n\r\nvalidator = context.get_validator(\r\n    data_asset_name=asset_name,\r\n    datasource_name=\"my_ds\",\r\n    expectation_suite_name=\"my_expectation_suite\"\r\n)\r\n\r\nvalidator.head()\r\n```\r\n\r\n**Expected behavior**\r\nI would expect to see a preview of the data source. A couple weeks ago this worked with the identical code. I tried going back to the older GX version, but had no success. The only difference is that I only have reading permission this time.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version:0.18.15\r\n - Data Source: generic SQL (connecting to Impala)\r\n - Cloud environment: on-premise Impala\r\n\r\n**Additional context**\r\nSeems similar to #5478 \r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10007/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/10007/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9998", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9998/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9998/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9998/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9998", "id": 2333332233, "node_id": "I_kwDOBiS_IM6LE9MJ", "number": 9998, "title": "No option to select encoding - UnicodeDecodeError", "user": {"login": "IgorShcherbakov", "id": 35165017, "node_id": "MDQ6VXNlcjM1MTY1MDE3", "avatar_url": "https://avatars.githubusercontent.com/u/35165017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IgorShcherbakov", "html_url": "https://github.com/IgorShcherbakov", "followers_url": "https://api.github.com/users/IgorShcherbakov/followers", "following_url": "https://api.github.com/users/IgorShcherbakov/following{/other_user}", "gists_url": "https://api.github.com/users/IgorShcherbakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/IgorShcherbakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IgorShcherbakov/subscriptions", "organizations_url": "https://api.github.com/users/IgorShcherbakov/orgs", "repos_url": "https://api.github.com/users/IgorShcherbakov/repos", "events_url": "https://api.github.com/users/IgorShcherbakov/events{/privacy}", "received_events_url": "https://api.github.com/users/IgorShcherbakov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831220927, "node_id": "MDU6TGFiZWwyODMxMjIwOTI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/incomplete-report", "name": "incomplete-report", "color": "CD3237", "default": false, "description": "The report does not conform to the bug report template and/or does not not have sufficient info."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-06-04T11:53:35Z", "updated_at": "2024-08-23T00:51:04Z", "closed_at": "2024-08-23T00:51:03Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "UnicodeDecodeError: 'charmap' codec can't decode byte 0x98 in position 375: character maps to <undefined>\r\n\r\nIt is not possible to explicitly select the encoding!!!\r\nWhen opening files in the \"expectations\" folder, for example test.json the system value is taken, for example:\r\nwith open(\"gx/expectations/test.json\", \"r\") as file:\r\n...\r\n...\r\n...\r\nencoding='cp1251' will be used, but I would like to use utf-8\r\n\r\n\r\n- Operating System: Windows\r\n- Great Expectations Version: 0.18.8\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9998/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9986", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9986/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9986/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9986/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9986", "id": 2322181222, "node_id": "I_kwDOBiS_IM6Kaaxm", "number": 9986, "title": "Slack notification formatting issues - 0.18.14", "user": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2300926473, "node_id": "MDU6TGFiZWwyMzAwOTI2NDcz", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:slack_notification", "name": "feature:slack_notification", "color": "ebf7f1", "default": false, "description": "Issues and PRs related to the Slack notification feature"}], "state": "closed", "locked": false, "assignee": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2024-05-29T01:46:16Z", "updated_at": "2024-07-19T20:04:01Z", "closed_at": "2024-07-19T18:55:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nI'm just checking in with regards to the new update 0.18.14 on the new slack design. Awesome to have a new look but i would want to check if we could make it better since this is largely used across by everyone\r\n\r\n**Describe the solution you'd like**\r\nhttps://github.com/great-expectations/great_expectations/pull/9952\r\n![image](https://github.com/great-expectations/great_expectations/assets/51312880/55f08cd1-c1ec-4e8c-a3cb-f1ba158ea735)\r\n\r\nI wrote in the feature PR regarding this but not sure if it is 'closed' and won't be looked after. Anyway, my team has been using this slack notification for a long time, it is serving our purpose quite well (except that it had this extra filepath issue, im not sure why is that??) . With the new update, it is not as clear as it was before to show the asset name etc\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context, screenshots, or code samples about the feature request here.\r\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9986/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9986/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9983", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9983/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9983/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9983/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9983", "id": 2321660841, "node_id": "I_kwDOBiS_IM6KYbup", "number": 9983, "title": "String indices must be indices error when calling list_active_stores()", "user": {"login": "stfines-clgx", "id": 58194824, "node_id": "MDQ6VXNlcjU4MTk0ODI0", "avatar_url": "https://avatars.githubusercontent.com/u/58194824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stfines-clgx", "html_url": "https://github.com/stfines-clgx", "followers_url": "https://api.github.com/users/stfines-clgx/followers", "following_url": "https://api.github.com/users/stfines-clgx/following{/other_user}", "gists_url": "https://api.github.com/users/stfines-clgx/gists{/gist_id}", "starred_url": "https://api.github.com/users/stfines-clgx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stfines-clgx/subscriptions", "organizations_url": "https://api.github.com/users/stfines-clgx/orgs", "repos_url": "https://api.github.com/users/stfines-clgx/repos", "events_url": "https://api.github.com/users/stfines-clgx/events{/privacy}", "received_events_url": "https://api.github.com/users/stfines-clgx/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-28T18:16:27Z", "updated_at": "2024-08-23T00:50:55Z", "closed_at": "2024-08-23T00:50:54Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn attempting to create a dynamically provisioned context for a data validation pipeline, I ran across this error:\r\n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"/Users/stfines/Library/Caches/pypoetry/virtualenvs/airflow-great-expectations-dag-yAcbwmv7-py3.11/lib/python3.11/site-packages/IPython/core/interactiveshell.py\", line 3550, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-23-77496d5f7fe7>\", line 1, in <module>\r\n    ctx.list_active_stores()\r\n  File \"/Users/stfines/Library/Caches/pypoetry/virtualenvs/airflow-great-expectations-dag-yAcbwmv7-py3.11/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 1221, in list_active_stores\r\n    self.expectations_store_name,  # type: ignore[list-item]\r\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/stfines/Library/Caches/pypoetry/virtualenvs/airflow-great-expectations-dag-yAcbwmv7-py3.11/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 549, in expectations_store_name\r\n    return self.variables.expectations_store_name\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/stfines/Library/Caches/pypoetry/virtualenvs/airflow-great-expectations-dag-yAcbwmv7-py3.11/lib/python3.11/site-packages/great_expectations/data_context/data_context_variables.py\", line 171, in expectations_store_name\r\n    return self._get(DataContextVariableSchema.EXPECTATIONS_STORE_NAME)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/stfines/Library/Caches/pypoetry/virtualenvs/airflow-great-expectations-dag-yAcbwmv7-py3.11/lib/python3.11/site-packages/great_expectations/data_context/data_context_variables.py\", line 123, in _get\r\n    val: Any = self.config[key]\r\n               ~~~~~~~~~~~^^^^^\r\nTypeError: string indices must be integers, not 'str'\r\n```\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\nCreate an empty file context following the tutorial. \r\n\r\nuse something like this like this to set the active config:\r\n\r\n```python\r\ndef construct_expectation_store(context, project_name, bucket_name):\r\n    context.set_config(\"\"\"\r\n    \"expectations_store_name\": \r\n            \"class_name\": \"ExpectationsStore\"\r\n            \"store_backend\": \r\n                \"class_name\": \"TupleGCSStoreBackend\"\r\n                \"project\": \"{project_name}\"\r\n                \"bucket\": \"{bucket_name}\"\r\n                \"prefix\": \"/expectations\"\r\n        \"validations_store_name\": \r\n            \"class_name\": \"ValidationsStore\"\r\n            \"store_backend\": \r\n                \"class_name\": \"TupleGCSStoreBackend\"\r\n                \"project\": \"{project_name}\"\r\n                \"bucket\": \"{bucket_name}\"\r\n                \"prefix\": \"/validations\"\r\n        \"profiler_store_name\": \r\n            \"class_name\": \"ProfilerStore\"\r\n            \"store_backend\": \r\n                \"class_name\": \"TupleGCSStoreBackend\"\r\n                \"project\": \"{project_name}\"\r\n                \"bucket\": \"{bucket_name}\"\r\n                \"prefix\": \"/profiles\"\r\n        \"evaluation_parameter_store_name\": \r\n            \"class_name\": \"EvaluationParameterStore\"\r\n            \"store_backend\":\r\n                \"class_name\": \"TupleGCSStoreBackend\"\r\n                \"project\": \"{project_name}\" \r\n                \"bucket\": \"{bucket_name}\"\r\n                \"prefix\": \"/evaluation_parameters\"  \r\n        \"checkpoint_store_name\":\r\n            \"class_name\": \"CheckpointStore\"\r\n            \"store_backend\":\r\n                \"class_name\": \"TupleGCSStoreBackend\"\r\n                \"project\": \"{project_name}\"\r\n                \"bucket\": \"{bucket_name}\"\r\n                \"prefix\": \"/checkpoints\"\r\n        \"\"\".format(\r\n            project_name=project_name, bucket_name=bucket_name\r\n        )\r\n```\r\n\r\nthen call `ctx.list_active_stores()`\r\n\r\n**Expected behavior**\r\nI would expect that the store name would be set from the configuration after calling `set_config()`\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n MacOs\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n 18.13\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n N/A\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n N/A\r\n\r\n**Additional context**\r\nThis was replicated using the python 3.11 repl. \r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9983/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9983/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9982", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9982/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9982/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9982/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9982", "id": 2318698703, "node_id": "I_kwDOBiS_IM6KNIjP", "number": 9982, "title": "Error using EXEC operator", "user": {"login": "IgorShcherbakov", "id": 35165017, "node_id": "MDQ6VXNlcjM1MTY1MDE3", "avatar_url": "https://avatars.githubusercontent.com/u/35165017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IgorShcherbakov", "html_url": "https://github.com/IgorShcherbakov", "followers_url": "https://api.github.com/users/IgorShcherbakov/followers", "following_url": "https://api.github.com/users/IgorShcherbakov/following{/other_user}", "gists_url": "https://api.github.com/users/IgorShcherbakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/IgorShcherbakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IgorShcherbakov/subscriptions", "organizations_url": "https://api.github.com/users/IgorShcherbakov/orgs", "repos_url": "https://api.github.com/users/IgorShcherbakov/repos", "events_url": "https://api.github.com/users/IgorShcherbakov/events{/privacy}", "received_events_url": "https://api.github.com/users/IgorShcherbakov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-27T09:30:28Z", "updated_at": "2024-08-23T00:50:43Z", "closed_at": "2024-08-23T00:50:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "For example, there is some kind of dynamic query (for simplicity, here is \u201cSELECT 1 AS Result\u201d):\r\n![\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435](https://github.com/great-expectations/great_expectations/assets/35165017/c7c441a8-e6ff-4a22-846b-5fd29c623c41)\r\n\r\nThe result of the check is an error:\r\n\"Error message\": \"1 validation error for GxConfig\\nfluent_datasources -> assets -> 18 -> QueryAsset -> query\\n  query must start with 'SELECT' followed by a whitespace. (type=value_error)\"\r\n\r\n\r\n- Operating System: Windows\r\n- Great Expectations Version: 0.18.8\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9982/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9982/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9981", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9981/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9981/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9981/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9981", "id": 2316798743, "node_id": "I_kwDOBiS_IM6KF4sX", "number": 9981, "title": "I have problem with conditions", "user": {"login": "SarvarIslamov", "id": 150356066, "node_id": "U_kgDOCPZAYg", "avatar_url": "https://avatars.githubusercontent.com/u/150356066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SarvarIslamov", "html_url": "https://github.com/SarvarIslamov", "followers_url": "https://api.github.com/users/SarvarIslamov/followers", "following_url": "https://api.github.com/users/SarvarIslamov/following{/other_user}", "gists_url": "https://api.github.com/users/SarvarIslamov/gists{/gist_id}", "starred_url": "https://api.github.com/users/SarvarIslamov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SarvarIslamov/subscriptions", "organizations_url": "https://api.github.com/users/SarvarIslamov/orgs", "repos_url": "https://api.github.com/users/SarvarIslamov/repos", "events_url": "https://api.github.com/users/SarvarIslamov/events{/privacy}", "received_events_url": "https://api.github.com/users/SarvarIslamov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-25T07:29:11Z", "updated_at": "2024-08-23T00:50:11Z", "closed_at": "2024-08-23T00:50:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I have problem with conditions I want to check the column 'chat_id' for not being Null if and only if column 'whatsapp_lead_source' = 'openlines'\r\n\r\nI didn't find any information about it\r\nI am using Redshift as connection (datasource)\r\n\r\n```\r\nvalidator.expect_column_values_to_not_be_null(\r\n    column='chat_id',\r\n    condition_parser='great_expectations__sqlalchemy',\r\n    row_condition=\"whatsapp_lead_source = 'openlines'\"\r\n)\r\n```\r\n\r\n\r\nI get error\r\n\r\n---------------------------------------------------------------------------\r\nInvalidExpectationConfigurationError      Traceback (most recent call last)\r\nCell In[99], line 1\r\n----> 1 validator.expect_column_values_to_not_be_null(\r\n      2     column='chat_id',\r\n      3     condition_parser='great_expectations__sqlalchemy',\r\n      4     row_condition=\"whatsapp_lead_source = 'openlines'\"\r\n      5 )\r\n\r\nFile /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/great_expectations/validator/validator.py:484, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    478 def inst_expectation(*args: dict, **kwargs):  # noqa: PLR0912\r\n    479     # this is used so that exceptions are caught appropriately when they occur in expectation config\r\n    480 \r\n    481     # TODO: JPC - THIS LOGIC DOES NOT RESPECT DEFAULTS SET BY USERS IN THE VALIDATOR VS IN THE EXPECTATION\r\n    482     # DEVREL has action to develop a new plan in coordination with MarioPod\r\n--> 484     expectation_kwargs = recursively_convert_to_json_serializable(kwargs)\r\n    486     meta: Optional[dict] = expectation_kwargs.pop(\"meta\", None)\r\n    488     basic_default_expectation_args: dict = {\r\n    489         k: v\r\n    490         for k, v in self.default_expectation_args.items()\r\n    491         if k in Validator.RUNTIME_KEYS\r\n    492     }\r\n\r\nFile /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/great_expectations/data_asset/util.py:100, in recursively_convert_to_json_serializable(test_obj)\r\n     84 def recursively_convert_to_json_serializable(\r\n     85     test_obj: dict,\r\n     86 ) -> dict:\r\n     87     \"\"\"\r\n     88     Helper function to convert an object to one that is serializable\r\n     89 \r\n   (...)\r\n     98 \r\n     99     \"\"\"\r\n--> 100     return _recursively_convert_to_json_serializable(test_obj)\r\n\r\nFile /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/great_expectations/data_asset/util.py:129, in _recursively_convert_to_json_serializable(test_obj)\r\n    127 for key in test_obj:\r\n    128     if key == \"row_condition\" and test_obj[key] is not None:\r\n--> 129         ensure_row_condition_is_correct(test_obj[key])\r\n    130     # A pandas index can be numeric, and a dict key can be numeric, but a json key must be a string\r\n    131     new_dict[str(key)] = recursively_convert_to_json_serializable(test_obj[key])\r\n\r\nFile /Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/site-packages/great_expectations/data_asset/util.py:218, in ensure_row_condition_is_correct(row_condition_string)\r\n    206 \"\"\"Ensure no quote nor \\\\\\\\n are introduced in row_condition string.\r\n    207 \r\n    208 Otherwise it may cause an issue at the reload of the expectation.\r\n   (...)\r\n    215     the pandas query string\r\n    216 \"\"\"\r\n    217 if \"'\" in row_condition_string:\r\n--> 218     raise InvalidExpectationConfigurationError(\r\n    219         f\"{row_condition_string} cannot be serialized to json. \"\r\n    220         \"Do not introduce simple quotes in configuration.\"\r\n    221         \"Use double quotes instead.\"\r\n    222     )\r\n    223 if \"\\n\" in row_condition_string:\r\n    224     raise InvalidExpectationConfigurationError(\r\n    225         f\"{row_condition_string!r} cannot be serialized to json. Do not introduce \\\\n in configuration.\"\r\n    226     )\r\n\r\nInvalidExpectationConfigurationError: whatsapp_lead_source = 'openlines' cannot be serialized to json. Do not introduce simple quotes in configuration.Use double quotes instead.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9981/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9981/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9970", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9970/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9970/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9970/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9970", "id": 2314988484, "node_id": "I_kwDOBiS_IM6J--vE", "number": 9970, "title": "Azure SQL Table Data Asset throwing \u201cNoneType object is not iterable\u201d while validating in azure databricks", "user": {"login": "DineshBaratam-5", "id": 170718340, "node_id": "U_kgDOCiz0hA", "avatar_url": "https://avatars.githubusercontent.com/u/170718340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DineshBaratam-5", "html_url": "https://github.com/DineshBaratam-5", "followers_url": "https://api.github.com/users/DineshBaratam-5/followers", "following_url": "https://api.github.com/users/DineshBaratam-5/following{/other_user}", "gists_url": "https://api.github.com/users/DineshBaratam-5/gists{/gist_id}", "starred_url": "https://api.github.com/users/DineshBaratam-5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DineshBaratam-5/subscriptions", "organizations_url": "https://api.github.com/users/DineshBaratam-5/orgs", "repos_url": "https://api.github.com/users/DineshBaratam-5/repos", "events_url": "https://api.github.com/users/DineshBaratam-5/events{/privacy}", "received_events_url": "https://api.github.com/users/DineshBaratam-5/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6895559346, "node_id": "LA_kwDOBiS_IM8AAAABmwHisg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/azure", "name": "azure", "color": "415BF1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-05-24T10:01:56Z", "updated_at": "2024-08-23T00:49:53Z", "closed_at": "2024-08-23T00:49:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAfter creating data context using dbfs path in azure databricks, connected to azure sql server data source and a table asset. Created a expectation suite and tried to validate the expectations on top of the table asset. Validator is throwing an issue shown as \"NoneType object is not iterable\". I have tried the same in local environment instead of databricks and got the same issue.\r\n\r\n**To Reproduce**\r\nPFB the code snippet I executed in azure databricks cloud environment\r\n\r\n```python\r\nimport great_expectations as gx\r\nfrom great_expectations.checkpoint import Checkpoint\r\nimport pandas as pd\r\nimport sqlalchemy as sa\r\n\r\ncontextDirecotry = \"/dbfs/great_expectations/\"\r\ncontext = gx.get_context(context_root_dir=contextDirecotry)\r\n\r\nconnection_url = sa.URL.create(\r\n    \"mssql+pyodbc\",\r\n    username=targetDbUserName,\r\n    password=targetDbPassword,\r\n    host=targetSQLServerName,\r\n    database=targetDataBaseName,\r\n    query={\"driver\": \"ODBC Driver 18 for SQL Server\"}\r\n)\r\nconnectionString = connection_url.render_as_string(hide_password=False)\r\n\r\ndatasource = context.sources.add_or_update_sql(name=\"TargetSQLDataSource\", connection_string=connectionString, create_temp_table=True)\r\nasset_name = \"ProductAsset\"\r\ndataasset = datasource.add_table_asset(name=asset_name, table_name=targetTableName)\r\nbatch_request = dataasset.build_batch_request()\r\nexpectation_suite_name = \"TargetSQL_expectation_suite\"\r\ncontext.add_or_update_expectation_suite(expectation_suite_name=expectation_suite_name)\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request,\r\n    expectation_suite_name=expectation_suite_name\r\n)\r\nvalidator.expect_column_values_to_not_be_null(column=\"ProductID\")\r\nvalidator.expect_column_values_to_be_between(column=\"StandardCost\", min_value=0, max_value=100000)\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)`\r\n```\r\n\r\nAfter executing above code everything is working fine till creation of validator and an error is being thrown at the line \"**validator.expect_column_values_to_not_be_null(column=\"ProductID\")**\". PFB the total error trace.\r\n\r\n```python\r\nMetricResolutionError: 'NoneType' object is not iterable\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:548, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    545 try:\r\n    546     resolved_metrics[\r\n    547         metric_computation_configuration.metric_configuration.id\r\n--> 548     ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    549         **metric_computation_configuration.metric_provider_kwargs\r\n    550     )\r\n    551 except Exception as e:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py:60, in metric_value.<locals>.wrapper.<locals>.inner_func(*args, **kwargs)\r\n     58 @wraps(metric_fn)\r\n     59 def inner_func(*args: P.args, **kwargs: P.kwargs):\r\n---> 60     return metric_fn(*args, **kwargs)\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/metrics/table_metrics/table_columns.py:43, in TableColumns._sqlalchemy(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, metrics, runtime_configuration)\r\n     42 column_metadata = metrics[\"table.column_types\"]\r\n---> 43 return [col[\"name\"] for col in column_metadata]\r\n\r\nTypeError: 'NoneType' object is not iterable\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nFile <command-1625200873249524>, line 1\r\n----> 1 validator.expect_column_values_to_not_be_null(column=\"ProductID\")\r\n      2 # validator.expect_column_values_to_be_between(column=\"StandardCost\", min_value=0, max_value=100000)\r\n      3 validator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:590, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    584         validation_result = ExpectationValidationResult(\r\n    585             success=False,\r\n    586             exception_info=exception_info,\r\n    587             expectation_config=configuration,\r\n    588         )\r\n    589     else:\r\n--> 590         raise err\r\n    592 if self._include_rendered_content:\r\n    593     validation_result.render()\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:553, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    549     validation_result = ExpectationValidationResult(\r\n    550         expectation_config=copy.deepcopy(expectation.configuration)\r\n    551     )\r\n    552 else:\r\n--> 553     validation_result = expectation.validate(\r\n    554         validator=self,\r\n    555         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    556         data_context=self._data_context,\r\n    557         runtime_configuration=basic_runtime_configuration,\r\n    558     )\r\n    560 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    561 # saving updating expectation configs to the same suite during validation runs\r\n    562 if self._active_validation is True:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1314, in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1305 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1306     configuration=configuration\r\n   1307 )\r\n   1309 configuration.process_evaluation_parameters(\r\n   1310     evaluation_parameters, interactive_evaluation, data_context\r\n   1311 )\r\n   1312 expectation_validation_result_list: list[\r\n   1313     ExpectationValidationResult\r\n-> 1314 ] = validator.graph_validate(\r\n   1315     configurations=[configuration],\r\n   1316     runtime_configuration=runtime_configuration,\r\n   1317 )\r\n   1318 return expectation_validation_result_list[0]\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:1065, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1063         return evrs\r\n   1064     else:\r\n-> 1065         raise err\r\n   1067 configuration: ExpectationConfiguration\r\n   1068 result: ExpectationValidationResult\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:1044, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1037 resolved_metrics: _MetricsDict\r\n   1039 try:\r\n   1040     (\r\n   1041         resolved_metrics,\r\n   1042         evrs,\r\n   1043         processed_configurations,\r\n-> 1044     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n   1045         graph=graph,\r\n   1046         runtime_configuration=runtime_configuration,\r\n   1047         expectation_validation_graphs=expectation_validation_graphs,\r\n   1048         evrs=evrs,\r\n   1049         processed_configurations=processed_configurations,\r\n   1050         show_progress_bars=self._determine_progress_bars(),\r\n   1051     )\r\n   1052 except Exception as err:\r\n   1053     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then\r\n   1054     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n   1055     if catch_exceptions:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validator.py:1200, in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n   1195 resolved_metrics: _MetricsDict\r\n   1196 aborted_metrics_info: _AbortedMetricsInfoDict\r\n   1197 (\r\n   1198     resolved_metrics,\r\n   1199     aborted_metrics_info,\r\n-> 1200 ) = self._metrics_calculator.resolve_validation_graph(\r\n   1201     graph=graph,\r\n   1202     runtime_configuration=runtime_configuration,\r\n   1203     min_graph_edges_pbar_enable=0,\r\n   1204 )\r\n   1206 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.\r\n   1207 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:274, in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    272 resolved_metrics: _MetricsDict\r\n    273 aborted_metrics_info: _AbortedMetricsInfoDict\r\n--> 274 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    275     runtime_configuration=runtime_configuration,\r\n    276     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    277     show_progress_bars=self._show_progress_bars,\r\n    278 )\r\n    279 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:202, in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    199 resolved_metrics: Dict[_MetricKey, MetricValue] = {}\r\n    201 # updates graph with aborted metrics\r\n--> 202 aborted_metrics_info: _AbortedMetricsInfoDict = self._resolve(\r\n    203     metrics=resolved_metrics,\r\n    204     runtime_configuration=runtime_configuration,\r\n    205     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    206     show_progress_bars=show_progress_bars,\r\n    207 )\r\n    209 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:302, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    297                 failed_metric_info[failed_metric.id][\r\n    298                     \"exception_info\"\r\n    299                 ] = exception_info\r\n    301     else:\r\n--> 302         raise err\r\n    303 except Exception as e:\r\n    304     if catch_exceptions:\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:269, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    264         computable_metrics.add(metric)\r\n    266 try:\r\n    267     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.\r\n    268     metrics.update(\r\n--> 269         self._execution_engine.resolve_metrics(\r\n    270             metrics_to_resolve=computable_metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    271             metrics=metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    272             runtime_configuration=runtime_configuration,\r\n    273         )\r\n    274     )\r\n    275     progress_bar.update(len(computable_metrics))\r\n    276     progress_bar.refresh()\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:283, in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    274 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    275 (\r\n    276     metric_fn_direct_configurations,\r\n    277     metric_fn_bundle_configurations,\r\n   (...)\r\n    281     runtime_configuration=runtime_configuration,\r\n    282 )\r\n--> 283 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    284     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    285     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    286 )\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:552, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    546         resolved_metrics[\r\n    547             metric_computation_configuration.metric_configuration.id\r\n    548         ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    549             **metric_computation_configuration.metric_provider_kwargs\r\n    550         )\r\n    551     except Exception as e:\r\n--> 552         raise gx_exceptions.MetricResolutionError(\r\n    553             message=str(e),\r\n    554             failed_metrics=(\r\n    555                 metric_computation_configuration.metric_configuration,\r\n    556             ),\r\n    557         ) from e\r\n    559 try:\r\n    560     # an engine-specific way of computing metrics together\r\n    561     resolved_metric_bundle: Dict[\r\n    562         Tuple[str, str, str], MetricValue\r\n    563     ] = self.resolve_metric_bundle(\r\n    564         metric_fn_bundle=metric_fn_bundle_configurations\r\n    565     )\r\n\r\nMetricResolutionError: 'NoneType' object is not iterable\r\n```\r\n\r\n\r\n**Expected behavior**\r\nGx workflow should execute, and the validator should save the expectation suite after validating the given expectation.\r\n\r\n**Environment:**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.18.13\r\n - Data Source: Azure SQL Server\r\n - Cloud environment: Azure Databricks\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9970/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9970/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9969", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9969/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9969/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9969/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9969", "id": 2314767183, "node_id": "I_kwDOBiS_IM6J-ItP", "number": 9969, "title": "Any sample code available for using profiling in great-expectations 1.0 - pre release?", "user": {"login": "satniks", "id": 54166582, "node_id": "MDQ6VXNlcjU0MTY2NTgy", "avatar_url": "https://avatars.githubusercontent.com/u/54166582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/satniks", "html_url": "https://github.com/satniks", "followers_url": "https://api.github.com/users/satniks/followers", "following_url": "https://api.github.com/users/satniks/following{/other_user}", "gists_url": "https://api.github.com/users/satniks/gists{/gist_id}", "starred_url": "https://api.github.com/users/satniks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/satniks/subscriptions", "organizations_url": "https://api.github.com/users/satniks/orgs", "repos_url": "https://api.github.com/users/satniks/repos", "events_url": "https://api.github.com/users/satniks/events{/privacy}", "received_events_url": "https://api.github.com/users/satniks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-24T08:30:58Z", "updated_at": "2024-08-23T00:49:38Z", "closed_at": "2024-08-23T00:49:38Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "For 0.18.x, we are using UserConfigurableProfiler and data assistants (data_context.assistants.onboarding) to profile sample dataset and generate expectations suite. But I could not find these both in great-expectation 1.0.0a4.\r\n\r\nCan you provide sample code for using profiling in great-expectations 1.0 - pre release?\r\n\r\nI understand that these APIs can change till 1.0 is released, so I will not use it in production, but I want to be ready with our profiling approach.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9969/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9969/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9968", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9968/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9968/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9968/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9968", "id": 2314540640, "node_id": "I_kwDOBiS_IM6J9RZg", "number": 9968, "title": "import great expectation fails on MacOS (M1)", "user": {"login": "Auric-Manteo", "id": 112462529, "node_id": "U_kgDOBrQKwQ", "avatar_url": "https://avatars.githubusercontent.com/u/112462529?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Auric-Manteo", "html_url": "https://github.com/Auric-Manteo", "followers_url": "https://api.github.com/users/Auric-Manteo/followers", "following_url": "https://api.github.com/users/Auric-Manteo/following{/other_user}", "gists_url": "https://api.github.com/users/Auric-Manteo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Auric-Manteo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Auric-Manteo/subscriptions", "organizations_url": "https://api.github.com/users/Auric-Manteo/orgs", "repos_url": "https://api.github.com/users/Auric-Manteo/repos", "events_url": "https://api.github.com/users/Auric-Manteo/events{/privacy}", "received_events_url": "https://api.github.com/users/Auric-Manteo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-24T06:37:44Z", "updated_at": "2024-08-23T00:49:30Z", "closed_at": "2024-08-23T00:49:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nImporting the great expectation module on MacOS fails.\r\n\r\n**To Reproduce**\r\nImport great expectation with `import great_expectation`\r\nStacktrace:\r\n> \r\n>     import great_expectations as ge\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/_init_.py\", line 6, in <module>\r\n>     from great_expectations.data_context.migrator.cloud_migrator import CloudMigrator\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/data_context/_init_.py\", line 1, in <module>\r\n>     from great_expectations.data_context.data_context import (\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/data_context/data_context/_init_.py\", line 1, in <module>\r\n>     from great_expectations.data_context.data_context.abstract_data_context import (\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 61, in <module>\r\n>     from great_expectations.core.datasource_dict import CacheableDatasourceDict\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/core/datasource_dict.py\", line 13, in <module>\r\n>     from great_expectations.datasource.fluent import Datasource as FluentDatasource\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/datasource/fluent/_init_.py\", line 5, in <module>\r\n>     from great_expectations.datasource.fluent.interfaces import (\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/datasource/fluent/interfaces.py\", line 370, in <module>\r\n>     class Datasource(\r\n>   File \"/usr/local/lib/python3.9/site-packages/great_expectations/datasource/fluent/metadatasource.py\", line 32, in _new_\r\n>     cls = super()._new_(meta_cls, cls_name, bases, cls_dict)\r\n>   File \"/usr/local/lib/python3.9/site-packages/pydantic/v1/main.py\", line 178, in _new_\r\n>     annotations = resolve_annotations(namespace.get('_annotations_', {}), namespace.get('_module_', None))\r\n>   File \"/usr/local/lib/python3.9/site-packages/pydantic/v1/typing.py\", line 400, in resolve_annotations\r\n>     value = _eval_type(value, base_globals, None)\r\n>   File \"/usr/local/lib/python3.9/typing.py\", line 292, in _eval_type\r\n>     return t._evaluate(globalns, localns, recursive_guard)\r\n>   File \"/usr/local/lib/python3.9/typing.py\", line 553, in _evaluate\r\n>     type_ = _type_check(\r\n>   File \"/usr/local/lib/python3.9/typing.py\", line 158, in _type_check\r\n>     raise TypeError(f\"{arg} is not valid as type argument\")\r\n> TypeError: typing.ClassVar[typing.Sequence[typing.Type[great_expectations.datasource.fluent.interfaces.DataAsset]]] is not valid as type argument\r\n\r\n\r\n**Expected behavior**\r\nThe import does not raise any error.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.12\r\n - Data Source: -\r\n - Cloud environment: -\r\n\r\n**Additional context**\r\nI get the error when importing the module on MacOS. It works fine on Ubuntu with the exact same subdependencies (I compared the result of pip freeze).\r\n\r\nOutput of pip freeze:\r\n\r\n```\r\nagate==1.7.0\r\nalembic==1.13.1\r\naltair==4.2.2\r\nanyio==4.3.0\r\nargon2-cffi==23.1.0\r\nargon2-cffi-bindings==21.2.0\r\narrow==1.3.0\r\nasn1crypto==1.5.1\r\nasttokens==2.4.1\r\nasync-lru==2.0.4\r\nattrs==23.2.0\r\nBabel==2.15.0\r\nbeautifulsoup4==4.12.3\r\nbleach==6.1.0\r\nboto3==1.26.165\r\nbotocore==1.29.165\r\ncertifi==2024.2.2\r\ncffi==1.16.0\r\ncharset-normalizer==3.3.2\r\nclick==8.1.7\r\ncolorama==0.4.6\r\ncoloredlogs==14.0\r\ncomm==0.2.2\r\ncramjam==2.8.3\r\ncroniter==2.0.5\r\ncryptography==42.0.7\r\ndagster==1.7.2\r\ndagster-dbt==0.23.2\r\ndagster-docker==0.23.2\r\ndagster-pipes==1.7.2\r\ndagster-postgres==0.23.2\r\ndagster-slack==0.23.2\r\ndbt-core==1.5.0\r\ndbt-extractor==0.4.1\r\ndbt-postgres==1.5.0\r\ndbt-redshift==1.5.12\r\ndebugpy==1.8.1\r\ndecorator==5.1.1\r\ndefusedxml==0.7.1\r\ndocker==7.0.0\r\ndocker-image-py==0.1.12\r\ndocstring_parser==0.16\r\nentrypoints==0.4\r\nexceptiongroup==1.2.1\r\nexecuting==2.0.1\r\nfastjsonschema==2.19.1\r\nfastparquet==0.8.3\r\nfqdn==1.5.1\r\nfsspec==2024.5.0\r\nfuture==1.0.0\r\ngreat-expectations==0.18.12\r\ngreenlet==3.0.3\r\ngrpcio==1.63.0\r\ngrpcio-health-checking==1.48.2\r\nh11==0.14.0\r\nhologram==0.0.16\r\nhttpcore==1.0.5\r\nhttpx==0.27.0\r\nhumanfriendly==10.0\r\nidna==3.7\r\nimportlib_metadata==7.1.0\r\nipykernel==6.29.4\r\nipython==8.18.1\r\nipywidgets==8.1.2\r\nisodate==0.6.1\r\nisoduration==20.11.0\r\njedi==0.19.1\r\nJinja2==3.1.2\r\njmespath==1.0.1\r\njson5==0.9.25\r\njsonpatch==1.33\r\njsonpointer==2.4\r\njsonschema==4.22.0\r\njsonschema-specifications==2023.12.1\r\njupyter-events==0.10.0\r\njupyter-lsp==2.2.5\r\njupyter_client==8.6.1\r\njupyter_core==5.7.2\r\njupyter_server==2.14.0\r\njupyter_server_terminals==0.5.3\r\njupyterlab==4.1.8\r\njupyterlab_pygments==0.3.0\r\njupyterlab_server==2.27.1\r\njupyterlab_widgets==3.0.10\r\nleather==0.4.0\r\nLogbook==1.5.3\r\nlxml==5.2.2\r\nmakefun==1.15.2\r\nMako==1.3.5\r\nmarkdown-it-py==3.0.0\r\nMarkupSafe==2.1.5\r\nmarshmallow==3.21.2\r\nmashumaro==3.6\r\nmatplotlib-inline==0.1.7\r\nmdurl==0.1.2\r\nminimal-snowplow-tracker==0.0.2\r\nmistune==3.0.2\r\nmore-itertools==10.2.0\r\nmsgpack==1.0.8\r\nmysql-connector-python==8.0.31\r\nnbclient==0.10.0\r\nnbconvert==7.16.4\r\nnbformat==5.10.4\r\nnest-asyncio==1.6.0\r\nnetworkx==2.8.8\r\nnotebook==7.1.3\r\nnotebook_shim==0.2.4\r\nnumpy==1.26.4\r\norjson==3.10.3\r\noverrides==7.7.0\r\npackaging==24.0\r\npandas==1.3.5\r\npandocfilters==1.5.1\r\nparsedatetime==2.4\r\nparso==0.8.4\r\npathspec==0.11.2\r\npendulum==2.1.2\r\npexpect==4.9.0\r\nplatformdirs==4.2.2\r\nprometheus_client==0.20.0\r\nprompt-toolkit==3.0.43\r\nprotobuf==3.20.1\r\npsutil==5.9.8\r\npsycopg2-binary==2.9.6\r\nptyprocess==0.7.0\r\npure-eval==0.2.2\r\npyarrow==16.0.0\r\npycparser==2.22\r\npydantic==1.10.12\r\nPygments==2.18.0\r\npyOpenSSL==24.1.0\r\npyparsing==3.1.2\r\npython-dateutil==2.8.2\r\npython-dotenv==1.0.1\r\npython-json-logger==2.0.7\r\npython-slugify==8.0.4\r\npytimeparse==1.1.8\r\npytz==2024.1\r\npytzdata==2020.1\r\nPyYAML==6.0.1\r\npyzmq==26.0.3\r\nredshift-connector==2.0.913\r\nreferencing==0.35.1\r\nregex==2024.5.15\r\nrequests==2.31.0\r\nrfc3339-validator==0.1.4\r\nrfc3986-validator==0.1.1\r\nrich==13.7.1\r\nrpds-py==0.18.1\r\nruamel.yaml==0.17.17\r\nruamel.yaml.clib==0.2.8\r\ns3transfer==0.6.2\r\nscipy==1.13.0\r\nscramp==1.4.5\r\nSend2Trash==1.8.3\r\nsh==1.12.14\r\nshellingham==1.5.4\r\nsix==1.16.0\r\nslack_sdk==3.27.2\r\nsniffio==1.3.1\r\nsoupsieve==2.5\r\nSQLAlchemy==2.0.30\r\nsqlglot==23.15.8\r\nsqlglotrs==0.2.5\r\nsqlparse==0.4.3\r\nstack-data==0.6.3\r\nstructlog==24.1.0\r\ntabulate==0.9.0\r\nterminado==0.18.1\r\ntext-unidecode==1.3\r\ntinycss2==1.3.0\r\ntomli==2.0.1\r\ntoolz==0.12.1\r\ntoposort==1.10\r\ntornado==6.4\r\ntqdm==4.66.4\r\ntraitlets==5.14.3\r\ntyper==0.12.3\r\ntypes-python-dateutil==2.9.0.20240316\r\ntyping_extensions==4.11.0\r\ntzlocal==5.2\r\nuniversal_pathlib==0.2.2\r\nuri-template==1.3.0\r\nurllib3==1.26.18\r\nwatchdog==4.0.0\r\nwcwidth==0.2.13\r\nwebcolors==1.13\r\nwebencodings==0.5.1\r\nwebsocket-client==1.8.0\r\nWerkzeug==2.3.8\r\nwidgetsnbextension==4.0.10\r\nzipp==3.18.1\r\n```\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9968/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9968/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9966", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9966/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9966/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9966/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9966", "id": 2314328452, "node_id": "I_kwDOBiS_IM6J8dmE", "number": 9966, "title": "How do we disable uploading data to posthog.greatexpectations.io endpoint in GX 1.0.0a4?", "user": {"login": "satniks", "id": 54166582, "node_id": "MDQ6VXNlcjU0MTY2NTgy", "avatar_url": "https://avatars.githubusercontent.com/u/54166582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/satniks", "html_url": "https://github.com/satniks", "followers_url": "https://api.github.com/users/satniks/followers", "following_url": "https://api.github.com/users/satniks/following{/other_user}", "gists_url": "https://api.github.com/users/satniks/gists{/gist_id}", "starred_url": "https://api.github.com/users/satniks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/satniks/subscriptions", "organizations_url": "https://api.github.com/users/satniks/orgs", "repos_url": "https://api.github.com/users/satniks/repos", "events_url": "https://api.github.com/users/satniks/events{/privacy}", "received_events_url": "https://api.github.com/users/satniks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4340253305, "node_id": "LA_kwDOBiS_IM8AAAABArMCeQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/analytics", "name": "analytics", "color": "4DC689", "default": false, "description": "gx internal analytics"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-24T04:38:17Z", "updated_at": "2024-08-23T00:49:17Z", "closed_at": "2024-08-23T00:49:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am trying great-expectations v1.0.0a4 and while executing my existing v0.18.x based code, I got error due to interface change from 0.18.x to v1.x.\r\n\r\nAttributeError: 'EphemeralDataContext' object has no attribute 'sources'\r\n\r\nBut then I was surprised to see following message at the end.\r\nerror uploading: HTTPSConnectionPool(host='posthog.greatexpectations.io', port=443): Max retries exceeded with url  : /batch/\r\n\r\nHow can we disable uploading data to the posthog endpoint used for analytics? I feel it should be disabled by default.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9966/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9966/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9956", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9956/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9956/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9956/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9956", "id": 2310622052, "node_id": "I_kwDOBiS_IM6JuUtk", "number": 9956, "title": "Can't specify quoting method for CSV files", "user": {"login": "Laekda", "id": 43447007, "node_id": "MDQ6VXNlcjQzNDQ3MDA3", "avatar_url": "https://avatars.githubusercontent.com/u/43447007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Laekda", "html_url": "https://github.com/Laekda", "followers_url": "https://api.github.com/users/Laekda/followers", "following_url": "https://api.github.com/users/Laekda/following{/other_user}", "gists_url": "https://api.github.com/users/Laekda/gists{/gist_id}", "starred_url": "https://api.github.com/users/Laekda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Laekda/subscriptions", "organizations_url": "https://api.github.com/users/Laekda/orgs", "repos_url": "https://api.github.com/users/Laekda/repos", "events_url": "https://api.github.com/users/Laekda/events{/privacy}", "received_events_url": "https://api.github.com/users/Laekda/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-22T14:00:38Z", "updated_at": "2024-08-23T00:42:16Z", "closed_at": "2024-08-23T00:42:16Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing a fluent datasource for CSV files, I can't specify the quoting method used to write the CSV file.\r\nThe program raise a TypeError\r\n\r\n**To Reproduce**\r\nBefore adding the quoting element everything was fine. \r\nSo I think that any checkpoint linked to this datasource should work.\r\nin great_expectations.yml:\r\n```yaml\r\n  fluent_datasources:\r\n    datasource_name:\r\n      type: pandas_filesystem\r\n      assets:\r\n        om:\r\n          type: csv\r\n          batching_regex: om_(?P<number>\\d{2})\\.csv\r\n          quoting: 4\r\n```\r\n\r\n*Error* :\r\n``` \r\nTraceback (most recent call last):\r\n  File \"C:\\path\\to\\project\\cmd\\qdd.py\", line 80, in <module>\r\n    raise(e)\r\n  File \"C:\\path\\to\\project\\cmd\\qdd.py\", line 67, in <module>\r\n    run_checkpoints(context_path)\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\gx_management\\great_expectations\\__init__.py\", line 69, in run_checkpoints\r\n    raise e\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\gx_management\\great_expectations\\__init__.py\", line 61, in run_checkpoints\r\n    res = context.run_checkpoint(checkpoint_name)\r\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\core\\usage_statistics\\usage_statistics.py\", line 266, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 2107, in run_checkpoint\r\n    return self._run_checkpoint(\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 2151, in _run_checkpoint\r\n    result: CheckpointResult = checkpoint.run_with_runtime_args(\r\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\checkpoint\\checkpoint.py\", line 915, in run_with_runtime_args\r\n    return self.run(**checkpoint_run_arguments)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\core\\usage_statistics\\usage_statistics.py\", line 266, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\checkpoint\\checkpoint.py\", line 306, in run\r\n    self._run_validation(\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\checkpoint\\checkpoint.py\", line 481, in _run_validation\r\n    validator: Validator = self._validator or self.data_context.get_validator(\r\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 2374, in get_validator\r\n    self.get_batch_list(\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\core\\usage_statistics\\usage_statistics.py\", line 266, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 2545, in get_batch_list\r\n    return self._get_batch_list(\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 2626, in _get_batch_list\r\n    return datasource.get_batch_list_from_batch_request(batch_request=result)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\datasource\\fluent\\interfaces.py\", line 474, in get_batch_list_from_batch_request\r\n    return data_asset.get_batch_list_from_batch_request(batch_request)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\datasource\\fluent\\file_path_data_asset.py\", line 275, in get_batch_list_from_batch_request\r\n    batch_data, batch_markers = execution_engine.get_batch_data_and_markers(\r\n                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\great_expectations\\execution_engine\\pandas_execution_engine.py\", line 338, in get_batch_data_and_markers\r\n    df = reader_fn(path, **reader_options)\r\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 1026, in read_csv\r\n    return _read(filepath_or_buffer, kwds)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 620, in _read\r\n    parser = TextFileReader(filepath_or_buffer, **kwds)\r\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 1620, in __init__\r\n    self._engine = self._make_engine(f, self.engine)\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\pandas\\io\\parsers\\readers.py\", line 1898, in _make_engine\r\n    return mapping[engine](f, **self.options)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\path\\to\\project\\.venv\\Lib\\site-packages\\pandas\\io\\parsers\\c_parser_wrapper.py\", line 93, in __init__\r\n    self._reader = parsers.TextReader(src, **kwds)\r\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"parsers.pyx\", line 463, in pandas._libs.parsers.TextReader.__cinit__\r\n  File \"parsers.pyx\", line 604, in pandas._libs.parsers.TextReader._set_quoting\r\nTypeError: bad \"quoting\" value\r\n```\r\n\r\n**Expected behavior**\r\nA column with quoted digits in CSV must be seen as a string datatype and not int or float datatype.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows 11\r\n - Great Expectations Version: 0.18.12\r\n - Data Source: Pandas CSV\r\n\r\n**Additional context**\r\nOnly Strings type are quoted and some columns have digits but are expected as strings.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9956/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9956/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9943", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9943/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9943/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9943/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9943", "id": 2302430091, "node_id": "I_kwDOBiS_IM6JPEuL", "number": 9943, "title": "expect_column_values_to_not_be_null duplicates columns in unexpected values query", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-17T10:59:58Z", "updated_at": "2024-08-23T00:42:28Z", "closed_at": "2024-08-23T00:42:28Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nexpect_column_values_to_not_be_null duplicates columns in unexpected values query:\r\n\r\n**To Reproduce**\r\nif you have defined checkpoint like this:\r\na) query as \r\nSelect col1, col2, col3\r\nFROM table1\r\n\r\nb) runtime_configuration\r\n\r\nruntime_configuration: {\r\n  \"result_format\": {\r\n            \"result_format\": \"COMPLETE\",\r\n            \"unexpected_index_column_names\": [\"col1\", \r\n                                                \"col2\", \r\n                                                \"col3\"\r\n                                                ],\r\n            \"return_unexpected_index_query\": True,\r\n            \"partial_unexpected_count\": 20\r\n    }\r\n}\r\n\r\nand expectation expect_column_values_to_not_be_null for col1\r\n\r\nthen you will get this SQL in checkpoint result JSON and DataDocs:\r\n\r\nTo retrieve all unexpected values...\r\nSELECT col1, col2, col3, **col1**\r\nFROM [#gx_temp_123]\r\nWHERE col1 IS NULL;\r\n\r\n- notice 2nd occurrence of col1\r\n\r\n**Expected behavior**\r\nunexpected values query does not duplicate columns:\r\n\r\nSELECT col1, col2, col3\r\nFROM [#gx_temp_123]\r\nWHERE col1 IS NULL;\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux (Ubuntu)\r\n - Great Expectations Version: 0.18.1\r\n - Data Source: MS SQL\r\n - Cloud environment: Local virtual machine \r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9943/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9942", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9942/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9942/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9942/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9942", "id": 2302423625, "node_id": "I_kwDOBiS_IM6JPDJJ", "number": 9942, "title": "return_unexpected_index_query returning broken query, escaping double quotes in result for SparkDFExecutionEngine", "user": {"login": "jyoti-thakkar", "id": 59399922, "node_id": "MDQ6VXNlcjU5Mzk5OTIy", "avatar_url": "https://avatars.githubusercontent.com/u/59399922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyoti-thakkar", "html_url": "https://github.com/jyoti-thakkar", "followers_url": "https://api.github.com/users/jyoti-thakkar/followers", "following_url": "https://api.github.com/users/jyoti-thakkar/following{/other_user}", "gists_url": "https://api.github.com/users/jyoti-thakkar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyoti-thakkar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyoti-thakkar/subscriptions", "organizations_url": "https://api.github.com/users/jyoti-thakkar/orgs", "repos_url": "https://api.github.com/users/jyoti-thakkar/repos", "events_url": "https://api.github.com/users/jyoti-thakkar/events{/privacy}", "received_events_url": "https://api.github.com/users/jyoti-thakkar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-17T10:56:13Z", "updated_at": "2024-08-23T00:42:44Z", "closed_at": "2024-08-23T00:42:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nwe have set result_format as \"COMPLETE\" and return_unexpected_index_query to true, we want to use return_unexpected_index_query to get the error records from dataframe. It seems that it is returning broken query and escaping double quotes. \r\nExample : return unexpected index query by GX : df.filter(F.expr(NOT(city IS NOT NULL)))\r\nworking query : df.filter(F.expr(\"NOT(city IS NOT NULL)\"))\r\n\r\n**To Reproduce**\r\nimport great_expectations as ge\r\nfrom great_expectations.core import ExpectationSuite\r\nfrom great_expectations.core.batch import RuntimeBatchRequest\r\nfrom great_expectations.data_context import BaseDataContext\r\nfrom great_expectations.data_context.types.base import FilesystemStoreBackendDefaults,DataContextConfig, DatasourceConfig\r\n\r\nexpectation_suite_config = {\r\n    \"expectation_suite_name\": \"my_expectation_suite\",\r\n    \"expectations\": [  # List of expectations\r\n        {\r\n            \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n            \"kwargs\": {\r\n                \"column\": \"my_column\",\r\n                \"result_format\": {\"result_format\": \"COMPLETE\"}\r\n\r\n            }\r\n        }\r\n    ]\r\n}\r\n\r\nmy_expectation_suite = ExpectationSuite(**expectation_suite_config)\r\n# Define DataContext configuration\r\ndata_context_config = DataContextConfig(\r\n    plugins_directory=None,\r\n    config_variables_file_path= None,\r\n    datasources={\r\n        \"my_spark_datasource\": DatasourceConfig(\r\n            class_name= \"Datasource\",\r\n            execution_engine={\r\n                \"class_name\": \"SparkDFExecutionEngine\",\r\n                \"force_reuse_spark_context\": True,\r\n\r\n            },\r\n            data_connectors={\r\n                \"spark_runtime_dataconnector\":{\r\n                    \"class_name\": \"RuntimeDataConnector\",\r\n                    \"module_name\":\"great_expectations.datasource.data_connector\",\r\n                    \"batch_identifiers\": [\"batch_name\"]\r\n                },\r\n            },\r\n        )\r\n    },\r\n    store_backend_defaults=FilesystemStoreBackendDefaults(root_directory=\"/\"),\r\n)\r\n\r\n\r\nbatch_request=RuntimeBatchRequest(datasource_name=\"my_spark_datasource\",\r\n                                  data_connector_name=\"spark_runtime_dataconnector\",\r\n                                  data_asset_name=\"my_asset\",\r\n                                  runtime_parameters={\"batch_data\": df},\r\n                                  batch_identifiers={\"batch_name\": \"batch_run\"})\r\n\r\ncontext = ge.get_context(project_config=data_context_config)\r\nbatch_validator = context.get_validator(batch_request=batch_request, expectation_suite=my_expectation_suite)\r\nvalidation_result = batch_validator.validate()\r\nprint(validation_result)\r\n\r\nvalidation_result contains unexpected_index_query value as \"df.filter(F.expr(NOT(city IS NOT NULL)))\"\r\n\r\nwhen i execute this query it is giving error syntax error. Invalid syntax\r\n\r\n**Expected behavior**\r\nExecuting Query should result into getting error records from dataframe\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows] --> Windows\r\n - Great Expectations Version: [e.g. 0.13.2] --> 0.18.13\r\n - Data Source: [e.g. Pandas, Snowflake] --> spark dataframe\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP] --> Databricks\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9942/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9942/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9931", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9931/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9931/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9931/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9931", "id": 2298124680, "node_id": "I_kwDOBiS_IM6I-pmI", "number": 9931, "title": "Indexing error when validating expect_column_pair_values_to_be_in_set", "user": {"login": "Pbrosten", "id": 83575062, "node_id": "MDQ6VXNlcjgzNTc1MDYy", "avatar_url": "https://avatars.githubusercontent.com/u/83575062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Pbrosten", "html_url": "https://github.com/Pbrosten", "followers_url": "https://api.github.com/users/Pbrosten/followers", "following_url": "https://api.github.com/users/Pbrosten/following{/other_user}", "gists_url": "https://api.github.com/users/Pbrosten/gists{/gist_id}", "starred_url": "https://api.github.com/users/Pbrosten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Pbrosten/subscriptions", "organizations_url": "https://api.github.com/users/Pbrosten/orgs", "repos_url": "https://api.github.com/users/Pbrosten/repos", "events_url": "https://api.github.com/users/Pbrosten/events{/privacy}", "received_events_url": "https://api.github.com/users/Pbrosten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-15T14:39:35Z", "updated_at": "2024-08-23T00:42:56Z", "closed_at": "2024-08-23T00:42:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen validating expect_column_pair_values_to_be_in_set on a dataframe with a custom index there is an indexing error which causes the test to be skipped during validation.\r\n\r\n**To Reproduce**\r\nAttached is my yml file along with a notebook which recreates the indexing: \r\n[error_recreation.zip](https://github.com/great-expectations/great_expectations/files/15323132/error_recreation.zip)\r\n\r\n**Expected behavior**\r\nThe expect_column_pair_values_to_be_in_set should be able to run normally even with custom index.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.18.12\r\n - Data Source: Pandas", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9931/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9931/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9926", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9926/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9926/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9926/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9926", "id": 2295322382, "node_id": "I_kwDOBiS_IM6Iz9cO", "number": 9926, "title": "Nested columns on pyspark fail in expectations that use ColumnValueCounts", "user": {"login": "gerileka", "id": 56592646, "node_id": "MDQ6VXNlcjU2NTkyNjQ2", "avatar_url": "https://avatars.githubusercontent.com/u/56592646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gerileka", "html_url": "https://github.com/gerileka", "followers_url": "https://api.github.com/users/gerileka/followers", "following_url": "https://api.github.com/users/gerileka/following{/other_user}", "gists_url": "https://api.github.com/users/gerileka/gists{/gist_id}", "starred_url": "https://api.github.com/users/gerileka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gerileka/subscriptions", "organizations_url": "https://api.github.com/users/gerileka/orgs", "repos_url": "https://api.github.com/users/gerileka/repos", "events_url": "https://api.github.com/users/gerileka/events{/privacy}", "received_events_url": "https://api.github.com/users/gerileka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2272329621, "node_id": "MDU6TGFiZWwyMjcyMzI5NjIx", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:spark", "name": "stack:spark", "color": "c2e0c6", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-14T12:36:09Z", "updated_at": "2024-08-23T00:43:07Z", "closed_at": "2024-08-23T00:43:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWe would like to use expectations for nested columns. However we found out that expectations that use `ColumnValueCounts`, fail due to this [line](https://github.com/great-expectations/great_expectations/blob/f204d6b97339990a928e08f0f4055b16d395fe5b/great_expectations/expectations/metrics/column_aggregate_metrics/column_value_counts.py#L164\r\n). To be more specific is the groupby count that fails. It should be handled how you fixed the line in this [PR](https://github.com/great-expectations/great_expectations/commit/4376467b83c8ebe2b251b08b31c96f04508e9b1c#diff-433def4d1b57f2eab32c3e6e8c101cc93496da0b937a39c783e97ce76b8cbc0cR2457).\r\n\r\nOr even something more easier like: \r\n```python\r\ndf.withColumn(column, F.col(column)).where(F.col(column).isNotNull()).groupBy(column).count()\r\n```\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nfrom pyspark.sql import DataFrame as SparkDataFrame\r\nfrom pyspark.sql import Row, SparkSession\r\nfrom pyspark.sql import functions as F\r\nfrom pyspark.sql.types import StringType, StructField, StructType\r\nimport great_expectations as gx\r\n\r\nspark_session = SparkSession.builder.getOrCreate()\r\n\r\nschema = StructType(\r\n    [\r\n        StructField(\r\n            \"address_information\",\r\n            StructType([StructField(\"city\", StringType(), True)]),\r\n            True,\r\n        )\r\n    ]\r\n)\r\n\r\ndata = [\r\n    Row(\r\n        address_information=Row(\r\n            city=\"paris\",\r\n        ),\r\n    ),\r\n    Row(\r\n        address_information=Row(\r\n            city=\"london\",\r\n        ),\r\n    ),\r\n]\r\n\r\ndataframe = spark_session.createDataFrame(data, schema=schema)\r\n\r\ncontext = gx.get_context()\r\ndatasource = context.sources.add_spark(name=\"orders\")\r\ndata_asset = datasource.add_dataframe_asset(name=\"orders\")\r\nbatch_request = data_asset.build_batch_request(dataframe=dataframe)\r\n# Create expectations\r\ncontext.add_or_update_expectation_suite(\"spark_data_validation\")\r\n# Create a validator\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite_name=\"spark_data_validation\"\r\n)\r\n\r\nvalidator.expect_column_distinct_values_to_be_in_set(\r\n    column=\"address_information.city\", value_set=[\"london\", \"paris\"]\r\n)\r\n```\r\n```shell\r\n---------------------------------------------------------------------------\r\nAnalysisException                         Traceback (most recent call last)\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:548, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    545 try:\r\n    546     resolved_metrics[\r\n    547         metric_computation_configuration.metric_configuration.id\r\n--> 548     ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    549         **metric_computation_configuration.metric_provider_kwargs\r\n    550     )\r\n    551 except Exception as e:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py:50, in metric_value.<locals>.wrapper.<locals>.inner_func(*args, **kwargs)\r\n     48 @wraps(metric_fn)\r\n     49 def inner_func(*args, **kwargs):\r\n---> 50     return metric_fn(*args, **kwargs)\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_aggregate_metrics/column_value_counts.py:163, in ColumnValueCounts._spark(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, **kwargs)\r\n    160 column: str = accessor_domain_kwargs[\"column\"]\r\n    162 value_counts_df: pyspark.DataFrame = (\r\n--> 163     df.select(column).where(F.col(column).isNotNull()).groupBy(column).count()\r\n    164 )\r\n    166 if sort == \"value\":\r\n\r\nFile [/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/sql/group.py:38](https://jupyter.sprockets.cgs-rls.ifsalpha.com/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/sql/group.py#line=37), in dfapi.<locals>._api(self)\r\n     37 name = f.__name__\r\n---> 38 jdf = getattr(self._jgd, name)()\r\n     39 return DataFrame(jdf, self.session)\r\n\r\nFile [/pyenv/versions/3.10.11/lib/python3.10/site-packages/py4j/java_gateway.py:1322](https://jupyter.sprockets.cgs-rls.ifsalpha.com/pyenv/versions/3.10.11/lib/python3.10/site-packages/py4j/java_gateway.py#line=1321), in JavaMember.__call__(self, *args)\r\n   1321 answer = self.gateway_client.send_command(command)\r\n-> 1322 return_value = get_return_value(\r\n   1323     answer, self.gateway_client, self.target_id, self.name)\r\n   1325 for temp_arg in temp_args:\r\n\r\nFile [/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/errors/exceptions/captured.py:185](https://jupyter.sprockets.cgs-rls.ifsalpha.com/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/errors/exceptions/captured.py#line=184), in capture_sql_exception.<locals>.deco(*a, **kw)\r\n    182 if not isinstance(converted, UnknownException):\r\n    183     # Hide where the exception came from that shows a non-Pythonic\r\n    184     # JVM exception message.\r\n--> 185     raise converted from None\r\n    186 else:\r\n\r\nAnalysisException: [UNRESOLVED_COLUMN.WITH_SUGGESTION] A column or function parameter with name `address_information`.`city` cannot be resolved. Did you mean one of the following? [`city`].;\r\n'Aggregate ['address_information.city], ['address_information.city, count(1) AS count#45L]\r\n+- Project [city#40]\r\n   +- Filter isnotnull(address_information#2.city)\r\n      +- Project [address_information#2.city AS city#40, address_information#2]\r\n         +- LogicalRDD [address_information#2], false\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nCell In[3], line 38\r\n     35 # Create a validator\r\n     36 validator = context.get_validator(batch_request=batch_request, expectation_suite_name=\"spark_data_validation\")\r\n---> 38 validator.expect_column_distinct_values_to_be_in_set(column=\"address_information.city\", value_set=[\"london\",\"paris\"])\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:594, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    588         validation_result = ExpectationValidationResult(\r\n    589             success=False,\r\n    590             exception_info=exception_info,\r\n    591             expectation_config=configuration,\r\n    592         )\r\n    593     else:\r\n--> 594         raise err\r\n    596 if self._include_rendered_content:\r\n    597     validation_result.render()\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:557, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    553     validation_result = ExpectationValidationResult(\r\n    554         expectation_config=copy.deepcopy(expectation.configuration)\r\n    555     )\r\n    556 else:\r\n--> 557     validation_result = expectation.validate(\r\n    558         validator=self,\r\n    559         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    560         data_context=self._data_context,\r\n    561         runtime_configuration=basic_runtime_configuration,\r\n    562     )\r\n    564 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    565 # saving updating expectation configs to the same suite during validation runs\r\n    566 if self._active_validation is True:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1276, in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1267 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1268     configuration=configuration\r\n   1269 )\r\n   1271 configuration.process_evaluation_parameters(\r\n   1272     evaluation_parameters, interactive_evaluation, data_context\r\n   1273 )\r\n   1274 expectation_validation_result_list: list[\r\n   1275     ExpectationValidationResult\r\n-> 1276 ] = validator.graph_validate(\r\n   1277     configurations=[configuration],\r\n   1278     runtime_configuration=runtime_configuration,\r\n   1279 )\r\n   1280 return expectation_validation_result_list[0]\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:1069, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1067         return evrs\r\n   1068     else:\r\n-> 1069         raise err\r\n   1071 configuration: ExpectationConfiguration\r\n   1072 result: ExpectationValidationResult\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:1048, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1041 resolved_metrics: _MetricsDict\r\n   1043 try:\r\n   1044     (\r\n   1045         resolved_metrics,\r\n   1046         evrs,\r\n   1047         processed_configurations,\r\n-> 1048     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n   1049         graph=graph,\r\n   1050         runtime_configuration=runtime_configuration,\r\n   1051         expectation_validation_graphs=expectation_validation_graphs,\r\n   1052         evrs=evrs,\r\n   1053         processed_configurations=processed_configurations,\r\n   1054         show_progress_bars=self._determine_progress_bars(),\r\n   1055     )\r\n   1056 except Exception as err:\r\n   1057     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then\r\n   1058     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n   1059     if catch_exceptions:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:1207, in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n   1199 resolved_metrics: _MetricsDict\r\n   1200 aborted_metrics_info: Dict[\r\n   1201     _MetricKey,\r\n   1202     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n   1203 ]\r\n   1204 (\r\n   1205     resolved_metrics,\r\n   1206     aborted_metrics_info,\r\n-> 1207 ) = self._metrics_calculator.resolve_validation_graph(\r\n   1208     graph=graph,\r\n   1209     runtime_configuration=runtime_configuration,\r\n   1210     min_graph_edges_pbar_enable=0,\r\n   1211 )\r\n   1213 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.\r\n   1214 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:287, in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    282 resolved_metrics: _MetricsDict\r\n    283 aborted_metrics_info: Dict[\r\n    284     _MetricKey,\r\n    285     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n    286 ]\r\n--> 287 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    288     runtime_configuration=runtime_configuration,\r\n    289     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    290     show_progress_bars=self._show_progress_bars,\r\n    291 )\r\n    292 return resolved_metrics, aborted_metrics_info\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:209, in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    203 resolved_metrics: Dict[_MetricKey, MetricValue] = {}\r\n    205 # updates graph with aborted metrics\r\n    206 aborted_metrics_info: Dict[\r\n    207     _MetricKey,\r\n    208     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n--> 209 ] = self._resolve(\r\n    210     metrics=resolved_metrics,\r\n    211     runtime_configuration=runtime_configuration,\r\n    212     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    213     show_progress_bars=show_progress_bars,\r\n    214 )\r\n    216 return resolved_metrics, aborted_metrics_info\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:315, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    311                 failed_metric_info[failed_metric.id][\"exception_info\"] = {\r\n    312                     exception_info\r\n    313                 }\r\n    314     else:\r\n--> 315         raise err\r\n    316 except Exception as e:\r\n    317     if catch_exceptions:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:285, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    280         computable_metrics.add(metric)\r\n    282 try:\r\n    283     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.\r\n    284     metrics.update(\r\n--> 285         self._execution_engine.resolve_metrics(\r\n    286             metrics_to_resolve=computable_metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    287             metrics=metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    288             runtime_configuration=runtime_configuration,\r\n    289         )\r\n    290     )\r\n    291     progress_bar.update(len(computable_metrics))\r\n    292     progress_bar.refresh()\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:283, in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    274 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    275 (\r\n    276     metric_fn_direct_configurations,\r\n    277     metric_fn_bundle_configurations,\r\n   (...)\r\n    281     runtime_configuration=runtime_configuration,\r\n    282 )\r\n--> 283 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    284     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    285     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    286 )\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:552, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    546         resolved_metrics[\r\n    547             metric_computation_configuration.metric_configuration.id\r\n    548         ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    549             **metric_computation_configuration.metric_provider_kwargs\r\n    550         )\r\n    551     except Exception as e:\r\n--> 552         raise gx_exceptions.MetricResolutionError(\r\n    553             message=str(e),\r\n    554             failed_metrics=(\r\n    555                 metric_computation_configuration.metric_configuration,\r\n    556             ),\r\n    557         ) from e\r\n    559 try:\r\n    560     # an engine-specific way of computing metrics together\r\n    561     resolved_metric_bundle: Dict[\r\n    562         Tuple[str, str, str], MetricValue\r\n    563     ] = self.resolve_metric_bundle(\r\n    564         metric_fn_bundle=metric_fn_bundle_configurations\r\n    565     )\r\n\r\nMetricResolutionError: [UNRESOLVED_COLUMN.WITH_SUGGESTION] A column or function parameter with name `address_information`.`city` cannot be resolved. Did you mean one of the following? [`city`].;\r\n'Aggregate ['address_information.city], ['address_information.city, count(1) AS count#45L]\r\n+- Project [city#40]\r\n   +- Filter isnotnull(address_information#2.city)\r\n      +- Project [address_information#2.city AS city#40, address_information#2]\r\n         +- LogicalRDD [address_information#2], false---------------------------------------------------------------------------\r\nAnalysisException                         Traceback (most recent call last)\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:548, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    545 try:\r\n    546     resolved_metrics[\r\n    547         metric_computation_configuration.metric_configuration.id\r\n--> 548     ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    549         **metric_computation_configuration.metric_provider_kwargs\r\n    550     )\r\n    551 except Exception as e:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py:50, in metric_value.<locals>.wrapper.<locals>.inner_func(*args, **kwargs)\r\n     48 @wraps(metric_fn)\r\n     49 def inner_func(*args, **kwargs):\r\n---> 50     return metric_fn(*args, **kwargs)\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_aggregate_metrics/column_value_counts.py:163, in ColumnValueCounts._spark(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, **kwargs)\r\n    160 column: str = accessor_domain_kwargs[\"column\"]\r\n    162 value_counts_df: pyspark.DataFrame = (\r\n--> 163     df.select(column).where(F.col(column).isNotNull()).groupBy(column).count()\r\n    164 )\r\n    166 if sort == \"value\":\r\n\r\nFile [/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/sql/group.py:38](https://jupyter.sprockets.cgs-rls.ifsalpha.com/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/sql/group.py#line=37), in dfapi.<locals>._api(self)\r\n     37 name = f.__name__\r\n---> 38 jdf = getattr(self._jgd, name)()\r\n     39 return DataFrame(jdf, self.session)\r\n\r\nFile [/pyenv/versions/3.10.11/lib/python3.10/site-packages/py4j/java_gateway.py:1322](https://jupyter.sprockets.cgs-rls.ifsalpha.com/pyenv/versions/3.10.11/lib/python3.10/site-packages/py4j/java_gateway.py#line=1321), in JavaMember.__call__(self, *args)\r\n   1321 answer = self.gateway_client.send_command(command)\r\n-> 1322 return_value = get_return_value(\r\n   1323     answer, self.gateway_client, self.target_id, self.name)\r\n   1325 for temp_arg in temp_args:\r\n\r\nFile [/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/errors/exceptions/captured.py:185](https://jupyter.sprockets.cgs-rls.ifsalpha.com/pyenv/versions/3.10.11/lib/python3.10/site-packages/pyspark/errors/exceptions/captured.py#line=184), in capture_sql_exception.<locals>.deco(*a, **kw)\r\n    182 if not isinstance(converted, UnknownException):\r\n    183     # Hide where the exception came from that shows a non-Pythonic\r\n    184     # JVM exception message.\r\n--> 185     raise converted from None\r\n    186 else:\r\n\r\nAnalysisException: [UNRESOLVED_COLUMN.WITH_SUGGESTION] A column or function parameter with name `address_information`.`city` cannot be resolved. Did you mean one of the following? [`city`].;\r\n'Aggregate ['address_information.city], ['address_information.city, count(1) AS count#45L]\r\n+- Project [city#40]\r\n   +- Filter isnotnull(address_information#2.city)\r\n      +- Project [address_information#2.city AS city#40, address_information#2]\r\n         +- LogicalRDD [address_information#2], false\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nCell In[3], line 38\r\n     35 # Create a validator\r\n     36 validator = context.get_validator(batch_request=batch_request, expectation_suite_name=\"spark_data_validation\")\r\n---> 38 validator.expect_column_distinct_values_to_be_in_set(column=\"address_information.city\", value_set=[\"london\",\"paris\"])\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:594, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    588         validation_result = ExpectationValidationResult(\r\n    589             success=False,\r\n    590             exception_info=exception_info,\r\n    591             expectation_config=configuration,\r\n    592         )\r\n    593     else:\r\n--> 594         raise err\r\n    596 if self._include_rendered_content:\r\n    597     validation_result.render()\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:557, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    553     validation_result = ExpectationValidationResult(\r\n    554         expectation_config=copy.deepcopy(expectation.configuration)\r\n    555     )\r\n    556 else:\r\n--> 557     validation_result = expectation.validate(\r\n    558         validator=self,\r\n    559         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    560         data_context=self._data_context,\r\n    561         runtime_configuration=basic_runtime_configuration,\r\n    562     )\r\n    564 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    565 # saving updating expectation configs to the same suite during validation runs\r\n    566 if self._active_validation is True:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1276, in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1267 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1268     configuration=configuration\r\n   1269 )\r\n   1271 configuration.process_evaluation_parameters(\r\n   1272     evaluation_parameters, interactive_evaluation, data_context\r\n   1273 )\r\n   1274 expectation_validation_result_list: list[\r\n   1275     ExpectationValidationResult\r\n-> 1276 ] = validator.graph_validate(\r\n   1277     configurations=[configuration],\r\n   1278     runtime_configuration=runtime_configuration,\r\n   1279 )\r\n   1280 return expectation_validation_result_list[0]\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:1069, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1067         return evrs\r\n   1068     else:\r\n-> 1069         raise err\r\n   1071 configuration: ExpectationConfiguration\r\n   1072 result: ExpectationValidationResult\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:1048, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1041 resolved_metrics: _MetricsDict\r\n   1043 try:\r\n   1044     (\r\n   1045         resolved_metrics,\r\n   1046         evrs,\r\n   1047         processed_configurations,\r\n-> 1048     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n   1049         graph=graph,\r\n   1050         runtime_configuration=runtime_configuration,\r\n   1051         expectation_validation_graphs=expectation_validation_graphs,\r\n   1052         evrs=evrs,\r\n   1053         processed_configurations=processed_configurations,\r\n   1054         show_progress_bars=self._determine_progress_bars(),\r\n   1055     )\r\n   1056 except Exception as err:\r\n   1057     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then\r\n   1058     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n   1059     if catch_exceptions:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validator.py:1207, in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n   1199 resolved_metrics: _MetricsDict\r\n   1200 aborted_metrics_info: Dict[\r\n   1201     _MetricKey,\r\n   1202     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n   1203 ]\r\n   1204 (\r\n   1205     resolved_metrics,\r\n   1206     aborted_metrics_info,\r\n-> 1207 ) = self._metrics_calculator.resolve_validation_graph(\r\n   1208     graph=graph,\r\n   1209     runtime_configuration=runtime_configuration,\r\n   1210     min_graph_edges_pbar_enable=0,\r\n   1211 )\r\n   1213 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.\r\n   1214 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:287, in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    282 resolved_metrics: _MetricsDict\r\n    283 aborted_metrics_info: Dict[\r\n    284     _MetricKey,\r\n    285     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n    286 ]\r\n--> 287 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    288     runtime_configuration=runtime_configuration,\r\n    289     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    290     show_progress_bars=self._show_progress_bars,\r\n    291 )\r\n    292 return resolved_metrics, aborted_metrics_info\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:209, in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    203 resolved_metrics: Dict[_MetricKey, MetricValue] = {}\r\n    205 # updates graph with aborted metrics\r\n    206 aborted_metrics_info: Dict[\r\n    207     _MetricKey,\r\n    208     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n--> 209 ] = self._resolve(\r\n    210     metrics=resolved_metrics,\r\n    211     runtime_configuration=runtime_configuration,\r\n    212     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    213     show_progress_bars=show_progress_bars,\r\n    214 )\r\n    216 return resolved_metrics, aborted_metrics_info\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:315, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    311                 failed_metric_info[failed_metric.id][\"exception_info\"] = {\r\n    312                     exception_info\r\n    313                 }\r\n    314     else:\r\n--> 315         raise err\r\n    316 except Exception as e:\r\n    317     if catch_exceptions:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:285, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    280         computable_metrics.add(metric)\r\n    282 try:\r\n    283     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.\r\n    284     metrics.update(\r\n--> 285         self._execution_engine.resolve_metrics(\r\n    286             metrics_to_resolve=computable_metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    287             metrics=metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    288             runtime_configuration=runtime_configuration,\r\n    289         )\r\n    290     )\r\n    291     progress_bar.update(len(computable_metrics))\r\n    292     progress_bar.refresh()\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:283, in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    274 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    275 (\r\n    276     metric_fn_direct_configurations,\r\n    277     metric_fn_bundle_configurations,\r\n   (...)\r\n    281     runtime_configuration=runtime_configuration,\r\n    282 )\r\n--> 283 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    284     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    285     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    286 )\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:552, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    546         resolved_metrics[\r\n    547             metric_computation_configuration.metric_configuration.id\r\n    548         ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    549             **metric_computation_configuration.metric_provider_kwargs\r\n    550         )\r\n    551     except Exception as e:\r\n--> 552         raise gx_exceptions.MetricResolutionError(\r\n    553             message=str(e),\r\n    554             failed_metrics=(\r\n    555                 metric_computation_configuration.metric_configuration,\r\n    556             ),\r\n    557         ) from e\r\n    559 try:\r\n    560     # an engine-specific way of computing metrics together\r\n    561     resolved_metric_bundle: Dict[\r\n    562         Tuple[str, str, str], MetricValue\r\n    563     ] = self.resolve_metric_bundle(\r\n    564         metric_fn_bundle=metric_fn_bundle_configurations\r\n    565     )\r\n\r\nMetricResolutionError: [UNRESOLVED_COLUMN.WITH_SUGGESTION] A column or function parameter with name `address_information`.`city` cannot be resolved. Did you mean one of the following? [`city`].;\r\n'Aggregate ['address_information.city], ['address_information.city, count(1) AS count#45L]\r\n+- Project [city#40]\r\n   +- Filter isnotnull(address_information#2.city)\r\n      +- Project [address_information#2.city AS city#40, address_information#2]\r\n         +- LogicalRDD [address_information#2], false\r\n```\r\n\r\n\r\n**Expected behavior**\r\nIt should be able to handle nested columns for expectations that use `ColumnValueCounts`\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: `Linux`\r\n - Great Expectations Version: `0.17.19`\r\n - Data Source: `Pyspark`\r\n\r\n**Additional context**\r\n`expect_column_values_to_be_between` works just fine with nested columns\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9926/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9926/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9917", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9917/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9917/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9917/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9917", "id": 2291111495, "node_id": "I_kwDOBiS_IM6Ij5ZH", "number": 9917, "title": "unable to limit sql asset to top 1000 rows", "user": {"login": "MarkAngler", "id": 19395192, "node_id": "MDQ6VXNlcjE5Mzk1MTky", "avatar_url": "https://avatars.githubusercontent.com/u/19395192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkAngler", "html_url": "https://github.com/MarkAngler", "followers_url": "https://api.github.com/users/MarkAngler/followers", "following_url": "https://api.github.com/users/MarkAngler/following{/other_user}", "gists_url": "https://api.github.com/users/MarkAngler/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkAngler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkAngler/subscriptions", "organizations_url": "https://api.github.com/users/MarkAngler/orgs", "repos_url": "https://api.github.com/users/MarkAngler/repos", "events_url": "https://api.github.com/users/MarkAngler/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkAngler/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-12T00:32:39Z", "updated_at": "2024-08-23T00:43:16Z", "closed_at": "2024-08-23T00:43:16Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThere does not seem to be any clear way to limit a table asset to a top 1000 rows. \r\n\r\n**To Reproduce**\r\n```python\r\nimport great_expectations as gx\r\nfrom great_expectations.core.batch import BatchRequest\r\nimport sqlalchemy\r\nfrom azure.keyvault.secrets import SecretClient\r\nfrom azure.identity import DefaultAzureCredential\r\nimport os\r\n\r\n# env = os.environ['ENVIRONMENT']\r\nenv = 'Dev'\r\n\r\nif env == 'Prod':\r\n    keyVaultName = \u201csecrets\u201d\r\nelse:\r\n    keyVaultName = \u201csecrets\u201d'\r\n\r\nKVUri = f\"https://{keyVaultName}.vault.azure.net\"\r\n\r\ncredential = DefaultAzureCredential()\r\nclient = SecretClient(vault_url=KVUri, credential=credential)\r\n\r\nusername = 'bankdwadmin'\r\npassword = client.get_secret('bankdw-sql-administrator-login')\r\npassword = password.value\r\n\r\ncontext = gx.get_context()\r\nexpectation_suite_name_prefix = \"ExpectationSuite_BankDW\"\r\nexpectation_suite = context.add_or_update_expectation_suite(expectation_suite_name=expectation_suite_name_prefix)\r\n\r\n\r\ndwConnString = f'mssql+pyodbc://{username}:{password}@servername.database.windows.net:1433/BankDW?driver=ODBC+Driver+17+for+SQL+Server'\r\nBankDwEngine = sqlalchemy.create_engine(dwConnString)\r\ndatasource = context.sources.add_sql(\r\n    name=\"BankDW\", connection_string=dwConnString\r\n)\r\n\r\n\r\n\r\nasset_tablename = 'Account'\r\nasset_name = f'asset_{asset_tablename}'\r\n\r\n\r\ndatasource.add_table_asset(name=asset_name, table_name=asset_tablename)\r\n\r\n\r\n\r\n# query = f\"select top (1000) * from dbo.{asset_tablename}\"\r\n# datasource.add_query_asset(name=asset_name, query=query)\r\n\r\n\r\n# asset = datasource.get_asset(asset_name)\r\n\r\n\r\n\r\nbatch_request = datasource.get_asset(asset_name).build_batch_request(batch_slice=\"[:1001]\")\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request\r\n)\r\n\r\n# onboarding\r\n# missingness\r\ndata_assistant_onboarding_result = context.assistants.onboarding.run(\r\n    validator=validator,\r\n    exclude_column_names=[],\r\n)\r\n\r\n\r\nvalidator.expectation_suite = data_assistant_onboarding_result.get_expectation_suite(\r\n    expectation_suite_name=f\"{expectation_suite_name_prefix}_{asset_name}\"\r\n)\r\n\r\nvalidator.save_expectation_suite()\r\n\r\n\r\n\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name=\"CheckPoint_BankDw\",\r\n    validator=validator\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\n\r\ncontext.build_data_docs()\r\ncontext.open_data_docs()`\r\n```\r\n\r\n**Expected behavior**\r\na key word or api or anything to limit the number of rows to scan. sql query doesnt work, it just errors out.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9917/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9917/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9911", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9911/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9911/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9911/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9911", "id": 2288497219, "node_id": "I_kwDOBiS_IM6IZ7JD", "number": 9911, "title": "Great Expectations errors out in attempting to write to read only file system", "user": {"login": "javier5109", "id": 80359125, "node_id": "MDQ6VXNlcjgwMzU5MTI1", "avatar_url": "https://avatars.githubusercontent.com/u/80359125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/javier5109", "html_url": "https://github.com/javier5109", "followers_url": "https://api.github.com/users/javier5109/followers", "following_url": "https://api.github.com/users/javier5109/following{/other_user}", "gists_url": "https://api.github.com/users/javier5109/gists{/gist_id}", "starred_url": "https://api.github.com/users/javier5109/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/javier5109/subscriptions", "organizations_url": "https://api.github.com/users/javier5109/orgs", "repos_url": "https://api.github.com/users/javier5109/repos", "events_url": "https://api.github.com/users/javier5109/events{/privacy}", "received_events_url": "https://api.github.com/users/javier5109/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 7013958946, "node_id": "LA_kwDOBiS_IM8AAAABohCFIg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/aws", "name": "aws", "color": "B6E959", "default": false, "description": "Related to GX usage with AWS"}], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2024-05-09T21:31:50Z", "updated_at": "2024-06-07T13:46:07Z", "closed_at": "2024-05-29T14:41:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen running a MWAA instance when the volume is read only. The current exception only allows permissions errors to continue \r\n\r\n**To Reproduce**\r\n1. spin up mwaa runner https://github.com/aws/aws-mwaa-local-runner\r\n2. edit volume to be read only\r\n3. If there is going to be any update to great_expectations.yml it fails\r\n\r\n\r\n**Expected behavior**\r\nI expect it to continue just like when the system is not in read only. The code is already set to do it, just need to give it one more additional exception.\r\n\r\n\r\n**Additional context**\r\nI have fixed this issue by adding OSError to the exception. inline_store_backend.py\r\n\r\n\r\n    def _save_changes(self) -> None:\r\n        context = self._data_context\r\n        config_filepath = pathlib.Path(context.root_directory) / context.GX_YML\r\n\r\n        try:\r\n            with open(config_filepath, \"w\") as outfile:\r\n                context.config.to_yaml(outfile)\r\n        # In environments where wrting to disk is not allowed, it is impossible to\r\n        # save changes. As such, we log a warning but do not raise.\r\n        except (PermissionError, OSError) as e:\r\n            logger.warning(f\"Could not save project config to disk: {e}\")\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9911/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9911/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9899", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9899/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9899/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9899/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9899", "id": 2284486466, "node_id": "I_kwDOBiS_IM6IKn9C", "number": 9899, "title": "Update from old 'cx_Oracle' to 'oracledb'", "user": {"login": "cjbj", "id": 200778, "node_id": "MDQ6VXNlcjIwMDc3OA==", "avatar_url": "https://avatars.githubusercontent.com/u/200778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjbj", "html_url": "https://github.com/cjbj", "followers_url": "https://api.github.com/users/cjbj/followers", "following_url": "https://api.github.com/users/cjbj/following{/other_user}", "gists_url": "https://api.github.com/users/cjbj/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjbj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjbj/subscriptions", "organizations_url": "https://api.github.com/users/cjbj/orgs", "repos_url": "https://api.github.com/users/cjbj/repos", "events_url": "https://api.github.com/users/cjbj/events{/privacy}", "received_events_url": "https://api.github.com/users/cjbj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2592316100, "node_id": "MDU6TGFiZWwyNTkyMzE2MTAw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:oracle", "name": "stack:oracle", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-08T01:23:04Z", "updated_at": "2024-08-23T00:46:43Z", "closed_at": "2024-08-23T00:43:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "SQLAlchemy 2 supports the latest Oracle Database driver which was renamed to python-oracledb from cx_Oracle a couple of years ago.  The new version is a 'thin' driver so a simple 'pip install oracledb' installs all that is needed to connect to Oracle Database.\r\n\r\nThe test suite references to cx_Oracle should be updated to the new module name 'oracledb' as appropriate when SQLAlchemy 2 is in use. https://github.com/search?q=repo%3Agreat-expectations%2Fgreat_expectations%20oracle&type=code\r\n\r\nThe engine creation prefix for Oracle Database is 'oracle+oracledb://'\r\n\r\nIf you want an Oracle DB container for testing, use https://hub.docker.com/r/gvenzl/oracle-free", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9899/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9899/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9883", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9883/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9883/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9883/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9883", "id": 2280291237, "node_id": "I_kwDOBiS_IM6H6nul", "number": 9883, "title": "unexpected json.decoder.JSONDecodeError ", "user": {"login": "angelika233", "id": 59344718, "node_id": "MDQ6VXNlcjU5MzQ0NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/59344718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angelika233", "html_url": "https://github.com/angelika233", "followers_url": "https://api.github.com/users/angelika233/followers", "following_url": "https://api.github.com/users/angelika233/following{/other_user}", "gists_url": "https://api.github.com/users/angelika233/gists{/gist_id}", "starred_url": "https://api.github.com/users/angelika233/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angelika233/subscriptions", "organizations_url": "https://api.github.com/users/angelika233/orgs", "repos_url": "https://api.github.com/users/angelika233/repos", "events_url": "https://api.github.com/users/angelika233/events{/privacy}", "received_events_url": "https://api.github.com/users/angelika233/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831220927, "node_id": "MDU6TGFiZWwyODMxMjIwOTI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/incomplete-report", "name": "incomplete-report", "color": "CD3237", "default": false, "description": "The report does not conform to the bug report template and/or does not not have sufficient info."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-05-06T08:03:55Z", "updated_at": "2024-08-23T00:44:02Z", "closed_at": "2024-08-23T00:44:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi! I'm writting this issue because all my great expectations stopped working in the previous week. They're run on pandas dataframe and json files used to work fine, but since last week each of them gives the same error. `Extra data: line 1 column 8 (char 7)`. I have not made any changes to my environment and have even tried running it on different ge  versions, but the issue persists. Could you please help me resolve this? Thank you!\r\n\r\n**To Reproduce**\r\n```\r\n  {\r\n    \"data_asset_type\": null,\r\n    \"expectation_suite_name\": \"my_data.demo\",\r\n    \"expectations\": [\r\n      {\r\n        \"expectation_type\": \"expect_column_max_to_be_between\",\r\n        \"kwargs\": {\r\n          \"column\": \"updated_at\",\r\n          \"min_value\": 1\r\n        },\r\n        \"meta\": {}\r\n      },\r\n      {\r\n        \"expectation_type\": \"expect_column_max_to_be_between\",\r\n        \"kwargs\": {\r\n          \"column\": \"yesterdaycount\",\r\n          \"min_value\": 1\r\n        },\r\n        \"meta\": {}\r\n      },\r\n      {\r\n        \"expectation_type\": \"expect_table_row_count_to_be_between\",\r\n        \"kwargs\": {\r\n          \"min_value\": 15000\r\n        },\r\n        \"meta\": {}\r\n      },\r\n      {\r\n        \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n        \"kwargs\": {\r\n          \"column\": \"backlog\"\r\n        },\r\n        \"meta\": {}\r\n      },\r\n      {\r\n        \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n        \"kwargs\": {\r\n          \"column\": \"backlog_1\"\r\n        },\r\n        \"meta\": {}\r\n      }\r\n    ],\r\n    \"ge_cloud_id\": null,\r\n    \"meta\": {\r\n      \"citations\": [],\r\n      \"great_expectations_version\": \"0.14.1\"\r\n    }\r\n  }\r\n```\r\ngives an error\r\n```\r\njson.decoder.JSONDecodeError: Extra data: line 1 column 8 (char 7)\r\n```\r\n**Expected behavior**\r\nI except this json file to work and in this case pass expectations\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux]\r\n - Great Expectations Version: [0.14.1] but other version have the same issue\r\n - Data Source: [pandas]\r\n - Cloud environment: [prefect] but for local run is the same\r\n\r\n**Additional context**\r\nThe problem occured after ge release but I did not upgrade my ge version by then", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9883/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9883/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9882", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9882/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9882/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9882/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9882", "id": 2280060016, "node_id": "I_kwDOBiS_IM6H5vRw", "number": 9882, "title": "Error: [psycopg2.errors.SyntaxError] syntax error at or near \u201c(\u201d\\nLINE 2: FROM (SELECT b1 as( select 'pt_lat_value' as type, count(*) \u2026\\n ^\\n\\n", "user": {"login": "rishabtomards", "id": 6944071, "node_id": "MDQ6VXNlcjY5NDQwNzE=", "avatar_url": "https://avatars.githubusercontent.com/u/6944071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabtomards", "html_url": "https://github.com/rishabtomards", "followers_url": "https://api.github.com/users/rishabtomards/followers", "following_url": "https://api.github.com/users/rishabtomards/following{/other_user}", "gists_url": "https://api.github.com/users/rishabtomards/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabtomards/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabtomards/subscriptions", "organizations_url": "https://api.github.com/users/rishabtomards/orgs", "repos_url": "https://api.github.com/users/rishabtomards/repos", "events_url": "https://api.github.com/users/rishabtomards/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabtomards/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-06T05:26:21Z", "updated_at": "2024-05-06T15:47:14Z", "closed_at": "2024-05-06T15:47:14Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "i am trying to read a query as a batchrequest using runtimebatchrequest class and the query is using a with clause, and this is giving me syntax error but the query is perfectly working fine.\r\n\r\n**To Reproduce**\r\n\r\n**this is the combined_query**   # You can use any query using a with clause.\r\n\r\ncombined_query = WITH data_table_1 AS (SELECT \u2018category_1\u2019 AS type, COUNT() AS cnt FROM table_1_union UNION SELECT \u2018category_2\u2019 AS type, COUNT() AS cnt FROM table_2_union),\r\ndata_table_2 AS (SELECT \u2018category_1\u2019 AS type, COUNT() AS cnt FROM table_1_values UNION SELECT \u2018category_2\u2019 AS type, COUNT() AS cnt FROM table_2_values)\r\nSELECT COUNT(d.diff) FROM (SELECT dt1.type, ABS(dt1.cnt - dt2.cnt) AS diff\r\nFROM data_table_1 dt1 JOIN data_table_2 dt2 ON dt1.type = dt2.type) d\r\nWHERE d.diff > 0\r\n\r\n**runtimebatchrequest**\r\n\r\nbatch = RuntimeBatchRequest(\r\ndatasource_name=\u201cmy_postgres_datasource\u201d,\r\ndata_connector_name=\u201cdefault_runtime_data_connector_name\u201d,\r\ndata_asset_name=\u201cdefault_name\u201d, # this can be anything that identifies this data\r\nruntime_parameters={\u201cquery\u201d: combined_query},\r\nbatch_identifiers={\u201cdefault_identifier_name\u201d: \u201cdefault_identifier\u201d},\r\n)\r\n\r\n**this is the validator**\r\nvalidator_query = self.gx_context.get_validator(batch_request = batch)\r\n\r\n**Expected behavior**\r\nReturns a queried data on which we can apply the expectations.\r\n\r\n**Environment**\r\n - Operating System: [ Windows]\r\n - Great Expectations Version: [0.13.2]\r\n - Data Source: [PostgreSQL]\r\n", "closed_by": {"login": "rachhouse", "id": 24724702, "node_id": "MDQ6VXNlcjI0NzI0NzAy", "avatar_url": "https://avatars.githubusercontent.com/u/24724702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachhouse", "html_url": "https://github.com/rachhouse", "followers_url": "https://api.github.com/users/rachhouse/followers", "following_url": "https://api.github.com/users/rachhouse/following{/other_user}", "gists_url": "https://api.github.com/users/rachhouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachhouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachhouse/subscriptions", "organizations_url": "https://api.github.com/users/rachhouse/orgs", "repos_url": "https://api.github.com/users/rachhouse/repos", "events_url": "https://api.github.com/users/rachhouse/events{/privacy}", "received_events_url": "https://api.github.com/users/rachhouse/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9882/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9882/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9873", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9873/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9873/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9873/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9873", "id": 2276598037, "node_id": "I_kwDOBiS_IM6HsiEV", "number": 9873, "title": "great_expectations datasource new ", "user": {"login": "DataWanderer", "id": 7305358, "node_id": "MDQ6VXNlcjczMDUzNTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7305358?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DataWanderer", "html_url": "https://github.com/DataWanderer", "followers_url": "https://api.github.com/users/DataWanderer/followers", "following_url": "https://api.github.com/users/DataWanderer/following{/other_user}", "gists_url": "https://api.github.com/users/DataWanderer/gists{/gist_id}", "starred_url": "https://api.github.com/users/DataWanderer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DataWanderer/subscriptions", "organizations_url": "https://api.github.com/users/DataWanderer/orgs", "repos_url": "https://api.github.com/users/DataWanderer/repos", "events_url": "https://api.github.com/users/DataWanderer/events{/privacy}", "received_events_url": "https://api.github.com/users/DataWanderer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-05-02T22:19:50Z", "updated_at": "2024-05-06T16:04:33Z", "closed_at": "2024-05-06T16:04:32Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n`great_expectations datasource new`\r\nThe command `datasource` does not exist.\r\nPlease use one of: ['checkpoint', 'datasource', 'docs', 'init', 'project', 'store', 'suite']\r\n\r\n**To Reproduce**\r\n`great_expectations datasource new`\r\n\r\n**Expected behavior**\r\nAble to create a data source\r\n\r\n**Environment (please complete the following information):**\r\n - Mac\r\n - great_expectations, version 0.18.13\r\n\r\n\r\n", "closed_by": {"login": "rachhouse", "id": 24724702, "node_id": "MDQ6VXNlcjI0NzI0NzAy", "avatar_url": "https://avatars.githubusercontent.com/u/24724702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachhouse", "html_url": "https://github.com/rachhouse", "followers_url": "https://api.github.com/users/rachhouse/followers", "following_url": "https://api.github.com/users/rachhouse/following{/other_user}", "gists_url": "https://api.github.com/users/rachhouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachhouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachhouse/subscriptions", "organizations_url": "https://api.github.com/users/rachhouse/orgs", "repos_url": "https://api.github.com/users/rachhouse/repos", "events_url": "https://api.github.com/users/rachhouse/events{/privacy}", "received_events_url": "https://api.github.com/users/rachhouse/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9873/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9873/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9845", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9845/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9845/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9845/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9845", "id": 2271681939, "node_id": "I_kwDOBiS_IM6HZx2T", "number": 9845, "title": "Replace sqlalchemy-redshift with supported library like redshift-connector", "user": {"login": "VolkovGeoPhy", "id": 117853378, "node_id": "U_kgDOBwZMwg", "avatar_url": "https://avatars.githubusercontent.com/u/117853378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VolkovGeoPhy", "html_url": "https://github.com/VolkovGeoPhy", "followers_url": "https://api.github.com/users/VolkovGeoPhy/followers", "following_url": "https://api.github.com/users/VolkovGeoPhy/following{/other_user}", "gists_url": "https://api.github.com/users/VolkovGeoPhy/gists{/gist_id}", "starred_url": "https://api.github.com/users/VolkovGeoPhy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VolkovGeoPhy/subscriptions", "organizations_url": "https://api.github.com/users/VolkovGeoPhy/orgs", "repos_url": "https://api.github.com/users/VolkovGeoPhy/repos", "events_url": "https://api.github.com/users/VolkovGeoPhy/events{/privacy}", "received_events_url": "https://api.github.com/users/VolkovGeoPhy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}, {"id": 6895554993, "node_id": "LA_kwDOBiS_IM8AAAABmwHRsQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/redshift", "name": "redshift", "color": "D72504", "default": false, "description": "AWS Redshift Related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-04-30T14:43:00Z", "updated_at": "2024-08-23T00:44:13Z", "closed_at": "2024-08-23T00:44:12Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nFOr redshift right now GX uses [sqlalchemy-redshift](https://github.com/sqlalchemy-redshift/sqlalchemy-redshift) which is barely alive. This project is not developed properly.\r\nCan we use something like redshift-connector\r\n\r\n**Describe the solution you'd like**\r\nI'd like to have mantainable libraries in project's dependancies\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9845/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9794", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9794/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9794/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9794/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9794", "id": 2258250013, "node_id": "I_kwDOBiS_IM6Gmikd", "number": 9794, "title": "Great Expectations - Data Quality limitation", "user": {"login": "nayanex", "id": 3999511, "node_id": "MDQ6VXNlcjM5OTk1MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3999511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nayanex", "html_url": "https://github.com/nayanex", "followers_url": "https://api.github.com/users/nayanex/followers", "following_url": "https://api.github.com/users/nayanex/following{/other_user}", "gists_url": "https://api.github.com/users/nayanex/gists{/gist_id}", "starred_url": "https://api.github.com/users/nayanex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nayanex/subscriptions", "organizations_url": "https://api.github.com/users/nayanex/orgs", "repos_url": "https://api.github.com/users/nayanex/repos", "events_url": "https://api.github.com/users/nayanex/events{/privacy}", "received_events_url": "https://api.github.com/users/nayanex/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-04-23T08:18:10Z", "updated_at": "2024-05-07T13:59:12Z", "closed_at": "2024-05-07T13:59:12Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "great expectations can't deal with checks on two or more tables.\r\n\r\nlike say date of column in table a should be greater than date of column in table B where table A and table B can be joined using an identifier\r\n\r\nclassic example is like say loan and loanpart where loan holds the info abt the mortoages and loanpart holds the info abt mortages payments. so the date in the loanpart should always be great than date in the loan as mortage payment can only be done for an active mortagage.\r\n\r\nwhat great expectations can is check date if the date in the loan table is less than or greater than UTCDATE not compare dates between tables like mentioned above.\r\n\r\nWhat approach would you suggest to overcome this limitation?\r\n\r\nI only tried to use Great Expectations\r\n\r\n", "closed_by": {"login": "rachhouse", "id": 24724702, "node_id": "MDQ6VXNlcjI0NzI0NzAy", "avatar_url": "https://avatars.githubusercontent.com/u/24724702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachhouse", "html_url": "https://github.com/rachhouse", "followers_url": "https://api.github.com/users/rachhouse/followers", "following_url": "https://api.github.com/users/rachhouse/following{/other_user}", "gists_url": "https://api.github.com/users/rachhouse/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachhouse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachhouse/subscriptions", "organizations_url": "https://api.github.com/users/rachhouse/orgs", "repos_url": "https://api.github.com/users/rachhouse/repos", "events_url": "https://api.github.com/users/rachhouse/events{/privacy}", "received_events_url": "https://api.github.com/users/rachhouse/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9794/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9794/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9779", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9779/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9779/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9779/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9779", "id": 2247874067, "node_id": "I_kwDOBiS_IM6F-9YT", "number": 9779, "title": "Error: [SQL Server]Incorrect syntax near the keyword 'into'", "user": {"login": "kapilsaini2009", "id": 60695026, "node_id": "MDQ6VXNlcjYwNjk1MDI2", "avatar_url": "https://avatars.githubusercontent.com/u/60695026?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kapilsaini2009", "html_url": "https://github.com/kapilsaini2009", "followers_url": "https://api.github.com/users/kapilsaini2009/followers", "following_url": "https://api.github.com/users/kapilsaini2009/following{/other_user}", "gists_url": "https://api.github.com/users/kapilsaini2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/kapilsaini2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kapilsaini2009/subscriptions", "organizations_url": "https://api.github.com/users/kapilsaini2009/orgs", "repos_url": "https://api.github.com/users/kapilsaini2009/repos", "events_url": "https://api.github.com/users/kapilsaini2009/events{/privacy}", "received_events_url": "https://api.github.com/users/kapilsaini2009/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-04-17T09:52:27Z", "updated_at": "2024-08-23T00:45:36Z", "closed_at": "2024-08-23T00:45:35Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Discussed in https://github.com/great-expectations/great_expectations/discussions/9765\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **kapilsaini2009** April 16, 2024</sup>\r\nI am trying to run GX with MSSQL but getting incorrect syntax error.\r\n### Problem:\r\nGenerated SQL by the framework for the given query is incorrect.\r\nInput query for RuntimeBatchRequest - \"select * from summary_data\"\r\nGenerated SQL-  SELECT * \r\nFROM (SELECT * into #gx_temp_405773af from summary_data) AS anon_1 \r\nWHERE 1 = 1\r\n\r\n### Error Message:\r\nsqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42000', \"[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Incorrect syntax near the keyword 'into'. (156) (SQLExecDirectW)\")\r\n[SQL: SELECT * \r\nFROM (SELECT * into #gx_temp_405773af from summary_data) AS anon_1 \r\nWHERE 1 = 1]\r\n\r\n### Code:\r\n   ```\r\n asset = 'summary_data'\r\n    query = \"select * from summary_data\"\r\n\r\n    batch_request = RuntimeBatchRequest(\r\n        datasource_name='sql_server_datasource',\r\n        data_connector_name='sql_gx_data_connector',\r\n        data_asset_name=f'{asset}',\r\n        runtime_parameters={\r\n            \"query\": query,\r\n        },\r\n        batch_identifiers={\"sql_gx_identifier\": 'summary_checkpoint'}\r\n    )\r\n\r\n    validation_result = context.run_checkpoint(checkpoint_name=\"my_quickstart_checkpoint\",\r\n                                                   expectation_suite_name=\"summary_data_suite_1\", batch_request=batch_request)\r\n```\r\n\r\n### Error Logs:\r\nTraceback (most recent call last):\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1971, in _exec_single_context\r\n    self.dialect.do_execute(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 919, in do_execute\r\n    cursor.execute(statement, parameters)\r\npyodbc.ProgrammingError: ('42000', \"[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Incorrect syntax near the keyword 'into'. (156) (SQLExecDirectW)\")\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/u1/kasaini/kpfiles/gx/gx/gx_db_batch.py\", line 86, in <module>\r\n    main()\r\n  File \"/u1/kasaini/kpfiles/gx/gx/gx_db_batch.py\", line 49, in main\r\n    validation_result = context.run_checkpoint(checkpoint_name=\"my_quickstart_checkpoint\",\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 266, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2107, in run_checkpoint\r\n    return self._run_checkpoint(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2151, in _run_checkpoint\r\n    result: CheckpointResult = checkpoint.run_with_runtime_args(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/checkpoint/checkpoint.py\", line 914, in run_with_runtime_args\r\n    return self.run(**checkpoint_run_arguments)\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 266, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/checkpoint/checkpoint.py\", line 305, in run\r\n    self._run_validation(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/checkpoint/checkpoint.py\", line 480, in _run_validation\r\n    validator: Validator = self._validator or self.data_context.get_validator(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2374, in get_validator\r\n    self.get_batch_list(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 266, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2543, in get_batch_list\r\n    return self._get_batch_list(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2624, in _get_batch_list\r\n    return datasource.get_batch_list_from_batch_request(batch_request=result)\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/datasource/new_datasource.py\", line 191, in get_batch_list_from_batch_request\r\n    ) = data_connector.get_batch_data_and_metadata(  # type: ignore[call-arg]\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/datasource/data_connector/runtime_data_connector.py\", line 223, in get_batch_data_and_metadata\r\n    batch_data, batch_markers = self._execution_engine.get_batch_data_and_markers(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1379, in get_batch_data_and_markers\r\n    batch_data = SqlAlchemyBatchData(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_batch_data.py\", line 175, in __init__\r\n    self._selectable = self._generate_selectable_from_query(  # type: ignore[call-overload] # https://github.com/python/mypy/issues/14764\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_batch_data.py\", line 386, in _generate_selectable_from_query\r\n    _, temp_table_name = self._create_temporary_table(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_batch_data.py\", line 306, in _create_temporary_table\r\n    self.execution_engine.execute_query_in_transaction(sa.text(stmt))\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1472, in execute_query_in_transaction\r\n    result = connection.execute(query)\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1422, in execute\r\n    return meth(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/sql/elements.py\", line 514, in _execute_on_connection\r\n    return connection._execute_clauseelement(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1644, in _execute_clauseelement\r\n    ret = self._execute_context(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1850, in _execute_context\r\n    return self._exec_single_context(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1990, in _exec_single_context\r\n    self._handle_dbapi_exception(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 2357, in _handle_dbapi_exception\r\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1971, in _exec_single_context\r\n    self.dialect.do_execute(\r\n  File \"/u1/kasaini/kpfiles/gx/my_venv/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 919, in do_execute\r\n    cursor.execute(statement, parameters)\r\nsqlalchemy.exc.ProgrammingError: (pyodbc.ProgrammingError) ('42000', \"[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Incorrect syntax near the keyword 'into'. (156) (SQLExecDirectW)\")\r\n[SQL: SELECT * \r\nFROM (SELECT * into #gx_temp_405773af from summary_data) AS anon_1 \r\nWHERE 1 = 1]\r\n(Background on this error at: https://sqlalche.me/e/20/f405)\r\n\r\nCan someone please suggest what is wrong in my implementation or is there any other issue ?</div>", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9779/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9752", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9752/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9752/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9752/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9752", "id": 2241655126, "node_id": "I_kwDOBiS_IM6FnPFW", "number": 9752, "title": "Support the StarRocks open source OLAP database", "user": {"login": "alberttwong", "id": 749093, "node_id": "MDQ6VXNlcjc0OTA5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/749093?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alberttwong", "html_url": "https://github.com/alberttwong", "followers_url": "https://api.github.com/users/alberttwong/followers", "following_url": "https://api.github.com/users/alberttwong/following{/other_user}", "gists_url": "https://api.github.com/users/alberttwong/gists{/gist_id}", "starred_url": "https://api.github.com/users/alberttwong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alberttwong/subscriptions", "organizations_url": "https://api.github.com/users/alberttwong/orgs", "repos_url": "https://api.github.com/users/alberttwong/repos", "events_url": "https://api.github.com/users/alberttwong/events{/privacy}", "received_events_url": "https://api.github.com/users/alberttwong/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4397538239, "node_id": "LA_kwDOBiS_IM8AAAABBh0bvw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:new_backend", "name": "feature:new_backend", "color": "741403", "default": false, "description": ""}, {"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-04-13T16:53:31Z", "updated_at": "2024-08-23T00:45:46Z", "closed_at": "2024-08-23T00:45:45Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": " StarRocks is an OSS open data lakehouse solution built on top of open table formats Apache Iceberg, Apache Hudi, Apache Hive and Delta Lake.   StarRocks  typically compete with Trino, Clickhouse, Snowflake, AWS Redshift, GCP Big Query and Azure Synapse Analytics.   \r\n\r\nI'd like to work with someone to get an official integration. ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9752/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9752/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9748", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9748/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9748/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9748/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9748", "id": 2240298682, "node_id": "I_kwDOBiS_IM6FiD66", "number": 9748, "title": "Issue with ignore_row_if argument in certain expectations", "user": {"login": "NehaNRane", "id": 86256878, "node_id": "MDQ6VXNlcjg2MjU2ODc4", "avatar_url": "https://avatars.githubusercontent.com/u/86256878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NehaNRane", "html_url": "https://github.com/NehaNRane", "followers_url": "https://api.github.com/users/NehaNRane/followers", "following_url": "https://api.github.com/users/NehaNRane/following{/other_user}", "gists_url": "https://api.github.com/users/NehaNRane/gists{/gist_id}", "starred_url": "https://api.github.com/users/NehaNRane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NehaNRane/subscriptions", "organizations_url": "https://api.github.com/users/NehaNRane/orgs", "repos_url": "https://api.github.com/users/NehaNRane/repos", "events_url": "https://api.github.com/users/NehaNRane/events{/privacy}", "received_events_url": "https://api.github.com/users/NehaNRane/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-04-12T14:42:32Z", "updated_at": "2024-08-23T00:45:54Z", "closed_at": "2024-08-23T00:45:54Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I've encountered a problem with the `ignore_row_if` argument in three expectations: `expect_column_pair_values_a_to_be_greater_than_b`, `expect_multicolumn_sun_to_equal`, and `expect_compound_columns_to_be_unique`. While the argument works as expected when `either_value_is_missing` or `any_value_is_missing` is passed, it behaves unexpectedly when `both_values_are_missing` / `all_values_are_missing` or `neither` / `never` is used.\r\n \r\nSpecifically, when using  `both_values_are_missing` / `all_values_are_missing` or `neither` / `never` in the `ignore_row_if` argument, the following metrics are incorrect:\r\n- unexpected_count\r\n- unexpected_percent\r\n- partial_unexpected_list\r\n- unexpected_percent_total\r\n- unexpected_percent_nonmissing\r\n \r\nThis issue impacts the accuracy of the expectations and could lead to incorrect interpretations of data quality.\r\n \r\n**Steps to Reproduce:**\r\n1. Use the affected expectations (`expect_column_pair_values_a_to_be_greater_than_b`, `expect_multicolumn_sun_to_equal`, `expect_compound_columns_to_be_unique`).\r\n2. Pass  `both_values_are_missing` / `all_values_are_missing` or `neither` / `never` in the `ignore_row_if` argument.\r\n3. Observe the incorrect values for the mentioned metrics.\r\n \r\nExpected Behavior:\r\nThe `ignore_row_if` argument should accurately handle the specified conditions ( `both_values_are_missing` / `all_values_are_missing` or `neither` / `never`) and produce correct metrics for the affected expectations.\r\n \r\nAdditional Context:\r\n- Great Expectations version: 0.18.12\r\n- Python version: 3.9.6\r\n- snowflake-connector-python: 3.8.1\r\n- snowflake-sqlalchemy: 1.5.1\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9748/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9748/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9713", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9713/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9713/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9713/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9713", "id": 2227652133, "node_id": "I_kwDOBiS_IM6Ex0Yl", "number": 9713, "title": "Unable to retrieve object from TupleFilesystemStoreBackend on Azure Databricks since yesterday", "user": {"login": "damczyk", "id": 48328727, "node_id": "MDQ6VXNlcjQ4MzI4NzI3", "avatar_url": "https://avatars.githubusercontent.com/u/48328727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damczyk", "html_url": "https://github.com/damczyk", "followers_url": "https://api.github.com/users/damczyk/followers", "following_url": "https://api.github.com/users/damczyk/following{/other_user}", "gists_url": "https://api.github.com/users/damczyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/damczyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damczyk/subscriptions", "organizations_url": "https://api.github.com/users/damczyk/orgs", "repos_url": "https://api.github.com/users/damczyk/repos", "events_url": "https://api.github.com/users/damczyk/events{/privacy}", "received_events_url": "https://api.github.com/users/damczyk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2366122500, "node_id": "MDU6TGFiZWwyMzY2MTIyNTAw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:databricks", "name": "stack:databricks", "color": "ebf7f1", "default": false, "description": ""}, {"id": 6895559346, "node_id": "LA_kwDOBiS_IM8AAAABmwHisg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/azure", "name": "azure", "color": "415BF1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-04-05T10:26:18Z", "updated_at": "2024-08-23T00:46:05Z", "closed_at": "2024-08-23T00:46:04Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nSince yesterday running the GX code\r\n`context.get_checkpoint(onboarding_checkpoint_name).run(run_name=onboarding_checkpoint_name, batch_request=batch_request)`\r\nleads to the error\r\n\r\n```\r\nInvalidKeyError: **Unable to retrieve object from TupleFilesystemStoreBackend** with the following Key: /dbfs/mnt/sdl/control-tower-ccu/DataQuality/GX/expectations/del/control_tower_ccu_datasources_godistributiondates.json\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/data_context/store/tuple_store_backend.py:320, in TupleFilesystemStoreBackend._get(self, key)\r\n    319 try:\r\n--> 320     with open(filepath) as infile:\r\n    321         contents: str = infile.read().rstrip(\"\\n\")\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/data_context/store/tuple_store_backend.py:323, in TupleFilesystemStoreBackend._get(self, key)\r\n    321         contents: str = infile.read().rstrip(\"\\n\")\r\n    322 except FileNotFoundError:\r\n--> 323     raise InvalidKeyError(\r\n    324         f\"Unable to retrieve object from TupleFilesystemStoreBackend with the following Key: {filepath!s}\"\r\n    325     )\r\n    327 return contents\r\n```\r\n\r\nIt worked yesterday until about 4 p.m. (CET)\r\nSince then I get the error.\r\nSince then GX tries to get the JSON for the expectation suite from a sub-directory /del/, which does not exist\r\n/dbfs/mnt/sdl/control-tower-ccu/DataQuality/GX/expectations**_/del/_**control_tower_ccu_datasources_godistributiondates.json\r\n\r\nThe JSON control_tower_ccu_datasources_godistributiondates.json is stored in dir\r\n/dbfs/mnt/sdl/control-tower-ccu/DataQuality/GX/expectations\r\n(without /del/) and has always been the days before.\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\nI can only give you my [context.json](https://github.com/great-expectations/great_expectations/files/14882307/context.json) because I'm on Databricks using Ephemeral Data Context.\r\nI started my Databricks cluster using Library\r\ngreat_expectations[azure_secrets]==0.18.12 (and also on great_expectations[azure_secrets]==0.18.10)\r\n\r\nI started a Databricks notebook with \r\n`import great_expectations as gx`\r\nbesides other libraries and then I build my dataframe object with my data called `df_Staging`.\r\nIn one cell of my notebook all GX code is executed like this:\r\n\r\n```\r\n# Create or load great expectations context\r\n    context = GX_Context(context_root_dir, context_connection_string).get_gx_context()\r\n\r\n    # Create batch request\r\n    batch_request = (context\r\n        .sources\r\n        .add_or_update_spark(name=data_source_name)\r\n        .add_dataframe_asset(name=data_asset_name, dataframe=df_Staging)\r\n        .build_batch_request()\r\n    )\r\n\r\n    # Run Onboarding checkpoint\r\n    control_tower_ccu_datasources_block_checkpoint_result = context.get_checkpoint(onboarding_checkpoint_name).run(run_name=onboarding_checkpoint_name, batch_request=batch_request)\r\n\r\n    # Check the validation result\r\n    if control_tower_ccu_datasources_block_checkpoint_result.success:\r\n        print(\"The validation succeeded\")\r\n```\r\n\r\nClass GX_Context with method get_gx_context() looks like this:\r\n\r\n```\r\nimport great_expectations as gx\r\n\r\n\r\nclass GX_Context:\r\n    def __init__(self, root_dir, connection_string, filepath_prefix=\"\"):\r\n        self.root_dir = root_dir\r\n        self.connection_string = connection_string\r\n        self.filepath_prefix = filepath_prefix\r\n\r\n        if not isinstance(self.root_dir, str) or not self.root_dir:\r\n            raise ValueError(\"root_dir must be a non-empty string\")\r\n        if not isinstance(self.connection_string, str) or not self.connection_string:\r\n            raise ValueError(\"connection_string must be a non-empty string\")\r\n\r\n    def get_gx_context(self) -> gx.data_context.EphemeralDataContext:\r\n        project_config = gx.data_context.types.base.DataContextConfig(\r\n            store_backend_defaults=gx.data_context.types.base.FilesystemStoreBackendDefaults(\r\n                root_directory=self.root_dir\r\n            ),\r\n            data_docs_sites={\r\n                \"az_site\": {\r\n                    \"class_name\": \"SiteBuilder\",\r\n                    \"store_backend\": {\r\n                        \"class_name\": \"TupleAzureBlobStoreBackend\",\r\n                        \"container\": r\"\\$web\",\r\n                        # \"filepath_prefix\": self.filepath_prefix,\r\n                        \"connection_string\": self.connection_string,\r\n                    },\r\n                    \"site_index_builder\": {\r\n                        \"class_name\": \"DefaultSiteIndexBuilder\",\r\n                        \"show_cta_footer\": True,\r\n                    },\r\n                }\r\n            },\r\n        )\r\n\r\n        context = gx.get_context(project_config=project_config)\r\n\r\n        return context\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\nExecuting checkpoint\r\n`context.get_checkpoint(onboarding_checkpoint_name).run(run_name=onboarding_checkpoint_name, batch_request=batch_request)`\r\nreads the expectation suite from\r\n`/dbfs/mnt/sdl/control-tower-ccu/DataQuality/GX/expectations/control_tower_ccu_datasources_godistributiondates.json\r\n`\r\nas the days before and not from\r\n`/dbfs/mnt/sdl/control-tower-ccu/DataQuality/GX/expectations/**del/**control_tower_ccu_datasources_godistributiondates.json\r\n`\r\nand delivers a result instead of an error\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Databricks Cluster with runtime 14.3 LTS \r\n - Great Expectations Version: great_expectations[azure_secrets]==0.18.12 + great_expectations[azure_secrets]==0.18.10\r\n - Data Source: PySpark Dataframe\r\n - Cloud environment: Azure Databricks\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9713/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9713/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9698", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9698/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9698/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9698/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9698", "id": 2222846482, "node_id": "I_kwDOBiS_IM6EffIS", "number": 9698, "title": "Great Expectations and Scrapy - not working in same virtual environment", "user": {"login": "culpgrant", "id": 59777128, "node_id": "MDQ6VXNlcjU5Nzc3MTI4", "avatar_url": "https://avatars.githubusercontent.com/u/59777128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/culpgrant", "html_url": "https://github.com/culpgrant", "followers_url": "https://api.github.com/users/culpgrant/followers", "following_url": "https://api.github.com/users/culpgrant/following{/other_user}", "gists_url": "https://api.github.com/users/culpgrant/gists{/gist_id}", "starred_url": "https://api.github.com/users/culpgrant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/culpgrant/subscriptions", "organizations_url": "https://api.github.com/users/culpgrant/orgs", "repos_url": "https://api.github.com/users/culpgrant/repos", "events_url": "https://api.github.com/users/culpgrant/events{/privacy}", "received_events_url": "https://api.github.com/users/culpgrant/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2024-04-03T12:48:14Z", "updated_at": "2024-04-29T19:50:39Z", "closed_at": "2024-04-29T19:50:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Discussed in https://github.com/great-expectations/great_expectations/discussions/9693\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **culpgrant** April  2, 2024</sup>\r\nHey! I have a virutal environment that I am trying to add great_expectations into. My environment already has scrapy and it seems that there is a conflict between great expectations and scrapy. If I import great_expectations after scrapy it will throw an AttributeError\r\n\r\nThis does work:\r\n```\r\nimport great_expectations\r\nimport scrapy\r\n\r\nprint(\"done\")\r\n```\r\n\r\nThis does not work:\r\n```\r\nimport scrapy\r\nimport great_expectations\r\n\r\nprint(\"done\")\r\n```\r\n\r\n**Error Message:**\r\n```\r\nTraceback (most recent call last):\r\n  File \r\n\r\n\"/Users/grant/vs_code_projects/grants_projects/test_environment.py\", line 2, in <module>\r\n    import great_expectations\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/__init__.py\", line 32, in <module>\r\n    register_core_expectations()\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/expectations/registry.py\", line 187, in register_core_expectations\r\n    from great_expectations.expectations import core  # noqa: F401\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/expectations/core/__init__.py\", line 1, in <module>\r\n    from .expect_column_distinct_values_to_be_in_set import (\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/expectations/core/expect_column_distinct_values_to_be_in_set.py\", line 12, in <module>\r\n    from great_expectations.expectations.expectation import (\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/expectations/expectation.py\", line 2350, in <module>\r\n    class BatchExpectation(Expectation, ABC):\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/expectations/expectation.py\", line 287, in __new__\r\n    newclass._register_renderer_functions()\r\n  File \"/Users/grant/Envs/test_env/lib/python3.8/site-packages/great_expectations/expectations/expectation.py\", line 369, in _register_renderer_functions\r\n    attr_obj: Callable = getattr(cls, candidate_renderer_fn_name)\r\nAttributeError: __provides__\r\n```\r\n\r\n**Pip Freeze:**\r\n```\r\ngreat-expectations==0.18.12\r\nScrapy==2.11.1\r\n```\r\n\r\nDoes anyone have a resolution?\r\n\r\n</div>", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9698/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9698/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9695", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9695/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9695/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9695/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9695", "id": 2222563302, "node_id": "I_kwDOBiS_IM6EeZ_m", "number": 9695, "title": "Simplify package installation for developing and running expectations", "user": {"login": "mateocolina", "id": 23585788, "node_id": "MDQ6VXNlcjIzNTg1Nzg4", "avatar_url": "https://avatars.githubusercontent.com/u/23585788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mateocolina", "html_url": "https://github.com/mateocolina", "followers_url": "https://api.github.com/users/mateocolina/followers", "following_url": "https://api.github.com/users/mateocolina/following{/other_user}", "gists_url": "https://api.github.com/users/mateocolina/gists{/gist_id}", "starred_url": "https://api.github.com/users/mateocolina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mateocolina/subscriptions", "organizations_url": "https://api.github.com/users/mateocolina/orgs", "repos_url": "https://api.github.com/users/mateocolina/repos", "events_url": "https://api.github.com/users/mateocolina/events{/privacy}", "received_events_url": "https://api.github.com/users/mateocolina/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-04-03T10:38:18Z", "updated_at": "2024-08-23T00:46:15Z", "closed_at": "2024-08-23T00:46:15Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nWhen developing expectations, one can use multiple ways to do so. Whether you would like to use JupyterLab is up to you. For running expectations in GX, a lot of packages are not required and it blows the environment (local, Docker, K8s etc.) unnecessarily (last I checked after installing GX with acryl-datahub, the Docker image had a size of 1.1 GB). We distinguish between developing expectations and running them in our daily pipeline, thus the setup is also different.\r\n\r\n**Describe the solution you'd like**\r\nIf running `pip install great-expectations` it should install all packages related to GX. But `pip install \"great-expectations[ops]\"` should only install packages to successfully run expectations in the environment.\r\n\r\n**Describe alternatives you've considered**\r\nUninstalling packages after the Docker image has been built, but with each release the packages are installed again.\r\n\r\n**Additional context**\r\nAdd any other context, screenshots, or code samples about the feature request here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9695/reactions", "total_count": 2, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9695/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9690", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9690/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9690/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9690/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9690", "id": 2220835578, "node_id": "I_kwDOBiS_IM6EX0L6", "number": 9690, "title": "fluent_datasources does not reflect runtime datasource addition", "user": {"login": "ramananayak", "id": 65753883, "node_id": "MDQ6VXNlcjY1NzUzODgz", "avatar_url": "https://avatars.githubusercontent.com/u/65753883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramananayak", "html_url": "https://github.com/ramananayak", "followers_url": "https://api.github.com/users/ramananayak/followers", "following_url": "https://api.github.com/users/ramananayak/following{/other_user}", "gists_url": "https://api.github.com/users/ramananayak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramananayak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramananayak/subscriptions", "organizations_url": "https://api.github.com/users/ramananayak/orgs", "repos_url": "https://api.github.com/users/ramananayak/repos", "events_url": "https://api.github.com/users/ramananayak/events{/privacy}", "received_events_url": "https://api.github.com/users/ramananayak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6895831417, "node_id": "LA_kwDOBiS_IM8AAAABmwYJeQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/query-asset", "name": "query-asset", "color": "5EE822", "default": false, "description": "Related to use of a FDS QueryAsset"}, {"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": true, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2024-04-02T15:33:20Z", "updated_at": "2024-08-27T13:59:45Z", "closed_at": "2024-08-27T13:59:45Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI want to add fluent_datasource at runtime after a FileDataContext is already defined.\r\ncontext.fluent_datasources  is of type dictionary. When I add a new fluent_datasource, it does not add to the existing dictionary.\r\nWhere as it works on datasource.\r\n\r\n**To Reproduce**\r\n```python\r\nimport great_expectations as gx\r\ncontext = gx.data_context.FileDataContext(context_root_dir=\"my_context_dir\")\r\nconnection_string = \"postgresql+psycopg2://<user_name>:<password>@<host>:<port>/<database>\"\r\nruntime_datasource = gx.datasource.fluent.PostgresDatasource(name=\"ds_runtime\", connection_string=connection_string,create_temp_table=True)\r\n\r\n# Running below does not update the dictonary\r\ncontext.fluent_datasources[runtime_datasource.name] = runtime_datasource\r\n\r\n# where as, if I run below command then it will update properly. Also, it will also update fluent_datasources\r\ncontext.datasources[runtime_datasource.name] = runtime_datasource\r\n```\r\n\r\n**Expected behavior**\r\ncontext.fluent_datasources should show added runtime_datasource inside the dictonary\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.12\r\n - Data Source: Redshift\r\n - Cloud environment: AWS\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9690/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9690/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9674", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9674/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9674/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9674/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9674", "id": 2213371760, "node_id": "I_kwDOBiS_IM6D7V9w", "number": 9674, "title": "Incorporating Six Sigma Methodology for Data Quality Control in Great Expectations", "user": {"login": "vlasvlasvlas", "id": 4071796, "node_id": "MDQ6VXNlcjQwNzE3OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/4071796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vlasvlasvlas", "html_url": "https://github.com/vlasvlasvlas", "followers_url": "https://api.github.com/users/vlasvlasvlas/followers", "following_url": "https://api.github.com/users/vlasvlasvlas/following{/other_user}", "gists_url": "https://api.github.com/users/vlasvlasvlas/gists{/gist_id}", "starred_url": "https://api.github.com/users/vlasvlasvlas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vlasvlasvlas/subscriptions", "organizations_url": "https://api.github.com/users/vlasvlasvlas/orgs", "repos_url": "https://api.github.com/users/vlasvlasvlas/repos", "events_url": "https://api.github.com/users/vlasvlasvlas/events{/privacy}", "received_events_url": "https://api.github.com/users/vlasvlasvlas/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-28T14:22:15Z", "updated_at": "2024-08-23T00:46:33Z", "closed_at": "2024-08-23T00:46:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nCurrently, there is no explicit support or mention of using Six Sigma methodology within Great Expectations for quality assurance purposes. This makes it challenging for users who wish to apply Six Sigma principles to their data quality control processes.\r\n\r\n**Describe the solution you'd like**\r\nI would like to see built-in support or documentation in Great Expectations for implementing Six Sigma methodology to assess and monitor data quality. This could include guidance on defining expectations, calculating defect rates, and interpreting results in terms of Six Sigma levels.\r\n\r\n**Describe alternatives you've considered**\r\nOne alternative would be to manually implement Six Sigma calculations outside of Great Expectations, but this would be less integrated and less automated.\r\n\r\n**Additional context**\r\nBy incorporating Six Sigma support into Great Expectations, users would have a comprehensive toolset for managing data quality, aligned with industry-standard quality control practices. This would enhance the utility and versatility of Great Expectations for a wider range of users and use cases.\r\n\r\n**Example**\r\nFor instance, let's say we have a dataset representing customer orders in an e-commerce platform. We define expectations within Great Expectations to ensure that order timestamps are within a reasonable range, order amounts are non-negative, and customer addresses are valid. After running these expectations, we calculate a Six Sigma value based on the defect rates found in the data.\r\n\r\nSuppose the resulting Six Sigma value is 3.5. This indicates that our data quality is reasonably good, with a defect rate of approximately 233 defects per million opportunities. Over time, as we continue to refine our data pipelines and improve data quality, we aim to see the Six Sigma value increase, indicating fewer defects and higher data quality. By monitoring this value regularly, we can track the effectiveness of our data quality improvement efforts and ensure that our data processes are meeting the desired quality standards.\r\n\r\n**Related links:**\r\nhttps://docs.oracle.com/cd/B31080_01/doc/owb.102/b28223/concept_data_quality.htm\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9674/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9674/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9657", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9657/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9657/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9657/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9657", "id": 2205100363, "node_id": "I_kwDOBiS_IM6DbylL", "number": 9657, "title": "Remove ``altair<5`` pin", "user": {"login": "euklid321", "id": 31248005, "node_id": "MDQ6VXNlcjMxMjQ4MDA1", "avatar_url": "https://avatars.githubusercontent.com/u/31248005?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euklid321", "html_url": "https://github.com/euklid321", "followers_url": "https://api.github.com/users/euklid321/followers", "following_url": "https://api.github.com/users/euklid321/following{/other_user}", "gists_url": "https://api.github.com/users/euklid321/gists{/gist_id}", "starred_url": "https://api.github.com/users/euklid321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euklid321/subscriptions", "organizations_url": "https://api.github.com/users/euklid321/orgs", "repos_url": "https://api.github.com/users/euklid321/repos", "events_url": "https://api.github.com/users/euklid321/events{/privacy}", "received_events_url": "https://api.github.com/users/euklid321/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-03-25T07:42:04Z", "updated_at": "2024-08-23T00:46:44Z", "closed_at": "2024-08-23T00:46:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nGreat expectations is not compatible with ``altair=5`` which has been released more than 10 months ago.\r\n\r\n**Describe the solution you'd like**\r\nPlease remove the ``altair<5`` pin.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9657/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9657/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9650", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9650/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9650/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9650/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9650", "id": 2202954639, "node_id": "I_kwDOBiS_IM6DTmuP", "number": 9650, "title": "[BUG] Unable to get both snowflake and databricks working with gx at the same time", "user": {"login": "satniks", "id": 54166582, "node_id": "MDQ6VXNlcjU0MTY2NTgy", "avatar_url": "https://avatars.githubusercontent.com/u/54166582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/satniks", "html_url": "https://github.com/satniks", "followers_url": "https://api.github.com/users/satniks/followers", "following_url": "https://api.github.com/users/satniks/following{/other_user}", "gists_url": "https://api.github.com/users/satniks/gists{/gist_id}", "starred_url": "https://api.github.com/users/satniks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/satniks/subscriptions", "organizations_url": "https://api.github.com/users/satniks/orgs", "repos_url": "https://api.github.com/users/satniks/repos", "events_url": "https://api.github.com/users/satniks/events{/privacy}", "received_events_url": "https://api.github.com/users/satniks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2356556764, "node_id": "MDU6TGFiZWwyMzU2NTU2NzY0", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:snowflake", "name": "stack:snowflake", "color": "ebf7f1", "default": false, "description": ""}, {"id": 2366122500, "node_id": "MDU6TGFiZWwyMzY2MTIyNTAw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:databricks", "name": "stack:databricks", "color": "ebf7f1", "default": false, "description": ""}, {"id": 6647650005, "node_id": "LA_kwDOBiS_IM8AAAABjDsW1Q", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/databricks-sql", "name": "databricks-sql", "color": "DD243C", "default": false, "description": "DatabricksSQL related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2024-03-22T17:15:28Z", "updated_at": "2024-07-11T15:48:29Z", "closed_at": "2024-07-11T15:48:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am not able to get both snowflake and databricks working with great-expectations 0.18.11 and 0.18.12. Could not find python packages setup which works for both of them. \r\n\r\nI tried following:\r\n1. Installed following libraries for databricks\r\n    \"pip install great_expectations[sqlalchemy]\r\n    \"pip install great_expectations[databricks]\"\r\n2.  Wrote expectations for databricks data source and it works nicely.\r\n3.  Then I Installed following library for snowflake\r\n    \"pip install great_expectations[snowflake]\",\r\n4. Then I wrote expectations for snowflake which also works as expected. But it broke my databricks setup. When I executed my existing databricks expectations, I got following error:\r\n\r\n    raise SQLDatasourceError(\r\ngreat_expectations.datasource.fluent.sql_datasource.SQLDatasourceError: Unable to create a SQLAlchemy engine due to the following exception: module 'sqlalchemy.types' has no attribute 'Uuid'\r\n\r\nMay be this is because installation of \"great_expectations[sqlalchemy]\" downgrades SQLAlchemy from 2.0.28 to 1.4.52.\r\n\r\nDatabricks and Snowflake are two important data sources which should work together with common python environment. Can someone provide \"pip freeze\" setup which works for both?", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9650/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9650/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9649", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9649/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9649/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9649/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9649", "id": 2202650058, "node_id": "I_kwDOBiS_IM6DScXK", "number": 9649, "title": "Polars Support?", "user": {"login": "edgBR", "id": 14976422, "node_id": "MDQ6VXNlcjE0OTc2NDIy", "avatar_url": "https://avatars.githubusercontent.com/u/14976422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edgBR", "html_url": "https://github.com/edgBR", "followers_url": "https://api.github.com/users/edgBR/followers", "following_url": "https://api.github.com/users/edgBR/following{/other_user}", "gists_url": "https://api.github.com/users/edgBR/gists{/gist_id}", "starred_url": "https://api.github.com/users/edgBR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edgBR/subscriptions", "organizations_url": "https://api.github.com/users/edgBR/orgs", "repos_url": "https://api.github.com/users/edgBR/repos", "events_url": "https://api.github.com/users/edgBR/events{/privacy}", "received_events_url": "https://api.github.com/users/edgBR/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}, {"id": 4397523265, "node_id": "LA_kwDOBiS_IM8AAAABBhzhQQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:integration", "name": "feature:integration", "color": "61C1F1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2024-03-22T14:37:03Z", "updated_at": "2024-08-23T00:46:53Z", "closed_at": "2024-08-23T00:46:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nHi, we have been using GE before in our team but we are migrating most of our pandas processing pipelines to polars. However it seems that GE does not have any support for polars and transforming the polars dataset to pandas just to run the GE suite seems extremely subotimal.\r\n\r\n**Describe the solution you'd like**\r\nWe would like to get polars support in GE.\r\n\r\n**Describe alternatives you've considered**\r\nWe have considered to use pandera, which is going to offer full polars support very soon:\r\n\r\nhttps://github.com/unionai-oss/pandera/issues/1064\r\n\r\nhttps://pandera--1373.org.readthedocs.build/en/1373/polars.html#polars\r\n\r\n**Additional context**\r\nWe are in the situation were our data is not big enough to use spark. Therefore GE with pyspark or pydequee have been discarded for data validation.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9649/reactions", "total_count": 5, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 3}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9649/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9648", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9648/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9648/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9648/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9648", "id": 2202630861, "node_id": "I_kwDOBiS_IM6DSXrN", "number": 9648, "title": "[BUG] FastAPI + Great Expectations + MSSQL (requests accumulate in sleeping status)", "user": {"login": "IgorShcherbakov", "id": 35165017, "node_id": "MDQ6VXNlcjM1MTY1MDE3", "avatar_url": "https://avatars.githubusercontent.com/u/35165017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IgorShcherbakov", "html_url": "https://github.com/IgorShcherbakov", "followers_url": "https://api.github.com/users/IgorShcherbakov/followers", "following_url": "https://api.github.com/users/IgorShcherbakov/following{/other_user}", "gists_url": "https://api.github.com/users/IgorShcherbakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/IgorShcherbakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IgorShcherbakov/subscriptions", "organizations_url": "https://api.github.com/users/IgorShcherbakov/orgs", "repos_url": "https://api.github.com/users/IgorShcherbakov/repos", "events_url": "https://api.github.com/users/IgorShcherbakov/events{/privacy}", "received_events_url": "https://api.github.com/users/IgorShcherbakov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-03-22T14:28:12Z", "updated_at": "2024-10-29T07:04:35Z", "closed_at": "2024-08-23T00:47:03Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "If you run GE in a container (Kubernetes), then after performing checks in the database you can see requests in the \u201csuspended\u201d status. Is it possible to forcefully close all connections to the database after performing the checks?\r\n\r\nExample query:\r\nSELECT sum(CASE WHEN ([PK_ID] IS NOT NULL) THEN 1 ELSE 0 END) AS [column_values.null.unexpected_count] \r\nFROM [#gx_temp_d56615b6]\r\n\r\nGreat Expectations Version: 0.18.8", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9648/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 1, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9648/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9632", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9632/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9632/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9632/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9632", "id": 2191828021, "node_id": "I_kwDOBiS_IM6CpKQ1", "number": 9632, "title": "Data Docs in Azure ADLS $web subdirectory not working", "user": {"login": "damczyk", "id": 48328727, "node_id": "MDQ6VXNlcjQ4MzI4NzI3", "avatar_url": "https://avatars.githubusercontent.com/u/48328727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/damczyk", "html_url": "https://github.com/damczyk", "followers_url": "https://api.github.com/users/damczyk/followers", "following_url": "https://api.github.com/users/damczyk/following{/other_user}", "gists_url": "https://api.github.com/users/damczyk/gists{/gist_id}", "starred_url": "https://api.github.com/users/damczyk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/damczyk/subscriptions", "organizations_url": "https://api.github.com/users/damczyk/orgs", "repos_url": "https://api.github.com/users/damczyk/repos", "events_url": "https://api.github.com/users/damczyk/events{/privacy}", "received_events_url": "https://api.github.com/users/damczyk/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6895559346, "node_id": "LA_kwDOBiS_IM8AAAABmwHisg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/azure", "name": "azure", "color": "415BF1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-18T10:34:14Z", "updated_at": "2024-08-23T00:47:12Z", "closed_at": "2024-08-23T00:47:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nPlease see also https://discourse.greatexpectations.io/t/data-docs-in-azure-adls-web-subdirectory-not-working/1627 \r\n\r\nHello together,\r\n\r\n**Environment**\r\nOperating system: Databricks + Azure ADLS Gen2\r\nVersion numbers:\r\nProgramming language: Python\r\nProblem Statement:\r\nI was trying to do the following:\r\nI configured my GX in a way that I\u2019m able to store my GX artifacts (GX Expectations, GX Checkpoint etc.) in an ADLS Gen2 project container. Second I wanted to store my GX data docs from executed checkpoints in as a static website in the $web container. Because of several other projects are using the same Azure storage account I wanted to put my data docs in $web/ct10/ subdirectory (ct10 is my project), expecting that the main page index.html will show a list of executed checkpoints results. This works btw when I use the root dir $web instead of $web/ct10/\r\n\r\nInstead, this is happening:\r\nAfter executing some checkpoints index.html shows no list\r\n![image](https://github.com/great-expectations/great_expectations/assets/48328727/dab714c8-f754-4aaa-b0be-0f3627d07b65)\r\n\r\n\r\nReproducing the issue: Details necessary to enable us to reproduce the issue and provide a quick resolution. E.g.: What commands or code did you run and/or what actions did you take that led to the issue?Steps to reproduce the behavior could look something like the following:\r\n\r\nI ran this command or piece of code \u2018\u2026\u2019\r\nMy code:\r\n\r\n```\r\n\r\ncontext_root_dir = f\"/dbfs{project.MNT_PATH}/DataQuality/GX/\"\r\n\r\nproject_config = gx.data_context.types.base.DataContextConfig(\r\n    ## Local storage backend\r\n    store_backend_defaults=gx.data_context.types.base.FilesystemStoreBackendDefaults(\r\n      root_directory=context_root_dir\r\n    ),\r\n    ## Data docs site storage\r\n    data_docs_sites={\r\n      \"az_site\": {\r\n        \"class_name\": \"SiteBuilder\",\r\n        \"store_backend\": {\r\n          \"class_name\": \"TupleAzureBlobStoreBackend\",\r\n          \"container\":  \"\\$web\",\r\n          \"prefix\": \"ct10/\",\r\n          \"connection_string\":  \"DefaultEndpointsProtocol=https;AccountName=<storage_account>>;AccountKey=<key>;EndpointSuffix=core.windows.net\",\r\n        },\r\n        \"site_index_builder\": {\r\n          \"class_name\": \"DefaultSiteIndexBuilder\",\r\n          \"show_cta_footer\": True,\r\n        },\r\n      }\r\n    },\r\n  )\r\n\r\ncontext = gx.get_context(project_config=project_config)\r\n\r\ndata_source_name = f\"{get_hive_table_db_name()}\".lower()\r\n  data_asset_name = f\"{get_product_name()}\".lower()\r\n  batch_request = (context\r\n    .sources\r\n    .add_or_update_spark(name=data_source_name)\r\n    .add_dataframe_asset(name=data_asset_name, dataframe=df_Staging)\r\n    .build_batch_request()\r\n  )\r\n\r\n# Run the default onboarding profiler on the batch request\r\n    onboarding_data_assistant_result = (context\r\n    .assistants\r\n    .onboarding\r\n    .run(\r\n        batch_request=batch_request,\r\n        exclude_column_names=[],\r\n        estimation=\"flag_outliers\", # default: \"exact\"\r\n    )\r\n    )\r\n\r\n    # Get the suite with specific name\r\n    onboarding_suite_name = \"onboarding_\"+data_source_name+\"_\"+data_asset_name\r\n    onboarding_suite = (onboarding_data_assistant_result\r\n    .get_expectation_suite(\r\n        expectation_suite_name=onboarding_suite_name\r\n    )\r\n    )\r\n\r\n    # Perist expectation suite with the specified suite name from above\r\n    context.add_or_update_expectation_suite(expectation_suite=onboarding_suite)\r\n\r\n    onboarding_checkpoint_name=\"onboarding_\"+data_source_name+\"_\"+data_asset_name\r\n\r\n    # Create and persist checkpoint to reuse for multiple batches\r\n    context.add_or_update_checkpoint(\r\n        name = onboarding_checkpoint_name,\r\n        config_version = 1,\r\n        class_name = \"SimpleCheckpoint\",\r\n        validations = [\r\n            {\"expectation_suite_name\": onboarding_suite_name}\r\n        ]\r\n    )\r\n\r\n# Run Onboarding checkpoint\r\n  checkpoint_result = context.run_checkpoint(\r\n    checkpoint_name=onboarding_checkpoint_name,\r\n    batch_request=batch_request\r\n  )\r\n```\r\n\r\nAdditional information:\r\nAt least documentation was created. But only reachable via deep-link\r\n![image](https://github.com/great-expectations/great_expectations/assets/48328727/6e0b6522-e485-474d-94a1-b710d138c2ec)\r\n\r\nNewest release was used 0.18.10\r\n\r\n**Expected behavior**\r\nI would expect to use sub-directories and .html files are written as content-type \"text/html\" in the $web container on ADLS Gen2\r\n\r\n**Additional context**\r\nWhen I use TupleFilesystemStoreBackend  instead of TupleAzureBlobStoreBackend \r\nData Docs are written to the wanted subfolder but as content-type application/octet-stream, which can not be opened directly in a browser (needs to be downloaded and opened locally). So that's also no option.\r\n\r\nUsing\r\n```\r\ndata_docs_sites={\r\n      \"az_site\": {\r\n        \"class_name\": \"SiteBuilder\",\r\n        \"store_backend\": {\r\n          \"class_name\": \"TupleAzureBlobStoreBackend\",\r\n          \"container\":  \"\\$web/subfolder\",\r\n          \"connection_string\":  \"DefaultEndpointsProtocol=https;AccountName=<storage_account>>;AccountKey=<key>;EndpointSuffix=core.windows.net\",\r\n        },\r\n        \"site_index_builder\": {\r\n          \"class_name\": \"DefaultSiteIndexBuilder\"\r\n        },\r\n      }\r\n    },\r\n```\r\nfiles are written in /subfolder subdirectory! And .html-files are in content-type text/html!\r\nBut unfortunately I get an error at the end\r\nand no index.html is generated in $web/subfolder\r\n```\r\nHttpResponseError: The requested URI does not represent any resource on the server.\r\nRequestId:e02116b8-601e-0035-66ef-6a7eae000000\r\nTime:2024-02-29T09:11:25.6007194Z\r\nErrorCode:InvalidUri\r\nContent: <?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<Error><Code>InvalidUri</Code><Message>The requested URI does not represent any resource on the server.\r\nRequestId:e02116b8-601e-0035-66ef-6a7eae000000\r\nTime:2024-02-29T09:11:25.6007194Z</Message></Error>\r\n```\r\n\r\nUsing setting\r\n```\r\n\"filepath_prefix\": \"subfolder/\",\r\n```\r\nI get errors like described here:\r\nhttps://discourse.greatexpectations.io/t/data-docs-in-azure-adls-web-subdirectory-not-working/1627/6?u=hdamczy\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9632/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9626", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9626/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9626/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9626/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9626", "id": 2187459187, "node_id": "I_kwDOBiS_IM6CYfpz", "number": 9626, "title": "expect_column_values_to_of_type does not work", "user": {"login": "sfan0704", "id": 27877044, "node_id": "MDQ6VXNlcjI3ODc3MDQ0", "avatar_url": "https://avatars.githubusercontent.com/u/27877044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfan0704", "html_url": "https://github.com/sfan0704", "followers_url": "https://api.github.com/users/sfan0704/followers", "following_url": "https://api.github.com/users/sfan0704/following{/other_user}", "gists_url": "https://api.github.com/users/sfan0704/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfan0704/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfan0704/subscriptions", "organizations_url": "https://api.github.com/users/sfan0704/orgs", "repos_url": "https://api.github.com/users/sfan0704/repos", "events_url": "https://api.github.com/users/sfan0704/events{/privacy}", "received_events_url": "https://api.github.com/users/sfan0704/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2356556764, "node_id": "MDU6TGFiZWwyMzU2NTU2NzY0", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:snowflake", "name": "stack:snowflake", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2024-03-14T23:45:03Z", "updated_at": "2024-08-23T00:47:22Z", "closed_at": "2024-08-23T00:47:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Opening an issue similar to this https://github.com/great-expectations/great_expectations/issues/5565              \r\n\r\nI'm also running into this problem while using a Snowflake datasource to check the type of the columns. \r\n\r\nHere are the specs,\r\n* python==3.10.13\r\n* great_expectatinos==0.18.10\r\n* SQLAlchemy==1.4.51\r\n* snowflake-connector-python==2.8.3\r\n* snowflake-sqlalchemy==1.4.7\r\n\r\nI was debugging through this and found that the metrics object only has the key `name` in the dict\r\n![Screenshot 2024-03-14 at 19 42 13](https://github.com/great-expectations/great_expectations/assets/27877044/51ff7e20-4ae2-45d9-9498-194fe0be79c1)\r\n\r\nstack trace\r\n![Screenshot 2024-03-14 at 19 38 59](https://github.com/great-expectations/great_expectations/assets/27877044/0fffd3f8-09b8-467c-af36-a5034769d5d2)\r\n\r\n_Originally posted by @sfan0704 in https://github.com/great-expectations/great_expectations/issues/5565#issuecomment-1998654976_\r\n            ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9626/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9626/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9616", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9616/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9616/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9616/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9616", "id": 2183919286, "node_id": "I_kwDOBiS_IM6CK_a2", "number": 9616, "title": "Python great expectation conditional logic with pyspark", "user": {"login": "niduttnb", "id": 14346621, "node_id": "MDQ6VXNlcjE0MzQ2NjIx", "avatar_url": "https://avatars.githubusercontent.com/u/14346621?v=4", "gravatar_id": "", "url": "https://api.github.com/users/niduttnb", "html_url": "https://github.com/niduttnb", "followers_url": "https://api.github.com/users/niduttnb/followers", "following_url": "https://api.github.com/users/niduttnb/following{/other_user}", "gists_url": "https://api.github.com/users/niduttnb/gists{/gist_id}", "starred_url": "https://api.github.com/users/niduttnb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/niduttnb/subscriptions", "organizations_url": "https://api.github.com/users/niduttnb/orgs", "repos_url": "https://api.github.com/users/niduttnb/repos", "events_url": "https://api.github.com/users/niduttnb/events{/privacy}", "received_events_url": "https://api.github.com/users/niduttnb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-13T12:41:43Z", "updated_at": "2024-03-18T16:58:30Z", "closed_at": "2024-03-18T16:58:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am trying to test a few data validation rules for my spark DF(running great expectation 0.18.9). I want to add a conditional logic such as verify **colA is NULL when colB is also NULL** . I am referring to the syntax here [https://docs.greatexpectations.io/docs/reference/learn/expectations/conditional_expectations/][1]\r\nThis is what i am trying\r\n\r\n\r\n    expectations_json = {\r\n            \"expectation_suite_name\": \"name\",\r\n            \"expectations\": [\r\n                {\r\n                    \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n                    \"kwargs\": \r\n                    {\r\n                        \"column\": \"colA\", \r\n                        \"row_condition\" :\"col(\\\"colB\\\").isNull()\",\r\n                        \"condition_parser\": \"great_expectations__experimental__\"\r\n                    }\r\n                }\r\n                ]\r\n            }\r\n    \r\n    geDF = SparkDFDataset(df)\r\n    expectation_suite = ExpectationSuite(**expectations_json)\r\n    dq_json_result = geDF.validate(expectation_suite)\r\n\r\nIt's a sparkDF i am running the code against. The code doesn't give an error, but the returned ***dq_json*** contains the following exception\r\n\r\n    \"exception_info\": {\r\n            \"raised_exception\": true,\r\n            \"exception_message\": \"TypeError: SparkDFDataset.expect_column_values_to_not_be_null() got an unexpected keyword argument 'row_condition'\"\r\n    }\r\n\r\nWould appreciate any leads\r\n\r\n\r\n\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9593", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9593/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9593/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9593/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9593", "id": 2175891720, "node_id": "I_kwDOBiS_IM6BsXkI", "number": 9593, "title": "Result JSON: SQL without RWI list", "user": {"login": "lenok2018", "id": 39565023, "node_id": "MDQ6VXNlcjM5NTY1MDIz", "avatar_url": "https://avatars.githubusercontent.com/u/39565023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lenok2018", "html_url": "https://github.com/lenok2018", "followers_url": "https://api.github.com/users/lenok2018/followers", "following_url": "https://api.github.com/users/lenok2018/following{/other_user}", "gists_url": "https://api.github.com/users/lenok2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/lenok2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lenok2018/subscriptions", "organizations_url": "https://api.github.com/users/lenok2018/orgs", "repos_url": "https://api.github.com/users/lenok2018/repos", "events_url": "https://api.github.com/users/lenok2018/events{/privacy}", "received_events_url": "https://api.github.com/users/lenok2018/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2024-03-08T11:53:57Z", "updated_at": "2024-08-23T00:47:35Z", "closed_at": "2024-08-23T00:47:35Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello team.\r\nOur team faces an unpleasant experience, using \"expect_column_values_to_not_be_null\" check with Prod data.\r\nProd DB tables contain a lot of null values now, so running GE test suits we obtain result JSON with thousands RWI in section Result format--> unexpected_list with COMPLETE setting.\r\nWe know that its an expected behavior of Complete setting, but this affects out result json significantly.\r\nSo, we are asking for new feature to provide the SQL without all this unexpected list rows. \r\nMaybe it could be an additional Keyword argument, which can switch off Unexpected list specification or some other decision.\r\n\r\nPlease, review the example of our json file - there are more than 40000 RWI in unexpected list:\r\n\r\n![image](https://github.com/great-expectations/great_expectations/assets/39565023/628aeb5d-9285-4683-89e9-9cae504d9978)\r\n\r\n\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9593/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9577", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9577/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9577/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9577/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9577", "id": 2169837352, "node_id": "I_kwDOBiS_IM6BVRco", "number": 9577, "title": "expect_column_pair_values_to_be_in_set throws exception when row has both column values to be paired missing", "user": {"login": "MaxTh0ma1s", "id": 69487547, "node_id": "MDQ6VXNlcjY5NDg3NTQ3", "avatar_url": "https://avatars.githubusercontent.com/u/69487547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaxTh0ma1s", "html_url": "https://github.com/MaxTh0ma1s", "followers_url": "https://api.github.com/users/MaxTh0ma1s/followers", "following_url": "https://api.github.com/users/MaxTh0ma1s/following{/other_user}", "gists_url": "https://api.github.com/users/MaxTh0ma1s/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaxTh0ma1s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaxTh0ma1s/subscriptions", "organizations_url": "https://api.github.com/users/MaxTh0ma1s/orgs", "repos_url": "https://api.github.com/users/MaxTh0ma1s/repos", "events_url": "https://api.github.com/users/MaxTh0ma1s/events{/privacy}", "received_events_url": "https://api.github.com/users/MaxTh0ma1s/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-03-05T18:01:48Z", "updated_at": "2024-08-23T00:47:44Z", "closed_at": "2024-08-23T00:47:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nSimple expect_column_pair_values_to_be_in_set expectation throws exception when row has both column values to be paired missing\r\n\r\n**To Reproduce**\r\nBasic setup, with the following expectation configured ...\r\n\r\n{\r\n  \"expectation_type\": \"expect_column_pair_values_to_be_in_set\",\r\n  \"kwargs\": {\r\n    \"column_A\": \"mycolA\",\r\n    \"column_B\": \"mycolB\",\r\n    \"value_pairs_set\": [[\"apple\", \"red\"], [\"apple\", \"green\"], [\"apple\", \"yellow\"], [\"banana\", \"yellow\"]]\r\n  }\r\n}\r\n\r\nSample data to reproduce\r\n\r\nid,mycolA,mycolB,valid\r\n1,apple,red,pass\r\n2,apple,green,pass\r\n3,apple,yellow,pass\r\n4,peach,peach,fail\r\n5,banana,yellow,pass\r\n6,banana,black,fail\r\n7,,,fail\r\n8,melon,melon,fail\r\n\r\nAn exception is raised\r\n\r\n        \"exception_info\": {\r\n          \"exception_traceback\": \"Traceback (most recent call last):\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 548, in _process_direct_and_bundled_metric_computation_configurations\\n    ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/great_expectations/expectations/metrics/map_metric_provider/map_condition_auxilliary_methods.py\\\", line 201, in _pandas_map_condition_query\\n    domain_values_df_filtered = domain_records_df[boolean_mapped_unexpected_values]\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/pandas/core/frame.py\\\", line 3884, in __getitem__\\n    return self._getitem_bool_array(key)\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/pandas/core/frame.py\\\", line 3940, in _getitem_bool_array\\n    key = check_bool_indexer(self.index, key)\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/pandas/core/indexing.py\\\", line 2575, in check_bool_indexer\\n    raise IndexingError(\\npandas.errors.IndexingError: Unalignable boolean Series provided as indexer (index of the boolean Series and of the indexed object do not match).\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/great_expectations/validator/validation_graph.py\\\", line 285, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 283, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \\\"/opt/anaconda3/envs/my-repo/lib/python3.9/site-packages/great_expectations/execution_engine/execution_engine.py\\\", line 552, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: Unalignable boolean Series provided as indexer (index of the boolean Series and of the indexed object do not match).\\n\",\r\n          \"exception_message\": \"Unalignable boolean Series provided as indexer (index of the boolean Series and of the indexed object do not match).\",\r\n          \"raised_exception\": true\r\n        }\r\n\r\n**Expected behavior**\r\nI do not expect basic use of this expectation on simple data to throw an exception.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.8\r\n - Data Source: .csv sample data listed above\r\n - Pandas Version: 2.1.4 \r\n\r\n**Additional context**\r\nNote issue was reproduced by Rachel House\r\nhttps://discourse.greatexpectations.io/t/how-to-specify-expect-column-pair-values-to-be-in-set-value-pairs-set-input-arg-via-json/1621/5", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9577/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9577/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9568", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9568/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9568/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9568/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9568", "id": 2167287242, "node_id": "I_kwDOBiS_IM6BLi3K", "number": 9568, "title": "Failed tests are drop by the report", "user": {"login": "runawaycoast", "id": 97460234, "node_id": "U_kgDOBc8gCg", "avatar_url": "https://avatars.githubusercontent.com/u/97460234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/runawaycoast", "html_url": "https://github.com/runawaycoast", "followers_url": "https://api.github.com/users/runawaycoast/followers", "following_url": "https://api.github.com/users/runawaycoast/following{/other_user}", "gists_url": "https://api.github.com/users/runawaycoast/gists{/gist_id}", "starred_url": "https://api.github.com/users/runawaycoast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/runawaycoast/subscriptions", "organizations_url": "https://api.github.com/users/runawaycoast/orgs", "repos_url": "https://api.github.com/users/runawaycoast/repos", "events_url": "https://api.github.com/users/runawaycoast/events{/privacy}", "received_events_url": "https://api.github.com/users/runawaycoast/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-04T16:45:56Z", "updated_at": "2024-03-05T21:34:21Z", "closed_at": "2024-03-05T21:34:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIf the expectation tests do not pass after running the validation, the failed tests will not be included in the report. \r\n\r\n**To Reproduce**\r\nThis is modified from https://docs.greatexpectations.io/docs/oss/tutorials/quickstart/, I changed the second expectation's max_value from 6 to 2, and the report does not include that test. \r\n```python\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\n\r\nvalidator = context.sources.pandas_default.read_csv(\r\n    \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\"\r\n)\r\n\r\nvalidator.expect_column_values_to_not_be_null(\"pickup_datetime\")\r\nvalidator.expect_column_values_to_be_between(\r\n    \"passenger_count\", min_value=1, max_value=2 # change from max_value=6\r\n)\r\nvalidator.save_expectation_suite()\r\n\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name=\"my_quickstart_checkpoint\",\r\n    validator=validator,\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\n\r\ncontext.view_validation_result(checkpoint_result)\r\n\r\n```\r\n\r\n**Expected behavior**\r\nit should show the errors.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.10\r\n - Data Source: Pandas(CSV file)\r\n - Cloud environment: N/A\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "runawaycoast", "id": 97460234, "node_id": "U_kgDOBc8gCg", "avatar_url": "https://avatars.githubusercontent.com/u/97460234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/runawaycoast", "html_url": "https://github.com/runawaycoast", "followers_url": "https://api.github.com/users/runawaycoast/followers", "following_url": "https://api.github.com/users/runawaycoast/following{/other_user}", "gists_url": "https://api.github.com/users/runawaycoast/gists{/gist_id}", "starred_url": "https://api.github.com/users/runawaycoast/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/runawaycoast/subscriptions", "organizations_url": "https://api.github.com/users/runawaycoast/orgs", "repos_url": "https://api.github.com/users/runawaycoast/repos", "events_url": "https://api.github.com/users/runawaycoast/events{/privacy}", "received_events_url": "https://api.github.com/users/runawaycoast/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9568/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9568/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9556", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9556/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9556/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9556/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9556", "id": 2163274872, "node_id": "I_kwDOBiS_IM6A8PR4", "number": 9556, "title": "How to split the pandas df data into multiple batches  based on a column('date') ?", "user": {"login": "jagadeesanmuthuvel", "id": 40339983, "node_id": "MDQ6VXNlcjQwMzM5OTgz", "avatar_url": "https://avatars.githubusercontent.com/u/40339983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jagadeesanmuthuvel", "html_url": "https://github.com/jagadeesanmuthuvel", "followers_url": "https://api.github.com/users/jagadeesanmuthuvel/followers", "following_url": "https://api.github.com/users/jagadeesanmuthuvel/following{/other_user}", "gists_url": "https://api.github.com/users/jagadeesanmuthuvel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jagadeesanmuthuvel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jagadeesanmuthuvel/subscriptions", "organizations_url": "https://api.github.com/users/jagadeesanmuthuvel/orgs", "repos_url": "https://api.github.com/users/jagadeesanmuthuvel/repos", "events_url": "https://api.github.com/users/jagadeesanmuthuvel/events{/privacy}", "received_events_url": "https://api.github.com/users/jagadeesanmuthuvel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-03-01T12:13:48Z", "updated_at": "2024-08-23T00:48:11Z", "closed_at": "2024-08-23T00:48:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nI have created a batchrequest from pandas dataframe using below code\r\n \r\n```python\r\ndef get_batch_request(context,data_asset_name,source_name,df):\r\n    data_asset = context.sources.add_or_update_pandas(name=source_name).\\\r\n        add_dataframe_asset(name=data_asset_name,dataframe=df)\r\n    return data_asset.build_batch_request(),data_asset\r\n```\r\n\r\nHow to split the pandas df data into multiple batches  based on a column('date') ?\r\n\r\nI could see some of this implementation in GE api v2 documentantion. But i am not sure abt it for v3?\r\nhttps://legacy.docs.greatexpectations.io/en/latest/autoapi/great_expectations/execution_engine/split_and_sample/pandas_data_splitter/index.html\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9556/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9556/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9546", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9546/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9546/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9546/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9546", "id": 2158245538, "node_id": "I_kwDOBiS_IM6ApDai", "number": 9546, "title": "[BUG] Expectation type expect_column_values_to_match_regex fails for databricks-sqlalchemy", "user": {"login": "satniks", "id": 54166582, "node_id": "MDQ6VXNlcjU0MTY2NTgy", "avatar_url": "https://avatars.githubusercontent.com/u/54166582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/satniks", "html_url": "https://github.com/satniks", "followers_url": "https://api.github.com/users/satniks/followers", "following_url": "https://api.github.com/users/satniks/following{/other_user}", "gists_url": "https://api.github.com/users/satniks/gists{/gist_id}", "starred_url": "https://api.github.com/users/satniks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/satniks/subscriptions", "organizations_url": "https://api.github.com/users/satniks/orgs", "repos_url": "https://api.github.com/users/satniks/repos", "events_url": "https://api.github.com/users/satniks/events{/privacy}", "received_events_url": "https://api.github.com/users/satniks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6647650005, "node_id": "LA_kwDOBiS_IM8AAAABjDsW1Q", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/databricks-sql", "name": "databricks-sql", "color": "DD243C", "default": false, "description": "DatabricksSQL related"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2024-02-28T06:53:00Z", "updated_at": "2024-08-23T00:48:36Z", "closed_at": "2024-08-23T00:48:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We are using latest GX (v 0.18.10) with databricks based on python packages sqlalchemy-databricks and databricks-sql-connector.\r\n\r\nAll our GX rules which worked fine with databricks/sqlalchemy except the rule for regular expression. We get following error in the validation result indicating there is no support for databricks for regex rules using sqlalchemy.\r\n\r\n\"Regex is not supported for dialect {_dialect.dialect.name!s} \r\n\"\\nAttributeError: \\'DatabricksDialect\\' object has no attribute \\'dialect\\'", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9546/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9546/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9541", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9541/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9541/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9541/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9541", "id": 2157288059, "node_id": "I_kwDOBiS_IM6AlZp7", "number": 9541, "title": "expect_column_max_to_be_between not working for Date column", "user": {"login": "franciskuttivelil", "id": 69468027, "node_id": "MDQ6VXNlcjY5NDY4MDI3", "avatar_url": "https://avatars.githubusercontent.com/u/69468027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/franciskuttivelil", "html_url": "https://github.com/franciskuttivelil", "followers_url": "https://api.github.com/users/franciskuttivelil/followers", "following_url": "https://api.github.com/users/franciskuttivelil/following{/other_user}", "gists_url": "https://api.github.com/users/franciskuttivelil/gists{/gist_id}", "starred_url": "https://api.github.com/users/franciskuttivelil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/franciskuttivelil/subscriptions", "organizations_url": "https://api.github.com/users/franciskuttivelil/orgs", "repos_url": "https://api.github.com/users/franciskuttivelil/repos", "events_url": "https://api.github.com/users/franciskuttivelil/events{/privacy}", "received_events_url": "https://api.github.com/users/franciskuttivelil/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-02-27T17:58:20Z", "updated_at": "2024-08-23T00:36:46Z", "closed_at": "2024-08-23T00:36:46Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello Support,\r\n\r\nGetting the below error. The expectation works on other tables except the below. Have checked the table and cannot find anything different from other tables. Please help resolve this issue.\r\n\r\nThe expectation checks if the data in the table is fresh. It does that by checking if the date column has yesterday's date in it.\r\nmax(date) >= yesterday's date\r\n\r\nCode:\r\n\r\n`validator.expect_column_max_to_be_between(column=date_col, min_value=(datetime.now()-timedelta(days=last_day_delta)).replace(hour=0, minute=0, second=0, microsecond=0))`\r\n\r\nError:\r\n\r\n```\r\nexpect_column_max_to_be_between raised an exception:\r\nMetric ('column.max', 'a3473ad0fd2ad330bcda16b9b0353e40', 'parse_strings_as_datetimes=False') is not available for validation of { \"expectation_type\": \"expect_column_max_to_be_between\", \"kwargs\": { \"column\": \"Date\", \"min_value\": \"2024-01-25 00:00:00\", \"batch_id\": \"ds_clientcode_clientname_google_ctv_datasource-ds_clientcode_clientname_google_ctv_data_asset\" }, \"meta\": {} }. Please check your configuration.\r\nShow exception traceback...\r\n\r\nTraceback (most recent call last):\r\nFile \"/usr/share/tomcat10/.local/lib/python3.11/site-packages/great_expectations/validator/validator.py\", line 1074, in graph_validate\r\nresult = configuration.metrics_validate(\r\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nFile \"/usr/share/tomcat10/.local/lib/python3.11/site-packages/great_expectations/core/expectation_configuration.py\", line 1494, in metrics_validate\r\nreturn expectation_impl(self).metrics_validate(\r\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nFile \"/usr/share/tomcat10/.local/lib/python3.11/site-packages/great_expectations/expectations/expectation.py\", line 1061, in metrics_validate\r\n_validate_dependencies_against_available_metrics(\r\nFile \"/usr/share/tomcat10/.local/lib/python3.11/site-packages/great_expectations/expectations/expectation.py\", line 3739, in _validate_dependencies_against_available_metrics\r\nraise InvalidExpectationConfigurationError(\r\ngreat_expectations.exceptions.exceptions.InvalidExpectationConfigurationError: Metric ('column.max', 'a3473ad0fd2ad330bcda16b9b0353e40', 'parse_strings_as_datetimes=False') is not available for validation of {\r\n\"expectation_type\": \"expect_column_max_to_be_between\",\r\n\"kwargs\": {\r\n\"column\": \"Date\",\r\n\"min_value\": \"2024-01-25 00:00:00\",\r\n\"batch_id\": \"ds_clientcode_clientname_google_ctv_datasource-ds_clientcode_clientname_google_ctv_data_asset\"\r\n},\r\n\"meta\": {}\r\n}. Please check your configuration.\r\n```\r\nThanks\r\n\r\n**Environment :**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.18.7\r\n - Data Source: Pandas\r\n - Cloud environment: AWS\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9541/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9541/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9528", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9528/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9528/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9528/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9528", "id": 2152882037, "node_id": "I_kwDOBiS_IM6AUl91", "number": 9528, "title": "Docs page in Firefox says \"this page crashed: too much recursion\"", "user": {"login": "zsol", "id": 66740, "node_id": "MDQ6VXNlcjY2NzQw", "avatar_url": "https://avatars.githubusercontent.com/u/66740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zsol", "html_url": "https://github.com/zsol", "followers_url": "https://api.github.com/users/zsol/followers", "following_url": "https://api.github.com/users/zsol/following{/other_user}", "gists_url": "https://api.github.com/users/zsol/gists{/gist_id}", "starred_url": "https://api.github.com/users/zsol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zsol/subscriptions", "organizations_url": "https://api.github.com/users/zsol/orgs", "repos_url": "https://api.github.com/users/zsol/repos", "events_url": "https://api.github.com/users/zsol/events{/privacy}", "received_events_url": "https://api.github.com/users/zsol/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-02-25T18:22:09Z", "updated_at": "2024-03-11T14:50:05Z", "closed_at": "2024-03-11T14:50:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When loading the main docs at https://docs.greatexpectations.io/docs/home/ in Firefox 123.0 on Windows, I see the following:\r\n\r\n![image](https://github.com/great-expectations/great_expectations/assets/66740/fcce5c95-bfd4-46e0-aaca-45e595780a27)\r\n\r\nJS console shows large stacktraces involving `index.ts` and `posthog-core.ts` as well as:\r\n```\r\n[PostHog.js] PostHog library has already been downloaded at least once.\r\n```\r\nHappy to get the entire stack trace if it's helpful (it's minified).\r\n\r\nChrome seems to be working fine.\r\n", "closed_by": {"login": "joshzzheng", "id": 726214, "node_id": "MDQ6VXNlcjcyNjIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/726214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshzzheng", "html_url": "https://github.com/joshzzheng", "followers_url": "https://api.github.com/users/joshzzheng/followers", "following_url": "https://api.github.com/users/joshzzheng/following{/other_user}", "gists_url": "https://api.github.com/users/joshzzheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshzzheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshzzheng/subscriptions", "organizations_url": "https://api.github.com/users/joshzzheng/orgs", "repos_url": "https://api.github.com/users/joshzzheng/repos", "events_url": "https://api.github.com/users/joshzzheng/events{/privacy}", "received_events_url": "https://api.github.com/users/joshzzheng/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9528/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9527", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9527/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9527/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9527/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9527", "id": 2151864366, "node_id": "I_kwDOBiS_IM6AQtgu", "number": 9527, "title": "can't find class RenderedTableContent in great_expectations.render.types or great_expectations.render", "user": {"login": "arunprasadbh", "id": 7785958, "node_id": "MDQ6VXNlcjc3ODU5NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7785958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arunprasadbh", "html_url": "https://github.com/arunprasadbh", "followers_url": "https://api.github.com/users/arunprasadbh/followers", "following_url": "https://api.github.com/users/arunprasadbh/following{/other_user}", "gists_url": "https://api.github.com/users/arunprasadbh/gists{/gist_id}", "starred_url": "https://api.github.com/users/arunprasadbh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arunprasadbh/subscriptions", "organizations_url": "https://api.github.com/users/arunprasadbh/orgs", "repos_url": "https://api.github.com/users/arunprasadbh/repos", "events_url": "https://api.github.com/users/arunprasadbh/events{/privacy}", "received_events_url": "https://api.github.com/users/arunprasadbh/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-23T21:54:29Z", "updated_at": "2024-08-23T00:36:59Z", "closed_at": "2024-08-23T00:36:59Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nClass RenderedTableContent is not available\r\n\r\n**To Reproduce**\r\nfrom great_expectations.render.types import RenderedTableContent\r\nor \r\nfrom great_expectations.render import RenderedTableContent\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n- Great Expectations Version: [e.g. 0.18.3]\r\n - Cloud environment:  Databricks\r\n\r\n**Additional context**\r\nMy code base is using great_expectations  15.6. I am trying to upgrade to v 18.3. I use a reference to RenderedTableContent. But in the latest versions, the class is not available.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9527/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9527/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9495", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9495/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9495/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9495/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9495", "id": 2144767309, "node_id": "I_kwDOBiS_IM5_1o1N", "number": 9495, "title": "Deprecation: Quickly explore Expectations in a notebook", "user": {"login": "Nathan-Kr", "id": 66138267, "node_id": "MDQ6VXNlcjY2MTM4MjY3", "avatar_url": "https://avatars.githubusercontent.com/u/66138267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nathan-Kr", "html_url": "https://github.com/Nathan-Kr", "followers_url": "https://api.github.com/users/Nathan-Kr/followers", "following_url": "https://api.github.com/users/Nathan-Kr/following{/other_user}", "gists_url": "https://api.github.com/users/Nathan-Kr/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nathan-Kr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nathan-Kr/subscriptions", "organizations_url": "https://api.github.com/users/Nathan-Kr/orgs", "repos_url": "https://api.github.com/users/Nathan-Kr/repos", "events_url": "https://api.github.com/users/Nathan-Kr/events{/privacy}", "received_events_url": "https://api.github.com/users/Nathan-Kr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-20T16:21:47Z", "updated_at": "2024-03-18T16:20:53Z", "closed_at": "2024-03-18T16:20:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi, I would want to use great expectation in my jupyter notebook.\r\n\r\nI found this in legacy documentation: https://github.com/great-expectations/great_expectations/blob/develop/docs_rtd/guides/tutorials/explore_expectations_in_a_notebook.rst\r\n\r\nI've tested it and it still work in the latest release (0.18.9). \r\n\r\nIs it planned to deprecate it ? \r\nIs it not recommended anymore ?\r\n\r\nIf anyone could clarify on that.\r\nThank you", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9495/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9495/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9457", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9457/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9457/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9457/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9457", "id": 2136529861, "node_id": "I_kwDOBiS_IM5_WNvF", "number": 9457, "title": "Bad format(type Error)  with function json.dump()", "user": {"login": "ejlm1988", "id": 97613528, "node_id": "U_kgDOBdF22A", "avatar_url": "https://avatars.githubusercontent.com/u/97613528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ejlm1988", "html_url": "https://github.com/ejlm1988", "followers_url": "https://api.github.com/users/ejlm1988/followers", "following_url": "https://api.github.com/users/ejlm1988/following{/other_user}", "gists_url": "https://api.github.com/users/ejlm1988/gists{/gist_id}", "starred_url": "https://api.github.com/users/ejlm1988/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ejlm1988/subscriptions", "organizations_url": "https://api.github.com/users/ejlm1988/orgs", "repos_url": "https://api.github.com/users/ejlm1988/repos", "events_url": "https://api.github.com/users/ejlm1988/events{/privacy}", "received_events_url": "https://api.github.com/users/ejlm1988/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6901113590, "node_id": "LA_kwDOBiS_IM8AAAABm1ai9g", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/block-style-datasource", "name": "block-style-datasource", "color": "ADCD22", "default": false, "description": "Issue involving a deprecated block-style datasource"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-15T13:29:28Z", "updated_at": "2024-08-23T00:37:11Z", "closed_at": "2024-08-23T00:37:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn the executions, an error message appears stating that the log with the information could not be loaded, because the data has not been formatted correctly.\r\n\r\nReturn error -> TypeError: not all arguments converted during string formatting\r\n\r\nThe file great_expectations.yml is the next:\r\n\r\n```yaml\r\nconfig_version: 3.0\r\n\r\ndatasources:\r\n  mysql_datasource:\r\n    data_connectors:\r\n      default_runtime_data_connector_name:\r\n        module_name: great_expectations.datasource.data_connector\r\n        name: default_runtime_data_connector_name\r\n        batch_identifiers:\r\n          - default_identifier_name\r\n        class_name: RuntimeDataConnector\r\n      default_inferred_data_connector_name:\r\n        include_schema_name: true\r\n        module_name: great_expectations.datasource.data_connector\r\n        name: default_inferred_data_connector_name\r\n        class_name: InferredAssetSqlDataConnector\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      connection_string: **connection db**\r\n      module_name: great_expectations.execution_engine\r\n      class_name: SqlAlchemyExecutionEngine\r\n      create_temp_table: false\r\n    name: mysql_datasource\r\n    class_name: Datasource\r\n  bigquery_datasource:\r\n    data_connectors:\r\n      default_runtime_data_connector_name:\r\n        module_name: great_expectations.datasource.data_connector\r\n        batch_identifiers:\r\n          - default_identifier_name\r\n        class_name: RuntimeDataConnector\r\n      default_inferred_data_connector_name:\r\n        include_schema_name: true\r\n        module_name: great_expectations.datasource.data_connector\r\n        class_name: InferredAssetSqlDataConnector\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      connection_string: **connection db json**\r\n      module_name: great_expectations.execution_engine\r\n      class_name: SqlAlchemyExecutionEngine\r\n      create_temp_table: false\r\n    class_name: Datasource\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: 4bf1545b-0773-4230-b5c8-f13f6afff4f8\r\n  enabled: true\r\nnotebooks:\r\ninclude_rendered_content:\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n  globally: false\r\n```\r\n\r\n**Expected behavior**\r\nI hope you don't get the error that the log information could not be formatted.\r\n\r\n**Environment (please complete the following information):**\r\n  - No LSB modules are available.\r\n  - Distributor ID: Ubuntu\r\n  - Description:    Ubuntu 20.04.4 LTS\r\n  - Release:        20.04\r\n  Codename:       focal\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9457/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9420", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9420/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9420/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9420/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9420", "id": 2126839858, "node_id": "I_kwDOBiS_IM5-xQAy", "number": 9420, "title": "UserConfigurableProfiler skips date/decimal columns", "user": {"login": "mishbahr", "id": 1264089, "node_id": "MDQ6VXNlcjEyNjQwODk=", "avatar_url": "https://avatars.githubusercontent.com/u/1264089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mishbahr", "html_url": "https://github.com/mishbahr", "followers_url": "https://api.github.com/users/mishbahr/followers", "following_url": "https://api.github.com/users/mishbahr/following{/other_user}", "gists_url": "https://api.github.com/users/mishbahr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mishbahr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mishbahr/subscriptions", "organizations_url": "https://api.github.com/users/mishbahr/orgs", "repos_url": "https://api.github.com/users/mishbahr/repos", "events_url": "https://api.github.com/users/mishbahr/events{/privacy}", "received_events_url": "https://api.github.com/users/mishbahr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-09T10:17:02Z", "updated_at": "2024-03-18T16:25:44Z", "closed_at": "2024-03-18T16:25:23Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nWhen passing a Pandas dataframe containing date and decimal columns to the UserConfigurableProfiler, the expected output should include the \"expect_column_values_to_be_in_type_list\" expectation for every column. However, the expectation is skipped for the \"date\" and \"decimal\" columns.\r\n\r\n**To Reproduce**\r\n\r\n1. Create a Pandas dataframe with date and decimal columns.\r\n\r\n```python\r\ndata = {\r\n    \"user_id\": [1],\r\n    \"name\": [\"Clark Kent\"],\r\n    \"dob\": [\"1980-05-06\"],\r\n    \"is_hero\": [True],\r\n    \"height\": [6.1],\r\n    \"last_login\": [pd.Timestamp(\"2023-01-01 08:00:00\")],\r\n    \"balance\": [Decimal(\"150.00\")],\r\n}\r\ndf = pd.DataFrame(data)\r\ndf[\"dob\"] = pd.to_datetime(df[\"dob\"]).dt.date\r\n```\r\n2. Pass the dataframe to the UserConfigurableProfiler.\r\n\r\n**Expected behavior**\r\n\r\nThe UserConfigurableProfiler should include the \"expect_column_values_to_be_in_type_list\" expectation for every column in the dataframe.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.18.8\r\n - Data Source: Pandas\r\n - Cloud environment: N/A\r\n\r\n\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9420/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9389", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9389/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9389/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9389/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9389", "id": 2120702212, "node_id": "I_kwDOBiS_IM5-Z1kE", "number": 9389, "title": "Expect_compound_columns_to_be_unique does not show SQL query neither in DataDocs nor in JSON", "user": {"login": "0lgaZv", "id": 121400745, "node_id": "U_kgDOBzxtqQ", "avatar_url": "https://avatars.githubusercontent.com/u/121400745?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0lgaZv", "html_url": "https://github.com/0lgaZv", "followers_url": "https://api.github.com/users/0lgaZv/followers", "following_url": "https://api.github.com/users/0lgaZv/following{/other_user}", "gists_url": "https://api.github.com/users/0lgaZv/gists{/gist_id}", "starred_url": "https://api.github.com/users/0lgaZv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0lgaZv/subscriptions", "organizations_url": "https://api.github.com/users/0lgaZv/orgs", "repos_url": "https://api.github.com/users/0lgaZv/repos", "events_url": "https://api.github.com/users/0lgaZv/events{/privacy}", "received_events_url": "https://api.github.com/users/0lgaZv/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-06T12:48:58Z", "updated_at": "2024-08-23T00:37:25Z", "closed_at": "2024-08-23T00:37:25Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe result of expect_compound_columns_to_be_unique does not show the SQL query in DataDocs with result format market as 'Complete'. The sql query could not be found in json with the result of the validation. \r\n\r\n**To Reproduce**\r\nTo run the checkpoint and the suite with the same structure. Removing row_condition does not help\r\n\r\nExpectation:\r\n\r\n` {\r\n      \"expectation_type\": \"expect_compound_columns_to_be_unique\",\r\n      \"kwargs\": {\r\n        \"column_list\": [\r\n          \"a\",\r\n          \"b\",\r\n           \"c\"\r\n        ],\r\n\t\t\"condition_parser\": \"great_expectations__experimental__\",\r\n        \"row_condition\": \"col(\\\"d\\\")==\\\"e\\\"\"\r\n      },\r\n     \"meta\": {\"note\": \"f\"}\r\n      }`\r\n\r\nCheckpoint:\r\n`runtime_configuration: {\r\n  \"result_format\": {\r\n            \"result_format\": \"COMPLETE\",\r\n            \"unexpected_index_column_names\": [\"a\", \"b\", \"c\", \"d\"],\r\n            \"return_unexpected_index_query\": True,\r\n            \"partial_unexpected_count\": 100\r\n    }\r\n}\r\nvalidations:\r\n  - batch_request:\r\n      datasource_name: ***\r\n      data_connector_name: default_runtime_data_connector_name\r\n      data_asset_name: QWER\r\n      runtime_parameters:\r\n       query: \"           \r\n            SELECT \r\n                a,\r\n                b,\r\n                c,\r\n                d\r\n            FROM QWER   \r\n        \"\r\n      batch_identifiers:\r\n        default_identifier_name: default_identifier`\r\n\r\n**Expected behavior**\r\nSQL query in format in form to be performed on the basis of batch should appear in datadocs and in JSON file. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: great_expectations[sqlalchemy] 0.18.6, SQLAlchemy 2.0.0\r\n - Data Source: MS SQL Server\r\n - Cloud environment: Azure\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9389/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9387", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9387/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9387/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9387/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9387", "id": 2119596914, "node_id": "I_kwDOBiS_IM5-Vnty", "number": 9387, "title": "AWS RDS Data source Secrets - Assume role support", "user": {"login": "TejjeT", "id": 7541216, "node_id": "MDQ6VXNlcjc1NDEyMTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7541216?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TejjeT", "html_url": "https://github.com/TejjeT", "followers_url": "https://api.github.com/users/TejjeT/followers", "following_url": "https://api.github.com/users/TejjeT/following{/other_user}", "gists_url": "https://api.github.com/users/TejjeT/gists{/gist_id}", "starred_url": "https://api.github.com/users/TejjeT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TejjeT/subscriptions", "organizations_url": "https://api.github.com/users/TejjeT/orgs", "repos_url": "https://api.github.com/users/TejjeT/repos", "events_url": "https://api.github.com/users/TejjeT/events{/privacy}", "received_events_url": "https://api.github.com/users/TejjeT/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-02-05T22:41:20Z", "updated_at": "2024-08-23T00:37:36Z", "closed_at": "2024-08-23T00:37:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nAt present the Open source GX allows users to read secrets from aws secrets. However this wont allow us to assume the role and read the secrets. We have use cases where we would need to assume role both for postgres and Athena and we are unable to acheive this just with config.\r\n\r\n**Describe the solution you'd like**\r\nI should be able to assume role for specific data source , allowing me to be able to the retrieve the passwords from cross account.\r\n\r\n**Describe alternatives you've considered**\r\nNone\r\n\r\n**Additional context**\r\nNone\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9387/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9379", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9379/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9379/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9379/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9379", "id": 2119023345, "node_id": "I_kwDOBiS_IM5-Tbrx", "number": 9379, "title": "Cannot send Email via EmailAction, when (internal) Email server does not need authentication", "user": {"login": "MarcelBeining", "id": 1278660, "node_id": "MDQ6VXNlcjEyNzg2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1278660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcelBeining", "html_url": "https://github.com/MarcelBeining", "followers_url": "https://api.github.com/users/MarcelBeining/followers", "following_url": "https://api.github.com/users/MarcelBeining/following{/other_user}", "gists_url": "https://api.github.com/users/MarcelBeining/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcelBeining/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcelBeining/subscriptions", "organizations_url": "https://api.github.com/users/MarcelBeining/orgs", "repos_url": "https://api.github.com/users/MarcelBeining/repos", "events_url": "https://api.github.com/users/MarcelBeining/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcelBeining/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-02-05T16:56:11Z", "updated_at": "2024-08-23T00:37:47Z", "closed_at": "2024-08-23T00:37:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nOne is not able to send an Email via an internal server that does not require authentication (see below).\r\n\r\nI would be willing do create a PR to fix this, if it is fine, that GX supports sending such emails.\r\n\r\n**To Reproduce**\r\nI am using the EmailAction class to send a summary validation result to an email address\r\n\r\n```\r\nfrom great_expectations.checkpoint import EmailAction\r\naction = EmailAction(\r\n            data_context=None,\r\n            renderer={\r\n                \"module_name\": \"great_expectations.render.renderer.email_renderer\",\r\n                \"class_name\": \"EmailRenderer\",\r\n            },\r\n            smtp_address=smtp_address,\r\n            smtp_port=smtp_port,\r\n            sender_login=sender_login,\r\n            sender_password=sender_password,\r\n            receiver_emails=\",\".join(recipients),\r\n            sender_alias=sender_alias,\r\n            use_ssl=security_protocol.lower() == \"ssl\",\r\n            use_tls=security_protocol.lower() == \"tls\",\r\n            notify_on=self._notify_on,\r\n            notify_with=None,\r\n        )\r\n```\r\nWhen I try to run the action via `action.run(...)`\r\nI get \r\n\r\n> \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Traceback (most recent call last) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n> \u2502 C:\\XXXXX\\scratches\\scra \u2502\r\n> \u2502 tch_5.py:19 in <module>                                                     \u2502\r\n> \u2502                                                                             \u2502\r\n> \u2502   16 \u2502   \"recipients\": [\"XXXXX\"]                         \u2502\r\n> \u2502   17 }                                                                      \u2502\r\n> \u2502   18                                                                        \u2502\r\n> \u2502 > 19 notifier = EmailNotifier(**email_notifier)                             \u2502\r\n> \u2502   20                                                                        \u2502\r\n> \u2502   21 summary_validation_result = ExpectationSuiteValidationResult(          \u2502\r\n> \u2502   22 \u2502   success=True,                                                      \u2502\r\n> \u2502                                                                             \u2502\r\n> \u2502 XXXXX\\venv\\lib\\site-packages\\kedro_expectat \u2502\r\n> \u2502 ions\\notification.py:85 in __init__                                         \u2502\r\n> \u2502                                                                             \u2502\r\n> \u2502    82 \u2502   \u2502   \u2502   notify_on=notify_on,                                      \u2502\r\n> \u2502    83 \u2502   \u2502   \u2502   subject=subject,                                          \u2502\r\n> \u2502    84 \u2502   \u2502   )                                                             \u2502\r\n> \u2502 >  85 \u2502   \u2502   self._action = EmailAction(                                   \u2502\r\n> \u2502    86 \u2502   \u2502   \u2502   data_context=None,                                        \u2502\r\n> \u2502    87 \u2502   \u2502   \u2502   renderer={                                                \u2502\r\n> \u2502    88 \u2502   \u2502   \u2502   \u2502   \"module_name\": \"great_expectations.render.renderer.em \u2502\r\n> \u2502                                                                             \u2502\r\n> \u2502 XXXXXXX\\venv\\lib\\site-packages\\great_expectat \u2502\r\n> \u2502 ions\\checkpoint\\actions.py:760 in __init__                                  \u2502\r\n> \u2502                                                                             \u2502\r\n> \u2502    757 \u2502   \u2502   self.use_ssl = use_ssl                                       \u2502\r\n> \u2502    758 \u2502   \u2502   assert smtp_address, \"No SMTP server address found in action \u2502\r\n> \u2502    759 \u2502   \u2502   assert smtp_port, \"No SMTP server port found in action confi \u2502\r\n> \u2502 >  760 \u2502   \u2502   assert sender_login, \"No login found for sending the email i \u2502\r\n> \u2502    761 \u2502   \u2502   assert (                                                     \u2502\r\n> \u2502    762 \u2502   \u2502   \u2502   sender_password                                          \u2502\r\n> \u2502    763 \u2502   \u2502   ), \"No password found for sending the email in action config \u2502\r\n> \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n> AssertionError: No login found for sending the email in action config.\r\n> \r\n\r\nHowever I must not provide a login as the server does not require one (it is an internal server and only allow specific recipients).\r\nWhen I provide None or empty strings as login and password, it won't work, as the great expectation utils methos `send_email` always tries to perform a login with the provided login/password, which will fail.\r\n\r\n\r\n**Expected behavior**\r\nShould be able to send an email to an internal email server that does not require authentication, by not defining `sender_login` and `sender_password` (or define it as None).\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.18.8\r\n - Data Source: None\r\n - Cloud environment: None\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9379/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9379/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9336", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9336/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9336/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9336/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9336", "id": 2109563088, "node_id": "I_kwDOBiS_IM59vWDQ", "number": 9336, "title": "Wrong documentation for adding a metric store ", "user": {"login": "MayarMaged", "id": 46088798, "node_id": "MDQ6VXNlcjQ2MDg4Nzk4", "avatar_url": "https://avatars.githubusercontent.com/u/46088798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MayarMaged", "html_url": "https://github.com/MayarMaged", "followers_url": "https://api.github.com/users/MayarMaged/followers", "following_url": "https://api.github.com/users/MayarMaged/following{/other_user}", "gists_url": "https://api.github.com/users/MayarMaged/gists{/gist_id}", "starred_url": "https://api.github.com/users/MayarMaged/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MayarMaged/subscriptions", "organizations_url": "https://api.github.com/users/MayarMaged/orgs", "repos_url": "https://api.github.com/users/MayarMaged/repos", "events_url": "https://api.github.com/users/MayarMaged/events{/privacy}", "received_events_url": "https://api.github.com/users/MayarMaged/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-31T08:35:35Z", "updated_at": "2024-08-23T00:37:56Z", "closed_at": "2024-08-23T00:37:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "# I am trying to create a metric store and i find the documentation to be incomplete and has wrong data\r\n\r\nIt's written in the documentation here to configure the database for the metric store like that\r\n![image](https://github.com/great-expectations/great_expectations/assets/46088798/49101974-2e14-4737-b0d4-6750dad5b0b5)\r\n\r\nI chose the inline credentials \r\n![image](https://github.com/great-expectations/great_expectations/assets/46088798/dfe7a394-a427-4874-8a61-1f0a6cca67c1)\r\n\r\nbut when I tried to get the gx project context it produced an error\r\n\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\context_factory.py\", line 368, in _get_file_context\r\n    return FileDataContext(\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\file_data_context.py\", line 67, in __init__\r\n    super().__init__(\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\serializable_data_context.py\", line 68, in __init__\r\n    super().__init__(runtime_environment=runtime_environment)\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\core\\usage_statistics\\usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 301, in __init__\r\n    self._init_primary_stores(self.project_config_with_variables_substituted.stores)\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 4385, in _init_primary_stores\r\n    self._build_store_from_config(store_name, store_config)\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\data_context\\abstract_data_context.py\", line 4318, in _build_store_from_config\r\n    new_store = Store.build_store_from_config(\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\store\\store.py\", line 319, in build_store_from_config\r\n    new_store = instantiate_class_from_config(\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\util.py\", line 98, in instantiate_class_from_config\r\n    class_instance = class_(**config_with_defaults)\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\store\\metric_store.py\", line 63, in __init__\r\n    super().__init__(store_backend=store_backend, store_name=store_name)\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\store\\store.py\", line 87, in __init__\r\n    self._store_backend = instantiate_class_from_config(\r\n                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\util.py\", line 98, in instantiate_class_from_config\r\n    class_instance = class_(**config_with_defaults)\r\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\store\\database_store_backend.py\", line 73, in __init__\r\n    self.engine = self._build_engine(credentials=credentials, **kwargs)\r\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\Users\\DELL\\Desktop\\Repos\\DataPlatform\\jig_data\\venv\\Lib\\site-packages\\great_expectations\\data_context\\store\\database_store_backend.py\", line 167, in _build_engine\r\n    drivername = credentials.pop(\"drivername\")\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nKeyError: 'drivername'\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\n## I changed the name in the credentials from driver to drivername and it worked\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9336/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9336/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9292", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9292/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9292/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9292/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9292", "id": 2102191417, "node_id": "I_kwDOBiS_IM59TOU5", "number": 9292, "title": "Pkg_resources module is deprecated", "user": {"login": "inigoferr", "id": 47816611, "node_id": "MDQ6VXNlcjQ3ODE2NjEx", "avatar_url": "https://avatars.githubusercontent.com/u/47816611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inigoferr", "html_url": "https://github.com/inigoferr", "followers_url": "https://api.github.com/users/inigoferr/followers", "following_url": "https://api.github.com/users/inigoferr/following{/other_user}", "gists_url": "https://api.github.com/users/inigoferr/gists{/gist_id}", "starred_url": "https://api.github.com/users/inigoferr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inigoferr/subscriptions", "organizations_url": "https://api.github.com/users/inigoferr/orgs", "repos_url": "https://api.github.com/users/inigoferr/repos", "events_url": "https://api.github.com/users/inigoferr/events{/privacy}", "received_events_url": "https://api.github.com/users/inigoferr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2024-01-26T13:09:53Z", "updated_at": "2024-01-26T16:51:33Z", "closed_at": "2024-01-26T16:51:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Problem**\r\nGX is using pkg_resources module which was deprecated in favor of importlib.resources and importlib.metadata, and their backports (importlib_resources, importlib_metadata). Some useful APIs are also provided by packaging. The same is mentioned in SetupTools official website [Access Link](https://setuptools.pypa.io/en/latest/pkg_resources.html).\r\n\r\n**Describe the solution**\r\nReplace pkg_resources module by importlib.resources, importlib.metadata and packaging modules.\r\n\r\n", "closed_by": {"login": "inigoferr", "id": 47816611, "node_id": "MDQ6VXNlcjQ3ODE2NjEx", "avatar_url": "https://avatars.githubusercontent.com/u/47816611?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inigoferr", "html_url": "https://github.com/inigoferr", "followers_url": "https://api.github.com/users/inigoferr/followers", "following_url": "https://api.github.com/users/inigoferr/following{/other_user}", "gists_url": "https://api.github.com/users/inigoferr/gists{/gist_id}", "starred_url": "https://api.github.com/users/inigoferr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inigoferr/subscriptions", "organizations_url": "https://api.github.com/users/inigoferr/orgs", "repos_url": "https://api.github.com/users/inigoferr/repos", "events_url": "https://api.github.com/users/inigoferr/events{/privacy}", "received_events_url": "https://api.github.com/users/inigoferr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9292/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9292/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9291", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9291/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9291/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9291/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9291", "id": 2101606913, "node_id": "I_kwDOBiS_IM59Q_oB", "number": 9291, "title": "No provider found for method using SqlAlchemyExecutionEngine for json-related expectations", "user": {"login": "leeroyaus", "id": 64235329, "node_id": "MDQ6VXNlcjY0MjM1MzI5", "avatar_url": "https://avatars.githubusercontent.com/u/64235329?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leeroyaus", "html_url": "https://github.com/leeroyaus", "followers_url": "https://api.github.com/users/leeroyaus/followers", "following_url": "https://api.github.com/users/leeroyaus/following{/other_user}", "gists_url": "https://api.github.com/users/leeroyaus/gists{/gist_id}", "starred_url": "https://api.github.com/users/leeroyaus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leeroyaus/subscriptions", "organizations_url": "https://api.github.com/users/leeroyaus/orgs", "repos_url": "https://api.github.com/users/leeroyaus/repos", "events_url": "https://api.github.com/users/leeroyaus/events{/privacy}", "received_events_url": "https://api.github.com/users/leeroyaus/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-01-26T05:10:44Z", "updated_at": "2024-08-23T00:38:07Z", "closed_at": "2024-08-23T00:38:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsing json-related expectations `expect_column_values_to_match_json_schema` and `expect_column_values_to_be_json_parseable`\r\n\r\n**To Reproduce**\r\n\r\nCode to reproduce (raw_data col contains json data as text):\r\n````\r\n{\r\n      \"expectation_type\": \"expect_column_values_to_be_json_parseable\",\r\n      \"kwargs\": {\r\n        \"column\": \"raw_data\"\r\n      },\r\n      \"meta\": {\r\n        \"notes\": {\r\n          \"content\": \"Check that column is json parseable\",\r\n          \"format\": \"markdown\"\r\n        }\r\n      }\r\n    }\r\n````\r\n\r\nFull stack traceback below:\r\n````\r\nNo provider found for column_values.json_parseable.unexpected_count using SqlAlchemyExecutionEngine\r\nShow exception traceback...\r\n\r\nTraceback (most recent call last):\r\nFile \"/workspace/pisa2025-api-etl/.venv/lib/python3.10/site-packages/great_expectations/expectations/registry.py\", line 304, in get_metric_provider\r\nreturn metric_definition[\"providers\"][type(execution_engine).__name__]\r\nKeyError: 'SqlAlchemyExecutionEngine'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\nFile \"/workspace/pisa2025-api-etl/.venv/lib/python3.10/site-packages/great_expectations/validator/validator.py\", line 1143, in _generate_metric_dependency_subgraphs_for_each_expectation_configuration\r\ngraph=self._metrics_calculator.build_metric_dependency_graph(\r\nFile \"/workspace/pisa2025-api-etl/.venv/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py\", line 208, in build_metric_dependency_graph\r\ngraph.build_metric_dependency_graph(\r\nFile \"/workspace/pisa2025-api-etl/.venv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\", line 130, in build_metric_dependency_graph\r\n) = self.set_metric_configuration_default_kwargs_if_absent(\r\nFile \"/workspace/pisa2025-api-etl/.venv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\", line 174, in set_metric_configuration_default_kwargs_if_absent\r\nmetric_impl_klass, metric_provider = get_metric_provider(\r\nFile \"/workspace/pisa2025-api-etl/.venv/lib/python3.10/site-packages/great_expectations/expectations/registry.py\", line 306, in get_metric_provider\r\nraise gx_exceptions.MetricProviderError(\r\ngreat_expectations.exceptions.exceptions.MetricProviderError: No provider found for column_values.json_parseable.unexpected_count using SqlAlchemyExecutionEngine\r\n````\r\n\r\n**Expected behavior**\r\nExpectations to run without error\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux via Docker Desktop for Windows\r\n - Great Expectations Version: 0.18.3\r\n - Data Source: PostgreSQL tables\r\n - Cloud environment: N/A (PostgreSQL db hosted on docker network)\r\n\r\n**Additional context**\r\nSeems to be an issue parsing any JSON data, so not sure if it's related to my set up (but please let me know if you need more information)\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9291/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9291/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9283", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9283/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9283/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9283/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9283", "id": 2100626833, "node_id": "I_kwDOBiS_IM59NQWR", "number": 9283, "title": "EphemeralDataContext does not load fluent datasources correctly", "user": {"login": "leotrs", "id": 1096704, "node_id": "MDQ6VXNlcjEwOTY3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1096704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leotrs", "html_url": "https://github.com/leotrs", "followers_url": "https://api.github.com/users/leotrs/followers", "following_url": "https://api.github.com/users/leotrs/following{/other_user}", "gists_url": "https://api.github.com/users/leotrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/leotrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leotrs/subscriptions", "organizations_url": "https://api.github.com/users/leotrs/orgs", "repos_url": "https://api.github.com/users/leotrs/repos", "events_url": "https://api.github.com/users/leotrs/events{/privacy}", "received_events_url": "https://api.github.com/users/leotrs/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-25T15:23:38Z", "updated_at": "2024-08-27T14:29:06Z", "closed_at": "2024-08-23T00:38:20Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n`EphemeralDataContext` does not load fluent datasources correctly (as part of `project_config`).\r\n\r\n**To Reproduce**\r\nUse this code to reproduce:\r\n```python\r\nimport great_expectations as gx\r\n\r\n# Create two different contexts using THE SAME config\r\nfile_ctx = gx.data_context.FileDataContext.create(<path_to_great_expectations_yml_file>)\r\nephm_ctx = gx.data_context.EphemeralDataContext(project_config=file_ctx.config)\r\n\r\n# Compare their datasources...\r\nprint(f\"{file_ctx.datasources=}\")\r\nprint(f\"{ephm_ctx.datasources=}\")\r\n```\r\n\r\nAt the bottom of this note you can see the example `great_expectations.yml` configuration file I am using. The above code shows:\r\n```python\r\nfile_ctx.datasources={'my_bq_source': SQLDatasource(type='sql', name='my_bq_source', id=None, assets=[TableAsset(name='panel_asset', type='table', id=None, order_by=[], batch_metadata={}, splitter=None, table_name='taxi_zone_geom', schema_name=None)], connection_string='bigquery://bigquery-public-data/new_york_taxi_trips', create_temp_table=False, kwargs={})}\r\nephm_ctx.datasources={}\r\n```\r\n\r\nAs can be seen, the `FileDataContext` recognizes the fluent datasource as a datasource, whereas the `EphemeralDataContext` does not, _even when its config is extracted from that of the_ `FileDataContext`!\r\n\r\nFurthermore, I have been able to trace the problem to the `fluent_config` attribute:\r\n```python\r\nprint(f\"{file_ctx.fluent_config=}\")\r\nprint(f\"{ephm_ctx.fluent_config=}\")\r\n```\r\nOutput:\r\n```python\r\nfile_ctx.fluent_config=GxConfig(fluent_datasources=[SQLDatasource(type='sql', name='my_bq_source', id=None, assets=[TableAsset(name='table_asset', type='table', id=None, order_by=[], batch_metadata={}, splitter=None, table_name='taxi_zone_geom', schema_name=None)], connection_string='bigquery://bigquery-public-data/new_york_taxi_trips', create_temp_table=False, kwargs={})])\r\nephm_ctx.fluent_config=GxConfig(fluent_datasources=[])\r\n```\r\n\r\nThe reason for this discrepancy seems to be the `_load_fluent_config` method, which is called as part of the base class's constructor, [here](https://github.com/great-expectations/great_expectations/blob/a83a3f45de1bc196d69304bb3ec4fbeaafbc496c/great_expectations/data_context/data_context/abstract_data_context.py#L275). `FileDataConfig` overrides it ([here](https://github.com/great-expectations/great_expectations/blob/a83a3f45de1bc196d69304bb3ec4fbeaafbc496c/great_expectations/data_context/data_context/file_data_context.py#L221)), while `EphemeralDataConfig` does not and simply falls back to the parent's class implementation, that is `AbstractDataContext._load_fluent_config`. However, this is essentially not implemented and simply returns an empty container (as seen [here](https://github.com/great-expectations/great_expectations/blob/a83a3f45de1bc196d69304bb3ec4fbeaafbc496c/great_expectations/data_context/data_context/abstract_data_context.py#L4597)).\r\n\r\nThis is to say, only the `FileDataConfig` makes the attempt to ingest the fluent datasources, while any other class that does not override `_load_fluent_config` will miss these sources.\r\n\r\n**Expected behavior**\r\nI would expect the `EphemeralDataContext` to process the given configuration in exactly the same way as the `FileDataContext`, namely the fluent datasource should be recognized.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS Venture 13.4.1\r\n - Great Expectations Version: 0.18.8\r\n - Data Source: BigQuery\r\n - Cloud environment: GCP\r\n\r\n**Additional context**\r\nContents of the `great_expectations.yml` configuration file:\r\n<details>\r\n\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\n# plugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store_GCS:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleGCSStoreBackend\r\n      project: bigquery-public-data\r\n      bucket: some-bucket\r\n      prefix: expectations\r\n\r\n  validations_store_GCS:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleGCSStoreBackend\r\n      project: bigquery-public-data\r\n      bucket: some-bucket\r\n      prefix: validations\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store_GCS:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleGCSStoreBackend\r\n      project: bigquery-public-data\r\n      bucket: some-bucket\r\n      prefix: checkpoints\r\n\r\nexpectations_store_name: expectations_store_GCS\r\nvalidations_store_name: validations_store_GCS\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store_GCS\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: 00000000-0000-0000-0000-00000000e003\r\n  enabled: true\r\nfluent_datasources:\r\n  my_bq_source:\r\n    type: sql\r\n    assets:\r\n      table_asset:\r\n        type: table\r\n        order_by: []\r\n        batch_metadata: {}\r\n        table_name: taxi_zone_geom\r\n        schema_name:\r\n    connection_string: bigquery://bigquery-public-data/new_york_taxi_trips\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\nplugins_directory:\r\n\r\n```\r\n\r\n</details>\r\n\r\n\r\nNOTE: The code snippets above will also output some warnings, related the fact that the configuration file contains dummy names for GCS buckets. These are irrelevant to the present issue. I have tested this code with actual GCS buckets and the warnings go away but the problem persists.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9283/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9283/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9269", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9269/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9269/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9269/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9269", "id": 2096436290, "node_id": "I_kwDOBiS_IM589RRC", "number": 9269, "title": "SNSNotificationAction class has a bug, run returns str instead of Dict", "user": {"login": "ejstembler", "id": 45985338, "node_id": "MDQ6VXNlcjQ1OTg1MzM4", "avatar_url": "https://avatars.githubusercontent.com/u/45985338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ejstembler", "html_url": "https://github.com/ejstembler", "followers_url": "https://api.github.com/users/ejstembler/followers", "following_url": "https://api.github.com/users/ejstembler/following{/other_user}", "gists_url": "https://api.github.com/users/ejstembler/gists{/gist_id}", "starred_url": "https://api.github.com/users/ejstembler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ejstembler/subscriptions", "organizations_url": "https://api.github.com/users/ejstembler/orgs", "repos_url": "https://api.github.com/users/ejstembler/repos", "events_url": "https://api.github.com/users/ejstembler/events{/privacy}", "received_events_url": "https://api.github.com/users/ejstembler/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-23T16:09:50Z", "updated_at": "2024-08-23T00:38:30Z", "closed_at": "2024-08-23T00:38:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "The [SNSNotificationAction](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/checkpoint/actions.py) class has a bug.  The `run` function ultimately returns a `str` from [util/send_sns_notification](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/checkpoint/util.py#L516-L552) instead of an expected `Dict`.\r\n\r\nThis results in a error:\r\n\r\n```console\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/validation_operators/validation_operators.py\", line 502, in _run_actions\r\n    batch_actions_results[action[\"name\"]][\"class\"] = action[\"action\"][\r\nTypeError: 'str' object does not support item assignment\r\n[2024-01-02, 21:53:46 UTC] {taskinstance.py:1768} ERROR - Task failed with exception\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations_provider/operators/great_expectations.py\", line 592, in execute\r\n    result = self.checkpoint.run()\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/checkpoint/checkpoint.py\", line 1263, in run\r\n    return super().run(\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/checkpoint/checkpoint.py\", line 305, in run\r\n    self._run_validation(\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/checkpoint/checkpoint.py\", line 530, in _run_validation\r\n    async_validation_operator_result = async_executor.submit(\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/core/async_executor.py\", line 106, in submit\r\n    return AsyncResult(value=fn(*args, **kwargs))\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/validation_operators/validation_operators.py\", line 415, in run\r\n    batch_actions_results = self._run_actions(\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/validation_operators/validation_operators.py\", line 508, in _run_actions\r\n    raise e\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/validation_operators/validation_operators.py\", line 502, in _run_actions\r\n    batch_actions_results[action[\"name\"]][\"class\"] = action[\"action\"][\r\nTypeError: 'str' object does not support item assignment\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9269/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9269/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9267", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9267/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9267/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9267/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9267", "id": 2096301238, "node_id": "I_kwDOBiS_IM588wS2", "number": 9267, "title": "expect_compound_columns_to_be_unique renders the different columns together in the data docs", "user": {"login": "Adchartuni", "id": 31518853, "node_id": "MDQ6VXNlcjMxNTE4ODUz", "avatar_url": "https://avatars.githubusercontent.com/u/31518853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Adchartuni", "html_url": "https://github.com/Adchartuni", "followers_url": "https://api.github.com/users/Adchartuni/followers", "following_url": "https://api.github.com/users/Adchartuni/following{/other_user}", "gists_url": "https://api.github.com/users/Adchartuni/gists{/gist_id}", "starred_url": "https://api.github.com/users/Adchartuni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Adchartuni/subscriptions", "organizations_url": "https://api.github.com/users/Adchartuni/orgs", "repos_url": "https://api.github.com/users/Adchartuni/repos", "events_url": "https://api.github.com/users/Adchartuni/events{/privacy}", "received_events_url": "https://api.github.com/users/Adchartuni/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-23T15:10:26Z", "updated_at": "2024-08-23T00:38:43Z", "closed_at": "2024-08-23T00:38:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen executing a checkpoint with result_format : COMPLETE the results for expect_compound_columns_to_be_unique\r\nlook smushed together and do not differentiate each column.\r\n**To Reproduce**\r\nExecute an expect_compound_columns_to_be_unique expectation via a checkpoint with result_format COMPLETE.\r\n\r\n**Expected behavior**\r\nEach column to render separately as it behaves with result_format BASIC\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MaCOS\r\n - Great Expectations Version: 0.18.3\r\n - Data Source: SQL Datasource (ATHENA)\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9267/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9250", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9250/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9250/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9250/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9250", "id": 2090216377, "node_id": "I_kwDOBiS_IM58liu5", "number": 9250, "title": "Nested dicts within ExpectationSuiteValidationResult are no SerializableDictDot", "user": {"login": "MarcelBeining", "id": 1278660, "node_id": "MDQ6VXNlcjEyNzg2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1278660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcelBeining", "html_url": "https://github.com/MarcelBeining", "followers_url": "https://api.github.com/users/MarcelBeining/followers", "following_url": "https://api.github.com/users/MarcelBeining/following{/other_user}", "gists_url": "https://api.github.com/users/MarcelBeining/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcelBeining/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcelBeining/subscriptions", "organizations_url": "https://api.github.com/users/MarcelBeining/orgs", "repos_url": "https://api.github.com/users/MarcelBeining/repos", "events_url": "https://api.github.com/users/MarcelBeining/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcelBeining/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-19T10:34:02Z", "updated_at": "2024-08-23T00:38:56Z", "closed_at": "2024-08-23T00:38:56Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI wanted to use the EmailAction to send an email using a validation result returned by `context.get_validation_result` but the renderer tries to access a value within the validation result using dot notation (as the validation result is inherited from SerializableDictDot) but it is a simple dictionary: `validation_result.meta[\"active_batch_definition\"].data_asset_name`\r\n\r\nSo I would guess one of the following classes/methods has a bug:\r\n- The method `get_validation_result` by not transforming the information under meta into dictdot classes\r\n- The class `ExpectationSuiteValidationResult` by not transforming the information under meta into dictdot classes\r\n- The `EmailRenderer` by trying to access the key \"data_asset_name\" with dot notation although it should be accessed via dict key.\r\n\r\n\r\n**To Reproduce**\r\n*great_expectations.yml config*\r\n\r\n```\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: XXXXX\r\n  enabled: true\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\nfluent_datasources:\r\n  kedro_pandas_in_memory_datasource:\r\n    type: pandas\r\n    assets:\r\n      companies:\r\n        type: dataframe\r\n        batch_metadata: {}\r\n```\r\n\r\n\r\n_Executed code:_\r\n```\r\nimport great_expectations as ge\r\nfrom great_expectations.render.renderer import EmailRenderer\r\n\r\n\r\nge_context = ge.get_context()\r\nvalidation_result = ge_context.get_validation_result(\r\n                SUITE_NAME, run_id=RUN_ID\r\n            )\r\nEmailRenderer().render(validation_result)\r\n```\r\n\r\n_Error Traceback_\r\n\r\n> Traceback (most recent call last):\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\click\\core.py\", line 1078, in main\r\n>     rv = self.invoke(ctx)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\click\\core.py\", line 1434, in invoke\r\n>     return ctx.invoke(self.callback, **ctx.params)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\click\\core.py\", line 783, in invoke\r\n>     return __callback(*args, **kwargs)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\kedro\\framework\\cli\\project.py\", line 224, in run\r\n>     session.run(\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\kedro\\framework\\session\\session.py\", line 406, in run\r\n>     hook_manager.hook.after_pipeline_run(\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_hooks.py\", line 433, in __call__\r\n>     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_manager.py\", line 112, in _hookexec\r\n>     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_manager.py\", line 418, in traced_hookexec\r\n>     return outcome.get_result()\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_result.py\", line 108, in get_result\r\n>     raise exc.with_traceback(exc.__traceback__)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_result.py\", line 70, in from_call\r\n>     result = func()\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_manager.py\", line 415, in <lambda>\r\n>     lambda: oldcall(hook_name, hook_impls, caller_kwargs, firstresult)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_callers.py\", line 116, in _multicall\r\n>     raise exception.with_traceback(exception.__traceback__)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\pluggy\\_callers.py\", line 80, in _multicall\r\n>     res = hook_impl.function(*args)\r\n>   File \"code\\kedro-expectations\\kedro_expectations\\kedro_expectations.py\", line 147, in after_pipeline_run\r\n>     EmailRenderer.render(validation_result)\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\great_expectations\\checkpoint\\actions.py\", line 100, in run\r\n>     return self._run(\r\n>   File \"Code\\kedro-expectations\\venv\\lib\\site-packages\\great_expectations\\checkpoint\\actions.py\", line 813, in _run\r\n>     title, html = self.renderer.render(\r\n>   File Code\\kedro-expectations\\venv\\lib\\site-packages\\great_expectations\\render\\renderer\\email_renderer.py\", line 38, in render\r\n>     if validation_result.meta[\"active_batch_definition\"].data_asset_name\r\n> AttributeError: 'dict' object has no attribute 'data_asset_name'\r\n> python-BaseException\r\n> \r\n\r\n\r\n**Expected behavior**\r\nThe EmailRenderer should simply render the content of the validation result.\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows64\r\n - Great Expectations Version: 0.18.4\r\n - Data Source: fluent Pandas\r\n - Cloud environment: None\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9250/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9250/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9245", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9245/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9245/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9245/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9245", "id": 2088182927, "node_id": "I_kwDOBiS_IM58dySP", "number": 9245, "title": "Great Expectations and Airflow 2.6.3 Conflict - Click package", "user": {"login": "itaise", "id": 64745584, "node_id": "MDQ6VXNlcjY0NzQ1NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/64745584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itaise", "html_url": "https://github.com/itaise", "followers_url": "https://api.github.com/users/itaise/followers", "following_url": "https://api.github.com/users/itaise/following{/other_user}", "gists_url": "https://api.github.com/users/itaise/gists{/gist_id}", "starred_url": "https://api.github.com/users/itaise/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itaise/subscriptions", "organizations_url": "https://api.github.com/users/itaise/orgs", "repos_url": "https://api.github.com/users/itaise/repos", "events_url": "https://api.github.com/users/itaise/events{/privacy}", "received_events_url": "https://api.github.com/users/itaise/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-18T12:25:48Z", "updated_at": "2024-03-29T14:52:17Z", "closed_at": "2024-03-29T14:52:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi,\r\nWe've encountered an issue while attempting to upgrade Apache Airflow from version 2.6.2 to version 2.6.3.\r\n\r\nThere is a mismatch in the allowed versions of the \"click\" package between Great Expectations >= 0.17.17 and Airflow 2.6.3.\r\n\r\nAirflow 2.6.3 requires click 8.1.4: \r\nhttps://raw.githubusercontent.com/apache/airflow/constraints-2.6.3/constraints-3.10.txt\r\n\r\nWhile GE version 0.17.17 and onwards disallow it.\r\nI saw that the cause of it is some MyPy typing bug in click 8.1.4.\r\n\r\n\r\nWe need a quick upgrade of Airflow due to a major bug in Airflow 2.6.2,\r\nAnd we cannot currently upgrade to later version of Airflow (like 2.7.0). \r\nSo would like to know what can be done regarding it? \r\nthanks a lot! \r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9245/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9245/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9244", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9244/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9244/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9244/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9244", "id": 2088063903, "node_id": "I_kwDOBiS_IM58dVOf", "number": 9244, "title": "GE V18: Getting 'EphemeralDataContext' object has no attribute 'create_expectation_suite' error", "user": {"login": "staggjim", "id": 28097437, "node_id": "MDQ6VXNlcjI4MDk3NDM3", "avatar_url": "https://avatars.githubusercontent.com/u/28097437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staggjim", "html_url": "https://github.com/staggjim", "followers_url": "https://api.github.com/users/staggjim/followers", "following_url": "https://api.github.com/users/staggjim/following{/other_user}", "gists_url": "https://api.github.com/users/staggjim/gists{/gist_id}", "starred_url": "https://api.github.com/users/staggjim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staggjim/subscriptions", "organizations_url": "https://api.github.com/users/staggjim/orgs", "repos_url": "https://api.github.com/users/staggjim/repos", "events_url": "https://api.github.com/users/staggjim/events{/privacy}", "received_events_url": "https://api.github.com/users/staggjim/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-18T11:13:29Z", "updated_at": "2024-05-10T08:18:11Z", "closed_at": "2024-01-19T11:58:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I have been using GE with older versions up to and including 17.0. I am now upgrading to version 18 but when I do I am getting this error related to my Data Context config:\r\n\r\n`\r\n'EphemeralDataContext' object has no attribute 'create_expectation_suite'`\r\n\r\nError is triggered by this line of code:\r\n\r\n```\r\ncontext.create_expectation_suite(\r\n            expectation_suite_name=expectation_suite_name, overwrite_existing=True\r\n        )\r\n```\r\n\r\nData Context config is:\r\n\r\n```\r\ndata_context_config = DataContextConfig(\r\n        data_docs_sites=data_docs_sites,\r\n        store_backend_defaults=FilesystemStoreBackendDefaults(\r\n            root_directory=root_directory\r\n        ),\r\n    )\r\ncontext = BaseDataContext(project_config=data_context_config)\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.0\r\n - Data Source: Spark\r\n - Cloud environment: Databricks\r\n\r\nFull Error:\r\n\r\n```\r\nAttributeError: 'EphemeralDataContext' object has no attribute 'create_expectation_suite'\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\nFile <command--1>:13\r\n     10 del sys\r\n     12 with open(filename, \"rb\") as f:\r\n---> 13   exec(compile(f.read(), filename, 'exec'))\r\n\r\nFile /tmp/tmpgxj4hu8s.py:94\r\n     88         validator.expect_column_values_to_not_be_null(\"fi_sub_formulary_name\")\r\n     90         # validator.expect_column_values_to_be_between(\"adh_days_covered\", 1, 366)\r\n     91         # validator.expect_column_pair_values_a_to_be_greater_than_b(\"adh_days_in\", \"adh_days_covered\")\r\n---> 94 FAdherencePDCExpectations().execute()\r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.9/site-packages/template.py:43, in ExpectationsTemplate.execute(self)\r\n     39     df = self.read_target_df()\r\n     41 batch_request = get_batch_request(df)\r\n---> 43 context.create_expectation_suite(\r\n     44     expectation_suite_name=expectation_suite_name, overwrite_existing=True\r\n     45 )\r\n     47 validator = context.get_validator(\r\n     48     batch_request=batch_request,\r\n     49     expectation_suite_name=expectation_suite_name,\r\n     50 )\r\n     52 # Subclass to implement expectations\r\n\r\nAttributeError: 'EphemeralDataContext' object has no attribute 'create_expectation_suite'\r\n```\r\n\r\n", "closed_by": {"login": "staggjim", "id": 28097437, "node_id": "MDQ6VXNlcjI4MDk3NDM3", "avatar_url": "https://avatars.githubusercontent.com/u/28097437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/staggjim", "html_url": "https://github.com/staggjim", "followers_url": "https://api.github.com/users/staggjim/followers", "following_url": "https://api.github.com/users/staggjim/following{/other_user}", "gists_url": "https://api.github.com/users/staggjim/gists{/gist_id}", "starred_url": "https://api.github.com/users/staggjim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/staggjim/subscriptions", "organizations_url": "https://api.github.com/users/staggjim/orgs", "repos_url": "https://api.github.com/users/staggjim/repos", "events_url": "https://api.github.com/users/staggjim/events{/privacy}", "received_events_url": "https://api.github.com/users/staggjim/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9244/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9244/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9233", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9233/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9233/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9233/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9233", "id": 2080727757, "node_id": "I_kwDOBiS_IM58BWLN", "number": 9233, "title": "'NoneType' object is not iterable", "user": {"login": "IgorShcherbakov", "id": 35165017, "node_id": "MDQ6VXNlcjM1MTY1MDE3", "avatar_url": "https://avatars.githubusercontent.com/u/35165017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IgorShcherbakov", "html_url": "https://github.com/IgorShcherbakov", "followers_url": "https://api.github.com/users/IgorShcherbakov/followers", "following_url": "https://api.github.com/users/IgorShcherbakov/following{/other_user}", "gists_url": "https://api.github.com/users/IgorShcherbakov/gists{/gist_id}", "starred_url": "https://api.github.com/users/IgorShcherbakov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IgorShcherbakov/subscriptions", "organizations_url": "https://api.github.com/users/IgorShcherbakov/orgs", "repos_url": "https://api.github.com/users/IgorShcherbakov/repos", "events_url": "https://api.github.com/users/IgorShcherbakov/events{/privacy}", "received_events_url": "https://api.github.com/users/IgorShcherbakov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2024-01-14T13:24:22Z", "updated_at": "2024-08-23T00:39:12Z", "closed_at": "2024-08-23T00:39:12Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am running into this error several times over for mssql sources.\r\n**expect_column_values_to_not_be_null raised an exception: 'NoneType' object is not iterable**\r\n![\u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435](https://github.com/great-expectations/great_expectations/assets/35165017/fdda28d3-40cd-4be9-b06e-d8aeeb5a1104)\r\nvalues must never be null.\r\n\r\nexpect_column_values_to_not_be_null raised an exception:\r\n'NoneType' object is not iterable\r\n\r\nShow exception traceback...\r\nTraceback (most recent call last):\r\nFile \"E:\\Projects\\GreatExpectations\\venv\\lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 548, in _process_direct_and_bundled_metric_computation_configurations\r\n] = metric_computation_configuration.metric_fn( # type: ignore[misc] # F not callable\r\nFile \"E:\\Projects\\GreatExpectations\\venv\\lib\\site-packages\\great_expectations\\expectations\\metrics\\metric_provider.py\", line 60, in inner_func\r\nreturn metric_fn(*args, **kwargs)\r\nFile \"E:\\Projects\\GreatExpectations\\venv\\lib\\site-packages\\great_expectations\\expectations\\metrics\\table_metrics\\table_columns.py\", line 43, in _sqlalchemy\r\nreturn [col[\"name\"] for col in column_metadata]\r\nTypeError: 'NoneType' object is not iterable\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\nFile \"E:\\Projects\\GreatExpectations\\venv\\lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 285, in _resolve\r\nself._execution_engine.resolve_metrics(\r\nFile \"E:\\Projects\\GreatExpectations\\venv\\lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 283, in resolve_metrics\r\nreturn self._process_direct_and_bundled_metric_computation_configurations(\r\nFile \"E:\\Projects\\GreatExpectations\\venv\\lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 552, in _process_direct_and_bundled_metric_computation_configurations\r\nraise gx_exceptions.MetricResolutionError(\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: 'NoneType' object is not iterable\r\n\r\nGreat Expectations Version: 0.18.7\r\nData Source: MSSQL", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9233/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9233/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9210", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9210/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9210/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9210/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9210", "id": 2072929477, "node_id": "I_kwDOBiS_IM57jmTF", "number": 9210, "title": "relax ruamel.yaml pin", "user": {"login": "Redoubts", "id": 2435101, "node_id": "MDQ6VXNlcjI0MzUxMDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2435101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Redoubts", "html_url": "https://github.com/Redoubts", "followers_url": "https://api.github.com/users/Redoubts/followers", "following_url": "https://api.github.com/users/Redoubts/following{/other_user}", "gists_url": "https://api.github.com/users/Redoubts/gists{/gist_id}", "starred_url": "https://api.github.com/users/Redoubts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Redoubts/subscriptions", "organizations_url": "https://api.github.com/users/Redoubts/orgs", "repos_url": "https://api.github.com/users/Redoubts/repos", "events_url": "https://api.github.com/users/Redoubts/events{/privacy}", "received_events_url": "https://api.github.com/users/Redoubts/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-09T18:27:32Z", "updated_at": "2024-07-15T13:43:05Z", "closed_at": "2024-07-15T13:43:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Can the version pin for `ruamel.yaml` be relaxed? The issue linked in the requirements file is closed.", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9210/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9210/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9203", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9203/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9203/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9203/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9203", "id": 2072345119, "node_id": "I_kwDOBiS_IM57hXof", "number": 9203, "title": "Validating datetime strings with timezone produces an error", "user": {"login": "ToivoMattilaVirnex", "id": 143806149, "node_id": "U_kgDOCJJOxQ", "avatar_url": "https://avatars.githubusercontent.com/u/143806149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ToivoMattilaVirnex", "html_url": "https://github.com/ToivoMattilaVirnex", "followers_url": "https://api.github.com/users/ToivoMattilaVirnex/followers", "following_url": "https://api.github.com/users/ToivoMattilaVirnex/following{/other_user}", "gists_url": "https://api.github.com/users/ToivoMattilaVirnex/gists{/gist_id}", "starred_url": "https://api.github.com/users/ToivoMattilaVirnex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ToivoMattilaVirnex/subscriptions", "organizations_url": "https://api.github.com/users/ToivoMattilaVirnex/orgs", "repos_url": "https://api.github.com/users/ToivoMattilaVirnex/repos", "events_url": "https://api.github.com/users/ToivoMattilaVirnex/events{/privacy}", "received_events_url": "https://api.github.com/users/ToivoMattilaVirnex/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2024-01-09T13:09:46Z", "updated_at": "2024-08-23T00:39:23Z", "closed_at": "2024-08-23T00:39:23Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nValidating datetime strings with timezone produces an error\r\n\r\nUsing **expect_column_values_to_match_strftime_format** to validate datetime strings (i.e. \"2024-01-01\") that contain timezone information produces an error.\r\n\r\n**To Reproduce**\r\n\r\nBelow is code for reproducing the error.\r\nThe code uses in-memory context and doesn't have a filesystem project or great_expectations.yml.\r\n\r\nCode:\r\n```\r\n# Imports\r\nimport pandas as pd\r\nimport great_expectations as gx\r\n# Set up data\r\ndataframe = pd.DataFrame({\"datetime\": [\"2023-01-01T00:00:00+0100\"]})\r\n# Set up GX\r\ncontext = gx.get_context()\r\ndatasource = context.sources.add_pandas(name=\"my_pandas_datasource\")\r\ndata_asset = datasource.add_dataframe_asset(name=\"my_data_asset\")\r\nbatch_request = data_asset.build_batch_request(dataframe=dataframe)\r\ncontext.add_or_update_expectation_suite(\"my_expectation_suite\")\r\n# Set up validation\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request,\r\n    expectation_suite_name=\"my_expectation_suite\",\r\n)\r\n# This produces the error\r\nvalidator.expect_column_values_to_match_strftime_format(\r\n    column=\"datetime\",\r\n    strftime_format=\"%Y-%m-%dT%H:%M:%S%z\"\r\n)\r\n```\r\n\r\nRunning this code produces an error\r\nThe traceback from the error is below:\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\nFile /mnt/d/code/gx_timezone_bug/.venv/lib/python3.10/site-packages/great_expectations/expectations/core/expect_column_values_to_match_strftime_format.py:184, in ExpectColumnValuesToMatchStrftimeFormat.validate_configuration(self, configuration)\r\n    183     else:\r\n--> 184         datetime.strptime(  # noqa: DTZ007\r\n    185             datetime.strftime(datetime.now(), strftime_format),  # noqa: DTZ005\r\n    186             strftime_format,\r\n    187         )\r\n    188 except ValueError as e:\r\n\r\nFile /usr/lib/python3.10/_strptime.py:568, in _strptime_datetime(cls, data_string, format)\r\n    566 \"\"\"Return a class cls instance based on the input string and the\r\n    567 format string.\"\"\"\r\n--> 568 tt, fraction, gmtoff_fraction = _strptime(data_string, format)\r\n    569 tzname, gmtoff = tt[-2:]\r\n\r\nFile /usr/lib/python3.10/_strptime.py:349, in _strptime(data_string, format)\r\n    348 if not found:\r\n--> 349     raise ValueError(\"time data %r does not match format %r\" %\r\n    350                      (data_string, format))\r\n    351 if len(data_string) != found.end():\r\n\r\nValueError: time data '2024-01-09T14:52:59' does not match format '%Y-%m-%dT%H:%M:%S%z'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nValueError                                Traceback (most recent call last)\r\nCell In[9], line 1\r\n----> 1 validator.expect_column_values_to_match_strftime_format(\r\n      2     column=\"datetime\",\r\n      3     strftime_format=\"%Y-%m-%dT%H:%M:%S%z\"\r\n      4 )\r\n\r\nFile /mnt/d/code/gx_timezone_bug/.venv/lib/python3.10/site-packages/great_expectations/validator/validator.py:591, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    585         validation_result = ExpectationValidationResult(\r\n    586             success=False,\r\n    587             exception_info=exception_info,\r\n    588             expectation_config=configuration,\r\n    589         )\r\n    590     else:\r\n--> 591         raise err\r\n    593 if self._include_rendered_content:\r\n    594     validation_result.render()\r\n\r\nFile /mnt/d/code/gx_timezone_bug/.venv/lib/python3.10/site-packages/great_expectations/validator/validator.py:546, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    539     configuration.process_evaluation_parameters(\r\n    540         self._expectation_suite.evaluation_parameters,\r\n    541         True,\r\n    542         self._data_context,\r\n    543     )\r\n    545 try:\r\n--> 546     expectation = expectation_impl(configuration)\r\n    547     \"\"\"Given an implementation and a configuration for any Expectation, returns its validation result\"\"\"\r\n    549     if not self.interactive_evaluation and not self._active_validation:\r\n\r\nFile /mnt/d/code/gx_timezone_bug/.venv/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:356, in Expectation.__init__(self, configuration)\r\n    352 def __init__(\r\n    353     self, configuration: Optional[ExpectationConfiguration] = None\r\n    354 ) -> None:\r\n    355     if configuration:\r\n--> 356         self.validate_configuration(configuration=configuration)\r\n    358     self._configuration = configuration\r\n\r\nFile /mnt/d/code/gx_timezone_bug/.venv/lib/python3.10/site-packages/great_expectations/expectations/core/expect_column_values_to_match_strftime_format.py:189, in ExpectColumnValuesToMatchStrftimeFormat.validate_configuration(self, configuration)\r\n    184         datetime.strptime(  # noqa: DTZ007\r\n    185             datetime.strftime(datetime.now(), strftime_format),  # noqa: DTZ005\r\n    186             strftime_format,\r\n    187         )\r\n    188 except ValueError as e:\r\n--> 189     raise ValueError(f\"Unable to use provided strftime_format. {e!s}\")\r\n    190 except AssertionError as e:\r\n    191     raise InvalidExpectationConfigurationError(str(e))\r\n\r\nValueError: Unable to use provided strftime_format. time data '2024-01-09T14:52:59' does not match format '%Y-%m-%dT%H:%M:%S%z'\r\n```\r\n\r\n\r\n**Expected behavior**\r\nThe code doesn't produce an error\r\nInstead, it validates that the strings in the column conform to the provided strftime format, including the timezone.\r\n\r\n**Environment:**\r\n - Operating System: Linux (WSL)\r\n - Great Expectations Version: 0.18.7\r\n - Python Version: 3.10.12\r\n - Data Source: Pandas\r\n - Cloud environment: None\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9203/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9203/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9199", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9199/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9199/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9199/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9199", "id": 2071147753, "node_id": "I_kwDOBiS_IM57czTp", "number": 9199, "title": "Runtime Data Connector for GCS data requires AWS S3 components", "user": {"login": "mlyonlebo", "id": 90702743, "node_id": "MDQ6VXNlcjkwNzAyNzQz", "avatar_url": "https://avatars.githubusercontent.com/u/90702743?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mlyonlebo", "html_url": "https://github.com/mlyonlebo", "followers_url": "https://api.github.com/users/mlyonlebo/followers", "following_url": "https://api.github.com/users/mlyonlebo/following{/other_user}", "gists_url": "https://api.github.com/users/mlyonlebo/gists{/gist_id}", "starred_url": "https://api.github.com/users/mlyonlebo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mlyonlebo/subscriptions", "organizations_url": "https://api.github.com/users/mlyonlebo/orgs", "repos_url": "https://api.github.com/users/mlyonlebo/repos", "events_url": "https://api.github.com/users/mlyonlebo/events{/privacy}", "received_events_url": "https://api.github.com/users/mlyonlebo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-01-08T20:12:15Z", "updated_at": "2024-08-23T00:39:35Z", "closed_at": "2024-08-23T00:39:34Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nWhen trying to validate GCS data, I got a `ModuleNotFoundError: AWS S3 connection components are not installed, please 'pip install boto3 botocore'` \r\n\r\nI think this is because the runtime data connector may erroneously infer that the data is on S3 if \"s3\" occurs in the path value. \r\n\r\n**To Reproduce**\r\n\r\nUse a runtime data connector with a GCS path that happens to have `s3` in it: (for example: `gs://this/cool/path/to/file_s3.csv`)\r\n\r\n`RuntimeDataConnector.build_batch_spec` seems to return an `S3BatchSpec` if the path in the runtime parameters contains `s3`. It might be safer to check that the path starts with `s3://`.\r\n\r\n**Expected behavior**\r\n\r\nI expected that the connector for GCS data would not require AWS S3 Connection components.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOs\r\n - Great Expectations Version: 0.18.5\r\n - Data Source: Pandas\r\n - Cloud environment: GCP\r\n\r\n**Additional context**\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9199/reactions", "total_count": 9, "+1": 9, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9199/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9196", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9196/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9196/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9196/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9196", "id": 2070541984, "node_id": "I_kwDOBiS_IM57afag", "number": 9196, "title": "batch_request has options problems", "user": {"login": "gerileka", "id": 56592646, "node_id": "MDQ6VXNlcjU2NTkyNjQ2", "avatar_url": "https://avatars.githubusercontent.com/u/56592646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gerileka", "html_url": "https://github.com/gerileka", "followers_url": "https://api.github.com/users/gerileka/followers", "following_url": "https://api.github.com/users/gerileka/following{/other_user}", "gists_url": "https://api.github.com/users/gerileka/gists{/gist_id}", "starred_url": "https://api.github.com/users/gerileka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gerileka/subscriptions", "organizations_url": "https://api.github.com/users/gerileka/orgs", "repos_url": "https://api.github.com/users/gerileka/repos", "events_url": "https://api.github.com/users/gerileka/events{/privacy}", "received_events_url": "https://api.github.com/users/gerileka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2024-01-08T14:11:06Z", "updated_at": "2024-08-23T00:39:45Z", "closed_at": "2024-08-23T00:39:45Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen running BatchRequest or RuntimeBatchRequest on Pyspark In Memory data, we can't filter by batch request. We are running on 0.17.19 but also tried on the latest version. \r\n\r\n**To Reproduce**\r\n```python\r\n#pip install great_expectations==0.17.19\r\n#pip install great_expectations==0.18.3\r\n\r\nfrom pyspark.sql import SparkSession\r\nfrom pyspark.sql.types import StructField,StructType, StringType, ArrayType, DateType, FloatType, DateType, IntegerType, MapType\r\nfrom datetime import date, datetime\r\nfrom pyspark.sql import functions as F\r\n\r\nimport great_expectations as gx\r\nfrom great_expectations.checkpoint import Checkpoint\r\nfrom great_expectations.core.batch import RuntimeBatchRequest\r\nfrom great_expectations.core.batch import BatchRequest\r\n\r\nuuid = 'ffe985f9-117a-459c-afa5-20be89eac4fa'\r\nuuid2 = 'adc125e6-821b-732b-afa5-20be89eac4fa'\r\nspark = SparkSession.builder.getOrCreate()\r\n\r\n# Simple Schema\r\norder_schema = StructType(\r\n    [\r\n        StructField(\"date\", DateType(), False),\r\n        StructField(\"id\", StringType(), False),\r\n        StructField(\"concept_id\", StringType(), False),\r\n        StructField(\"country\", StringType(), False),\r\n        StructField(\"client\", StringType(), False),\r\n        StructField(\"price\", FloatType(), False),\r\n        StructField(\"price_float\", FloatType(), False),\r\n        StructField(\"price_int\", IntegerType(), False)\r\n    ]\r\n)\r\n\r\norder_data_1 = [\r\n    {\r\n        \"date\": date(2023, 1, 1),\r\n        \"id\": \"Ligne 5\",\r\n        \"concept_id\": uuid,\r\n        \"country\": \"UK\",\r\n        \"client\": \"toto\",\r\n        \"price\": 12.0,\r\n        \"price_float\": 12.0,\r\n        \"price_int\": 12\r\n    },\r\n    {\r\n        \"date\": date(2023, 1, 2),\r\n        \"id\": \"Ligne 2\",\r\n        \"concept_id\": uuid2,\r\n        \"country\": \"FR\",\r\n        \"client\": \"toto\",\r\n        \"price\": 11.0,\r\n        \"price_float\": 12.0,\r\n        \"price_int\": 11\r\n    },\r\n    {\r\n        \"date\": date(2023, 1, 3),\r\n        \"id\": \"Ligne 3\",\r\n        \"concept_id\": uuid,\r\n        \"country\": \"GR\",\r\n        \"client\": \"toto\",\r\n        \"price\": 15.0,\r\n        \"price_float\": 12.0,\r\n        \"price_int\": 14\r\n    },\r\n    {\r\n        \"date\": date(2023, 1, 4),\r\n        \"id\": \"Ligne 4\",\r\n        \"concept_id\": uuid,\r\n        \"country\": \"GR\",\r\n        \"client\": \"toto\",\r\n        \"price\": 15.0,\r\n        \"price_float\": 12.0,\r\n        \"price_int\": 14\r\n    },\r\n    {\r\n        \"date\": date(2023, 1, 5),\r\n        \"id\": \"Ligne 5\",\r\n        \"concept_id\": uuid,\r\n        \"country\": \"GR\",\r\n        \"client\": \"toto\",\r\n        \"price\": 15.0,\r\n        \"price_float\": 12.0,\r\n        \"price_int\": 14\r\n    },\r\n]\r\n\r\norders1 = spark.createDataFrame(\r\n    data=order_data_1, \r\n    schema=order_schema\r\n)\r\n\r\n## GX Part\r\ncontext = gx.get_context()\r\ndatasource = context.sources.add_spark(name=\"orders\")\r\ndata_asset = datasource.add_dataframe_asset(name=\"orders\",dataframe=orders1)\r\n\r\ndata_connector_query = {\r\n    \"batch_filter_parameters\": {\r\n        \"country\": \"GR\",\r\n    }\r\n}\r\nbatch_request = BatchRequest(\r\n    datasource_name=\"orders\",\r\n    data_connector_name=\"orders\",\r\n    data_asset_name=\"orders\",\r\n    data_connector_query=data_connector_query,\r\n)\r\n\r\n# Now we can review a sample of data using a Validator\r\ncontext.add_or_update_expectation_suite(\"my_expectation_suite\")\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite_name=\"my_expectation_suite\"\r\n)\r\n```\r\nThe error : \r\n\r\n```python\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\nCell In[31], line 3\r\n      1 # Now we can review a sample of data using a Validator\r\n      2 context.add_or_update_expectation_suite(\"my_expectation_suite\")\r\n----> 3 validator = context.get_validator(\r\n      4     batch_request=batch_request, expectation_suite_name=\"my_expectation_suite\"\r\n      5 )\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:2475, in AbstractDataContext.get_validator(***failed resolving arguments***)\r\n   2471         batch_request_list = [batch_request]  # type: ignore[list-item]\r\n   2473     for batch_request in batch_request_list:\r\n   2474         batch_list.extend(\r\n-> 2475             self.get_batch_list(\r\n   2476                 datasource_name=datasource_name,\r\n   2477                 data_connector_name=data_connector_name,\r\n   2478                 data_asset_name=data_asset_name,\r\n   2479                 batch_request=batch_request,\r\n   2480                 batch_data=batch_data,\r\n   2481                 data_connector_query=data_connector_query,\r\n   2482                 batch_identifiers=batch_identifiers,\r\n   2483                 limit=limit,\r\n   2484                 index=index,\r\n   2485                 custom_filter_function=custom_filter_function,\r\n   2486                 sampling_method=sampling_method,\r\n   2487                 sampling_kwargs=sampling_kwargs,\r\n   2488                 splitter_method=splitter_method,\r\n   2489                 splitter_kwargs=splitter_kwargs,\r\n   2490                 runtime_parameters=runtime_parameters,\r\n   2491                 query=query,\r\n   2492                 path=path,\r\n   2493                 batch_filter_parameters=batch_filter_parameters,\r\n   2494                 batch_spec_passthrough=batch_spec_passthrough,\r\n   2495                 **kwargs,\r\n   2496             )\r\n   2497         )\r\n   2499 return self.get_validator_using_batch_list(\r\n   2500     expectation_suite=expectation_suite,  # type: ignore[arg-type]\r\n   2501     batch_list=batch_list,\r\n   2502     include_rendered_content=include_rendered_content,\r\n   2503 )\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/core/usage_statistics/usage_statistics.py:260, in usage_statistics_enabled_method.<locals>.usage_statistics_wrapped_method(*args, **kwargs)\r\n    257         args_payload = args_payload_fn(*args, **kwargs) or {}\r\n    258         nested_update(event_payload, args_payload)\r\n--> 260     result = func(*args, **kwargs)\r\n    261     message[\"success\"] = True\r\n    262 except Exception:\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:2644, in AbstractDataContext.get_batch_list(self, datasource_name, data_connector_name, data_asset_name, batch_request, batch_data, data_connector_query, batch_identifiers, limit, index, custom_filter_function, sampling_method, sampling_kwargs, splitter_method, splitter_kwargs, runtime_parameters, query, path, batch_filter_parameters, batch_spec_passthrough, batch_request_options, **kwargs)\r\n   2566 @public_api\r\n   2567 @usage_statistics_enabled_method(\r\n   2568     event_name=UsageStatsEvents.DATA_CONTEXT_GET_BATCH_LIST,\r\n   (...)\r\n   2593     **kwargs: Optional[dict],\r\n   2594 ) -> List[Batch]:\r\n   2595     \"\"\"Get the list of zero or more batches, based on a variety of flexible input types.\r\n   2596 \r\n   2597     `get_batch_list` is the main user-facing API for getting batches.\r\n   (...)\r\n   2642 \r\n   2643     \"\"\"\r\n-> 2644     return self._get_batch_list(\r\n   2645         datasource_name=datasource_name,\r\n   2646         data_connector_name=data_connector_name,\r\n   2647         data_asset_name=data_asset_name,\r\n   2648         batch_request=batch_request,\r\n   2649         batch_data=batch_data,\r\n   2650         data_connector_query=data_connector_query,\r\n   2651         batch_identifiers=batch_identifiers,\r\n   2652         limit=limit,\r\n   2653         index=index,\r\n   2654         custom_filter_function=custom_filter_function,\r\n   2655         sampling_method=sampling_method,\r\n   2656         sampling_kwargs=sampling_kwargs,\r\n   2657         splitter_method=splitter_method,\r\n   2658         splitter_kwargs=splitter_kwargs,\r\n   2659         runtime_parameters=runtime_parameters,\r\n   2660         query=query,\r\n   2661         path=path,\r\n   2662         batch_filter_parameters=batch_filter_parameters,\r\n   2663         batch_spec_passthrough=batch_spec_passthrough,\r\n   2664         batch_request_options=batch_request_options,\r\n   2665         **kwargs,\r\n   2666     )\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:2725, in AbstractDataContext._get_batch_list(self, datasource_name, data_connector_name, data_asset_name, batch_request, batch_data, data_connector_query, batch_identifiers, limit, index, custom_filter_function, sampling_method, sampling_kwargs, splitter_method, splitter_kwargs, runtime_parameters, query, path, batch_filter_parameters, batch_spec_passthrough, batch_request_options, **kwargs)\r\n   2718 if not datasource:\r\n   2719     raise gx_exceptions.DatasourceError(\r\n   2720         datasource_name,\r\n   2721         \"The given datasource could not be retrieved from the DataContext; \"\r\n   2722         \"please confirm that your configuration is accurate.\",\r\n   2723     )\r\n-> 2725 return datasource.get_batch_list_from_batch_request(batch_request=result)\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/datasource/fluent/interfaces.py:467, in Datasource.get_batch_list_from_batch_request(self, batch_request)\r\n    457 \"\"\"A list of batches that correspond to the BatchRequest.\r\n    458 \r\n    459 Args:\r\n   (...)\r\n    464     A list of batches that match the options specified in the batch request.\r\n    465 \"\"\"\r\n    466 data_asset = self.get_asset(batch_request.data_asset_name)\r\n--> 467 return data_asset.get_batch_list_from_batch_request(batch_request)\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/datasource/fluent/spark_datasource.py:212, in DataFrameAsset.get_batch_list_from_batch_request(self, batch_request)\r\n    208 @override\r\n    209 def get_batch_list_from_batch_request(\r\n    210     self, batch_request: BatchRequest\r\n    211 ) -> list[Batch]:\r\n--> 212     self._validate_batch_request(batch_request)\r\n    214     batch_spec = RuntimeDataBatchSpec(batch_data=self.dataframe)\r\n    215     execution_engine: SparkDFExecutionEngine = (\r\n    216         self.datasource.get_execution_engine()\r\n    217     )\r\n\r\nFile ~/.local/lib/python3.10/site-packages/great_expectations/datasource/fluent/spark_datasource.py:194, in DataFrameAsset._validate_batch_request(self, batch_request)\r\n    184 @override\r\n    185 def _validate_batch_request(self, batch_request: BatchRequest) -> None:\r\n    186     \"\"\"Validates the batch_request has the correct form.\r\n    187 \r\n    188     Args:\r\n    189         batch_request: A batch request object to be validated.\r\n    190     \"\"\"\r\n    191     if not (\r\n    192         batch_request.datasource_name == self.datasource.name\r\n    193         and batch_request.data_asset_name == self.name\r\n--> 194         and not batch_request.options\r\n    195     ):\r\n    196         expect_batch_request_form = BatchRequest(\r\n    197             datasource_name=self.datasource.name,\r\n    198             data_asset_name=self.name,\r\n    199             options={},\r\n    200             batch_slice=batch_request._batch_slice_input,  # type: ignore[attr-defined]\r\n    201         )\r\n    202         raise gx_exceptions.InvalidBatchRequestError(\r\n    203             \"BatchRequest should have form:\\n\"\r\n    204             f\"{pf(expect_batch_request_form.dict())}\\n\"\r\n    205             f\"but actually has form:\\n{pf(batch_request.dict())}\\n\"\r\n    206         )\r\n\r\nAttributeError: 'RuntimeBatchRequest' object has no attribute 'options'\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.3\r\n - Data Source: Pyspark\r\n - Cloud environment: Local In Memory\r\n\r\n**Additional context**\r\nIs is possible to run a batch request with filter on a pyspark batch request ? ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9196/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9196/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9186", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9186/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9186/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9186/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9186", "id": 2066024829, "node_id": "I_kwDOBiS_IM57JQl9", "number": 9186, "title": "Having create_temp_table = False on MS SQL Server produces error: 'NoneType' object is not iterable", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2024-01-04T17:02:04Z", "updated_at": "2024-08-23T00:39:58Z", "closed_at": "2024-08-23T00:39:58Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHaving create_temp_table = False in  great_expectations.yml on MS SQL Server produces error:\r\n'NoneType' object is not iterable\r\n\r\nthis error with Traceback below is rendered in DataDocs for every expectation:\r\n\r\nTraceback (most recent call last):\r\nFile \"/home/user/Documents/fldr/.venv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 546, in _process_direct_and_bundled_metric_computation_configurations\r\n] = metric_computation_configuration.metric_fn( # type: ignore[misc] # F not callable\r\nFile \"/home/user/Documents/fldr/.venv/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py\", line 50, in inner_func\r\nreturn metric_fn(*args, **kwargs)\r\nFile \"/home/user/Documents/fldr/.venv/lib/python3.10/site-packages/great_expectations/expectations/metrics/table_metrics/table_columns.py\", line 42, in _sqlalchemy\r\nreturn [col[\"name\"] for col in column_metadata]\r\nTypeError: 'NoneType' object is not iterable\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\nFile \"/home/user/Documents/fldr/.venv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\", line 282, in _resolve\r\nself._execution_engine.resolve_metrics(\r\nFile \"/home/user/Documents/fldr/.venv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 281, in resolve_metrics\r\nreturn self._process_direct_and_bundled_metric_computation_configurations(\r\nFile \"/home/user/Documents/fldr/.venv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 550, in _process_direct_and_bundled_metric_computation_configurations\r\nraise gx_exceptions.MetricResolutionError(\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: 'NoneType' object is not iterable\r\n\r\n**To Reproduce**\r\n\r\n1) add \"create_temp_table: False\" key to great_expectations.yml, e.g.:\r\n\r\n```yaml\r\ndatasources:\r\n  mssql_12345:\r\n    class_name: Datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      class_name: SqlAlchemyExecutionEngine\r\n      create_temp_table: False\r\n      connection_string: mssql+pyodbc://${db_user}:${db_pwd}@${db_hostport}/${db_name}?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes\r\n      module_name: great_expectations.execution_engine\r\n    data_connectors:\r\n      default_runtime_data_connector_name:\r\n        class_name: RuntimeDataConnector\r\n        module_name: great_expectations.datasource.data_connector\r\n        batch_identifiers:\r\n          - default_identifier_name\r\n```\r\n\r\n run your checkpoint and see 'NoneType' object is not iterable error in DataDocs\r\n \r\n 2) remove / comment out \"create_temp_table: False\" key in great_expectations.yml \r\n - your checkpoint and Datadocs work fine\r\n\r\n**Expected behavior**\r\n\"create_temp_table: False\" key is handled without errors\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 22.04\r\n - Great Expectations Version: tried 0.17.4, 0.18.4 and latest = 0.18.7\r\n - Data Source: local MS SQL Express in same Ubuntu, tried SQLAlchemy==1.4.9, 2.0 and latest\r\n - Cloud environment: local Ubuntu\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9186/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9186/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9169", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9169/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9169/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9169/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9169", "id": 2058300644, "node_id": "I_kwDOBiS_IM56ryzk", "number": 9169, "title": "dynamic_pandas uses __file__ for its logger", "user": {"login": "adeboyed", "id": 5659219, "node_id": "MDQ6VXNlcjU2NTkyMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/5659219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adeboyed", "html_url": "https://github.com/adeboyed", "followers_url": "https://api.github.com/users/adeboyed/followers", "following_url": "https://api.github.com/users/adeboyed/following{/other_user}", "gists_url": "https://api.github.com/users/adeboyed/gists{/gist_id}", "starred_url": "https://api.github.com/users/adeboyed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adeboyed/subscriptions", "organizations_url": "https://api.github.com/users/adeboyed/orgs", "repos_url": "https://api.github.com/users/adeboyed/repos", "events_url": "https://api.github.com/users/adeboyed/events{/privacy}", "received_events_url": "https://api.github.com/users/adeboyed/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-12-28T11:02:21Z", "updated_at": "2024-01-04T14:40:59Z", "closed_at": "2024-01-04T14:40:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\ndynamic_pandas uses `__file__` for its logger, rather than `__name__` like the rest of the library.\r\nThis means users cannot adjust the entire libraries's logging using `logging.getLogger(\"great_expectations\")`\r\n\r\n**To Reproduce**\r\nN/A\r\n\r\n**Expected behavior**\r\ndynamic_pandas uses `__name__`", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9169/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9166", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9166/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9166/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9166/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9166", "id": 2055093891, "node_id": "I_kwDOBiS_IM56fj6D", "number": 9166, "title": "globally ignored in progress_bars configuration", "user": {"login": "danjer", "id": 26251871, "node_id": "MDQ6VXNlcjI2MjUxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/26251871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danjer", "html_url": "https://github.com/danjer", "followers_url": "https://api.github.com/users/danjer/followers", "following_url": "https://api.github.com/users/danjer/following{/other_user}", "gists_url": "https://api.github.com/users/danjer/gists{/gist_id}", "starred_url": "https://api.github.com/users/danjer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danjer/subscriptions", "organizations_url": "https://api.github.com/users/danjer/orgs", "repos_url": "https://api.github.com/users/danjer/repos", "events_url": "https://api.github.com/users/danjer/events{/privacy}", "received_events_url": "https://api.github.com/users/danjer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-24T13:00:38Z", "updated_at": "2024-01-22T21:19:42Z", "closed_at": "2024-01-22T21:19:42Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nThe 'globally' set option in `ProgressBarsConfig` in `great_expectations.data_context.types.base` is ignored\r\nby `Validator` class in `great_expectations.validator.validator` . The `Validator` checks both the 'globally' and '\r\nmetric_calculations' see if the global option was overwritten, but since all progressbars are enabled by default, this\r\nwill lead to unexpected behavior.\r\n\r\n**To Reproduce**\r\n\r\nThe script below demonstrates the bug. Since only the globally kwarg is provided, I would expect that\r\nall progressbars are disabled which is not true as this snippet will raise an AssertionError.\r\n\r\n```\r\nfrom unittest.mock import Mock\r\nfrom great_expectations import get_context\r\nfrom great_expectations.data_context.types.base import DataContextConfig, ProgressBarsConfig, \\\r\n    InMemoryStoreBackendDefaults\r\nfrom great_expectations.validator.validator import Validator\r\n\r\nglobally_disabled_progressbars_config = ProgressBarsConfig(globally=False)\r\n\r\ndata_context = get_context(project_config=DataContextConfig(store_backend_defaults=InMemoryStoreBackendDefaults(),\r\n                                                            progress_bars=globally_disabled_progressbars_config))\r\nexecution_engine = Mock()\r\nvalidator = Validator(execution_engine, data_context=data_context)\r\n\r\nassert validator._determine_progress_bars() is False\r\n```\r\n\r\nThe problem is caused by the fact that there is currently no way to check if an option for a progress bar was set\r\nexplicitly or not.\r\n\r\n**Expected behavior**\r\nThe `globally` option should only be overwritten when `metric_calculations` was provided explicitly.\r\nThis can be achieved by changing the default values in `ProgressBarsConfig` to `None` and check in `__init__` \r\nif explicit values for non globally options where provided.\r\n\r\n\r\n**Environment:**\r\n\r\n- Operating System: [Windows]\r\n- Great Expectations Version: [e.g. 0.18.7]\r\n- Data Source: [NA]\r\n- Cloud environment: [NA]\r\n\r\n", "closed_by": {"login": "danjer", "id": 26251871, "node_id": "MDQ6VXNlcjI2MjUxODcx", "avatar_url": "https://avatars.githubusercontent.com/u/26251871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danjer", "html_url": "https://github.com/danjer", "followers_url": "https://api.github.com/users/danjer/followers", "following_url": "https://api.github.com/users/danjer/following{/other_user}", "gists_url": "https://api.github.com/users/danjer/gists{/gist_id}", "starred_url": "https://api.github.com/users/danjer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danjer/subscriptions", "organizations_url": "https://api.github.com/users/danjer/orgs", "repos_url": "https://api.github.com/users/danjer/repos", "events_url": "https://api.github.com/users/danjer/events{/privacy}", "received_events_url": "https://api.github.com/users/danjer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9166/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9166/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9120", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9120/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9120/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9120/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9120", "id": 2046857405, "node_id": "I_kwDOBiS_IM56AJC9", "number": 9120, "title": "custom expectation data doc render error with evaluation parameter", "user": {"login": "ramananayak", "id": 65753883, "node_id": "MDQ6VXNlcjY1NzUzODgz", "avatar_url": "https://avatars.githubusercontent.com/u/65753883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramananayak", "html_url": "https://github.com/ramananayak", "followers_url": "https://api.github.com/users/ramananayak/followers", "following_url": "https://api.github.com/users/ramananayak/following{/other_user}", "gists_url": "https://api.github.com/users/ramananayak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramananayak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramananayak/subscriptions", "organizations_url": "https://api.github.com/users/ramananayak/orgs", "repos_url": "https://api.github.com/users/ramananayak/repos", "events_url": "https://api.github.com/users/ramananayak/events{/privacy}", "received_events_url": "https://api.github.com/users/ramananayak/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-18T14:58:33Z", "updated_at": "2024-08-23T00:40:10Z", "closed_at": "2024-08-23T00:40:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI have created a custom expectation to check if the column output is True/False similar to column_value_equal_three. It throws below error when I use evaluation parameter.\r\n\r\n```bash\r\ngreat_expectations.render.renderer.site_builder - ERROR - An unexpected Exception occurred during data docs rendering.  Because of this error, certain parts of data docs will not be rendered properly and/or may not appear altogether.  Please use the trace, included in this message, to diagnose and repair the underlying issue.  Detailed information follows:\r\n                TypeError: \"unhashable type: 'dict'\".  Traceback: \"Traceback (most recent call last):\r\n  File \"/Users/rnayak/.pyenv/versions/venv_gx_17/lib/python3.9/site-packages/great_expectations/render/renderer/site_builder.py\", line 474, in build\r\n    rendered_content = self.renderer_class.render(resource)\r\n  File \"/Users/rnayak/.pyenv/versions/venv_gx_17/lib/python3.9/site-packages/great_expectations/render/renderer/page_renderer.py\", line 674, in render\r\n    ) = expectations.get_grouped_and_ordered_expectations_by_column()\r\n  File \"/Users/rnayak/.pyenv/versions/venv_gx_17/lib/python3.9/site-packages/great_expectations/core/expectation_suite.py\", line 984, in get_grouped_and_ordered_expectations_by_column\r\n    if column not in expectations_by_column:\r\nTypeError: unhashable type: 'dict'\r\n\".\r\n\r\n```\r\n\r\nand the datadoc ouput look slike this\r\n<img width=\"983\" alt=\"image\" src=\"https://github.com/great-expectations/great_expectations/assets/65753883/0bbc705e-5c6e-4158-b831-27a4f31c2bf5\">\r\n\r\n**To Reproduce**\r\nbelow is the custom expectation\r\n```python\r\n# expect_column_value_to_equal_true.py custom expectation\r\nfrom typing import Dict, Optional\r\n\r\nfrom great_expectations.core.expectation_configuration import ExpectationConfiguration\r\nfrom great_expectations.core.metric_domain_types import MetricDomainTypes\r\nfrom great_expectations.core.metric_function_types import MetricPartialFunctionTypes\r\nfrom great_expectations.execution_engine import (\r\n    ExecutionEngine,\r\n    PandasExecutionEngine,\r\n    SqlAlchemyExecutionEngine,\r\n)\r\nfrom great_expectations.expectations.expectation import (\r\n    ColumnMapExpectation,\r\n    ExpectationValidationResult,\r\n    render_evaluation_parameter_string,\r\n)\r\nfrom great_expectations.expectations.metrics import (\r\n    ColumnMapMetricProvider,\r\n    column_condition_partial,\r\n)\r\nfrom great_expectations.compatibility.sqlalchemy import sqlalchemy as sa\r\nfrom great_expectations.expectations.metrics.metric_provider import metric_partial\r\nfrom great_expectations.render import (\r\n    CollapseContent,\r\n    RenderedStringTemplateContent,\r\n    RenderedTableContent,\r\n)\r\nfrom great_expectations.render.renderer.renderer import renderer\r\nfrom great_expectations.render.util import num_to_str\r\nfrom great_expectations.validator.metric_configuration import MetricConfiguration\r\n\r\n# snippets reference this object without creating it\r\nresult_dict = {}\r\n\r\nclass ColumnValueEqualTrue(ColumnMapMetricProvider):\r\n\r\n    condition_metric_name = \"column_value.equal_true\"\r\n\r\n    @column_condition_partial(engine=PandasExecutionEngine)\r\n    def _pandas(cls, column, **kwargs):\r\n        return column == True\r\n\r\n    @column_condition_partial(engine=SqlAlchemyExecutionEngine)\r\n    def _sqlalchemy(cls, column, **kwargs):\r\n        return (sa.and_(column.in_([1,0]), column.is_(True)))\r\n\r\n    @classmethod\r\n    def _get_evaluation_dependencies(\r\n        cls,\r\n        metric: MetricConfiguration,\r\n        configuration: Optional[ExpectationConfiguration] = None,\r\n        execution_engine: Optional[ExecutionEngine] = None,\r\n        runtime_configuration: Optional[Dict] = None,\r\n    ):\r\n        \"\"\"Returns a dictionary of given metric names and their corresponding configuration, specifying the metric\r\n        types and their respective domains\"\"\"\r\n        dependencies: Dict = super()._get_evaluation_dependencies(\r\n            metric=metric,\r\n            configuration=configuration,\r\n            execution_engine=execution_engine,\r\n            runtime_configuration=runtime_configuration,\r\n        )\r\n\r\n        table_domain_kwargs: Dict = {\r\n            k: v for k, v in metric.metric_domain_kwargs.items() if k != \"column\"\r\n        }\r\n        dependencies[\"table.column_types\"] = MetricConfiguration(\r\n            metric_name=\"table.column_types\",\r\n            metric_domain_kwargs=table_domain_kwargs,\r\n            metric_value_kwargs={\r\n                \"include_nested\": True,\r\n            },\r\n        )\r\n\r\n        return dependencies\r\n\r\n\r\n\r\nclass ExpectColumnValueToEqualTrue(ColumnMapExpectation):\r\n    \"\"\"Expect value in this column to equal to Boolean True.\"\"\"\r\n    examples = [\r\n        {\r\n            \"data\": {\r\n                \"test_true_flag\": [True, True, True, True, True],\r\n                \"test_false_flag\": [False, False, False, False, False]\r\n\r\n            },\r\n            \"tests\": [\r\n                {\r\n                    \"title\": \"basic_positive_test\",\r\n                    \"exact_match_out\": False,\r\n                    \"include_in_gallery\": True,\r\n                    \"in\": {\"column\": \"test_true_flag\"},\r\n                    \"out\": {\r\n                        \"success\": True,\r\n                    },\r\n                },\r\n                {\r\n                    \"title\": \"basic_negative_test\",\r\n                    \"exact_match_out\": False,\r\n                    \"include_in_gallery\": True,\r\n                    \"in\": {\"column\": \"test_false_flag\", \"mostly\": 0.8},\r\n                    \"out\": {\r\n                        \"success\": False,\r\n                    },\r\n                },\r\n            ],\r\n        }\r\n    ]\r\n\r\n    map_metric = \"column_value.equal_true\"\r\n\r\n    success_keys = (\"mostly\",)\r\n\r\n    # This dictionary contains default values for any parameters that should have default values\r\n    default_kwarg_values = {\r\n        \"mostly\": 1.0\r\n    }\r\n\r\n    @classmethod\r\n    @renderer(renderer_type=\"renderer.diagnostic.observed_value\")\r\n    @render_evaluation_parameter_string\r\n    def _diagnostic_observed_value_renderer(\r\n        cls,\r\n        configuration: ExpectationConfiguration = None,\r\n        result: ExpectationValidationResult = None,\r\n        runtime_configuration: Optional[dict] = None,\r\n        **kwargs,\r\n    ):\r\n        assert result, \"Must provide a result object.\"\r\n\r\n        result_dict = result.result\r\n        if result_dict is None:\r\n            return \"--\"\r\n\r\n        if result_dict.get(\"observed_value\"):\r\n            observed_value = result_dict.get(\"observed_value\")\r\n            if isinstance(observed_value, (int, float)) and not isinstance(\r\n                observed_value, bool\r\n            ):\r\n                return num_to_str(observed_value, precision=10, use_locale=True)\r\n            return str(observed_value)\r\n        elif result_dict.get(\"unexpected_percent\") is not None:\r\n            return (\r\n                num_to_str(result_dict.get(\"unexpected_percent\"), precision=5)\r\n                + \"% unexpected\"\r\n            )\r\n        else:\r\n            return \"--\"\r\n\r\n    @classmethod\r\n    @renderer(renderer_type=\"renderer.diagnostic.unexpected_statement\")\r\n    @render_evaluation_parameter_string\r\n    def _diagnostic_unexpected_statement_renderer(\r\n        cls,\r\n        configuration: ExpectationConfiguration = None,\r\n        result: ExpectationValidationResult = None,\r\n        runtime_configuration: Optional[dict] = None,\r\n        **kwargs,\r\n    ):\r\n        assert result, \"Must provide a result object.\"\r\n\r\n        success = result.success\r\n        result_dict = result.result\r\n\r\n        if result.exception_info[\"raised_exception\"]:\r\n            exception_message_template_str = (\r\n                \"\\n\\n$expectation_type raised an exception:\\n$exception_message\"\r\n            )\r\n\r\n            exception_message = RenderedStringTemplateContent(\r\n                **{\r\n                    \"content_block_type\": \"string_template\",\r\n                    \"string_template\": {\r\n                        \"template\": exception_message_template_str,\r\n                        \"params\": {\r\n                            \"expectation_type\": result.expectation_config.expectation_type,\r\n                            \"exception_message\": result.exception_info[\r\n                                \"exception_message\"\r\n                            ],\r\n                        },\r\n                        \"tag\": \"strong\",\r\n                        \"styling\": {\r\n                            \"classes\": [\"text-danger\"],\r\n                            \"params\": {\r\n                                \"exception_message\": {\"tag\": \"code\"},\r\n                                \"expectation_type\": {\r\n                                    \"classes\": [\"badge\", \"badge-danger\", \"mb-2\"]\r\n                                },\r\n                            },\r\n                        },\r\n                    },\r\n                }\r\n            )\r\n\r\n            exception_traceback_collapse = CollapseContent(\r\n                **{\r\n                    \"collapse_toggle_link\": \"Show exception traceback...\",\r\n                    \"collapse\": [\r\n                        RenderedStringTemplateContent(\r\n                            **{\r\n                                \"content_block_type\": \"string_template\",\r\n                                \"string_template\": {\r\n                                    \"template\": result.exception_info[\r\n                                        \"exception_traceback\"\r\n                                    ],\r\n                                    \"tag\": \"code\",\r\n                                },\r\n                            }\r\n                        )\r\n                    ],\r\n                }\r\n            )\r\n\r\n            return [exception_message, exception_traceback_collapse]\r\n\r\n        if success or not result_dict.get(\"unexpected_count\"):\r\n            return []\r\n        else:\r\n            unexpected_count = num_to_str(\r\n                result_dict[\"unexpected_count\"], use_locale=True, precision=20\r\n            )\r\n            unexpected_percent = (\r\n                f\"{num_to_str(result_dict['unexpected_percent'], precision=4)}%\"\r\n            )\r\n            element_count = num_to_str(\r\n                result_dict[\"element_count\"], use_locale=True, precision=20\r\n            )\r\n\r\n            template_str = (\r\n                \"\\n\\n$unexpected_count unexpected values found. \"\r\n                \"$unexpected_percent of $element_count total rows.\"\r\n            )\r\n\r\n            return [\r\n                RenderedStringTemplateContent(\r\n                    **{\r\n                        \"content_block_type\": \"string_template\",\r\n                        \"string_template\": {\r\n                            \"template\": template_str,\r\n                            \"params\": {\r\n                                \"unexpected_count\": unexpected_count,\r\n                                \"unexpected_percent\": unexpected_percent,\r\n                                \"element_count\": element_count,\r\n                            },\r\n                            \"tag\": \"strong\",\r\n                            \"styling\": {\"classes\": [\"text-danger\"]},\r\n                        },\r\n                    }\r\n                )\r\n            ]\r\n\r\n    @classmethod\r\n    @renderer(renderer_type=\"renderer.diagnostic.unexpected_table\")\r\n    @render_evaluation_parameter_string\r\n    def _diagnostic_unexpected_table_renderer(\r\n        cls,\r\n        configuration: ExpectationConfiguration = None,\r\n        result: ExpectationValidationResult = None,\r\n        runtime_configuration: Optional[dict] = None,\r\n        **kwargs,\r\n    ):\r\n        try:\r\n            result_dict = result.result\r\n        except KeyError:\r\n            return None\r\n\r\n        if result_dict is None:\r\n            return None\r\n\r\n        if not result_dict.get(\"partial_unexpected_list\") and not result_dict.get(\r\n            \"partial_unexpected_counts\"\r\n        ):\r\n            return None\r\n\r\n        table_rows = []\r\n\r\n        if result_dict.get(\"partial_unexpected_counts\"):\r\n            total_count = 0\r\n            for unexpected_count_dict in result_dict.get(\"partial_unexpected_counts\"):\r\n                value = unexpected_count_dict.get(\"value\")\r\n                count = unexpected_count_dict.get(\"count\")\r\n                total_count += count\r\n                if value is not None and value != \"\":\r\n                    table_rows.append([value, count])\r\n                elif value == \"\":\r\n                    table_rows.append([\"EMPTY\", count])\r\n                else:\r\n                    table_rows.append([\"null\", count])\r\n\r\n            if total_count == result_dict.get(\"unexpected_count\"):\r\n                header_row = [\"Unexpected Value\", \"Count\"]\r\n            else:\r\n                header_row = [\"Sampled Unexpected Values\"]\r\n                table_rows = [[row[0]] for row in table_rows]\r\n\r\n        else:\r\n            header_row = [\"Sampled Unexpected Values\"]\r\n            sampled_values_set = set()\r\n            for unexpected_value in result_dict.get(\"partial_unexpected_list\"):\r\n                if unexpected_value:\r\n                    string_unexpected_value = str(unexpected_value)\r\n                elif unexpected_value == \"\":\r\n                    string_unexpected_value = \"EMPTY\"\r\n                else:\r\n                    string_unexpected_value = \"null\"\r\n                if string_unexpected_value not in sampled_values_set:\r\n                    table_rows.append([unexpected_value])\r\n                    sampled_values_set.add(string_unexpected_value)\r\n\r\n        unexpected_table_content_block = RenderedTableContent(\r\n            **{\r\n                \"content_block_type\": \"table\",\r\n                \"table\": table_rows,\r\n                \"header_row\": header_row,\r\n                \"styling\": {\r\n                    \"body\": {\"classes\": [\"table-bordered\", \"table-sm\", \"mt-3\"]}\r\n                },\r\n            }\r\n        )\r\n\r\n        return unexpected_table_content_block\r\n\r\n    library_metadata = {\r\n        \"tags\": [\"extremely basic math\"],\r\n        \"contributors\": [\"@joegargery\"],\r\n    }\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    ExpectColumnValueToEqualTrue().print_diagnostic_checklist()\r\n```\r\n\r\ncreate a checkpoint with below batch request\r\n```yaml\r\n      runtime_parameters:\r\n        query: \"select count(1)<10 as status from schema.table\"\r\n    expectation_suite_name: ce.check_if_true\r\n    evaluation_parameters: { \"column_name\": \"status\"}\r\n```\r\n\r\nexpectation suite\r\n```json\r\n{\r\n    \"data_asset_type\": null,\r\n    \"expectation_suite_name\": \"ce.check_if_true\",\r\n    \"expectations\": [\r\n        {\r\n            \"expectation_type\": \"expect_column_value_to_equal_true\",\r\n            \"kwargs\": {\r\n                \"column\": {\r\n                    \"$PARAMETER\": \"column_name\"\r\n                }\r\n            },\r\n            \"meta\": {}\r\n        }\r\n    ],\r\n    \"ge_cloud_id\": null,\r\n    \"meta\": {\r\n        \"great_expectations_version\": \"0.17.1\"\r\n    }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\ndatadoc should render without any errors\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  MacOS\r\n - Great Expectations Version: 0.17.1\r\n - Data Source: Redshift\r\n - Cloud environment: Airflow\r\n\r\n**Additional context**\r\nI am sure this has to do with dict created when evaluation parameter is replaced, but I am not sure where exactly this has to be fixed.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9120/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9120/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9082", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9082/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9082/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9082/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9082", "id": 2037256354, "node_id": "I_kwDOBiS_IM55bhCi", "number": 9082, "title": "[BUG] GX version >= 0.17.6 having issues with expect_column_sum_to_be_between", "user": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2023-12-12T08:41:07Z", "updated_at": "2024-05-15T05:15:23Z", "closed_at": "2024-05-15T05:15:23Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI ran through the versions and found that after 0.17.6 (up till the latest 0.18.3), when using the expectations, the following error is shown:\r\n\r\n<img width=\"1038\" alt=\"image\" src=\"https://github.com/great-expectations/great_expectations/assets/51312880/338787d3-93ec-442c-aa79-db6a0836220a\">\r\n\r\n\r\n metric_name: metrics[metric_configuration.id]\r\nKeyError: ('column.sum', '0a0c9fb06c26695917c1db81140aad77', ())\r\n\r\nHowever, before 0.17.5 it is working fine\r\n\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\nMy checks:\r\n<img width=\"608\" alt=\"image\" src=\"https://github.com/great-expectations/great_expectations/assets/51312880/e1a5dafa-e03b-4db4-875f-2428d50c6a10\">\r\n\r\n\r\n**Expected behavior**\r\nThe checkpoint should have ran\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: >= 0.17.6\r\n - Data Source: Spark\r\n - Cloud environment: AWS\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9082/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9082/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9066", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9066/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9066/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9066/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9066", "id": 2032901755, "node_id": "I_kwDOBiS_IM55K557", "number": 9066, "title": "Failing to send email via tls encryption", "user": {"login": "HrishikV", "id": 65384819, "node_id": "MDQ6VXNlcjY1Mzg0ODE5", "avatar_url": "https://avatars.githubusercontent.com/u/65384819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HrishikV", "html_url": "https://github.com/HrishikV", "followers_url": "https://api.github.com/users/HrishikV/followers", "following_url": "https://api.github.com/users/HrishikV/following{/other_user}", "gists_url": "https://api.github.com/users/HrishikV/gists{/gist_id}", "starred_url": "https://api.github.com/users/HrishikV/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HrishikV/subscriptions", "organizations_url": "https://api.github.com/users/HrishikV/orgs", "repos_url": "https://api.github.com/users/HrishikV/repos", "events_url": "https://api.github.com/users/HrishikV/events{/privacy}", "received_events_url": "https://api.github.com/users/HrishikV/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-12-08T15:50:17Z", "updated_at": "2024-08-23T00:40:21Z", "closed_at": "2024-08-23T00:40:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe send email action fails with TLS encryption as its trying to pass ssl context.\r\nthis code block is the caus\r\n```python\r\n try:\r\n        if use_ssl:\r\n            if use_tls:\r\n                logger.warning(\"Please choose between SSL or TLS, will default to SSL\")\r\n            context = ssl.create_default_context()\r\n            mailserver = smtplib.SMTP_SSL(smtp_address, smtp_port, context=context)\r\n        elif use_tls:\r\n            mailserver = smtplib.SMTP(smtp_address, smtp_port)\r\n            context = ssl.create_default_context()\r\n            mailserver.starttls(context=context)\r\n```\r\n\r\n**To Reproduce**\r\nIt can be reproduced by trying to send an email via tls encryption \r\n\r\n**Expected behavior**\r\nThe expected behavior is to be able to send the mail via the tls encryption\r\n\r\nIt can be achived by altering the code block to \r\n```python\r\n try:\r\n        if use_ssl:\r\n            if use_tls:\r\n                logger.warning(\"Please choose between SSL or TLS, will default to SSL\")\r\n            context = ssl.create_default_context()\r\n            mailserver = smtplib.SMTP_SSL(smtp_address, smtp_port, context=context)\r\n        elif use_tls:\r\n            mailserver = smtplib.SMTP(smtp_address, smtp_port)\r\n            mailserver.starttls()\r\n```\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9066/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9066/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9001", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9001/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9001/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9001/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/9001", "id": 2012689935, "node_id": "I_kwDOBiS_IM539zYP", "number": 9001, "title": "Validation results", "user": {"login": "eli-vlahos", "id": 64896247, "node_id": "MDQ6VXNlcjY0ODk2MjQ3", "avatar_url": "https://avatars.githubusercontent.com/u/64896247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eli-vlahos", "html_url": "https://github.com/eli-vlahos", "followers_url": "https://api.github.com/users/eli-vlahos/followers", "following_url": "https://api.github.com/users/eli-vlahos/following{/other_user}", "gists_url": "https://api.github.com/users/eli-vlahos/gists{/gist_id}", "starred_url": "https://api.github.com/users/eli-vlahos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eli-vlahos/subscriptions", "organizations_url": "https://api.github.com/users/eli-vlahos/orgs", "repos_url": "https://api.github.com/users/eli-vlahos/repos", "events_url": "https://api.github.com/users/eli-vlahos/events{/privacy}", "received_events_url": "https://api.github.com/users/eli-vlahos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-27T16:46:48Z", "updated_at": "2024-08-23T00:40:30Z", "closed_at": "2024-08-23T00:40:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello,\r\nSome of the validation results for some great expectation tests appear to be not working correctly. I pass in a csv file as a data source and try to validate it against another csv file. The expectations are set up so that all differences between the csv files will be flagged, specifically number and name of columns and expected values within columns. However as seen below sometimes the value in the csv file can be correct, but it will flag it as having failed. How do I fix that?\r\n\r\n![image](https://github.com/great-expectations/great_expectations/assets/64896247/7ca076e1-851a-448e-9404-0774889f2469)\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9001/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/9001/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8998", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8998/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8998/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8998/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8998", "id": 2008444931, "node_id": "I_kwDOBiS_IM53tnAD", "number": 8998, "title": "Can't use expect_queried_custom_query_to_return_num_rows more than once per validator", "user": {"login": "Chr96er", "id": 8114107, "node_id": "MDQ6VXNlcjgxMTQxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8114107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chr96er", "html_url": "https://github.com/Chr96er", "followers_url": "https://api.github.com/users/Chr96er/followers", "following_url": "https://api.github.com/users/Chr96er/following{/other_user}", "gists_url": "https://api.github.com/users/Chr96er/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chr96er/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chr96er/subscriptions", "organizations_url": "https://api.github.com/users/Chr96er/orgs", "repos_url": "https://api.github.com/users/Chr96er/repos", "events_url": "https://api.github.com/users/Chr96er/events{/privacy}", "received_events_url": "https://api.github.com/users/Chr96er/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-11-23T15:26:35Z", "updated_at": "2024-01-18T22:46:02Z", "closed_at": "2024-01-18T22:46:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "It's not possible to add multiple expectations to a validator using the `expect_queried_custom_query_to_return_num_rows` expectation. This will fail with the exception:\r\n`ValueError: More than one matching expectation was found. Please be more specific with your search criteria`\r\n\r\nThis is due to how the `domain_kwargs` are set up for this operator. In my GX fork I have added the following lines in `great_expectations/core/expectation_configuration.py`\r\n\r\n```\r\n        \"expect_queried_custom_query_to_return_num_rows\": {\r\n            \"domain_kwargs\": (\"template_dict\",\"row_condition\", \"condition_parser\"),\r\n            \"success_kwargs\": (\"value\",),\r\n            \"default_kwarg_values\": {\r\n                \"result_format\": \"BASIC\",\r\n                \"include_config\": True,\r\n                \"catch_exceptions\": False,\r\n            },\r\n        },\r\n```\r\n\r\nSee my commit here:\r\nhttps://github.com/great-expectations/great_expectations/commit/3bd0e20f83f6dcfc3d59e14e6764352c9bd4aa6f\r\n\r\nSince this expectation is entirely defined by the custom query, which is part of the `template_dict`, the `domain_kwargs` need to contain `template_dict`.\r\n\r\n\r\nUbuntu 22.04\r\nGX 0.18.2\r\nBigQuery\r\nGCP\r\n", "closed_by": {"login": "anthonyburdi", "id": 9903066, "node_id": "MDQ6VXNlcjk5MDMwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9903066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anthonyburdi", "html_url": "https://github.com/anthonyburdi", "followers_url": "https://api.github.com/users/anthonyburdi/followers", "following_url": "https://api.github.com/users/anthonyburdi/following{/other_user}", "gists_url": "https://api.github.com/users/anthonyburdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/anthonyburdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anthonyburdi/subscriptions", "organizations_url": "https://api.github.com/users/anthonyburdi/orgs", "repos_url": "https://api.github.com/users/anthonyburdi/repos", "events_url": "https://api.github.com/users/anthonyburdi/events{/privacy}", "received_events_url": "https://api.github.com/users/anthonyburdi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8998/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8998/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8996", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8996/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8996/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8996/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8996", "id": 2008194761, "node_id": "I_kwDOBiS_IM53sp7J", "number": 8996, "title": "Date to be between 2 date ranges", "user": {"login": "pmohancos", "id": 130379980, "node_id": "U_kgDOB8VwzA", "avatar_url": "https://avatars.githubusercontent.com/u/130379980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmohancos", "html_url": "https://github.com/pmohancos", "followers_url": "https://api.github.com/users/pmohancos/followers", "following_url": "https://api.github.com/users/pmohancos/following{/other_user}", "gists_url": "https://api.github.com/users/pmohancos/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmohancos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmohancos/subscriptions", "organizations_url": "https://api.github.com/users/pmohancos/orgs", "repos_url": "https://api.github.com/users/pmohancos/repos", "events_url": "https://api.github.com/users/pmohancos/events{/privacy}", "received_events_url": "https://api.github.com/users/pmohancos/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-11-23T13:02:47Z", "updated_at": "2024-12-02T10:36:32Z", "closed_at": "2024-03-12T17:34:35Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "### Discussed in https://github.com/great-expectations/great_expectations/discussions/4276\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **kyleaton** February 25, 2022</sup>\r\nHello! \r\n\r\nIt will be great to have an expectation that checks a date column to be between  2 date ranges.\r\n\r\n</div>", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8996/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8996/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8994", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8994/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8994/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8994/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8994", "id": 2007071255, "node_id": "I_kwDOBiS_IM53oXoX", "number": 8994, "title": "Wrong initialization of context if files are on GIT", "user": {"login": "kbraniewski", "id": 103303663, "node_id": "U_kgDOBihJ7w", "avatar_url": "https://avatars.githubusercontent.com/u/103303663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kbraniewski", "html_url": "https://github.com/kbraniewski", "followers_url": "https://api.github.com/users/kbraniewski/followers", "following_url": "https://api.github.com/users/kbraniewski/following{/other_user}", "gists_url": "https://api.github.com/users/kbraniewski/gists{/gist_id}", "starred_url": "https://api.github.com/users/kbraniewski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kbraniewski/subscriptions", "organizations_url": "https://api.github.com/users/kbraniewski/orgs", "repos_url": "https://api.github.com/users/kbraniewski/repos", "events_url": "https://api.github.com/users/kbraniewski/events{/privacy}", "received_events_url": "https://api.github.com/users/kbraniewski/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-22T20:28:04Z", "updated_at": "2024-08-23T00:40:52Z", "closed_at": "2024-08-23T00:40:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn our project we use several great expectations configurations, the configuration files are located in directories with different names. The directories are located in the GIT repository.\r\nExample:\r\n- gx_configs\r\n\t- config_1\r\n\t\t- checkpoints\r\n\t\t- expectations\t\t\r\n\t\t...\r\n\t\t- great_expectations.yml\r\n\t- config_2\r\n\t\t- checkpoints\r\n\t\t- expectations\t\t\r\n\t\t...\r\n\t\t- great_expectations.yml\r\n\r\nIn each directory there is an 'uncommitted' folder and a .gitignore file that contains the 'uncommitted' directory. \r\nDownloading the configuration from GIT by another person downloads the configuration without the 'uncommitted' directory.\r\nWhen you try to initialize a context with a path pointer to the configuration, a configuration template is created in new \"gx\" directory and the configuration from the correct directory, e.g. config_1, is loaded into the file context.\r\nThe created uncommitted directory and its subdirectories should be created in the directory where the great_expectations.yml file is located and not in a new directory named \"gx\".\r\n\r\n**To Reproduce**\r\n1 Context initialization:\r\n> gx = great_expectations.get_context(context_root_dir=\"gx_example/config_1\")\r\n\r\n2. rename the directory gx_example/gx to gx_example/config_1\r\n\r\n3 Re-initialize the context:\r\n> gx = great_expectations.get_context(context_root_dir=\"gx_example/config_1\")\r\n\r\n**Expected behavior**\r\nIn the _scaffold method (great_expectations/data_context/data_context/serializable_data_context.py), instead of a constant value from GX_DIR, the name of the directory where the great_expectations.yml file is located should be retrieved.\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows, Python 3.10.4\r\n - Great Expectations Version: 0.18.3\r\n - Data Source: N/A\r\n - Cloud environment: N/A", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8994/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8994/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8987", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8987/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8987/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8987/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8987", "id": 2003504026, "node_id": "I_kwDOBiS_IM53awua", "number": 8987, "title": "Environment variable not replaced in great_expectations.yml", "user": {"login": "skamalj", "id": 32254183, "node_id": "MDQ6VXNlcjMyMjU0MTgz", "avatar_url": "https://avatars.githubusercontent.com/u/32254183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skamalj", "html_url": "https://github.com/skamalj", "followers_url": "https://api.github.com/users/skamalj/followers", "following_url": "https://api.github.com/users/skamalj/following{/other_user}", "gists_url": "https://api.github.com/users/skamalj/gists{/gist_id}", "starred_url": "https://api.github.com/users/skamalj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skamalj/subscriptions", "organizations_url": "https://api.github.com/users/skamalj/orgs", "repos_url": "https://api.github.com/users/skamalj/repos", "events_url": "https://api.github.com/users/skamalj/events{/privacy}", "received_events_url": "https://api.github.com/users/skamalj/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721234, "node_id": "MDU6TGFiZWw2ODg3MjEyMzQ=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/duplicate", "name": "duplicate", "color": "cccccc", "default": true, "description": null}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-21T05:41:16Z", "updated_at": "2024-06-28T20:41:01Z", "closed_at": "2024-06-28T20:41:01Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am trying to use environment variable in great_expectations.yml to set column_name and table_name from environment variable. \r\nThis replacement is only working for connection_string but not in any other place. Is this expected behavior? As per documentation it should replace every such instance in yaml file.\r\n```yaml\r\n      my_asset:\r\n        type: table\r\n        order_by: []\r\n        batch_metadata: {}\r\n        splitter:\r\n          column_name: $dept\r\n          method_name: split_on_column_value\r\n        table_name: $table\r\n        schema_name:\r\n```\r\n\r\n**To Reproduce**\r\nUse aboue config with any sql source\r\n\r\n**Expected behavior**\r\nReplace the variables in yaml configuration\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.18.1\r\n - Data Source: Snowflake\r\n - Cloud environment: local\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8987/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8974", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8974/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8974/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8974/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8974", "id": 1999388679, "node_id": "I_kwDOBiS_IM53LEAH", "number": 8974, "title": "build_data_docs for remote site too slow to be used (TupleGCSStoreBackend)", "user": {"login": "Chr96er", "id": 8114107, "node_id": "MDQ6VXNlcjgxMTQxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8114107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chr96er", "html_url": "https://github.com/Chr96er", "followers_url": "https://api.github.com/users/Chr96er/followers", "following_url": "https://api.github.com/users/Chr96er/following{/other_user}", "gists_url": "https://api.github.com/users/Chr96er/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chr96er/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chr96er/subscriptions", "organizations_url": "https://api.github.com/users/Chr96er/orgs", "repos_url": "https://api.github.com/users/Chr96er/repos", "events_url": "https://api.github.com/users/Chr96er/events{/privacy}", "received_events_url": "https://api.github.com/users/Chr96er/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-17T15:29:22Z", "updated_at": "2024-08-23T00:41:04Z", "closed_at": "2024-08-23T00:41:04Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "After running all checkpoints I want to update the remote DataDocs (`store_backend: TupleGCSStoreBackend`). I've already set the `validation_results_limit` to 10 which still takes 5 minutes. I have 800 validation results at this point and I expect that number to grow to tens of thousands in the future and don't see why I should limit this (except maybe limit to 2-5 years which still produces thousands of validation results).\r\n\r\nAs a comparison: using `gsutil -m cp R` uploading those 800 files takes less than 30 seconds. Multiprocessing is key here, because without the `-m` flag it seems to take a similar amount of time. So I suppose the obvious thing to do is speed up the upload, ideally making it asynchronous using e.g. `asyncio` (which I do with most batch API calls) or at least parallel.\r\n\r\nMy current setup is running GX orchestrated by Airflow with a Postgres backend entirely local and hosting the DataDocs on GCS. Of course that's not a production setup but I'm a little worried that moving this to GCP will still be painfully slow because uploading thousands of files sequentially to GCS will always take ages.\r\n\r\nUbuntu 22.04\r\nGX 0.18.2\r\nBigQuery\r\nGCP", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8974/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8974/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8972", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8972/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8972/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8972/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8972", "id": 1999201585, "node_id": "I_kwDOBiS_IM53KWUx", "number": 8972, "title": "lower case column name leads to MetricResolutionError on Snowflake", "user": {"login": "shamanoor", "id": 53785937, "node_id": "MDQ6VXNlcjUzNzg1OTM3", "avatar_url": "https://avatars.githubusercontent.com/u/53785937?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shamanoor", "html_url": "https://github.com/shamanoor", "followers_url": "https://api.github.com/users/shamanoor/followers", "following_url": "https://api.github.com/users/shamanoor/following{/other_user}", "gists_url": "https://api.github.com/users/shamanoor/gists{/gist_id}", "starred_url": "https://api.github.com/users/shamanoor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shamanoor/subscriptions", "organizations_url": "https://api.github.com/users/shamanoor/orgs", "repos_url": "https://api.github.com/users/shamanoor/repos", "events_url": "https://api.github.com/users/shamanoor/events{/privacy}", "received_events_url": "https://api.github.com/users/shamanoor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2356556764, "node_id": "MDU6TGFiZWwyMzU2NTU2NzY0", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:snowflake", "name": "stack:snowflake", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-17T13:59:29Z", "updated_at": "2024-08-23T00:41:16Z", "closed_at": "2024-08-23T00:41:16Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nRunning a column expectation on a table with lower case column names returns a MetricResolutionError. It seems to fail to wrap the passed lower case column name with quotation marks . I read previous issues that have been closed as this problem should have been solved. Yet I still run into it and can't find a workaround.\r\n\r\n**To Reproduce**\r\n```\r\ndatasources:\r\n  my_snowflake_datasource:\r\n    class_name: Datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      class_name: SqlAlchemyExecutionEngine\r\n      module_name: great_expectations.execution_engine\r\n      connection_string: snowflake://*:*@*/*/*?warehouse=*&role=*&application=great_expectations_oss\r\n      create_temp_table: false\r\n    data_connectors:\r\n      default_inferred_data_connector_name:\r\n        class_name: InferredAssetSqlDataConnector\r\n        module_name: great_expectations.datasource.data_connector\r\n        include_schema_name: true\r\n```\r\nI add the datasource to my context. I create the batch request as below:\r\n```\r\nbatch_request = BatchRequest(\r\n    datasource_name=\"my_snowflake_datasource\",\r\n    data_connector_name=\"default_inferred_data_connector_name\",\r\n    data_asset_name=\"schema_name.table_name\"\r\n)\r\n```\r\nAnd get a validator from the context with the above batch request. I created the below validation which is giving issues:\r\n```\r\nvalidator.expect_column_values_to_be_between(\"inname\", min_value=1.0, max_value=2.0)\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name=\"blablabla\",\r\n    validator=validator,\r\n    runtime_configuration={\r\n        \"result_format\": {\r\n            \"result_format\": \"COMPLETE\",\r\n        },\r\n    },\r\n)\r\n```\r\nI get the following error when running the expectation:\r\n```\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: (snowflake.connector.errors.ProgrammingError) 000904 (42000): SQL compilation error: error line 1 at position 7\r\ninvalid identifier 'INNAME'\r\n[SQL: SELECT inname AS unexpected_values \r\nFROM (SELECT * \r\nFROM \"schema_name\".\"table_name\" \r\nWHERE true) AS anon_1 \r\nWHERE inname IS NOT NULL AND NOT (inname >= %(param_1)s AND inname <= %(param_2)s)\r\n LIMIT %(param_3)s]\r\n[parameters: {'param_1': 1.0, 'param_2': 2.0, 'param_3': 20}]\r\n```\r\n\r\n**Expected behavior**\r\nI was expecting the query to run without issue, with the column name \"inname\" in quotation marks in the query. It also seems odd I get the invalid identifier error with the column name in capital letters ('INNAME' instead of 'inname), but that doesn't seem to be the issue here.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.3\r\n - Data Source: Snowflake", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8972/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8972/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8963", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8963/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8963/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8963/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8963", "id": 1993734019, "node_id": "I_kwDOBiS_IM521feD", "number": 8963, "title": "checkpoint.run() is unable to parse a GCS path with a period in it", "user": {"login": "nirajdewani", "id": 10428678, "node_id": "MDQ6VXNlcjEwNDI4Njc4", "avatar_url": "https://avatars.githubusercontent.com/u/10428678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nirajdewani", "html_url": "https://github.com/nirajdewani", "followers_url": "https://api.github.com/users/nirajdewani/followers", "following_url": "https://api.github.com/users/nirajdewani/following{/other_user}", "gists_url": "https://api.github.com/users/nirajdewani/gists{/gist_id}", "starred_url": "https://api.github.com/users/nirajdewani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nirajdewani/subscriptions", "organizations_url": "https://api.github.com/users/nirajdewani/orgs", "repos_url": "https://api.github.com/users/nirajdewani/repos", "events_url": "https://api.github.com/users/nirajdewani/events{/privacy}", "received_events_url": "https://api.github.com/users/nirajdewani/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-14T23:14:47Z", "updated_at": "2024-08-23T00:41:26Z", "closed_at": "2024-08-23T00:41:26Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n`checkpoint.run()` is unable to parse a GCS path with a period in it.\r\n\r\n**To Reproduce**\r\nUpon following this [doc](https://github.com/great-expectations/great_expectations/blob/develop/docs/docusaurus/docs/deployment_patterns/how_to_use_great_expectations_with_google_cloud_platform_and_bigquery.md#5-build-and-run-a-checkpoint), I get a \r\n```\r\n  >>> checkpoint_result = checkpoint.run()\r\nCalculating Metrics: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 10/10 [00:04<00:00,  2.41it/s]\r\nError running action with name store_evaluation_params\r\nTraceback (most recent call last):\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/validation_operators/validation_operators.py\", line 478, in _run_actions\r\n    action_result = self.actions[name].run(\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/checkpoint/actions.py\", line 100, in run\r\n    return self._run(\r\n           ^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/checkpoint/actions.py\", line 1015, in _run\r\n    self.data_context.store_evaluation_parameters(validation_result_suite)\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2167, in store_evaluation_parameters\r\n    self._compile_evaluation_parameter_dependencies()\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 4740, in _compile_evaluation_parameter_dependencies\r\n    expectation_suite_dict: dict = cast(dict, self.expectations_store.get(key))\r\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/expectations_store.py\", line 210, in get\r\n    return super().get(key)  # type: ignore[return-value]\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/store.py\", line 207, in get\r\n    value = self._store_backend.get(self.key_to_tuple(key))\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/_store_backend.py\", line 123, in get\r\n    value = self._get(key, **kwargs)\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/tuple_store_backend.py\", line 863, in _get\r\n    raise InvalidKeyError(\r\ngreat_expectations.exceptions.exceptions.InvalidKeyError: Unable to retrieve object from TupleGCSStoreBackend with the following Key: ('test_bigquery_suite', '__none__', '20231114T223144', '500796Z', 'my_bigquery_datasource-my_table_asset')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n             ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/checkpoint/checkpoint.py\", line 305, in run\r\n    self._run_validation(\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/checkpoint/checkpoint.py\", line 530, in _run_validation\r\n    async_validation_operator_result = async_executor.submit(\r\n                                       ^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/core/async_executor.py\", line 106, in submit\r\n    return AsyncResult(value=fn(*args, **kwargs))\r\n                             ^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/validation_operators/validation_operators.py\", line 415, in run\r\n    batch_actions_results = self._run_actions(\r\n                            ^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/validation_operators/validation_operators.py\", line 508, in _run_actions\r\n    raise e\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/validation_operators/validation_operators.py\", line 478, in _run_actions\r\n    action_result = self.actions[name].run(\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/checkpoint/actions.py\", line 100, in run\r\n    return self._run(\r\n           ^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/checkpoint/actions.py\", line 1015, in _run\r\n    self.data_context.store_evaluation_parameters(validation_result_suite)\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 2167, in store_evaluation_parameters\r\n    self._compile_evaluation_parameter_dependencies()\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py\", line 4740, in _compile_evaluation_parameter_dependencies\r\n    expectation_suite_dict: dict = cast(dict, self.expectations_store.get(key))\r\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/expectations_store.py\", line 210, in get\r\n    return super().get(key)  # type: ignore[return-value]\r\n           ^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/store.py\", line 207, in get\r\n    value = self._store_backend.get(self.key_to_tuple(key))\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/_store_backend.py\", line 123, in get\r\n    value = self._get(key, **kwargs)\r\n            ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/venv/lib/python3.11/site-packages/great_expectations/data_context/store/tuple_store_backend.py\", line 863, in _get\r\n    raise InvalidKeyError(\r\ngreat_expectations.exceptions.exceptions.InvalidKeyError: Unable to retrieve object from TupleGCSStoreBackend with the following Key: ('test_bigquery_suite', '__none__', '20231114T223144', '500796Z', 'my_bigquery_datasource-my_table_asset')\r\n```\r\n when the JSON file exists in GCS at \r\n`gs://blah/great_expectations/test_bigquery_suite/__none__/20231114T223144.500796Z/my_bigquery_datasource-my_table_asset.json`\r\n\r\n**Expected behavior**\r\nI expect `checkpoint.run()` to run without any errors.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.18.2\r\n - Data Source: BigQuery\r\n - Cloud environment: GCP\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8963/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8963/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8960", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8960/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8960/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8960/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8960", "id": 1991525817, "node_id": "I_kwDOBiS_IM52tEW5", "number": 8960, "title": "expect_column_values_to_be_in_set thowing NoneType is not iterable", "user": {"login": "microcassidy", "id": 7576025, "node_id": "MDQ6VXNlcjc1NzYwMjU=", "avatar_url": "https://avatars.githubusercontent.com/u/7576025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/microcassidy", "html_url": "https://github.com/microcassidy", "followers_url": "https://api.github.com/users/microcassidy/followers", "following_url": "https://api.github.com/users/microcassidy/following{/other_user}", "gists_url": "https://api.github.com/users/microcassidy/gists{/gist_id}", "starred_url": "https://api.github.com/users/microcassidy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/microcassidy/subscriptions", "organizations_url": "https://api.github.com/users/microcassidy/orgs", "repos_url": "https://api.github.com/users/microcassidy/repos", "events_url": "https://api.github.com/users/microcassidy/events{/privacy}", "received_events_url": "https://api.github.com/users/microcassidy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-13T21:36:47Z", "updated_at": "2024-08-24T23:11:52Z", "closed_at": "2024-08-23T00:41:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nI am running into this error several times over for mssql sources. The expectation was generated by the onboarding assistant. Other expectations that indicate a non-empty set are passing (see screenshot).\r\n\r\n`expect_column_values_to_be_in_set raised an exception:\r\n'NoneType' object is not iterable`\r\n\r\n![image](https://github.com/great-expectations/great_expectations/assets/7576025/baccc983-10ee-4ef6-81f9-783cc3160087)\r\n\r\n\r\n\r\n**To Reproduce**\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\n\r\n```python \r\nexpectation_configuration = ExpectationConfiguration(**{\r\n  \"expectation_type\": \"expect_column_values_to_be_in_set\",\r\n  \"kwargs\": {\r\n    \"column\": \"redacted\",\r\n    \"mostly\": 1.0,\r\n    \"value_set\": [\r\n      \"2\",\r\n      \"3\",\r\n      \"1\"\r\n    ]\r\n  },\r\n  \"meta\": {\r\n    \"profiler_details\": {\r\n      \"metric_configuration\": {\r\n        \"domain_kwargs\": {\r\n          \"column\": \"redacted\"\r\n        },\r\n        \"metric_name\": \"column.distinct_values\",\r\n        \"metric_value_kwargs\": None\r\n      },\r\n      \"num_batches\": 1,\r\n      \"parse_strings_as_datetimes\": False\r\n    }\r\n  }\r\n})\r\nsuite.add_expectation(expectation_configuration=expectation_configuration)\r\n```\r\n\r\n```stderr\r\nexpect_column_values_to_be_in_set raised an exception:\r\n'NoneType' object is not iterable\r\nShow exception traceback...\r\n\r\nTraceback (most recent call last):\r\nFile \"/home/cass/repos/great_expectations/venv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 548, in _process_direct_and_bundled_metric_computation_configurations\r\n] = metric_computation_configuration.metric_fn( # type: ignore[misc] # F not callable\r\nFile \"/home/cass/repos/great_expectations/venv/lib/python3.10/site-packages/great_expectations/expectations/metrics/map_metric_provider/map_condition_auxilliary_methods.py\", line 501, in _sqlalchemy_map_condition_query\r\nquery_as_string: str = sql_statement_with_post_compile_to_string(\r\nFile \"/home/cass/repos/great_expectations/venv/lib/python3.10/site-packages/great_expectations/expectations/metrics/util.py\", line 1216, in sql_statement_with_post_compile_to_string\r\nparams = (repr(compiled.params[name]) for name in compiled.positiontup)\r\nTypeError: 'NoneType' object is not iterable\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\nFile \"/home/cass/repos/great_expectations/venv/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py\", line 285, in _resolve\r\nself._execution_engine.resolve_metrics(\r\nFile \"/home/cass/repos/great_expectations/venv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 283, in resolve_metrics\r\nreturn self._process_direct_and_bundled_metric_computation_configurations(\r\nFile \"/home/cass/repos/great_expectations/venv/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 552, in _process_direct_and_bundled_metric_computation_configurations\r\nraise gx_exceptions.MetricResolutionError(\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: 'NoneType' object is not iterable\r\n```\r\n\r\n**Expected behavior**\r\n\r\nThe expectation should pass or fail without throwing an execution error.\r\n\r\n**Environment (please complete the following information):**\r\n - Windows WSL\r\n - Great Expectations Version: 0.17.23\r\n - Data Source: MSSQL\r\n - Cloud environment: N/A\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8960/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8960/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8957", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8957/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8957/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8957/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8957", "id": 1987744024, "node_id": "I_kwDOBiS_IM52epEY", "number": 8957, "title": "Ruamel yaml load errors in multithreading", "user": {"login": "Kirill-Ulich", "id": 57491481, "node_id": "MDQ6VXNlcjU3NDkxNDgx", "avatar_url": "https://avatars.githubusercontent.com/u/57491481?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kirill-Ulich", "html_url": "https://github.com/Kirill-Ulich", "followers_url": "https://api.github.com/users/Kirill-Ulich/followers", "following_url": "https://api.github.com/users/Kirill-Ulich/following{/other_user}", "gists_url": "https://api.github.com/users/Kirill-Ulich/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kirill-Ulich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kirill-Ulich/subscriptions", "organizations_url": "https://api.github.com/users/Kirill-Ulich/orgs", "repos_url": "https://api.github.com/users/Kirill-Ulich/repos", "events_url": "https://api.github.com/users/Kirill-Ulich/events{/privacy}", "received_events_url": "https://api.github.com/users/Kirill-Ulich/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-11-10T14:31:21Z", "updated_at": "2024-08-23T00:01:46Z", "closed_at": "2024-08-23T00:01:46Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nDescription of my problem [here](https://github.com/PrefectHQ/prefect/issues/8142)\r\n\r\n**To Reproduce**\r\nThe code and stack trace of error can be seen at the link above.\r\n\r\n**Expected behavior**\r\nI expect that reading data from GX yml config files will work without errors.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.15.41, 0.18.1\r\n - Data Source: Pandas, SqlAlchemy\r\n - Cloud environment: Prefect\r\n\r\n**Additional context**\r\nI think that the problem is the inability of ruamel to read one file with multithreading.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8957/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8957/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8954", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8954/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8954/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8954/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8954", "id": 1986374904, "node_id": "I_kwDOBiS_IM52Zaz4", "number": 8954, "title": "[FEATURE] Add SSO or OAuth  for Trino", "user": {"login": "bharadwajtetali", "id": 31376356, "node_id": "MDQ6VXNlcjMxMzc2MzU2", "avatar_url": "https://avatars.githubusercontent.com/u/31376356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bharadwajtetali", "html_url": "https://github.com/bharadwajtetali", "followers_url": "https://api.github.com/users/bharadwajtetali/followers", "following_url": "https://api.github.com/users/bharadwajtetali/following{/other_user}", "gists_url": "https://api.github.com/users/bharadwajtetali/gists{/gist_id}", "starred_url": "https://api.github.com/users/bharadwajtetali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bharadwajtetali/subscriptions", "organizations_url": "https://api.github.com/users/bharadwajtetali/orgs", "repos_url": "https://api.github.com/users/bharadwajtetali/repos", "events_url": "https://api.github.com/users/bharadwajtetali/events{/privacy}", "received_events_url": "https://api.github.com/users/bharadwajtetali/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-09T20:43:49Z", "updated_at": "2024-08-23T00:02:12Z", "closed_at": "2024-08-23T00:02:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nI couldn't connect to Trino as Great Expectations doesn't support OAuth 2.0\r\n\r\n**Describe the solution you'd like**\r\n\r\nhttps://github.com/trinodb/trino-python-client\r\nSQLAlchemy:\r\nfrom sqlalchemy import create_engine\r\nfrom trino.auth import OAuth2Authentication\r\n\r\nengine = create_engine(\r\n\"trino://<username>@<host>:<port>/<catalog>\",\r\n    connect_args={\r\n        \"auth\": OAuth2Authentication(),\r\n        \"http_scheme\": \"https\",\r\n    }\r\n)\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8954/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8954/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8947", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8947/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8947/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8947/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8947", "id": 1983463543, "node_id": "I_kwDOBiS_IM52OUB3", "number": 8947, "title": "Multiple requests to Azure Keyvault while getting the local file context using get_context()", "user": {"login": "sudiv", "id": 69966125, "node_id": "MDQ6VXNlcjY5OTY2MTI1", "avatar_url": "https://avatars.githubusercontent.com/u/69966125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sudiv", "html_url": "https://github.com/sudiv", "followers_url": "https://api.github.com/users/sudiv/followers", "following_url": "https://api.github.com/users/sudiv/following{/other_user}", "gists_url": "https://api.github.com/users/sudiv/gists{/gist_id}", "starred_url": "https://api.github.com/users/sudiv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sudiv/subscriptions", "organizations_url": "https://api.github.com/users/sudiv/orgs", "repos_url": "https://api.github.com/users/sudiv/repos", "events_url": "https://api.github.com/users/sudiv/events{/privacy}", "received_events_url": "https://api.github.com/users/sudiv/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6895559346, "node_id": "LA_kwDOBiS_IM8AAAABmwHisg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/azure", "name": "azure", "color": "415BF1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-08T12:13:19Z", "updated_at": "2024-08-23T00:02:40Z", "closed_at": "2024-08-23T00:02:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen getting local file context with get_context() method, in which the local context's  config_variables.yml is reading secrets from Azure Key Vault using the following signature  (Azure client credentials are stored in environment variables)\r\n\r\nsecret|https://yourvaultname.vault.azure.net/secrets/yoursecret\r\n(or)\r\nsecret|https://yourvaultname.vault.azure.net/secrets/yourjsonsecret|yourjsonkey\r\n\r\ngetting context is stuck for couple of minutes, on checking the code in debug mode reveals that there are multiple requests (More than 60) to AZ Key Vault.\r\n\r\n\r\n**To Reproduce**\r\n1) Create a new local file context\r\n2) Setup a secret in Azure key vault , and register an app/get client id and secret of an app which has access to read the secret from the key vault. \r\n3) Include following line in uncommited/config_variables.yml \r\nsecret|https://YourVaultName.vault.azure.net/secrets/yoursecretname\r\n4) Run the following code\r\n\r\nimport great_expectations as gx\r\nimport logging,os\r\n\r\nlogging.basicConfig(filename='apptest_simple.log', level=logging.DEBUG,\r\n                    format='%(asctime)s [%(levelname)s] - %(message)s')\r\n                    \r\npath_to_context_root_folder=\"path to your context\"\r\n\r\nos.environ[\"AZURE_CLIENT_ID\"] = \"your client id\"\r\nos.environ[\"AZURE_CLIENT_SECRET\"] = \"your secret\"\r\nos.environ[\"AZURE_TENANT_ID\"] = \"your tenant id\"\r\n\r\nprint(\"Trying to get the GX context at %s\"%path_to_context_root_folder)\r\ncontext = gx.get_context(context_root_dir=path_to_context_root_folder)\r\nprint(\"Acquired GX context at %s\"%path_to_context_root_folder) \r\n\r\n\r\n**Expected behavior**\r\nThe context should be acquired with in seconds and key vault should have been accessed only once to get the secret\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Tested in Windows 10 and AKS Kube Pod\r\n - Great Expectations Version: Tested in 0.17.22 and 0.18.1\r\n - Data Source: [e.g. Pandas, Snowflake]: NA , Tested with azure-identity 1.14.0 and 1.15.0\r\n - Cloud environment: NA\r\n\r\n**Additional context**\r\nIn the log could be able to see on the first call itself the azure-identity could be able to get the secret provided all the access is correct. Still there are multiple calls happening to key vault blocking the execution of get_context.\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8947/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8947/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8943", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8943/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8943/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8943/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8943", "id": 1982597779, "node_id": "I_kwDOBiS_IM52LAqT", "number": 8943, "title": "[GX Cloud] Broken URL for validation results in Slack notification", "user": {"login": "babjiloganda", "id": 20417000, "node_id": "MDQ6VXNlcjIwNDE3MDAw", "avatar_url": "https://avatars.githubusercontent.com/u/20417000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/babjiloganda", "html_url": "https://github.com/babjiloganda", "followers_url": "https://api.github.com/users/babjiloganda/followers", "following_url": "https://api.github.com/users/babjiloganda/following{/other_user}", "gists_url": "https://api.github.com/users/babjiloganda/gists{/gist_id}", "starred_url": "https://api.github.com/users/babjiloganda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/babjiloganda/subscriptions", "organizations_url": "https://api.github.com/users/babjiloganda/orgs", "repos_url": "https://api.github.com/users/babjiloganda/repos", "events_url": "https://api.github.com/users/babjiloganda/events{/privacy}", "received_events_url": "https://api.github.com/users/babjiloganda/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-08T02:24:07Z", "updated_at": "2024-08-23T00:03:07Z", "closed_at": "2024-08-23T00:03:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nGetting 404 error on the Validation results URL shared in slack notification.\r\n\r\n**To Reproduce**\r\nSetup slack web hook notification for validation runs in GX Cloud. {Screenshots attached\r\n[GX_Slack_URL.zip](https://github.com/great-expectations/great_expectations/files/13291307/GX_Slack_URL.zip)\r\n}\r\n\r\n**Expected behavior**\r\nThe Validation result should contain a valid URL to the Data asset/run.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]\r\n - Great Expectations Version: 0.17.x\r\n - Data Source: Spark\r\n - Cloud environment: Databricks\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8943/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8943/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8933", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8933/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8933/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8933/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8933", "id": 1979096481, "node_id": "I_kwDOBiS_IM519p2h", "number": 8933, "title": "Unable to get the list of expectations from Expectation Gallery. Gallery is blank. ", "user": {"login": "nikitammahale", "id": 150032944, "node_id": "U_kgDOCPFSMA", "avatar_url": "https://avatars.githubusercontent.com/u/150032944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikitammahale", "html_url": "https://github.com/nikitammahale", "followers_url": "https://api.github.com/users/nikitammahale/followers", "following_url": "https://api.github.com/users/nikitammahale/following{/other_user}", "gists_url": "https://api.github.com/users/nikitammahale/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikitammahale/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikitammahale/subscriptions", "organizations_url": "https://api.github.com/users/nikitammahale/orgs", "repos_url": "https://api.github.com/users/nikitammahale/repos", "events_url": "https://api.github.com/users/nikitammahale/events{/privacy}", "received_events_url": "https://api.github.com/users/nikitammahale/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-06T12:59:56Z", "updated_at": "2024-08-23T00:03:42Z", "closed_at": "2024-08-23T00:03:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUnable to get the list of expectations from Expectation Gallery. Gallery is blank. \r\n\r\n**To Reproduce**\r\nNavigate from browser to https://greatexpectations.io/expectations/\r\nAlso tried navigating from Great expecations (https://docs.greatexpectations.io/docs/) -> Resources tab -> Expecatation Gallery\r\n\r\n**Expected behavior**\r\nUser should be able to see a complete list of expectations in the gallery.\r\n\r\n**Environment \r\n - Operating System: Windows\r\n - Great Expectations Version: 0.18.1\r\n - Data Source: [e.g. Pandas, Snowflake] - NA\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP] - NA\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n\r\nScreenshot of page - \r\n\r\n<img width=\"916\" alt=\"Screenshot 2023-11-06 182925\" src=\"https://github.com/great-expectations/great_expectations/assets/150032944/49003f20-bac5-45a6-be2c-2e4ca85c6959\">\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8933/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8929", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8929/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8929/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8929/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8929", "id": 1976034849, "node_id": "I_kwDOBiS_IM51x-Yh", "number": 8929, "title": "unexpected_index_query references internal function for expect_column_values_to_match_strftime_format expectation", "user": {"login": "cookepm", "id": 25459699, "node_id": "MDQ6VXNlcjI1NDU5Njk5", "avatar_url": "https://avatars.githubusercontent.com/u/25459699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cookepm", "html_url": "https://github.com/cookepm", "followers_url": "https://api.github.com/users/cookepm/followers", "following_url": "https://api.github.com/users/cookepm/following{/other_user}", "gists_url": "https://api.github.com/users/cookepm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cookepm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cookepm/subscriptions", "organizations_url": "https://api.github.com/users/cookepm/orgs", "repos_url": "https://api.github.com/users/cookepm/repos", "events_url": "https://api.github.com/users/cookepm/events{/privacy}", "received_events_url": "https://api.github.com/users/cookepm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-03T11:59:29Z", "updated_at": "2024-08-23T00:03:54Z", "closed_at": "2024-08-23T00:03:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n`unexpected_index_query ` for the `expect_column_values_to_match_strftime_format ` references an internal GX function [is_parseable_by_format](https://github.com/great-expectations/great_expectations/blob/3ad71a7d12956f9fbcb0668c4eb38b83a5d7ca2d/great_expectations/dataset/sparkdf_dataset.py#L1053).\r\n\r\n**To Reproduce**\r\n```{python}\r\nfrom great_expectations import get_context\r\n\r\n\r\ncontext = get_context()\r\ndatasource = context.sources.add_or_update_spark('default')\r\ndata_asset = datasource.add_dataframe_asset('test-df')\r\n\r\ndf = spark.createDataFrame([['2023-01-01'], ['2023-01-02'], ['20230101']], schema=['val'])\r\nbatch_request = data_asset.build_batch_request(dataframe=df)\r\nvalidator = context.get_validator(batch_request=batch_request)\r\n\r\nvalidator.expect_column_values_to_match_strftime_format(column=\"val\", strftime_format='%Y-%m-%d')\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name='test-checkpoint',\r\n    validator=validator,\r\n)\r\n\r\ncheckpoint_results = checkpoint.run(\r\n    result_format={\r\n        'result_format': 'COMPLETE',\r\n        'return_unexpected_index_query': True,\r\n    },\r\n)\r\nvalidation_results = list(checkpoint_results['run_results'].values())[0]['validation_result']['results']\r\nquery = validation_results[0]['result']['unexpected_index_query']\r\nquery\r\n```\r\nreturns `'df.filter(F.expr((val IS NOT NULL) AND (NOT is_parseable_by_format(val))))'`. This seems to reference [this function](https://github.com/great-expectations/great_expectations/blob/3ad71a7d12956f9fbcb0668c4eb38b83a5d7ca2d/great_expectations/dataset/sparkdf_dataset.py#L1053) and [even assuming any syntax issues are resolved](https://github.com/great-expectations/great_expectations/issues/8407) will not be executable by the user as a result.\r\n\r\n**Expected behavior**\r\nA valid ([up to the known syntax issues](https://github.com/great-expectations/great_expectations/issues/8407)) PySpark expression which a user can evaluate to return the failing rows.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  Ubuntu 18.04\r\n - Great Expectations Version: 0.17.22\r\n - Data Source: Spark\r\n - Cloud environment: [Azure Synapse](https://learn.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-33-runtime)\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8929/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8929/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8928", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8928/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8928/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8928/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8928", "id": 1975996245, "node_id": "I_kwDOBiS_IM51x09V", "number": 8928, "title": "unexpected_index_column_names not present in expect_column_values_to_not_be_null checkpoint result", "user": {"login": "cookepm", "id": 25459699, "node_id": "MDQ6VXNlcjI1NDU5Njk5", "avatar_url": "https://avatars.githubusercontent.com/u/25459699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cookepm", "html_url": "https://github.com/cookepm", "followers_url": "https://api.github.com/users/cookepm/followers", "following_url": "https://api.github.com/users/cookepm/following{/other_user}", "gists_url": "https://api.github.com/users/cookepm/gists{/gist_id}", "starred_url": "https://api.github.com/users/cookepm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cookepm/subscriptions", "organizations_url": "https://api.github.com/users/cookepm/orgs", "repos_url": "https://api.github.com/users/cookepm/repos", "events_url": "https://api.github.com/users/cookepm/events{/privacy}", "received_events_url": "https://api.github.com/users/cookepm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-03T11:36:45Z", "updated_at": "2024-08-23T00:04:07Z", "closed_at": "2024-08-23T00:04:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nFor `expect_column_values_to_not_be_null` (for Spark datasource), when I run a checkpoint with kwargs `result_format='COMPLETE'` and `unexpected_index_column_names=['some col']` I am not getting back any `unexpected_index_column_names` key in the checkpoint/validation results.\r\n\r\n**To Reproduce**\r\n\r\n```{python}\r\nfrom great_expectations import get_context\r\n\r\n\r\ncontext = get_context()\r\ndatasource = context.sources.add_or_update_spark('default')\r\ndata_asset = datasource.add_dataframe_asset('test-df')\r\n\r\ndf = spark.createDataFrame([[1, 'a'], [2, None], [3, 'c']], schema=['ix', 'val'])\r\nbatch_request = data_asset.build_batch_request(dataframe=df)\r\nvalidator = context.get_validator(batch_request=batch_request)\r\n\r\nvalidator.expect_column_values_to_be_between(column=\"val\", min_value=0, max_value=3)\r\nvalidator.expect_column_values_to_not_be_null(column=\"val\")\r\nvalidator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name='test-checkpoint',\r\n    validator=validator,\r\n)\r\n\r\ncheckpoint_results = checkpoint.run(\r\n    result_format={\r\n        'result_format': 'COMPLETE',\r\n        'unexpected_index_column_names': ['ix'],\r\n        'return_unexpected_index_query': True,\r\n    },\r\n)\r\nvalidation_results = list(checkpoint_results['run_results'].values())[0]['validation_result']['results']\r\nprint(validation_results[0]['result']['unexpected_index_column_names'])\r\nvalidation_results[1]['result']['unexpected_index_column_names']\r\n```\r\n\r\nThe print statement corresponding to the `expect_column_values_to_be_between` expectation above executes okay, returning `['ix']` but I get the following traceback for the final line corresponding to the `expect_column_values_to_not_be_null` expectation:\r\n\r\n> KeyError                                  Traceback (most recent call last)\r\n>   Cell In [37], line 30\r\n>        28 validation_results = list(checkpoint_results['run_results'].values())[0]['validation_result']['results']\r\n>        29 print(validation_results[0]['result']['unexpected_index_column_names'])\r\n>   ---> 30 validation_results[1]['result']['unexpected_index_column_names']\r\n> \r\n> KeyError: 'unexpected_index_column_names'\r\n\r\n**Expected behavior**\r\nI expect the last line to return `['ix']` as per the `expect_column_values_to_be_between` expectation.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 18.04\r\n - Great Expectations Version: 0.17.22\r\n - Data Source: Spark\r\n - Cloud environment: [Azure Synapse](https://learn.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-33-runtime)\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8928/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8928/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8916", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8916/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8916/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8916/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8916", "id": 1973985252, "node_id": "I_kwDOBiS_IM51qJ_k", "number": 8916, "title": "Query Asset not able to run rules", "user": {"login": "akshay-kokate-06", "id": 101562443, "node_id": "U_kgDOBg24Sw", "avatar_url": "https://avatars.githubusercontent.com/u/101562443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akshay-kokate-06", "html_url": "https://github.com/akshay-kokate-06", "followers_url": "https://api.github.com/users/akshay-kokate-06/followers", "following_url": "https://api.github.com/users/akshay-kokate-06/following{/other_user}", "gists_url": "https://api.github.com/users/akshay-kokate-06/gists{/gist_id}", "starred_url": "https://api.github.com/users/akshay-kokate-06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akshay-kokate-06/subscriptions", "organizations_url": "https://api.github.com/users/akshay-kokate-06/orgs", "repos_url": "https://api.github.com/users/akshay-kokate-06/repos", "events_url": "https://api.github.com/users/akshay-kokate-06/events{/privacy}", "received_events_url": "https://api.github.com/users/akshay-kokate-06/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6895831417, "node_id": "LA_kwDOBiS_IM8AAAABmwYJeQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/query-asset", "name": "query-asset", "color": "5EE822", "default": false, "description": "Related to use of a FDS QueryAsset"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-11-02T10:50:07Z", "updated_at": "2024-08-23T00:04:19Z", "closed_at": "2024-08-23T00:04:18Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When using `add_query_asset` the RuleBasedProfiler is not able to generate expectations for numeric fields. But when using `add_table_asset` it is able to generate the expectations suite as expected.\r\nWe are using Ephemeral Data Context.\r\n\r\nWorking file with Table Asset\r\n```\r\nproject_config = DataContextConfig(\r\n        store_backend_defaults=InMemoryStoreBackendDefaults()\r\n    )\r\ncontext = EphemeralDataContext(project_config=project_config)\r\n\r\ncontext.sources.add_sql(name=source_store_name, connection_string=<connection-string-1>)\r\n\r\nsource = context.get_datasource(source_store_name)\r\nsource.add_table_asset(name=self.get_asset_name(), table_name=self.entity, schema_name=schema_name)\r\n\r\nprint(self.profiler_config)\r\nprofiler = RuleBasedProfiler(name=self.profiler_config['name'],\r\n                             config_version=self.profiler_config['config_version'],\r\n                             rules=self.profiler_config['rules'],\r\n                             variables=self.profiler_config['variables'],\r\n                             data_context=self.context\r\n                             )\r\n\r\nsource_data_asset = context.get_datasource(source_store_name).get_asset(self.get_asset_name())\r\nsource_batch_request = source_data_asset.build_batch_request()\r\n\r\nprofiler_result = profiler.run(\r\n            batch_request=source_batch_request\r\n        )\r\nexpectation_suite_profile = profiler_result.get_expectation_suite(\r\n            expectation_suite_name=self.expectation_suite_name)\r\n\r\n```\r\n\r\nNot Working Fine\r\n```\r\nproject_config = DataContextConfig(\r\n        store_backend_defaults=InMemoryStoreBackendDefaults()\r\n    )\r\ncontext = EphemeralDataContext(project_config=project_config)\r\n\r\ncontext.sources.add_sql(name=source_store_name, connection_string=<connection-string-1>)\r\n\r\nsource = context.get_datasource(source_store_name)\r\nsource.add_query_asset(name='some-asset', table_name='table', schema_name='schema')\r\n\r\nprofiler = RuleBasedProfiler(name=self.profiler_config['name'],\r\n                             config_version=self.profiler_config['config_version'],\r\n                             rules=self.profiler_config['rules'],\r\n                             variables=self.profiler_config['variables'],\r\n                             data_context=self.context\r\n                             )\r\n\r\nsource_data_asset = context.get_datasource(source_store_name).get_asset(self.get_asset_name())\r\nsource_batch_request = source_data_asset.build_batch_request()\r\n\r\nprofiler_result = profiler.run(\r\n            batch_request=source_batch_request\r\n        )\r\nexpectation_suite_profile = profiler_result.get_expectation_suite(\r\n            expectation_suite_name=self.expectation_suite_name)\r\n\r\n```\r\n```\r\n\r\nIs this behaviour expected ?\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8916/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8916/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8909", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8909/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8909/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8909/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8909", "id": 1972101182, "node_id": "I_kwDOBiS_IM51i-A-", "number": 8909, "title": "Example tests not passing on version 0.18.0", "user": {"login": "dmitriy-p-petrov", "id": 96236753, "node_id": "U_kgDOBbx00Q", "avatar_url": "https://avatars.githubusercontent.com/u/96236753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitriy-p-petrov", "html_url": "https://github.com/dmitriy-p-petrov", "followers_url": "https://api.github.com/users/dmitriy-p-petrov/followers", "following_url": "https://api.github.com/users/dmitriy-p-petrov/following{/other_user}", "gists_url": "https://api.github.com/users/dmitriy-p-petrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitriy-p-petrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitriy-p-petrov/subscriptions", "organizations_url": "https://api.github.com/users/dmitriy-p-petrov/orgs", "repos_url": "https://api.github.com/users/dmitriy-p-petrov/repos", "events_url": "https://api.github.com/users/dmitriy-p-petrov/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitriy-p-petrov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-11-01T10:28:19Z", "updated_at": "2024-05-06T14:45:53Z", "closed_at": "2023-11-20T19:55:45Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHey, man. It seems like the example cases aren't working properly on the newest version whenever you try to create a custom expectation. Haven't looked too deep into it as i'm currently at work.\r\n\r\n**To Reproduce**\r\nThe config should be the basic one, since i only ran `great_expectations init` and put my expectation template in /plugins/expectations/\r\n\r\nJust copy everything from this page:\r\n\r\nhttps://docs.greatexpectations.io/docs/guides/expectations/creating_custom_expectations/how_to_create_custom_column_pair_map_expectations#add-example-cases\r\n\r\nuntil you reach the positive/negative example and try running. In my case it says `failing: -all` and if i enable the debug logger i see the following message:\r\n\r\n`(generate_expectation_tests) PROBLEM with get_test_validator_with_data in backend pandas for expect_column_not_blank_when_another_column_equals_specific_value from data (no data_alt to try) ValueError('Provided mode ephemeral returned context of type FileDataContext instead of EphemeralDataContext; please check your input arguments.')`\r\n\r\nNot sure if i do something wrong, tho, so apologies if this is the case.\r\n\r\n**Expected behavior**\r\nWell, the expected behaviour should be all tests passing properly as they do on version 0.16.16.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Win 10\r\n - Great Expectations Version: 0.18.0\r\n - Data Source: N/A?\r\n - Cloud environment: N/A?\r\n", "closed_by": {"login": "dmitriy-p-petrov", "id": 96236753, "node_id": "U_kgDOBbx00Q", "avatar_url": "https://avatars.githubusercontent.com/u/96236753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitriy-p-petrov", "html_url": "https://github.com/dmitriy-p-petrov", "followers_url": "https://api.github.com/users/dmitriy-p-petrov/followers", "following_url": "https://api.github.com/users/dmitriy-p-petrov/following{/other_user}", "gists_url": "https://api.github.com/users/dmitriy-p-petrov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitriy-p-petrov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitriy-p-petrov/subscriptions", "organizations_url": "https://api.github.com/users/dmitriy-p-petrov/orgs", "repos_url": "https://api.github.com/users/dmitriy-p-petrov/repos", "events_url": "https://api.github.com/users/dmitriy-p-petrov/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitriy-p-petrov/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8909/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8909/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8856", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8856/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8856/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8856/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8856", "id": 1955885304, "node_id": "I_kwDOBiS_IM50lHD4", "number": 8856, "title": "Send validation result to Datahub not work", "user": {"login": "irisywy6201", "id": 20381545, "node_id": "MDQ6VXNlcjIwMzgxNTQ1", "avatar_url": "https://avatars.githubusercontent.com/u/20381545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/irisywy6201", "html_url": "https://github.com/irisywy6201", "followers_url": "https://api.github.com/users/irisywy6201/followers", "following_url": "https://api.github.com/users/irisywy6201/following{/other_user}", "gists_url": "https://api.github.com/users/irisywy6201/gists{/gist_id}", "starred_url": "https://api.github.com/users/irisywy6201/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/irisywy6201/subscriptions", "organizations_url": "https://api.github.com/users/irisywy6201/orgs", "repos_url": "https://api.github.com/users/irisywy6201/repos", "events_url": "https://api.github.com/users/irisywy6201/events{/privacy}", "received_events_url": "https://api.github.com/users/irisywy6201/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-10-22T12:35:46Z", "updated_at": "2025-04-29T01:12:57Z", "closed_at": "2023-11-01T01:50:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nSend validation result to Datahub not work\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\npython version = 3.8\r\n1. setup mariadb on localhost:49153 & datahub on localhost:9002/\r\n2. save datasource\r\n```\r\nimport great_expectations as ge\r\nfrom great_expectations.core.batch import RuntimeBatchRequest\r\nfrom great_expectations.checkpoint import SimpleCheckpoint\r\nfrom great_expectations.cli.datasource import sanitize_yaml_and_save_datasource\r\n\r\nt = 'mysql+pymysql://root:root@127.0.0.1:49153/demo'\r\ncontext = ge.get_context()\r\nconfig = f\"\"\"\r\n  name: my_sqlite_datasource\r\n  class_name: Datasource\r\n  execution_engine:\r\n    class_name: SqlAlchemyExecutionEngine\r\n    connection_string: mysql+pymysql://root:root@127.0.0.1:49153/demo\r\n  data_connectors:\r\n    default_runtime_data_connector_name:\r\n      class_name: RuntimeDataConnector\r\n      module_name: great_expectations.datasource.data_connector\r\n      batch_identifiers:\r\n        - default_identifier_name\r\n    default_inferred_data_connector_name:\r\n      class_name: InferredAssetSqlDataConnector\r\n      module_name: great_expectations.datasource.data_connector\r\n      include_schema_name: True\r\n  \"\"\"\r\ncontext.test_yaml_config(\r\n    yaml_config=config\r\n)\r\nsanitize_yaml_and_save_datasource(context, config, overwrite_existing=True)\r\n```\r\n\r\n3. create expectation suite\r\n```\r\nfrom great_expectations.checkpoint import SimpleCheckpoint\r\nfrom great_expectations.cli.datasource import sanitize_yaml_and_save_datasource\r\n\r\nt = 'mysql+pymysql://root:root@127.0.0.1:49153/demo'\r\ncontext = ge.get_context()\r\nconfig = f\"\"\"\r\n  name: my_sqlite_datasource\r\n  class_name: Datasource\r\n  execution_engine:\r\n    class_name: SqlAlchemyExecutionEngine\r\n    connection_string: mysql+pymysql://root:root@127.0.0.1:49153/demo\r\n  data_connectors:\r\n    default_runtime_data_connector_name:\r\n      class_name: RuntimeDataConnector\r\n      module_name: great_expectations.datasource.data_connector\r\n      batch_identifiers:\r\n        - default_identifier_name\r\n    default_inferred_data_connector_name:\r\n      class_name: InferredAssetSqlDataConnector\r\n      module_name: great_expectations.datasource.data_connector\r\n      include_schema_name: True\r\n  \"\"\"\r\ncontext.test_yaml_config(\r\n    yaml_config=config\r\n)\r\nsanitize_yaml_and_save_datasource(context, config, overwrite_existing=True)\r\n```\r\n4. create batch request\r\n```\r\nbatch_request = RuntimeBatchRequest(\r\n    datasource_name=\"my_sqlite_datasource\",\r\n    data_connector_name=\"default_runtime_data_connector_name\",\r\n    data_asset_name=\"demo.users\",\r\n    runtime_parameters={\r\n        \"query\": \"select * from demo.users\",\r\n    },\r\n    batch_identifiers={\"default_identifier_name\": \"default_identifier_name\"},\r\n    batch_spec_passthrough={\"create_temp_table\": False},\r\n)\r\n```\r\n5. create checkpoint and run\r\n```\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name=\"my_checkpoint\",\r\n    validations=[\r\n        {\r\n            \"batch_request\": batch_request,\r\n            \"expectation_suite_name\": \"my_suite\",\r\n        },\r\n    ],\r\n    action_list=[\r\n        {\r\n            \"name\": \"datahub_action\",\r\n            \"action\": {\r\n                \"module_name\": \"datahub.integrations.great_expectations.action\",\r\n                \"class_name\": \"DataHubValidationAction\",\r\n                \"server_url\": \"http://localhost:9002\"\r\n            },\r\n        },\r\n    ]\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\n```\r\nthe result output is: \r\n`Enable parse_table_names_from_sql in DatahubValidationAction config                            to try to parse the tables being asserted from SQL query\r\nMetadata not sent to datahub. No datasets found.`\r\nand there is no validation result in datahub.\r\n\r\n**Expected behavior**\r\nsee the validation result in datahub\r\n\r\n**Screenshots**\r\n<img width=\"773\" alt=\"image\" src=\"https://github.com/datahub-project/datahub/assets/20381545/9394a1b4-9f33-4390-b975-661cd084c505\">\r\n\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: windows\r\n\r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8856/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8854", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8854/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8854/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8854/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8854", "id": 1953377085, "node_id": "I_kwDOBiS_IM50bis9", "number": 8854, "title": "If checkpoint batch request  has options provided :  getting error as great_expectations.exceptions.exceptions.InvalidBatchRequestError: BatchRequest should have form:\"  {'batch_slice': None,  'data_asset_name': 'accounts',  'datasource_name': 'snowflake_test_datasource',  'options': {}} but actually has form: {'batch_slice': None,  'data_asset_name': 'accounts',  'datasource_name': 'snowflake_test_datasource',  'options': {'number': '3AAA13513', 'code': '3AAALB'}}.", "user": {"login": "amruth301", "id": 7581466, "node_id": "MDQ6VXNlcjc1ODE0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/7581466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amruth301", "html_url": "https://github.com/amruth301", "followers_url": "https://api.github.com/users/amruth301/followers", "following_url": "https://api.github.com/users/amruth301/following{/other_user}", "gists_url": "https://api.github.com/users/amruth301/gists{/gist_id}", "starred_url": "https://api.github.com/users/amruth301/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amruth301/subscriptions", "organizations_url": "https://api.github.com/users/amruth301/orgs", "repos_url": "https://api.github.com/users/amruth301/repos", "events_url": "https://api.github.com/users/amruth301/events{/privacy}", "received_events_url": "https://api.github.com/users/amruth301/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-10-20T02:22:37Z", "updated_at": "2024-08-23T00:04:30Z", "closed_at": "2024-08-23T00:04:30Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "If checkpoint batch request  has options provided :  getting error as \r\n```python\r\ngreat_expectations.exceptions.exceptions.InvalidBatchRequestError: BatchRequest should have form:\r\n{\r\n 'batch_slice': None,\r\n 'data_asset_name': 'accounts', \r\n 'datasource_name': 'snowflake_test_datasource',\r\n 'options': {}\r\n}\r\n but actually has form:\r\n{\r\n 'batch_slice': None,\r\n 'data_asset_name': 'accounts',\r\n 'datasource_name': 'snowflake_test_datasource',\r\n 'options': {\r\n     'number': '3AAA13513', 'code': '3AAALB'\r\n  }\r\n}.\r\n```\r\n\r\n**To Reproduce**\r\n```python\r\nontext.add_or_update_checkpoint(\r\n    name=\"no_nesting1\",\r\n    run_name_template=\"%Y-%M-foo-bar-template-$VAR\",\r\n    validations=[\r\n        {\r\n            \"batch_request\": {\r\n                \"datasource_name\": \"snowflake_test_datasource\",\r\n                \"data_asset_name\": \"accounts\",\r\n                \"options\": {\"code\": \"3AAALB\", \"number\": \"3AAA13513\"},\r\n            },\r\n            \"expectation_suite_name\": \"my_onboarding_assistant_suite\",\r\n            \"action_list\": [\r\n                {\r\n                    \"name\": \"store_validation_result =\",\r\n                    \"action\": {\"class_name\": \"StoreValidationResultAction\"},\r\n                },\r\n                {\r\n                    \"name\": \"store_evolution_params\",\r\n                    \"action\": {\"class_name\": \"StoreEvaluationParametersAction\"},\r\n                },\r\n                {\r\n                    \"name\": \"update_data_docs\",\r\n                    \"action\": {\"class_name\": \"UpdateDataDocsAction\"},\r\n                },\r\n                {\r\n                    \"name\": \"slack_notification\",\r\n                    \"action\": {\r\n                        \"class_name\": \"SlackNotificationAction\",\r\n                        \"slack_webhook\": \"https://hooks.slack.com/services/\",\r\n                        \"notify_on\": \"all\",\r\n                        \"renderer\": {\r\n                            \"module_name\": \"great_expectations.render.renderer.slack_renderer\",\r\n                            \"class_name\": \"SlackRenderer\"\r\n                        }\r\n                    }\r\n                }\r\n            ],\r\n        }\r\n    ],\r\n    evaluation_parameters={\"GT_PARAM\": 1000, \"LT_PARAM\": 50000},\r\n    runtime_configuration={\r\n        \"result_format\": {\"result_format\": \"BASIC\", \"partial_unexpected_count\": 20}\r\n    },\r\n).    \r\n```\r\n\r\n**Expected behavior**\r\nCheck should be created with options as well. \r\n\r\nBut got the error as mentioned above\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8854/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8854/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8853", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8853/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8853/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8853/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8853", "id": 1953363113, "node_id": "I_kwDOBiS_IM50bfSp", "number": 8853, "title": "query must start with 'SELECT' followed by a whitespace. (type=value_error)\"", "user": {"login": "amruth301", "id": 7581466, "node_id": "MDQ6VXNlcjc1ODE0NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/7581466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amruth301", "html_url": "https://github.com/amruth301", "followers_url": "https://api.github.com/users/amruth301/followers", "following_url": "https://api.github.com/users/amruth301/following{/other_user}", "gists_url": "https://api.github.com/users/amruth301/gists{/gist_id}", "starred_url": "https://api.github.com/users/amruth301/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amruth301/subscriptions", "organizations_url": "https://api.github.com/users/amruth301/orgs", "repos_url": "https://api.github.com/users/amruth301/repos", "events_url": "https://api.github.com/users/amruth301/events{/privacy}", "received_events_url": "https://api.github.com/users/amruth301/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-10-20T02:11:01Z", "updated_at": "2024-09-23T21:48:31Z", "closed_at": "2023-11-01T01:50:26Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWe see error when creating query asset with snowflake db if query does not start with  SELECT.  like query = (\"WITH max_created AS (SELECT MAX(created_at) mx_cr FROM table_name) SELECT \" \"DATEDIFF(day,mx_cr,CURRENT_TIMESTAMP()) AS diffFROM max_created\"). Getting error as  \"File /venv/lib/python3.11/site-packages/great_expectations/datasource/fluent/sql_datasource.py\", line 1136, in add_query_asset\r\n    asset = self._QueryAsset(\r\n            ^^^^^^^^^^^^^^^^^\r\n  File \"pydantic/main.py\", line 341, in pydantic.main.BaseModel.__init__\r\npydantic.error_wrappers.ValidationError: 1 validation error for QueryAsset\r\nquery\r\n  query must start with 'SELECT' followed by a whitespace. (type=value_error)\".\r\n\r\n**To Reproduce**\r\nCreate a data asset with query. Query should not start with SELECT\r\n**Expected behavior**\r\nShould be able to create data asset with any working query since snowflake accepts query with any format.\r\n\r\n**Environment (please complete the following information):**\r\n\r\n\r\n**Additional context**\r\n\r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8853/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8853/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8848", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8848/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8848/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8848/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8848", "id": 1952583935, "node_id": "I_kwDOBiS_IM50YhD_", "number": 8848, "title": "`row_condition` with SQLAlchemy not working as documented", "user": {"login": "nenkie76", "id": 109951713, "node_id": "U_kgDOBo264Q", "avatar_url": "https://avatars.githubusercontent.com/u/109951713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nenkie76", "html_url": "https://github.com/nenkie76", "followers_url": "https://api.github.com/users/nenkie76/followers", "following_url": "https://api.github.com/users/nenkie76/following{/other_user}", "gists_url": "https://api.github.com/users/nenkie76/gists{/gist_id}", "starred_url": "https://api.github.com/users/nenkie76/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nenkie76/subscriptions", "organizations_url": "https://api.github.com/users/nenkie76/orgs", "repos_url": "https://api.github.com/users/nenkie76/repos", "events_url": "https://api.github.com/users/nenkie76/events{/privacy}", "received_events_url": "https://api.github.com/users/nenkie76/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-10-19T15:50:29Z", "updated_at": "2024-08-23T00:04:43Z", "closed_at": "2024-08-23T00:04:43Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe [documentation](https://docs.greatexpectations.io/docs/reference/expectations/conditional_expectations/#format-of-row_conditions-values) states that row conditions for SQL should be specified like this: `row_condition='col(\"foo\") != \"a-b\"'`\r\n\r\nSo, in Jupiter Notebooks I run the following expectation:\r\n\r\n```\r\nvalidator.expect_column_values_to_not_be_null(\r\n    column='network_id', \r\n    condition_parser='great_expectations__experimental__', \r\n    row_condition='col(\"source_id\") != 1'\r\n)\r\n```\r\n\r\nbut it fails with the error: `unable to parse condition`. I have also tried these ways, but neither work:\r\n```\r\nunable to parse condition: col(\"source_id\").not_in([1])\r\nunable to parse condition: col(\"source_id\") != 1\r\nunable to parse condition: col(\"source_id\") <> 1\r\nunable to parse condition: ~col(\"source_id\") == 1\r\n```\r\n\r\nSomething [similar](https://github.com/great-expectations/great_expectations/issues/8847#issue-1952101806) was recently raised by @matthiasgomolka\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS 13.6 (22G120)\r\n - Great Expectations Version: 0.15.42\r\n - Data Source: Snowflake (SQLAlchemy)\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8848/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8848/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8847", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8847/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8847/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8847/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8847", "id": 1952101806, "node_id": "I_kwDOBiS_IM50WrWu", "number": 8847, "title": "`row_condition` with Spark not working as documented", "user": {"login": "matthiasgomolka", "id": 6517388, "node_id": "MDQ6VXNlcjY1MTczODg=", "avatar_url": "https://avatars.githubusercontent.com/u/6517388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiasgomolka", "html_url": "https://github.com/matthiasgomolka", "followers_url": "https://api.github.com/users/matthiasgomolka/followers", "following_url": "https://api.github.com/users/matthiasgomolka/following{/other_user}", "gists_url": "https://api.github.com/users/matthiasgomolka/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiasgomolka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiasgomolka/subscriptions", "organizations_url": "https://api.github.com/users/matthiasgomolka/orgs", "repos_url": "https://api.github.com/users/matthiasgomolka/repos", "events_url": "https://api.github.com/users/matthiasgomolka/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiasgomolka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-10-19T12:19:35Z", "updated_at": "2024-08-23T00:05:17Z", "closed_at": "2024-08-23T00:05:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe [documentation](https://docs.greatexpectations.io/docs/reference/expectations/conditional_expectations/#format-of-row_conditions-values) states that row conditions **for Spark** should be specified like this: `row_condition='col(\"foo\") == \"Two  Two\"'`.\r\n\r\nHowever, if I try it like this, I get this error:\r\n```python\r\nMetricResolutionError: Undefined function: 'col'. This function is neither a registered temporary function nor a permanent function registered in the database 'default'.;\r\n```\r\n\r\nInterestingly, it works like this:\r\n```\r\nrow_condition='foo == \"Two  Two\"'\r\n```\r\n\r\n**To Reproduce**\r\ngreat_expectations.yml:\r\n```\r\nconfig_version: 3.0\r\ndatasources: {}\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\nplugins_directory: plugins/\r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted\\data_docs\\local_site\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\nanonymous_usage_statistics:\r\n  data_context_id: 8185aa6f-6303-4897-8bb4-6e23b494e231\r\n  enabled: true\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\nfluent_datasources:\r\n  my_ds:\r\n    type: spark_filesystem\r\n    assets:\r\n      my_asset:\r\n        type: parquet\r\n        batching_regex: my_regex\r\n    base_directory: my\\dir\r\n```\r\n\r\nCode:\r\n```\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\n\r\ndatasource_name = \"my_ds\"\r\npath_to_folder_containing_pq_directories = \"R:/Zentrale/ZB-S/Daten_DSZ/Daten/mifir/great_expectations\"\r\n\r\ndatasource = context.sources.add_or_update_spark_filesystem(\r\n    name=datasource_name, base_directory=path_to_folder_containing_pq_directories\r\n)\r\n\r\ndatasource.add_parquet_asset(\"buyer_account_owner\", batching_regex=\"buyer_account_owner\")\r\ndata_asset = context.get_datasource(datasource_name).get_asset(\"buyer_account_owner\")\r\n\r\nexpectation_suite = context.add_or_update_expectation_suite(expectation_suite_name=datasource_name)\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=data_asset.build_batch_request(),\r\n    expectation_suite_name=\"my_es\",\r\n    datasource_name=datasource_name, \r\n    data_asset_name=\"my_asset\"\r\n)\r\n\r\nvalidator.expect_column_value_lengths_to_equal(\r\n    \"sdc_buyer_account_owner\", value=20, condition_parser=\"spark\", row_condition='col(\"condition_col\") == \"ABC\"'\r\n)\r\n```\r\n\r\nTraceback:\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 548, in _process_direct_and_bundled_metric_computation_configurations\r\n    ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\expectations\\metrics\\metric_provider.py\", line 60, in inner_func\r\n    return metric_fn(*args, **kwargs)\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\expectations\\metrics\\table_metrics\\table_column_types.py\", line 84, in _spark\r\n    df, _, _ = execution_engine.get_compute_domain(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\execution_engine\\sparkdf_execution_engine.py\", line 663, in get_compute_domain\r\n    data: pyspark.DataFrame = self.get_domain_records(domain_kwargs=domain_kwargs)\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\execution_engine\\sparkdf_execution_engine.py\", line 522, in get_domain_records\r\n    data = data.filter(row_condition)\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\pyspark\\sql\\dataframe.py\", line 1715, in filter\r\n    jdf = self._jdf.filter(condition)\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\py4j\\java_gateway.py\", line 1304, in __call__\r\n    return_value = get_return_value(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\pyspark\\sql\\utils.py\", line 117, in deco\r\n    raise converted from None\r\npyspark.sql.utils.AnalysisException: Undefined function: 'col'. This function is neither a registered temporary function nor a permanent function registered in the database 'default'.; line 1 pos 0\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 621, in inst_expectation\r\n    raise err\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 584, in inst_expectation\r\n    validation_result = expectation.validate(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\expectations\\expectation.py\", line 1277, in validate\r\n    ] = validator.graph_validate(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 1096, in graph_validate\r\n    raise err\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 1075, in graph_validate\r\n    ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 1234, in _resolve_suite_level_graph_and_process_metric_evaluation_errors\r\n    ) = self._metrics_calculator.resolve_validation_graph(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\metrics_calculator.py\", line 314, in resolve_validation_graph\r\n    resolved_metrics, aborted_metrics_info = graph.resolve(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 209, in resolve\r\n    ] = self._resolve(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 315, in _resolve\r\n    raise err\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\validator\\validation_graph.py\", line 285, in _resolve\r\n    self._execution_engine.resolve_metrics(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 283, in resolve_metrics\r\n    return self._process_direct_and_bundled_metric_computation_configurations(\r\n  File \"C:\\Workspace\\Python_Runtime\\Envs\\great_expectations\\lib\\site-packages\\great_expectations\\execution_engine\\execution_engine.py\", line 552, in _process_direct_and_bundled_metric_computation_configurations\r\n    raise gx_exceptions.MetricResolutionError(\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: Undefined function: 'col'. This function is neither a registered temporary function nor a permanent function registered in the database 'default'.; line 1 pos 0\r\n```\r\n\r\n**Expected behavior**\r\nI would expect that GX works as documented.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.17.22\r\n - Data Source: Spark\r\n - Cloud environment: None (we create and test expectations locally before running them in a Spark cluster.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8847/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8845", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8845/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8845/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8845/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8845", "id": 1950450984, "node_id": "I_kwDOBiS_IM50QYUo", "number": 8845, "title": "TypeError: Object of type date is not JSON serializable", "user": {"login": "umawani", "id": 42729648, "node_id": "MDQ6VXNlcjQyNzI5NjQ4", "avatar_url": "https://avatars.githubusercontent.com/u/42729648?v=4", "gravatar_id": "", "url": "https://api.github.com/users/umawani", "html_url": "https://github.com/umawani", "followers_url": "https://api.github.com/users/umawani/followers", "following_url": "https://api.github.com/users/umawani/following{/other_user}", "gists_url": "https://api.github.com/users/umawani/gists{/gist_id}", "starred_url": "https://api.github.com/users/umawani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/umawani/subscriptions", "organizations_url": "https://api.github.com/users/umawani/orgs", "repos_url": "https://api.github.com/users/umawani/repos", "events_url": "https://api.github.com/users/umawani/events{/privacy}", "received_events_url": "https://api.github.com/users/umawani/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6901113590, "node_id": "LA_kwDOBiS_IM8AAAABm1ai9g", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/block-style-datasource", "name": "block-style-datasource", "color": "ADCD22", "default": false, "description": "Issue involving a deprecated block-style datasource"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-10-18T19:07:32Z", "updated_at": "2024-08-23T00:05:28Z", "closed_at": "2024-08-23T00:05:28Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Bug Description**\r\nSeems like when there is a non-string/number data type to return in the result object, the serialization of the object to JSON fails.\r\n\r\n**To Reproduce**\r\nHere is my great_expcetations.yml:\r\n\r\n```config_version: 3.0\r\ndatasources:\r\n  test_db:\r\n    module_name: great_expectations.datasource\r\n    data_connectors:\r\n      default_inferred_data_connector_name:\r\n        module_name: great_expectations.datasource.data_connector\r\n        class_name: InferredAssetSqlDataConnector\r\n        name: default_inferred_data_connector_name\r\n    execution_engine:\r\n      module_name: great_expectations.execution_engine\r\n      connection_string: ${connection_string_env}\r\n      class_name: SqlAlchemyExecutionEngine\r\n      create_temp_table: false\r\n    class_name: Datasource \r\nstores:\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: ./\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: ./\r\n```\r\nMy expectation suite:\r\n```\r\n{\r\n  \"expectation_suite_name\": \"test_suite\",\r\n  \"expectations\": [\r\n    {\r\n      \"expectation_type\": \"expect_column_distinct_values_to_be_in_set\",\r\n      \"kwargs\": {\r\n        \"column\": \"STATE\",\r\n        \"value_set\": [\"AK\", \"AL\", \"AR\"],\r\n        \"expectationId\": 1\r\n      }\r\n    },\r\n    {\r\n      \"expectation_type\": \"expect_column_values_to_match_regex\",\r\n      \"kwargs\": {\r\n        \"column\": \"EMAIL\",\r\n        \"regex\": \"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\\\\\\\.[A-Za-z]{3,}\",\r\n        \"expectationId\": 1\r\n      }\r\n    },\r\n    {\r\n      \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n      \"kwargs\": {\r\n        \"column\": \"FIRST_NAME\",\r\n        \"expectationId\": 1\r\n      }\r\n    },\r\n    {\r\n      \"expectation_type\": \"expect_column_max_to_be_between\",\r\n      \"kwargs\": {\r\n        \"column\": \"POSTAL_CODE\",\r\n        \"min_value\": 99000,\r\n        \"max_value\": 100000,\r\n        \"strict_min\": true,\r\n        \"strict_max\": true,\r\n        \"expectationId\": 1\r\n      }\r\n    }\r\n  ],\r\n  \"meta\": {\r\n  }\r\n}\r\n\r\n```\r\n\r\nAnd finally my checkpoint file:\r\n```\r\nname: checkpoint-test\r\nmodule_name: great_expectations.checkpoint\r\nclass_name: Checkpoint\r\naction_list:\r\n  - name: datahub_action\r\n    action:\r\n      module_name: datahub.integrations.great_expectations.action\r\n      class_name: DataHubValidationAction\r\n      server_url: ${dh_url_env}\r\n      platform_instance_map:\r\n        test_db: postgres-1\r\n      token: ${dh_token_env}\r\nruntime_configuration: {\r\n  \"result_format\": {\r\n    \"result_format\": \"SUMMARY\",\r\n    \"return_unexpected_index_query\": True,\r\n    \"partial_unexpected_count\": 3,\r\n    \"include_unexpected_rows\": True\r\n  }\r\n}\r\nvalidations:\r\n  - batch_request:\r\n      datasource_name: test_db\r\n      data_asset_name: ${table_name_env}\r\n      data_connector_name: default_inferred_data_connector_name\r\n    expectation_suite_name: test_suite\r\n```\r\n\r\nThe Python code that was used to execute this checkpoint is pretty straighforward:\r\n```\r\nimport great_expectations as gx\r\nfrom great_expectations.checkpoint.types.checkpoint_result import CheckpointResult\r\n\r\nif __name__ == \"__main__\":\r\n    ctx = gx.get_context(context_root_dir=GX_CONTEXT_PATH)\r\n\r\n    result: CheckpointResult = ctx.run_checkpoint(\r\n            checkpoint_name=\"checkpoint-test\",\r\n            batch_request=None,\r\n            run_name=None\r\n    )\r\n    with open(\"result.json\", \"w\") as outfile:\r\n        outfile.write(result.__str__())\r\n    print(result)\r\n```\r\n\r\nThe Stacktrace of the error received:\r\n```\r\nCalculating Metrics:   0%|          | 0/22 [00:00<?, ?it/s]\r\nCalculating Metrics:   0%|          | 0/22 [00:00<?, ?it/s]\r\nCalculating Metrics:   9%|\u2589         | 2/22 [00:00<00:01, 10.54it/s]\r\nCalculating Metrics:   9%|\u2589         | 2/22 [00:00<00:01, 10.54it/s]\r\nCalculating Metrics:   9%|\u2589         | 2/22 [00:00<00:01, 10.54it/s]\r\nCalculating Metrics:  18%|\u2588\u258a        | 4/22 [00:01<00:05,  3.19it/s]\r\nCalculating Metrics:  18%|\u2588\u258a        | 4/22 [00:01<00:05,  3.19it/s]\r\nCalculating Metrics:  18%|\u2588\u258a        | 4/22 [00:01<00:05,  3.19it/s]\r\nCalculating Metrics:  36%|\u2588\u2588\u2588\u258b      | 8/22 [00:02<00:03,  3.89it/s]\r\nCalculating Metrics:  36%|\u2588\u2588\u2588\u258b      | 8/22 [00:02<00:03,  3.89it/s]\r\nCalculating Metrics:  36%|\u2588\u2588\u2588\u258b      | 8/22 [00:02<00:03,  3.89it/s]\r\nCalculating Metrics:  86%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b | 19/22 [00:05<00:00,  3.05it/s]\r\nCalculating Metrics:  86%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b | 19/22 [00:05<00:00,  3.05it/s]\r\nCalculating Metrics:  86%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258b | 19/22 [00:05<00:00,  3.05it/s]\r\nCalculating Metrics: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 22/22 [00:07<00:00,  2.70it/s]\r\nCalculating Metrics: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 22/22 [00:07<00:00,  2.70it/s]\r\nCalculating Metrics: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 22/22 [00:07<00:00,  2.70it/s]\r\nCalculating Metrics: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 22/22 [00:07<00:00,  2.70it/s]\r\nCalculating Metrics: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 22/22 [00:07<00:00,  2.92it/s]\r\nTraceback (most recent call last):\r\n  File \"/home/data_quality/great_expectations_executor.py\", line 13, in <module>\r\n    outfile.write(result.__str__())\r\n  File \"/home/appuser/gx_venv/lib/python3.10/site-packages/great_expectations/checkpoint/types/checkpoint_result.py\", line 418, in __str__\r\n    return self.__repr__()\r\n  File \"/home/appuser/gx_venv/lib/python3.10/site-packages/great_expectations/checkpoint/types/checkpoint_result.py\", line 408, in __repr__\r\n    return json.dumps(serializable_dict, indent=2)\r\n  File \"/usr/local/lib/python3.10/json/__init__.py\", line 238, in dumps\r\n    **kw).encode(obj)\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 201, in encode\r\n    chunks = list(chunks)\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 431, in _iterencode\r\n    yield from _iterencode_dict(o, _current_indent_level)\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  [Previous line repeated 1 more time]\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 325, in _iterencode_list\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 325, in _iterencode_list\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 438, in _iterencode\r\n    o = _default(o)\r\n  File \"/usr/local/lib/python3.10/json/encoder.py\", line 179, in default\r\n    raise TypeError(f'Object of type {o.__class__.__name__} '\r\nTypeError: Object of type date is not JSON serializable\r\nnull\r\n```\r\n\r\n**Expected behavior**\r\nThe expected behaviour is that the after the successful execution of the checkpoint, the checkpoint result object would be printed. Instead it seems like the checkpoint result object cannot be serialized into a JSON.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux but also faced the same issue on MacOS\r\n - Great Expectations Version: 0.17.5\r\n - Data Source: BigQuery\r\n - Cloud environment: -\r\n\r\n**Additional context**\r\nI think I know the issue. We should be giving a default string value to the json.dumps method which will then convert the data type to string while serializing.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8845/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8843", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8843/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8843/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8843/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8843", "id": 1950195999, "node_id": "I_kwDOBiS_IM50PaEf", "number": 8843, "title": "Unable to run context.convert_to_file_context() when using a Data Docs site on \\$web container", "user": {"login": "LvffY", "id": 37327656, "node_id": "MDQ6VXNlcjM3MzI3NjU2", "avatar_url": "https://avatars.githubusercontent.com/u/37327656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LvffY", "html_url": "https://github.com/LvffY", "followers_url": "https://api.github.com/users/LvffY/followers", "following_url": "https://api.github.com/users/LvffY/following{/other_user}", "gists_url": "https://api.github.com/users/LvffY/gists{/gist_id}", "starred_url": "https://api.github.com/users/LvffY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LvffY/subscriptions", "organizations_url": "https://api.github.com/users/LvffY/orgs", "repos_url": "https://api.github.com/users/LvffY/repos", "events_url": "https://api.github.com/users/LvffY/events{/privacy}", "received_events_url": "https://api.github.com/users/LvffY/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-10-18T16:39:03Z", "updated_at": "2024-08-23T00:05:38Z", "closed_at": "2024-08-23T00:05:38Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nUnable to run `context.convert_to_file_context()` when using Azure data site on `\\$web` container.\r\n\r\nIt fails with the error : \r\n\r\n![image](https://github.com/great-expectations/great_expectations/assets/37327656/818f43a9-3d9c-47f8-ab3d-338672bbc1b4)\r\n\r\n\r\n**To Reproduce**\r\n\r\nRun the following commands : \r\n\r\n```python\r\nimport great_expectations as gx\r\nfrom great_expectations.checkpoint import Checkpoint\r\ncontext_root_dir = \"/dbfs/FileStore/foobar\"\r\ncontext = gx.get_context(context_root_dir=context_root_dir)\r\n## Here the context.convert_to_file_context() works\r\ncontext.add_data_docs_site(\r\n    \"az_site\",\r\n    {\r\n        \"class_name\": \"SiteBuilder\",\r\n        \"store_backend\": {\r\n            \"class_name\": \"TupleAzureBlobStoreBackend\",\r\n            \"container\": \"\\$web\",\r\n            \"connection_string\": azure_connection_string,\r\n        },\r\n    },\r\n)\r\ncontext.convert_to_file_context() ## This doesn't work.\r\n```\r\n\r\n\r\n**Expected behavior**\r\n\r\nBeing able to convert to file context even with `\\$web` variable in configuration.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.17.22\r\n - Data Source: Spark DataFrame\r\n - Cloud environment: Azure Databricks\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8843/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8841", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8841/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8841/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8841/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8841", "id": 1948920678, "node_id": "I_kwDOBiS_IM50Kitm", "number": 8841, "title": "expect_column_values_to_be_in_set is failing with error related to unexpected rows/values\n\nAlso it currently in beta stage. \n\nIs anyone facing issue while using this expectation rule?", "user": {"login": "madhavthatte", "id": 139204959, "node_id": "U_kgDOCEwZXw", "avatar_url": "https://avatars.githubusercontent.com/u/139204959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/madhavthatte", "html_url": "https://github.com/madhavthatte", "followers_url": "https://api.github.com/users/madhavthatte/followers", "following_url": "https://api.github.com/users/madhavthatte/following{/other_user}", "gists_url": "https://api.github.com/users/madhavthatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/madhavthatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/madhavthatte/subscriptions", "organizations_url": "https://api.github.com/users/madhavthatte/orgs", "repos_url": "https://api.github.com/users/madhavthatte/repos", "events_url": "https://api.github.com/users/madhavthatte/events{/privacy}", "received_events_url": "https://api.github.com/users/madhavthatte/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-10-18T06:12:35Z", "updated_at": "2024-08-23T00:05:49Z", "closed_at": "2024-08-23T00:05:48Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Environment: Azure Databricks\nDataset : Delta table\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8841/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8841/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8790", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8790/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8790/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8790/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8790", "id": 1926225161, "node_id": "I_kwDOBiS_IM5yz90J", "number": 8790, "title": "data_asset_name can't be specified with fluent datasources for use in data docs", "user": {"login": "morphatic", "id": 467980, "node_id": "MDQ6VXNlcjQ2Nzk4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/467980?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morphatic", "html_url": "https://github.com/morphatic", "followers_url": "https://api.github.com/users/morphatic/followers", "following_url": "https://api.github.com/users/morphatic/following{/other_user}", "gists_url": "https://api.github.com/users/morphatic/gists{/gist_id}", "starred_url": "https://api.github.com/users/morphatic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morphatic/subscriptions", "organizations_url": "https://api.github.com/users/morphatic/orgs", "repos_url": "https://api.github.com/users/morphatic/repos", "events_url": "https://api.github.com/users/morphatic/events{/privacy}", "received_events_url": "https://api.github.com/users/morphatic/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2023-10-04T13:29:31Z", "updated_at": "2024-05-22T20:48:41Z", "closed_at": "2024-05-22T20:48:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen running a checkpoint and producing data docs from a batch request generated with the `build_batch_request()` method of a Fluent pandas filesystem datasource, the \"Asset Name\" column of the resulting data docs is never populated.\r\n\r\n![screenshot of data docs missing asset name](https://github.com/morphatic/gx-fluent-pandas-asset-name-bug-demo/raw/main/screenshots/asset_name_missing.png)\r\n\r\n**To Reproduce**\r\n[This repository contains a minimum reproduction](https://github.com/morphatic/gx-fluent-pandas-asset-name-bug-demo). \r\n\r\n* Here is [`great_expectations.yml`](https://github.com/morphatic/gx-fluent-pandas-asset-name-bug-demo/blob/main/gx/great_expectations.yml)\r\n* Here are [the produced data docs online](https://morphatic.github.io/gx-fluent-pandas-asset-name-bug-demo/)\r\n\r\n**Expected behavior**\r\nThe \"Asset Name\" column should be filled in the produced data docs.\r\n\r\n**Possible Causes and Fixes**\r\nThere are two ways to approach this issue. It could be either or both of a problem in:\r\n\r\n1. the API for the `BatchRequest` class implemented for Fluent datasources\r\n2. how the default data docs renderer finds and processes metadata\r\n\r\nWhen [I asked about this issue in the GX Slack channel](https://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1695848627758059) it was suggested that I could specify a value for the `batch_spec_passthrough` parameter. I tried doing this in several ways:\r\n\r\n```python\r\n# I tried 2 ways of manually adding the property;\r\n# Both resulted in: ValueError: \"BatchRequest\" object has no field \"batch_spec_passthrough\"\r\nbatch_request.batch_spec_passthrough = { \"data_asset_name\": \"iris\" }\r\nbatch_request[\"batch_spec_passthrough\"] = { \"data_asset_name\": \"people\" }\r\n\r\n# Tried adding `batch_spec_passthrough` during batch request creation\r\n# Failed with: TypeError: _PandasDataAsset.build_batch_request() got an unexpected keyword \"batch_spec_passthrough\"\r\nbatch_request = asset.build_batch_request(batch_spec_passthrough = { ... })\r\n\r\n# Tried adding it to the `validators` property when creating the checkpoint\r\n# No error produced, but also didn't resolve the issue\r\ncheckpoint = context.add_or_update_checkpoint(\r\n  name=\"demo_iris_expectations\",\r\n  run_name_template=\"%Y-%m-iris-demo\",\r\n  validations=[{\r\n    \"batch_request\": batch_request,\r\n    \"expectation_suite_name\": \"iris_expectations\",\r\n    \"batch_spec_passthrough\": { \"data_asset_name\": \"people\" }\r\n  }]\r\n)\r\n```\r\n**Inconsistent API for `BatchRequest` classesses**\r\nThis led me to realize that the API for the `BatchRequest` class is NOT consistent across implementations:\r\n* [`great_expectations.core.batch.BatchRequest`](https://github.com/great-expectations/great_expectations/blob/aac98f52e0e62276584a922c46089d8ee50b5783/great_expectations/core/batch.py#L479) is the \"core\" definition which defines and allows you to edit the `batch_spec_passthrough` property\r\n* [`great_expectations.datasource.fluent.batch_request.BatchRequest`](https://github.com/great-expectations/great_expectations/blob/aac98f52e0e62276584a922c46089d8ee50b5783/great_expectations/datasource/fluent/batch_request.py#L47) is the \"Fluent\" version which has the same class name and has the same general function, but does NOT inherit the same properties as the core `BatchRequest` class. Instead it inherits from `pydantic.BaseModel`\r\n\r\nIt's not immediately clear to people who are relatively new to GX (like me) that these two `BatchReuquest` classes don't provide equivalent functionality.\r\n\r\n**A \"quick\" fix in the Renderer**\r\nThe `data_asset_name` IS available in the metadata that gets passed to the renderer that creates the data docs. The [current renderer code does not access it](https://github.com/great-expectations/great_expectations/blob/35c6838c7a9733d26ea14c627db5e87717fe3d76/great_expectations/render/renderer/site_builder.py#L951-L968) however. I WAS able to get the \"Asset Name\" column in the data docs to populate correctly with the following change to that code:\r\n\r\n```python\r\nvalidation_success = validation.success\r\nbatch_kwargs = validation.meta.get(\"batch_kwargs\", {})\r\nbatch_spec = validation.meta.get(\"batch_spec\", {})\r\nactive_batch = validation.meta.get(\"active_batch_definition\", {}) # <= ADD THIS\r\n\r\nself.add_resource_info_to_index_links_dict(\r\n  # ... other props\r\n  asset_name=batch_kwargs.get(\"data_asset_name\")\r\n  or batch_spec.get(\"data_asset_name\")\r\n  or active_batch.get(\"data_asset_name\"), # <= AND ADD THIS\r\n  # ... other props\r\n)\r\n```\r\n\r\nThis \"fixes\" the immediate problem, but it feels kind of like a bandaid and that better solution would be to have a unified API for any class called `BatchRequest`.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.17.19\r\n - Data Source: Fluent Pandas filesystem datasource\r\n - Cloud environment: n/a\r\n\r\n**Additional context**\r\n[There's a thread about this issue in the GX Slack channel](https://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1695848627758059).", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8790/reactions", "total_count": 6, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 4}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8790/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8789", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8789/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8789/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8789/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8789", "id": 1925954425, "node_id": "I_kwDOBiS_IM5yy7t5", "number": 8789, "title": "Rule Based Profiler Not working when DX Cloud enabled", "user": {"login": "franciskuttivelil", "id": 69468027, "node_id": "MDQ6VXNlcjY5NDY4MDI3", "avatar_url": "https://avatars.githubusercontent.com/u/69468027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/franciskuttivelil", "html_url": "https://github.com/franciskuttivelil", "followers_url": "https://api.github.com/users/franciskuttivelil/followers", "following_url": "https://api.github.com/users/franciskuttivelil/following{/other_user}", "gists_url": "https://api.github.com/users/franciskuttivelil/gists{/gist_id}", "starred_url": "https://api.github.com/users/franciskuttivelil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/franciskuttivelil/subscriptions", "organizations_url": "https://api.github.com/users/franciskuttivelil/orgs", "repos_url": "https://api.github.com/users/franciskuttivelil/repos", "events_url": "https://api.github.com/users/franciskuttivelil/events{/privacy}", "received_events_url": "https://api.github.com/users/franciskuttivelil/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "TrangPham", "id": 2117313, "node_id": "MDQ6VXNlcjIxMTczMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2117313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TrangPham", "html_url": "https://github.com/TrangPham", "followers_url": "https://api.github.com/users/TrangPham/followers", "following_url": "https://api.github.com/users/TrangPham/following{/other_user}", "gists_url": "https://api.github.com/users/TrangPham/gists{/gist_id}", "starred_url": "https://api.github.com/users/TrangPham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TrangPham/subscriptions", "organizations_url": "https://api.github.com/users/TrangPham/orgs", "repos_url": "https://api.github.com/users/TrangPham/repos", "events_url": "https://api.github.com/users/TrangPham/events{/privacy}", "received_events_url": "https://api.github.com/users/TrangPham/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "TrangPham", "id": 2117313, "node_id": "MDQ6VXNlcjIxMTczMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2117313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TrangPham", "html_url": "https://github.com/TrangPham", "followers_url": "https://api.github.com/users/TrangPham/followers", "following_url": "https://api.github.com/users/TrangPham/following{/other_user}", "gists_url": "https://api.github.com/users/TrangPham/gists{/gist_id}", "starred_url": "https://api.github.com/users/TrangPham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TrangPham/subscriptions", "organizations_url": "https://api.github.com/users/TrangPham/orgs", "repos_url": "https://api.github.com/users/TrangPham/repos", "events_url": "https://api.github.com/users/TrangPham/events{/privacy}", "received_events_url": "https://api.github.com/users/TrangPham/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2023-10-04T10:59:10Z", "updated_at": "2024-08-23T00:06:13Z", "closed_at": "2024-08-23T00:06:13Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI have created a rule based profiler that works using with ephermal data context. But when i use the same profiler with ge.get_context(), it doesn't work\r\n\r\n**To Reproduce**\r\nWhen I use the below data context, the rule based profiler works\r\n```\r\nproject_config = DataContextConfig(store_backend_defaults=S3StoreBackendDefaults(default_bucket_name=s3_bucket))\r\ncontext_ge = EphemeralDataContext(project_config=project_config)\r\n```\r\n\r\nWhen I use the below data context, the rule based profiler doesn't work\r\n`context_ge = ge.get_context(cloud_mode=True)`\r\n\r\nBelow is the rule based profiler\r\n```\r\nname: My Profiler\r\nconfig_version: 1.0\r\n# </snippet>\r\n\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py variables and rule name\">\r\nvariables:\r\n  false_positive_rate: 0.01\r\n  mostly: 1.0\r\n  min_multiplier: 0.1\r\n  max_multiplier: 1.5\r\n  parameter_text: $PARAMETER\r\n\r\nrules:\r\n  row_count_rule:\r\n# </snippet>\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py row_count_rule domain_builder\">\r\n    domain_builder:\r\n        class_name: TableDomainBuilder\r\n# </snippet>\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py row_count_rule parameter_builders\">\r\n    parameter_builders:\r\n      - name: row_count_range\r\n        class_name: NumericMetricRangeMultiBatchParameterBuilder\r\n        metric_name: table.row_count\r\n        metric_domain_kwargs: $domain.domain_kwargs\r\n        false_positive_rate: $variables.false_positive_rate\r\n        truncate_values:\r\n          lower_bound: 0\r\n        round_decimals: 0\r\n# </snippet>\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py row_count_rule expectation_configuration_builders\">\r\n    expectation_configuration_builders:\r\n      - expectation_type: expect_table_row_count_to_be_between\r\n        class_name: DefaultExpectationConfigurationBuilder\r\n        module_name: great_expectations.rule_based_profiler.expectation_configuration_builder\r\n        min_value: $parameter.row_count_range.value[0]\r\n        max_value: $parameter.row_count_range.value[1]\r\n        mostly: $variables.mostly\r\n        meta:\r\n          profiler_details: $parameter.row_count_range.details\r\n# </snippet>\r\n# </snippet>\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py column_ranges_rule domain_builder\">\r\n  column_ranges_rule:\r\n    domain_builder:\r\n      class_name: ColumnDomainBuilder\r\n      include_semantic_types:\r\n        - numeric\r\n# </snippet>\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py column_ranges_rule parameter_builders\">\r\n    parameter_builders:\r\n      - name: mean\r\n        class_name: NumericMetricRangeMultiBatchParameterBuilder\r\n        metric_name: column.mean\r\n        metric_domain_kwargs: $domain.domain_kwargs\r\n        false_positive_rate: $variables.false_positive_rate\r\n        truncate_values:\r\n          lower_bound: 0\r\n        round_decimals: 0\r\n# </snippet>\r\n# <snippet name=\"tests/integration/docusaurus/expectations/advanced/multi_batch_rule_based_profiler_example.py column_ranges_rule expectation_configuration_builders\">\r\n    expectation_configuration_builders:\r\n      - expectation_type: expect_column_mean_to_be_between\r\n        class_name: DefaultExpectationConfigurationBuilder\r\n        module_name: great_expectations.rule_based_profiler.expectation_configuration_builder\r\n        column: $domain.domain_kwargs.column\r\n        min_value:\r\n          $PARAMETER: minvalue\r\n          $PARAMETER.minvalue: $parameter.mean.value[0]\r\n        max_value:\r\n          $PARAMETER: maxvalue\r\n          $PARAMETER.maxvalue: $parameter.mean.value[0]\r\n        mostly: $variables.mostly\r\n        meta:\r\n          profiler_details: $parameter.mean.details\r\n# </snippet>\r\n# </snippet>\r\n```\r\n\r\nBelow is the error generated\r\n\r\n```\r\nCalculating Metrics:  50%|\u2588\u2588\u2588\u2588\u2588     | 1/2 [00:00<00:00, 39.40it/s]\u001b[A\u001b[A\r\nCalculating Metrics:  50%|\u2588\u2588\u2588\u2588\u2588     | 1/2 [00:00<00:00, 39.24it/s]\r\nExceptions\r\n{('table.row_count', 'batch_id=1beacf14f974ce11091024ae519b0824', ()): {'metric_configuration': {\r\n  \"metric_name\": \"table.row_count\",\r\n  \"metric_domain_kwargs\": {\r\n    \"batch_id\": \"1beacf14f974ce11091024ae519b0824\"\r\n  },\r\n  \"metric_domain_kwargs_id\": \"batch_id=1beacf14f974ce11091024ae519b0824\",\r\n  \"metric_value_kwargs\": {},\r\n  \"metric_value_kwargs_id\": [],\r\n  \"id\": [\r\n    \"table.row_count\",\r\n    \"batch_id=1beacf14f974ce11091024ae519b0824\",\r\n    []\r\n  ]\r\n}, 'num_failures': 3, 'exception_info': {{'exception_traceback': 'Traceback (most recent call last):\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 1900, in _execute_context\\n    self.dialect.do_execute(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py\", line 736, in do_execute\\n    cursor.execute(statement, parameters)\\npsycopg2.errors.UndefinedTable: relation \"gx_temp_3048f0d9\" does not exist\\n\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py\", line 563, in _process_direct_and_bundled_metric_computation_configurations\\n    ] = self.resolve_metric_bundle(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1134, in resolve_metric_bundle\\n    res = self.execute_query(sa_query_object).fetchall()\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1450, in execute_query\\n    result = connection.execute(query)\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 1380, in execute\\n    return meth(self, multiparams, params, _EMPTY_EXECUTION_OPTS)\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/sql/elements.py\", line 334, in _execute_on_connection\\n    return connection._execute_clauseelement(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 1572, in _execute_clauseelement\\n    ret = self._execute_context(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 1943, in _execute_context\\n    self._handle_dbapi_exception(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 2124, in _handle_dbapi_exception\\n    util.raise_(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/util/compat.py\", line 211, in raise_\\n    raise exception\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/base.py\", line 1900, in _execute_context\\n    self.dialect.do_execute(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/sqlalchemy/engine/default.py\", line 736, in do_execute\\n    cursor.execute(statement, parameters)\\nsqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"gx_temp_3048f0d9\" does not exist\\n\\n[SQL: SELECT count(*) AS \"table.row_count\" \\nFROM gx_temp_3048f0d9]\\n(Background on this error at: https://sqlalche.me/e/14/f405)\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/validator/validation_graph.py\", line 285, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py\", line 283, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py\", line 568, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: (psycopg2.errors.UndefinedTable) relation \"gx_temp_3048f0d9\" does not exist\\n\\n[SQL: SELECT count(*) AS \"table.row_count\" \\nFROM gx_temp_3048f0d9]\\n(Background on this error at: https://sqlalche.me/e/14/f405)\\n', 'exception_message': '(psycopg2.errors.UndefinedTable) relation \"gx_temp_3048f0d9\" does not exist\\n\\n[SQL: SELECT count(*) AS \"table.row_count\" \\nFROM gx_temp_3048f0d9]\\n(Background on this error at: https://sqlalche.me/e/14/f405)', 'raised_exception': True}}}}\r\noccurred while resolving metrics.\r\ntable.row_count was not found in the resolved Metrics for ParameterBuilder.\r\n\r\n\r\n                                                              \u001b[A\r\nGenerating Expectations:   0%|          | 0/2 [00:05<?, ?it/s]\r\nTraceback (most recent call last):\r\n  File \"/tmp/interpreter-input-2fc7b1a4-8a3c-4a1c-b578-a33415d36e9e.tmp\", line 170, in <module>\r\n    result = rule_based_profiler.run(batch_request=batch_request_last7days)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/rule_based_profiler.py\", line 357, in run\r\n    raise err\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/rule_based_profiler.py\", line 336, in run\r\n    rule_state = rule.run(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/util.py\", line 219, in compute_delta_t\r\n    return func(*args, **kwargs)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/rule/rule.py\", line 159, in run\r\n    parameter_builder.build_parameters(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/parameter_builder/parameter_builder.py\", line 191, in build_parameters\r\n    parameter_computation_result: Attributes = parameter_computation_impl(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/parameter_builder/numeric_metric_range_multi_batch_parameter_builder.py\", line 402, in _build_parameters\r\n    self._estimate_metric_value_range(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/parameter_builder/numeric_metric_range_multi_batch_parameter_builder.py\", line 634, in _estimate_metric_value_range\r\n    numeric_range_estimator.get_numeric_range_estimate(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/estimators/numeric_range_estimator.py\", line 74, in get_numeric_range_estimate\r\n    return self._get_numeric_range_estimate(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/rule_based_profiler/estimators/bootstrap_numeric_range_estimator.py\", line 63, in _get_numeric_range_estimate\r\n    raise gx_exceptions.ProfilerExecutionError(\r\ngreat_expectations.exceptions.exceptions.ProfilerExecutionError: Estimator \"BootstrapNumericRangeEstimator\" does not support DateTime/TimeStamp data types.\r\nScript failed with status: 1\r\n```\r\n\r\n**Expected behavior**\r\nBelow is the expectation configuration generated when the rule based profiler works with Ephermal data context\r\n\r\n```\r\n{\r\n  \"expectation_suite_name\": \"default_suite_name\",\r\n  \"expectations\": [\r\n    {\r\n      \"kwargs\": {\r\n        \"max_value\": 1,\r\n        \"min_value\": 1,\r\n        \"mostly\": 1.0\r\n      },\r\n      \"expectation_type\": \"expect_table_row_count_to_be_between\",\r\n      \"meta\": {\r\n        \"profiler_details\": {\r\n          \"metric_configuration\": {\r\n            \"domain_kwargs\": {},\r\n            \"metric_name\": \"table.row_count\",\r\n            \"metric_value_kwargs\": null\r\n          },\r\n          \"num_batches\": 1\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"kwargs\": {\r\n        \"column\": \"kpi1\",\r\n        \"max_value\": {\r\n          \"$PARAMETER\": \"maxvalue\",\r\n          \"$PARAMETER.maxvalue\": 5100\r\n        },\r\n        \"min_value\": {\r\n          \"$PARAMETER\": \"minvalue\",\r\n          \"$PARAMETER.minvalue\": 5100\r\n        },\r\n        \"mostly\": 1.0\r\n      },\r\n      \"expectation_type\": \"expect_column_mean_to_be_between\",\r\n      \"meta\": {\r\n        \"profiler_details\": {\r\n          \"metric_configuration\": {\r\n            \"domain_kwargs\": {\r\n              \"column\": \"kpi1\"\r\n            },\r\n            \"metric_name\": \"column.mean\",\r\n            \"metric_value_kwargs\": null\r\n          },\r\n          \"num_batches\": 1\r\n        }\r\n      }\r\n    },\r\n    {\r\n      \"kwargs\": {\r\n        \"column\": \"kpi2\",\r\n        \"max_value\": {\r\n          \"$PARAMETER\": \"maxvalue\",\r\n          \"$PARAMETER.maxvalue\": 83293\r\n        },\r\n        \"min_value\": {\r\n          \"$PARAMETER\": \"minvalue\",\r\n          \"$PARAMETER.minvalue\": 83293\r\n        },\r\n        \"mostly\": 1.0\r\n      },\r\n      \"expectation_type\": \"expect_column_mean_to_be_between\",\r\n      \"meta\": {\r\n        \"profiler_details\": {\r\n          \"metric_configuration\": {\r\n            \"domain_kwargs\": {\r\n              \"column\": \"kpi2\"\r\n            },\r\n            \"metric_name\": \"column.mean\",\r\n            \"metric_value_kwargs\": null\r\n          },\r\n          \"num_batches\": 1\r\n        }\r\n      }\r\n    }\r\n  ],\r\n  \"data_asset_type\": null,\r\n  \"ge_cloud_id\": null,\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.17.19\"\r\n  }\r\n}\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Cenos OS 7\r\n - Great Expectations Version: 0.17.19\r\n - Data Source: Redhsift\r\n - Cloud environment: AWS\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8789/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8789/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8782", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8782/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8782/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8782/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8782", "id": 1922157733, "node_id": "I_kwDOBiS_IM5ykcyl", "number": 8782, "title": "expect_column_values_to_match_regex looks broken", "user": {"login": "gerileka", "id": 56592646, "node_id": "MDQ6VXNlcjU2NTkyNjQ2", "avatar_url": "https://avatars.githubusercontent.com/u/56592646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gerileka", "html_url": "https://github.com/gerileka", "followers_url": "https://api.github.com/users/gerileka/followers", "following_url": "https://api.github.com/users/gerileka/following{/other_user}", "gists_url": "https://api.github.com/users/gerileka/gists{/gist_id}", "starred_url": "https://api.github.com/users/gerileka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gerileka/subscriptions", "organizations_url": "https://api.github.com/users/gerileka/orgs", "repos_url": "https://api.github.com/users/gerileka/repos", "events_url": "https://api.github.com/users/gerileka/events{/privacy}", "received_events_url": "https://api.github.com/users/gerileka/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-10-02T15:34:35Z", "updated_at": "2024-08-23T00:06:25Z", "closed_at": "2024-08-23T00:06:24Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHopefully I am wrong but isn't this `expect_column_values_to_match_regex` failing here ? \r\n\r\n**To Reproduce**\r\nUsing the pyspark table below :\r\n```python\r\nmock_orders =[\r\n            {\r\n                \"concept_id\": \"5da593fa-a3ce-4a1f-84cc-9b4f76ddb5e5\",\r\n                \"country\": \"UK\",\r\n                \"id\": \"Ligne 1\",\r\n\r\n            },\r\n            {\r\n                \"concept_id\": 1,\r\n                \"country\": \"UK\",\r\n                \"id\":\"Ligne 2\",\r\n            },\r\n]\r\n\r\nspark = SparkSession.builder.getOrCreate()\r\norders_reference = spark.createDataFrame(data = mock_orders)\r\n\r\ntable_name = \"orders_table\"\r\npyspark_dataframe = orders_reference\r\n\"\"\"Create and append validation given schema\"\"\"\r\n# Pyspark Connection\r\ncontext = gx.get_context()\r\ndatasource = context.sources.add_or_update_spark(name=\"spark_data_source\")\r\ndata_asset = datasource.add_dataframe_asset(name=table_name)\r\nbatch_request = data_asset.build_batch_request(dataframe=pyspark_dataframe)\r\n\r\n# Create expectations\r\ncontext.add_or_update_expectation_suite(\"spark_data_validation\")\r\n\r\n# Create a validator\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite_name=\"spark_data_validation\"\r\n)\r\n\r\nvalidator.expect_column_values_to_match_regex(\"concept_id\",regex_pattern=\"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$\",\r\n                                             mostly=1.0)\r\n\r\n\r\n```\r\n\r\nI am getting this results:\r\n```shell\r\n{\r\n  \"success\": true,\r\n  \"result\": {\r\n    \"element_count\": 2,\r\n    \"unexpected_count\": 0,\r\n    \"unexpected_percent\": 0.0,\r\n    \"partial_unexpected_list\": [],\r\n    \"missing_count\": 0,\r\n    \"missing_percent\": 0.0,\r\n    \"unexpected_percent_total\": 0.0,\r\n    \"unexpected_percent_nonmissing\": 0.0\r\n  },\r\n  \"meta\": {},\r\n  \"exception_info\": {\r\n    \"raised_exception\": false,\r\n    \"exception_traceback\": null,\r\n    \"exception_message\": null\r\n  }\r\n}\r\n```\r\n\r\n**Expected behavior**\r\nIt should be a fail since the column concept_id doesn't has a problem in the second row. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [MacOS]\r\n - Great Expectations Version: ['0.17.19']\r\n - Data Source: [Pyspark]\r\n - Cloud environment: [AWS]\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8782/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8782/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8781", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8781/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8781/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8781/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8781", "id": 1922044285, "node_id": "I_kwDOBiS_IM5ykBF9", "number": 8781, "title": "No possibility to specify relative path for PandasFileSystemDatasource in great_expectations.yml", "user": {"login": "flepknor", "id": 23034414, "node_id": "MDQ6VXNlcjIzMDM0NDE0", "avatar_url": "https://avatars.githubusercontent.com/u/23034414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flepknor", "html_url": "https://github.com/flepknor", "followers_url": "https://api.github.com/users/flepknor/followers", "following_url": "https://api.github.com/users/flepknor/following{/other_user}", "gists_url": "https://api.github.com/users/flepknor/gists{/gist_id}", "starred_url": "https://api.github.com/users/flepknor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flepknor/subscriptions", "organizations_url": "https://api.github.com/users/flepknor/orgs", "repos_url": "https://api.github.com/users/flepknor/repos", "events_url": "https://api.github.com/users/flepknor/events{/privacy}", "received_events_url": "https://api.github.com/users/flepknor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-10-02T14:32:31Z", "updated_at": "2024-08-23T00:06:39Z", "closed_at": "2024-08-23T00:06:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen using a PandasFileSystemDatasource the relative path specified in the great_expectations.yml configuration file seems is taken relative to the current working directory instead of the context_root_dir specified in the call to gx.get_context.\r\n**To Reproduce**\r\n```python\r\nimport great_expectations as gx\r\ncontext = gx.get_context(context_root_dir=\"/tmp/pytest-of-flepknor/pytest-12/test_download_flow_good0/gx_test_context\")\r\ndatasource = context.get_datasource(\"parquet_metadata\")\r\ndatasource.test_connection()\r\n```\r\nleads to \r\n```bash\r\n/home/flepknor/.conda/envs/gx/bin/python /home/flepknor/repos/blabla/scripts/billo_example.py \r\nTraceback (most recent call last):\r\n  File \" /home/flepknor/repos/blabla/scripts/billo_example.py \", line 4, in <module>\r\n    datasource.test_connection()\r\n  File \"/home/flepknor/.conda/envs/gx/lib/python3.10/site-packages/great_expectations/datasource/fluent/pandas_filesystem_datasource.py\", line 55, in test_connection\r\n    raise TestConnectionError(\r\ngreat_expectations.datasource.fluent.interfaces.TestConnectionError: Path: /home/flepknor/repos/blabla/scripts/metadata does not exist.\r\n\r\n```\r\nYaml config file contents:\r\n```yaml\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: ../data_docs/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\n\r\nfluent_datasources:\r\n  parquet_metadata:\r\n    type: pandas_filesystem\r\n    assets:\r\n      u_metadata:\r\n        type: parquet\r\n        batching_regex: (?P<year>\\d{4})(?P<month>\\d{2})(?P<day>\\d{2})(?P<hour>\\d{2})\\.parquet\r\n    base_directory: metadata/\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n```\r\n\r\n**Expected behavior**\r\nWould expect the datasource to be configured to point to `/tmp/pytest-of-flepknor/pytest-12/test_download_flow_good0/metadata/`. This would be in line with \r\n\"Using relative paths as the base_directory of a Filesystem Data Source\r\n\r\nIf you are using a Filesystem Data Context you can provide a path for base_directory that is relative to the folder containing your Data Context.\"\r\nas stated [here](https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/fluent/filesystem/connect_filesystem_source_data)\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.17.20\r\n - Data Source: Pandas\r\n - Cloud environment: None\r\n\r\n**Additional context**\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8781/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8781/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8759", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8759/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8759/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8759/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8759", "id": 1911261917, "node_id": "I_kwDOBiS_IM5x64rd", "number": 8759, "title": "Partial_unexpected_list should appear in data docs when result_format is SUMMARY ", "user": {"login": "FlorianDG", "id": 75093462, "node_id": "MDQ6VXNlcjc1MDkzNDYy", "avatar_url": "https://avatars.githubusercontent.com/u/75093462?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FlorianDG", "html_url": "https://github.com/FlorianDG", "followers_url": "https://api.github.com/users/FlorianDG/followers", "following_url": "https://api.github.com/users/FlorianDG/following{/other_user}", "gists_url": "https://api.github.com/users/FlorianDG/gists{/gist_id}", "starred_url": "https://api.github.com/users/FlorianDG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FlorianDG/subscriptions", "organizations_url": "https://api.github.com/users/FlorianDG/orgs", "repos_url": "https://api.github.com/users/FlorianDG/repos", "events_url": "https://api.github.com/users/FlorianDG/events{/privacy}", "received_events_url": "https://api.github.com/users/FlorianDG/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-25T11:20:23Z", "updated_at": "2024-08-23T00:07:18Z", "closed_at": "2024-08-23T00:07:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen generating data docs using Great Expectations, the partial_unexpected list is not included in the resulting documentation when _result_format_ is set to SUMMARY on checkpoint level.\r\n\r\n\r\n**To Reproduce**\r\n\r\n1. Set up a Great Expectations project and a DataContext using S3 and pandas.\r\n2. Create an expectation suite with one or more expectations that may result in partial unexpected values.\r\n3. Setup and run a checkpoint to generate data docs using `\"result_format\":\"SUMMARY\"`, e.g.:\r\n\r\n\r\n```python\r\ncheckpoint = context.add_or_update_checkpoint(\r\n\r\n         ...\r\n\r\n         runtime_configuration={\r\n            \"result_format\": {\r\n                \"result_format\": \"SUMMARY\",\r\n                \"partial_unexpected_count\": 5,\r\n                \"unexpected_index_column_names\": [\"Colum_Token\"]\r\n            }})\r\n``` \r\n\r\n5. Navigate to the generated data docs and inspect the expectation details. See that the partial_unexpected_list is not rendered in the data docs, but included in the validation JSON.\r\n\r\n**Expected behavior**\r\nThe partial_unexpected list is expected to be included in the expectation details section of the data docs of failed expectations as indicated in the [documantation](https://docs.greatexpectations.io/docs/reference/expectations/result_format).\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  (MacOS)\r\n - Great Expectations Version: [0.17.15]\r\n - Data Source:  Pandas / S3\r\n - Cloud environment:  AWS\r\n\r\n**Additional context**\r\nIn our case, we would like to have the possibility to add additional column information to the data docs (e.g. a unique token) in case of failed expectations just as it is included in the partial_unexpected_list but not rendered into the data docs, to make data sessions uniquely identifiable outside of great expectations without using result_format=\"COMPLETE\" in a production setting. This would provide more flexibility to users in customizing the output format in data docs for specific expectations within a checkpoint. This allows for a finer level of control over how results are presented, enhancing the usability of Great Expectations for Business Users.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8759/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8759/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8740", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8740/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8740/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8740/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8740", "id": 1904811087, "node_id": "I_kwDOBiS_IM5xiRxP", "number": 8740, "title": "[BUG] GX Task is stuck on local dockerized Airflow", "user": {"login": "itaise", "id": 64745584, "node_id": "MDQ6VXNlcjY0NzQ1NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/64745584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itaise", "html_url": "https://github.com/itaise", "followers_url": "https://api.github.com/users/itaise/followers", "following_url": "https://api.github.com/users/itaise/following{/other_user}", "gists_url": "https://api.github.com/users/itaise/gists{/gist_id}", "starred_url": "https://api.github.com/users/itaise/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itaise/subscriptions", "organizations_url": "https://api.github.com/users/itaise/orgs", "repos_url": "https://api.github.com/users/itaise/repos", "events_url": "https://api.github.com/users/itaise/events{/privacy}", "received_events_url": "https://api.github.com/users/itaise/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-09-20T11:44:29Z", "updated_at": "2024-08-23T00:30:38Z", "closed_at": "2024-08-23T00:30:38Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWe are using GX widely in prod with Airflow on K8s and it works great. \r\nHowever, there is an issue in our dev environment - The dev environment is a dockerized Airflow, running on users' Mac.\r\nToward the end of the checkpoint run, the task is stuck for a long time - around 10-20 minutes.\r\n\r\nWe are writing the validation results to Postgres DB, and I actually see the expectation results in the DB **right away**, while the Airflow task is stuck for approx 20 minutes after it. Then, the slack action is performed. \r\nSo - the issue is somewhere between the storage of validation results and performing the actions I guess?\r\n\r\nThis is a really problematic issue for our internal users. \r\nI am not sure how to pinpoint the cause of it. I saw a similiar issue opened recently (but for AWS managed Airflow) - \r\nhttps://github.com/great-expectations/great_expectations/issues/8671\r\n \r\n![image](https://github.com/great-expectations/great_expectations/assets/64745584/29fdc48e-bb96-4f70-a13d-8841c836f644)\r\n\r\nExpected Behavior - \r\nTask will finish quickly like in prod (Airflow on K8s). \r\n\r\n**Environment (please complete the following information):**\r\n - OS: MacOS Ventura\r\n - GX Version: 0.17.17\r\n - GX experimental - 0.1.20230830090\r\n - airflow-provider-great-expectations==0.1.5\r\n - Airflow version 2.6.2\r\n - Data Source: Trino\r\n - Validation store - postgres \r\n - Environment - Local Airflow docker.  \r\n\r\nThanks a lot! \r\nCC: @talagluck @r34ctor ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8740/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8740/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8736", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8736/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8736/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8736/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8736", "id": 1903480745, "node_id": "I_kwDOBiS_IM5xdM-p", "number": 8736, "title": "GX substituting `secret|<url to Azure Key Vault identifier>` & storing plain-text connection strings in great_expectations.yml", "user": {"login": "SashiDareddy", "id": 4083553, "node_id": "MDQ6VXNlcjQwODM1NTM=", "avatar_url": "https://avatars.githubusercontent.com/u/4083553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SashiDareddy", "html_url": "https://github.com/SashiDareddy", "followers_url": "https://api.github.com/users/SashiDareddy/followers", "following_url": "https://api.github.com/users/SashiDareddy/following{/other_user}", "gists_url": "https://api.github.com/users/SashiDareddy/gists{/gist_id}", "starred_url": "https://api.github.com/users/SashiDareddy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SashiDareddy/subscriptions", "organizations_url": "https://api.github.com/users/SashiDareddy/orgs", "repos_url": "https://api.github.com/users/SashiDareddy/repos", "events_url": "https://api.github.com/users/SashiDareddy/events{/privacy}", "received_events_url": "https://api.github.com/users/SashiDareddy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6895559346, "node_id": "LA_kwDOBiS_IM8AAAABmwHisg", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/azure", "name": "azure", "color": "415BF1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-19T17:59:54Z", "updated_at": "2024-08-23T00:33:32Z", "closed_at": "2024-08-23T00:33:32Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn [How to configure credentials using secrets manager](https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials/) we are told that if we add a prefix such as `secret|<url to Azure Key Vault identifier >` then Gx can retrieve the connection string stored in Azure Key Vault [AKV].\r\n\r\nIn GX `0.15.34` I could pass `secret|https://my-vault-name.vault.azure.net/secrets/my-secret` as my connection string (here my-secret refers to a Postgres connection string) in the YAML (to be clear the `great_expectations.yml` contained the connection string pointing to the literal value `secret|https://my-vault-name.vault.azure.net/secrets/my-secret` and it worked exactly as the document linked above said it would. Every time we run a profiling task GX would call the Azure Key Vault and fetch the secure string.\r\n\r\nThis is also how it worked in `0.16.14` - however in the latest version `0.17.15` the GX is now replacing the literal value `secret|https://my-vault-name.vault.azure.net/secrets/my-secret`  with the actual connection string in great_expectation.yml file which is a big security risk as the users will be under the impression that even if someone manages to get hold of the great_expectation.yml file all they would see is  `secret|https://my-vault-name.vault.azure.net/secrets/my-secret` but this is appears no longer to be the case.\r\n\r\nIn the past I had raised a related issue with regards to secret substituition: [ Variable Substitution not working with Secret Managers (Azure Key Vault) #8034 ](https://github.com/great-expectations/great_expectations/issues/8034) this no longer appears to be an issue in `0.17.15` I wonder if someone tried to fix the issue described earlier and inadvertantly introduced a bug which exposes the raw connection string fetched from Azure Key Vault. \r\n\r\n**To Reproduce**\r\nTry adding a SQL data source where you provide the connection string as secret|<your-azure-key-vault-identifier> eg: `secret|https://my-vault-name.vault.azure.net/secrets/my-secret`. You will notice that the `great_expectation.yml` will hold the raw connection string instead of the literal value `secret|https://my-vault-name.vault.azure.net/secrets/my-secret`\r\n\r\n**Expected behavior**\r\nIf a user provides a secret manager variable such as `secret|https://my-vault-name.vault.azure.net/secrets/my-secret` GX should retain this in the great_expectation.yml. It must query the secrets manager to fetch the secure string at runtime every time it needs - just like it used to be the case GX 0.15.x versions. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.17.15\r\n - Data Source: Postgresql SQL - whose connection string is stored in Azure Key Vault\r\n - Cloud environment: Azure\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8736/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8736/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8709", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8709/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8709/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8709/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8709", "id": 1894539445, "node_id": "I_kwDOBiS_IM5w7GC1", "number": 8709, "title": "Great Expectations not working as expected with SQLAlchemy 2.0 against MS SQL database", "user": {"login": "robinstauntoncollins", "id": 25299948, "node_id": "MDQ6VXNlcjI1Mjk5OTQ4", "avatar_url": "https://avatars.githubusercontent.com/u/25299948?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robinstauntoncollins", "html_url": "https://github.com/robinstauntoncollins", "followers_url": "https://api.github.com/users/robinstauntoncollins/followers", "following_url": "https://api.github.com/users/robinstauntoncollins/following{/other_user}", "gists_url": "https://api.github.com/users/robinstauntoncollins/gists{/gist_id}", "starred_url": "https://api.github.com/users/robinstauntoncollins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robinstauntoncollins/subscriptions", "organizations_url": "https://api.github.com/users/robinstauntoncollins/orgs", "repos_url": "https://api.github.com/users/robinstauntoncollins/repos", "events_url": "https://api.github.com/users/robinstauntoncollins/events{/privacy}", "received_events_url": "https://api.github.com/users/robinstauntoncollins/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-09-13T13:30:06Z", "updated_at": "2024-08-23T00:33:48Z", "closed_at": "2024-08-23T00:33:48Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n* Unable to run expectations against locally running SQL Server in Docker using SQLAlchemy 2.0.7 and great-expectations 0.17.12\r\n* Downgrading to SQLALchemy 1.4 works but this is not a satisfactory result because, as far as I can tell, SQLAlchemy 2.0 is now supported by GX. [Here](https://github.com/great-expectations/great_expectations/issues/7020) is an old issue related to this but at the time the workaround was to downgrade since SQLAlchemy 2.0 wasn't officially supported. As of 0.17.0, SQLAlchemy 2.0 is officially supported. [Here](https://github.com/great-expectations/great_expectations/issues/8351) is another related issue.\r\n\r\nAttempting to run checks on local SQL Server results in:\r\n```\r\nTraceback (most recent call last):\\n  File \"<env>\\\\lib\\\\site-packages\\\\sqlalchemy\\\\engine\\\\base.py\", line 1410, in execute\\n    meth = statement._execute_on_connection\\nAttributeError: \\'str\\' object has no attribute \\'_execute_on_connection\\'\r\n```\r\n\r\n\r\n**To Reproduce**\r\n\r\n* Install sqlalchemy==2.0.7\r\n* Install great_expectations==0.17.12\r\n* Install great_expectations[mssql], great_expectations[sqlalchemy]\r\n* Setup local docker instance of MS SQL with user called 'sa' and with a table called 'my_table'\r\n* Run code below and get exception below\r\n* Downgrade to latest 1.4 version of SQLAlchemy and the same code works as expected.\r\n\r\nPlease include your great_expectations.yml config, the code you\u2019re executing that causes the issue, and the full stack trace of any error(s).\r\ngreat_expectations.yml\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: 4696bd72-6135-4c14-ac22-cbeb6ef6d916\r\n  enabled: true\r\nfluent_datasources:\r\n  mds_local_docker_db:\r\n    type: sql\r\n    assets:\r\n      my_table_asset:\r\n        type: table\r\n        order_by: []\r\n        batch_metadata: {}\r\n        table_name: pmds_metrics\r\n        schema_name:\r\n    connection_string: mssql+pyodbc://sa:<password>@localhost:1433/mds?driver=ODBC\r\n      Driver 17 for SQL Server&charset=utf&autocommit=true\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n\r\n```\r\n\r\nFull Stacktrace:\r\n```\r\nExceptions\r\n{('table.head', 'batch_id=mds_local_docker_db-my_table_asset', '04166707abe073177c1dd922d3584468'): {'metric_configuration': {\r\n  \"metric_name\": \"table.head\",\r\n  \"metric_domain_kwargs\": {\r\n    \"batch_id\": \"mds_local_docker_db-my_table_asset\"\r\n  },\r\n  \"metric_domain_kwargs_id\": \"batch_id=mds_local_docker_db-my_table_asset\",\r\n  \"metric_value_kwargs\": {\r\n    \"n_rows\": 5,\r\n    \"fetch_all\": false\r\n  },\r\n  \"metric_value_kwargs_id\": \"04166707abe073177c1dd922d3584468\",\r\n  \"id\": [\r\n    \"table.head\",\r\n    \"batch_id=mds_local_docker_db-my_table_asset\",\r\n    \"04166707abe073177c1dd922d3584468\"\r\n  ]\r\n}, 'num_failures': 3, 'exception_info': {{'exception_traceback': 'Traceback (most recent call last):\\n  File \"<env>\\\\lib\\\\site-packages\\\\sqlalchemy\\\\engine\\\\base.py\", line 1410, in execute\\n    meth = statement._execute_on_connection\\nAttributeError: \\'str\\' object has no attribute \\'_execute_on_connection\\'\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\execution_engine\\\\execution_engine.py\", line 548, in _process_direct_and_bundled_metric_computation_configurations\\n    ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\\n  File \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\metrics\\\\metric_provider.py\", line 50, in inner_func\\n    return metric_fn(*args, **kwargs)\\n  File \"<cenv>\\\\lib\\\\site-packages\\\\great_expectations\\\\expectations\\\\metrics\\\\table_metrics\\\\table_head.py\", line 109, in _sqlalchemy\\n    df_chunk_iterator = read_sql_table_as_df(\\n  File \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\compatibility\\\\sqlalchemy_compatibility_wrappers.py\", line 55, in read_sql_table_as_df\\n    return _read_sql_table_as_df(\\n  File \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\compatibility\\\\sqlalchemy_compatibility_wrappers.py\", line 133, in _read_sql_table_as_df\\n    return pd.read_sql_query(\\n  File \"<env>\\\\lib\\\\site-packages\\\\pandas\\\\io\\\\sql.py\", line 397, in read_sql_query\\n    return pandas_sql.read_query(\\n  File \"<env>\\\\lib\\\\site-packages\\\\pandas\\\\io\\\\sql.py\", line 1560, in read_query\\n    result = self.execute(*args)\\n  File \"<env>\\\\lib\\\\site-packages\\\\pandas\\\\io\\\\sql.py\", line 1405, in execute\\n    return self.connectable.execution_options().execute(*args, **kwargs)\\n  File \"<env>\\\\lib\\\\site-packages\\\\sqlalchemy\\\\engine\\\\base.py\", line 1412, in execute\\n    raise exc.ObjectNotExecutableError(statement) from err\\nsqlalchemy.exc.ObjectNotExecutableError: Not an executable object: \\'SELECT * FROM #gx_temp_427a0638\\'\\n\\nThe above exception was the direct cause of the following exception:\\n\\nTraceback (most recent call last):\\n  File \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\validator\\\\validation_graph.py\", line 285, in _resolve\\n    self._execution_engine.resolve_metrics(\\n  File \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\execution_engine\\\\execution_engine.py\", line 283, in resolve_metrics\\n    return self._process_direct_and_bundled_metric_computation_configurations(\\n  \r\nFile \"<env>\\\\lib\\\\site-packages\\\\great_expectations\\\\execution_engine\\\\execution_engine.py\", line 552, in _process_direct_and_bundled_metric_computation_configurations\\n    raise gx_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: Not an executable object: \\'SELECT * FROM #gx_temp_427a0638\\'\\n', 'exception_message': \"Not an executable object: 'SELECT * FROM #gx_temp_427a0638'\", 'raised_exception': True}}}}\r\noccurred while resolving metrics.\r\nTraceback (most recent call last):\r\n  File \"ge_test.py\", line 90, in <module>\r\n    main(password)\r\n  File \"ge_test.py\", line 36, in main\r\n    print(validator.head())\r\n  File \"<env>\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 411, in head\r\n    return self._metrics_calculator.head(\r\n  File \"<env>\\lib\\site-packages\\great_expectations\\validator\\metrics_calculator.py\", line 104, in head\r\n    df: pd.DataFrame = self.get_metric(\r\n  File \"<env>\\lib\\site-packages\\great_expectations\\validator\\metrics_calculator.py\", line 122, in get_metric\r\n    return self.get_metrics(\r\n  File \"<env>\\lib\\site-packages\\great_expectations\\validator\\metrics_calculator.py\", line 142, in get_metrics\r\n    return {\r\n  File \"<env>\\lib\\site-packages\\great_expectations\\validator\\metrics_calculator.py\", line 143, in <dictcomp>\r\n    metric_configuration.metric_name: resolved_metrics[metric_configuration.id]\r\nKeyError: ('table.head', 'batch_id=mds_local_docker_db-my_table_asset', '04166707abe073177c1dd922d3584468')\r\n```\r\ncode\r\n\r\n```\r\ndef main(password: str):\r\n    context = gx.get_context()\r\n\r\n    print(f\"Data sources: {context.list_datasources()}\")\r\n\r\n    mssql_datasource = context.sources.add_or_update_sql(\r\n        name=\"mds_local_docker_db\",\r\n        connection_string=f\"mssql+pyodbc://sa:{password}@localhost:1433/mds?driver=ODBC Driver 17 for SQL Server&charset=utf&autocommit=true\",\r\n    )\r\n    print(\"DataSource created\")\r\n\r\n    mssql_datasource.add_table_asset(name=\"my_table_asset\", table_name=\"my_table\")\r\n    print(\"TableAsset created\")\r\n\r\n    batch_request = mssql_datasource.get_asset(\"my_table_asset\").build_batch_request()\r\n    print(\"BatchRequest created\")\r\n\r\n    expectation_suite_name = \"MDS_MY_TABLE_EXPECTATIONS\"\r\n    context.add_or_update_expectation_suite(\r\n        expectation_suite_name=expectation_suite_name\r\n    )\r\n    assert \"MDS_MY_TABLE_EXPECTATIONS\" in context.list_expectation_suite_names()\r\n    print(\"ExpectationSuite created\")\r\n\r\n    validator = context.get_validator(\r\n        batch_request=batch_request,\r\n        expectation_suite_name=expectation_suite_name,\r\n    )\r\n    print(\"Validator created\")\r\n\r\n    print(validator.head())\r\n\r\n    # validator.expect_column_values_to_match_strftime_format('date', '%Y-%m-%d %H:%M:%S.')\r\n    validator.expect_column_values_to_not_be_null(column=\"date\")\r\n    validator.expect_column_distinct_values_to_be_in_set(\r\n        \"business_line\",\r\n        set(\r\n            [\r\n                \"BMC\",\r\n                \"CB\",\r\n                \"CDE\",\r\n                \"NVT\",\r\n                \"PBBE\",\r\n                \"PBDE\",\r\n                \"PBFR\",\r\n                \"PBNL\",\r\n                \"RT\",\r\n            ]\r\n        ),\r\n    )\r\n    validator.save_expectation_suite(discard_failed_expectations=False)\r\n\r\n    my_checkpoint_name = \"my_sql_checkpoint\"\r\n\r\n    checkpoint = Checkpoint(\r\n        name=my_checkpoint_name,\r\n        run_name_template=\"%Y%m%d-%H%M%S-my-run-name-template\",\r\n        data_context=context,\r\n        batch_request=batch_request,\r\n        expectation_suite_name=expectation_suite_name,\r\n        action_list=[\r\n            {\r\n                \"name\": \"store_validation_result\",\r\n                \"action\": {\"class_name\": \"StoreValidationResultAction\"},\r\n            },\r\n            {\r\n                \"name\": \"update_data_docs\",\r\n                \"action\": {\"class_name\": \"UpdateDataDocsAction\"},\r\n            },\r\n        ],\r\n    )\r\n    context.add_or_update_checkpoint(checkpoint=checkpoint)\r\n    checkpoint_result = checkpoint.run()\r\n    context.open_data_docs()\r\n```\r\n\r\n**Expected behavior**\r\nI expect Great Expectations to successfully connect to my locally running docker image with SQL Server using the installed SQLAlchemy 2.0.7 and run the quality checks\r\n\r\n**Environment (please complete the following information):**\r\n - Windows\r\n - Great Expectations Version:0.17.12\r\n - Data Source: Dockerized SQL Server instance running locally\r\n - Cloud environment: None\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8709/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8708", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8708/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8708/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8708/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8708", "id": 1893855220, "node_id": "I_kwDOBiS_IM5w4e_0", "number": 8708, "title": "Allow index columns to be used in expectations", "user": {"login": "konstantinkobs", "id": 4562885, "node_id": "MDQ6VXNlcjQ1NjI4ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/4562885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstantinkobs", "html_url": "https://github.com/konstantinkobs", "followers_url": "https://api.github.com/users/konstantinkobs/followers", "following_url": "https://api.github.com/users/konstantinkobs/following{/other_user}", "gists_url": "https://api.github.com/users/konstantinkobs/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstantinkobs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstantinkobs/subscriptions", "organizations_url": "https://api.github.com/users/konstantinkobs/orgs", "repos_url": "https://api.github.com/users/konstantinkobs/repos", "events_url": "https://api.github.com/users/konstantinkobs/events{/privacy}", "received_events_url": "https://api.github.com/users/konstantinkobs/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-09-13T06:44:39Z", "updated_at": "2024-03-14T15:51:09Z", "closed_at": "2024-03-12T17:29:20Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nIn my use case, I load data with specific index columns in order to later merge multiple datasets easily on index. However, I am not able to formulate expectations for the index column.\r\n\r\nDemonstration code based on Quickstart guide:\r\n```python\r\nimport great_expectations as gx\r\ncontext = gx.get_context()\r\nvalidator = context.sources.pandas_default.read_csv(\r\n    \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\", index_col=\"pickup_datetime\"\r\n)\r\nvalidator.expect_column_values_to_match_regex(column=\"pickup_datetime\", kwargs={\"regex\": \"\\d{4}\\-\\d{2}\\-\\d{2} \\d{2}:\\d{2}:\\d{2}\"})\r\n```\r\n\r\nThis throws a `MetricResolutionError: Error: The column \"pickup_datetime\" in BatchData does not exist.` error. I also tried using \"index\" as the column parameter, with the same error.\r\n\r\n**Describe the solution you'd like**\r\nWhile it might be possible to create new expectations that are specifically designed for index columns of data sources, I think it would be easier to extend the existing expectation implementations to allow specifying the index column. I think this would prevent a large amount of duplicated code.\r\n\r\nIf this is possible, the profiler should also list the index column as a possible column to profile.", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8708/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8708/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8705", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8705/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8705/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8705/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8705", "id": 1893055430, "node_id": "I_kwDOBiS_IM5w1bvG", "number": 8705, "title": "[BUG] add_or_update_pandas_s3 function(?) overrides connection to our own on-premises S3 store", "user": {"login": "Yamden", "id": 34607132, "node_id": "MDQ6VXNlcjM0NjA3MTMy", "avatar_url": "https://avatars.githubusercontent.com/u/34607132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yamden", "html_url": "https://github.com/Yamden", "followers_url": "https://api.github.com/users/Yamden/followers", "following_url": "https://api.github.com/users/Yamden/following{/other_user}", "gists_url": "https://api.github.com/users/Yamden/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yamden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yamden/subscriptions", "organizations_url": "https://api.github.com/users/Yamden/orgs", "repos_url": "https://api.github.com/users/Yamden/repos", "events_url": "https://api.github.com/users/Yamden/events{/privacy}", "received_events_url": "https://api.github.com/users/Yamden/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-09-12T18:34:54Z", "updated_at": "2025-01-23T15:31:35Z", "closed_at": "2023-10-24T13:57:54Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAfter updating to the latest version of GE and adding a datasource using the `add_or_update_pandas_s3` function, something seems to override our own boto3 connection settings to our on-premises store that we use and instead connects to an AWS S3 store. Before we used the `add_datasource` function which would connect to our on-prem store without any issues, but upon introducing the `add_or_update_pandas_s3` function, we are no longer able to. The `add_or_update_pandas_s3` and `add_parquet_asset` function are able to run just fine, its when I run a `batch_list = asset.get_batch_list_from_batch_request(batch_request)` that the application basically times out trying to connect to an AWS s3 store rather than our on-prem store. \r\n\r\n**To Reproduce**\r\n\r\nHere is my boto3 connection settings:\r\n![image](https://github.com/great-expectations/great_expectations/assets/34607132/dddf9d23-e5bd-40dd-b8f4-95dbd9ae66e7)\r\n\r\nHere is the code I am running. These test statements just let me know if the previous line was able to run or not. test and test2 print out but as stated earlier, the `batch_list = asset.get_batch_list_from_batch_request(batch_request)` basically times out trying to connect to the AWS S3 store that does not exist.\r\n![image](https://github.com/great-expectations/great_expectations/assets/34607132/b17e91c8-92a7-4d6c-a264-edc3297b8e84)\r\n\r\n\r\n**Here is the full stack trace:**\r\n```\r\n2023-08-31 12:13:35,244 INFO C:\\Users\\KZNWJV\\git_repos\\g-poc-great-expectations\\ge_flask_app\\__init__.py (create_app:58): Registering Blueprints ...\r\n    Instantiating as a Datasource, since class_name is Datasource\r\n2023-08-31 12:13:35,442 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\fluent_base_model.py (dict:261): PandasS3Datasource.dict() - substituting config values\r\n2023-08-31 12:13:35,491 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\data_context\\data_context\\file_data_context.py (_save_project_config:165): Saving 1 Fluent Datasources to C:\\Users\\KZNWJV\\git_repos\\g-poc-great-expectations\\great_expectations\\great_expectations.yml\r\n2023-08-31 12:13:35,516 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\sources.py (_add_asset_factory:284): 'test-parquet' PandasS3Datasource uses S3DataConnector\r\n2023-08-31 12:13:35,521 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\pandas_s3_datasource.py (_build_data_connector:149): S3DataConnector created for 'test_asset'\r\n2023-08-31 12:13:35,573 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\data_context\\data_context\\file_data_context.py (_save_project_config:165): Saving 1 Fluent Datasources to C:\\Users\\KZNWJV\\git_repos\\g-poc-great-expectations\\great_expectations\\great_expectations.yml\r\n2023-08-31 12:13:35,586 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\fluent_base_model.py (dict:261): PandasS3Datasource.dict() - substituting config values\r\n2023-08-31 12:13:35,586 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\data_connector\\batch_filter.py (parse_batch_slice:251): batch_slice: None was parsed to: slice(0, None, None)\r\n2023-08-31 12:13:35,586 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\data_connector\\batch_filter.py (parse_batch_slice:251): batch_slice: slice(0, None, None) was parsed to: slice(0, None, None)\r\n2023-08-31 12:13:35,586 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\fluent_base_model.py (dict:261): ParquetAsset.dict() - substituting config values\r\n2023-08-31 12:13:35,586 INFO C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\credentials.py (load:1180): Found credentials in environment variables.\r\nbatching_regex: ^part-\\d+\\.snappy\\.parquet$\r\nname: test_asset\r\ntype: parquet\r\ntest\r\ntest2\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connection.py\", line 174, in _new_conn\r\n    conn = connection.create_connection(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\util\\connection.py\", line 95, in create_connection\r\n    raise err\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\util\\connection.py\", line 85, in create_connection\r\n    sock.connect(sa)\r\nTimeoutError: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\httpsession.py\", line 448, in send\r\n    urllib_response = conn.urlopen(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connectionpool.py\", line 787, in urlopen\r\n    retries = retries.increment(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\util\\retry.py\", line 525, in increment\r\n    raise six.reraise(type(error), error, _stacktrace)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\packages\\six.py\", line 770, in reraise\r\n    raise value\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connectionpool.py\", line 703, in urlopen\r\n    httplib_response = self._make_request(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connectionpool.py\", line 386, in _make_request\r\n    self._validate_conn(conn)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connectionpool.py\", line 1042, in _validate_conn\r\n    conn.connect()\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connection.py\", line 358, in connect\r\n    self.sock = conn = self._new_conn()\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\urllib3\\connection.py\", line 179, in _new_conn\r\n    raise ConnectTimeoutError(\r\nurllib3.exceptions.ConnectTimeoutError: (<botocore.awsrequest.AWSHTTPSConnection object at 0x000001F75EDACAC0>, 'Connection to parquet-test.s3.amazonaws.com timed out. (connect timeout=60)')\r\nDuring handling of the above exception, another exception occurred:\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\KZNWJV\\git_repos\\g-poc-great-expectations\\run.py\", line 6, in <module>\r\n    create_app(sys.argv[1]).run()\r\n  File \"C:\\Users\\KZNWJV\\git_repos\\g-poc-great-expectations\\ge_flask_app\\__init__.py\", line 59, in create_app\r\n    app.register_blueprint(datasources.blueprint)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\scaffold.py\", line 50, in wrapper_func\r\n    return f(self, *args, **kwargs)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\app.py\", line 1296, in register_blueprint\r\n    blueprint.register(self, options)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\flask\\blueprints.py\", line 439, in register\r\n    deferred(state)\r\n  File \"C:\\Users\\KZNWJV\\git_repos\\g-poc-great-expectations\\ge_flask_app\\blueprints\\ge_datasources\\__init__.py\", line 48, in create_s3_datasource\r\n    batches = data_asset.get_batch_list_from_batch_request(batch_request)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\datasource\\fluent\\file_path_data_asset.py\", line 270, in get_batch_list_from_batch_request\r\n    batch_data, batch_markers = execution_engine.get_batch_data_and_markers(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\execution_engine\\pandas_execution_engine.py\", line 251, in get_batch_data_and_markers\r\n    s3_object: dict = s3_engine.get_object(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\client.py\", line 508, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\client.py\", line 898, in _make_api_call\r\n    http, parsed_response = self._make_request(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\client.py\", line 921, in _make_request\r\n    return self._endpoint.make_request(operation_model, request_dict)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\endpoint.py\", line 119, in make_request\r\n    return self._send_request(request_dict, operation_model)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\endpoint.py\", line 202, in _send_request\r\n    while self._needs_retry(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\endpoint.py\", line 354, in _needs_retry\r\n    responses = self._event_emitter.emit(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\hooks.py\", line 412, in emit\r\n    return self._emitter.emit(aliased_event_name, **kwargs)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\hooks.py\", line 256, in emit\r\n    return self._emit(event_name, kwargs)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\hooks.py\", line 239, in _emit\r\n    response = handler(**kwargs)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\retryhandler.py\", line 207, in __call__\r\n    if self._checker(**checker_kwargs):\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\retryhandler.py\", line 284, in __call__\r\n    should_retry = self._should_retry(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\retryhandler.py\", line 320, in _should_retry\r\n    return self._checker(attempt_number, response, caught_exception)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\retryhandler.py\", line 363, in __call__\r\n    checker_response = checker(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\retryhandler.py\", line 247, in __call__\r\n    return self._check_caught_exception(\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\retryhandler.py\", line 416, in _check_caught_exception\r\n    raise caught_exception\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\endpoint.py\", line 281, in _do_get_response\r\n    http_response = self._send(request)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\endpoint.py\", line 377, in _send\r\n    return self.http_session.send(request)\r\n  File \"C:\\Users\\KZNWJV\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\botocore\\httpsession.py\", line 483, in send\r\n    raise ConnectTimeoutError(endpoint_url=request.url, error=e)\r\nbotocore.exceptions.ConnectTimeoutError: Connect timeout on endpoint URL: \"https://parquet-test.s3.amazonaws.com/part-00.snappy.parquet\"\r\n```\r\n\r\n\r\n**great-expectations.yaml**\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs:[ https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource](https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource)\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at[ https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview](https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview)\r\ndatasources:\r\n  postgresql_datasource:\r\n    name: postgresql_datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      module_name: great_expectations.execution_engine\r\n      class_name: SqlAlchemyExecutionEngine\r\n      connection_string: postgresql+psycopg2://**censored**:**censored**@localhost:5432/uivinvel\r\n    data_connectors:\r\n      default_runtime_data_connector_name:\r\n        name: default_runtime_data_connector_name\r\n        module_name: great_expectations.datasource.data_connector\r\n        class_name: RuntimeDataConnector\r\n        batch_identifiers:\r\n          - default_identifier_name\r\n      default_inferred_data_connector_name:\r\n        name: default_inferred_data_connector_name\r\n        module_name: great_expectations.datasource.data_connector\r\n        include_schema_name: true\r\n       class_name: InferredAssetSqlDataConnector\r\n    class_name: Datasource\r\n  s3_datasource:\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      module_name: great_expectations.execution_engine\r\n      class_name: PandasExecutionEngine\r\n      boto3_options:\r\n        endpoint_url: http://localhost:9001\r\n        aws_access_key_id: **censored**\r\n        aws_secret_access_key: **censored**\r\n    data_connectors:\r\n      InternalS3Connector:\r\n        name: InternalS3Connector\r\n        module_name: great_expectations.datasource.data_connector\r\n        bucket: dynamic-eta-prediction-lookups\r\n        class_name: ConfiguredAssetS3DataConnector\r\n        boto3_options:\r\n          endpoint_url: http://localhost:9001/\r\n          aws_access_key_id: **censored**\r\n          aws_secret_access_key: **censored**\r\n        prefix: ''\r\n        assets:\r\n          part-00:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-00\\.snappy\\.json\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-02:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-02\\.snappy\\.json\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-010:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-010\\.snappy\\.json\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-021:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-021\\.snappy\\.json\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-013:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-013\\.snappy\\.json\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-0186:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-0186\\.snappy\\.json\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n    class_name: Datasource\r\n  s3_parquet_datasource:\r\n    name: s3_parquet_datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      module_name: great_expectations.execution_engine\r\n      class_name: PandasExecutionEngine\r\n      boto3_options:\r\n        endpoint_url: http://localhost:9001\r\n        aws_access_key_id: **censored**\r\n        aws_secret_access_key: **censored**\r\n   data_connectors:\r\n      InternalS3Connector:\r\n        name: InternalS3Connector\r\n        module_name: great_expectations.datasource.data_connector\r\n        bucket: parquet-test\r\n        class_name: ConfiguredAssetS3DataConnector\r\n        boto3_options:\r\n          endpoint_url: http://localhost:9001\r\n          aws_access_key_id: **censored**\r\n          aws_secret_access_key: **censored**\r\n        prefix: ''\r\n        assets:\r\n          part-00:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-00\\.snappy\\.parquet\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-02:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-02\\.snappy\\.parquet\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-010:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-010\\.snappy\\.parquet\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-021:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-021\\.snappy\\.parquet\r\n           class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-013:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-013\\.snappy\\.parquet\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n          part-0186:\r\n            module_name: great_expectations.datasource.data_connector.asset\r\n            pattern: part-0186\\.snappy\\.parquet\r\n            class_name: Asset\r\n            group_names:\r\n              - plant-ads\r\n    class_name: Datasource\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n      validation_results_limit: 30\r\n\r\nanonymous_usage_statistics:\r\n  enabled: true\r\n  data_context_id: c31b7721-8d2d-4d73-9c60-fe8576e982f3\r\nnotebooks:\r\ninclude_rendered_content:\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n  globally: false\r\nfluent_datasources:\r\n  test-parquet:\r\n    type: pandas_s3\r\n    assets:\r\n      test_asset:\r\n        type: parquet\r\n    bucket: parquet-test\r\n    boto3_options:\r\n      endpoint_url: http://localhost:9001/\r\n      aws_access_key_id: **censored**\r\n      aws_secret_access_key:  **censored**\r\n```\r\n\r\n\r\n\r\n**Expected behavior**\r\nDatasource connects to our own on-prem store instead of AWS S3.\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 17.11\r\n - Data Source: InternalS3Connector\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n**Additional context**\r\nIt should also be noted that before we used to pass our boto3 options to our datasource config settings on all levels (execution_engine and data_connectors) \r\n![image](https://github.com/great-expectations/great_expectations/assets/34607132/446d437f-2592-4c0e-b210-77c95944837c)\r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8705/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8705/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8701", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8701/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8701/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8701/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8701", "id": 1892523671, "node_id": "I_kwDOBiS_IM5wzZ6X", "number": 8701, "title": "[BUG] column_values_match_regex metric fails with Trino", "user": {"login": "itaise", "id": 64745584, "node_id": "MDQ6VXNlcjY0NzQ1NTg0", "avatar_url": "https://avatars.githubusercontent.com/u/64745584?v=4", "gravatar_id": "", "url": "https://api.github.com/users/itaise", "html_url": "https://github.com/itaise", "followers_url": "https://api.github.com/users/itaise/followers", "following_url": "https://api.github.com/users/itaise/following{/other_user}", "gists_url": "https://api.github.com/users/itaise/gists{/gist_id}", "starred_url": "https://api.github.com/users/itaise/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/itaise/subscriptions", "organizations_url": "https://api.github.com/users/itaise/orgs", "repos_url": "https://api.github.com/users/itaise/repos", "events_url": "https://api.github.com/users/itaise/events{/privacy}", "received_events_url": "https://api.github.com/users/itaise/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-09-12T13:25:55Z", "updated_at": "2024-03-18T16:27:55Z", "closed_at": "2024-03-18T16:27:54Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi, \r\nWe are trying to use \"expect_column_values_to_match_regex\" with Trino. \r\nThe expectation is using column_values_match_regex metric - this metric calls get_dialect_regex_expression, on [this line](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/metrics/util.py#L90). \r\n\r\nThe call fails because the Trino SQLAlchemy dialect **has no attribute \"dialect\".** \r\nI think this part of redshift dialect should also have try/except like the others. \r\n\r\nCan you please check? \r\n\r\n example: \r\n```\r\n {\r\n            \"expectation_type\": \"expect_column_values_to_match_regex\",\r\n            \"kwargs\":\r\n            {\r\n                \"column\": \"thread_latest_topic_skill_name\",\r\n                \"regex\": \"[^,]\"\r\n            }\r\n        }\r\n\r\n```\r\nthanks a lot! \r\nGX version - 0.17.14\r\n\r\n \r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8701/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8701/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8697", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8697/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8697/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8697/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8697", "id": 1890636329, "node_id": "I_kwDOBiS_IM5wsNIp", "number": 8697, "title": "Databricks workflow errors on _scaffold attempts", "user": {"login": "coreycradduck", "id": 20070387, "node_id": "MDQ6VXNlcjIwMDcwMzg3", "avatar_url": "https://avatars.githubusercontent.com/u/20070387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coreycradduck", "html_url": "https://github.com/coreycradduck", "followers_url": "https://api.github.com/users/coreycradduck/followers", "following_url": "https://api.github.com/users/coreycradduck/following{/other_user}", "gists_url": "https://api.github.com/users/coreycradduck/gists{/gist_id}", "starred_url": "https://api.github.com/users/coreycradduck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coreycradduck/subscriptions", "organizations_url": "https://api.github.com/users/coreycradduck/orgs", "repos_url": "https://api.github.com/users/coreycradduck/repos", "events_url": "https://api.github.com/users/coreycradduck/events{/privacy}", "received_events_url": "https://api.github.com/users/coreycradduck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2366122500, "node_id": "MDU6TGFiZWwyMzY2MTIyNTAw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:databricks", "name": "stack:databricks", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-09-11T14:22:42Z", "updated_at": "2024-08-23T00:34:00Z", "closed_at": "2024-08-23T00:34:00Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "When instantiating a FileDataContext in my Databricks workflow, I receive an OSError due to some scaffolding attempts. GX is trying to access/modify great_expectations/plugins/custom_data_docs/styles/data_docs_custom_styles.css, which already exists, and because it's running from a specific Git commit rather than from the repo, it's having an issue modifying the file. I had these errors also for  custom_data_docs/renderers, views, etc. until I created .gitkeep files so the data_context wouldn't try to set up empty directories. If I run the .py file directly in Databricks using the repository, there is no issue, so it's most likely tied to the attempt by GX to access the specific commit.\r\n\r\nWhen I pin version 0.16.3, I don't have this issue, so I'm not sure what change caused this and if there's an option to disable this automatic data docs scaffolding.\r\n\r\n**To Reproduce**\r\n```yaml\r\nconfig_version: 3.0\r\nconfig_variables_file_path: config_variables.yml\r\nplugins_directory: plugins/\r\n\r\ndatasources:\r\n  pandas:\r\n    class_name: Datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      class_name: PandasExecutionEngine\r\n      module_name: great_expectations.execution_engine\r\n    data_connectors:\r\n      default:\r\n        name: default\r\n        class_name: RuntimeDataConnector\r\n        module_name: great_expectations.datasource.data_connector\r\n        batch_identifiers:\r\n          - batch_id\r\n\r\nstores:\r\n  az_validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleAzureBlobStoreBackend\r\n      container: great-expectations\r\n      prefix: validations\r\n      connection_string: ${GX_STORAGE_CONNECTION_STRING}\r\n\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\ncheckpoint_store_name: checkpoint_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\nexpectations_store_name: expectations_store\r\nprofiler_store_name: profiler_store\r\nvalidations_store_name: az_validations_store\r\n\r\ndata_docs_sites:\r\n  customer_data_docs:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: false\r\n    store_backend:\r\n      class_name: TupleAzureBlobStoreBackend\r\n      container: \\$web\r\n      connection_string: ${GX_STORAGE_CONNECTION_STRING}\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nnotebooks:\r\nanonymous_usage_statistics:\r\n  data_context_id: 2bdfdfcd-6777-41e8-a97f-db4da50128c0\r\n  enabled: false\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n```\r\n\r\n```\r\n     28 logging.info(\"Loading Great Expectations context...\")\r\n     29 project_root_dir = Path.cwd().parent.as_posix()\r\n---> 30 gx_context = gx.get_context(project_root_dir=project_root_dir)\r\n\r\n... \r\n\r\nFile /local_disk0/.ephemeral_nfs/cluster_libraries/python/lib/python3.10/site-packages/great_expectations/data_context/data_context/serializable_data_context.py:364, in SerializableDataContext._scaffold_custom_data_docs(cls, plugins_dir)\r\n    357 styles_template = file_relative_path(\r\n    358     __file__,\r\n    359     \"../../render/view/static/styles/data_docs_custom_styles_template.css\",\r\n    360 )\r\n    361 styles_destination_path = os.path.join(  # noqa: PTH118\r\n    362     plugins_dir, \"custom_data_docs\", \"styles\", \"data_docs_custom_styles.css\"\r\n    363 )\r\n--> 364 shutil.copyfile(styles_template, styles_destination_path)\r\n\r\nFile /usr/lib/python3.10/shutil.py:256, in copyfile(src, dst, follow_symlinks)\r\n    254 with open(src, 'rb') as fsrc:\r\n    255     try:\r\n--> 256         with open(dst, 'wb') as fdst:\r\n    257             # macOS\r\n    258             if _HAS_FCOPYFILE:\r\n    259                 try:\r\n\r\nOSError: [Errno 22] Invalid argument: '/Workspace/Repos/.internal/856753602b_commits/6e9b4a83d6fc5188ceab2d4268132e3312922525/great_expectations/plugins/custom_data_docs/styles/data_docs_custom_styles.css'\r\n```\r\n\r\n**Expected behavior**\r\nNo error is raised.\r\n\r\n**Environment (please complete the following information):**\r\n - Great Expectations Version: 0.17.8 fails, 0.16.3 works\r\n - Cloud environment: Azure Databricks\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8697/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8697/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8688", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8688/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8688/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8688/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8688", "id": 1888166922, "node_id": "I_kwDOBiS_IM5wiyQK", "number": 8688, "title": "$PARAMETER.<parameter_in_question> key Giving Error", "user": {"login": "franciskuttivelil", "id": 69468027, "node_id": "MDQ6VXNlcjY5NDY4MDI3", "avatar_url": "https://avatars.githubusercontent.com/u/69468027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/franciskuttivelil", "html_url": "https://github.com/franciskuttivelil", "followers_url": "https://api.github.com/users/franciskuttivelil/followers", "following_url": "https://api.github.com/users/franciskuttivelil/following{/other_user}", "gists_url": "https://api.github.com/users/franciskuttivelil/gists{/gist_id}", "starred_url": "https://api.github.com/users/franciskuttivelil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/franciskuttivelil/subscriptions", "organizations_url": "https://api.github.com/users/franciskuttivelil/orgs", "repos_url": "https://api.github.com/users/franciskuttivelil/repos", "events_url": "https://api.github.com/users/franciskuttivelil/events{/privacy}", "received_events_url": "https://api.github.com/users/franciskuttivelil/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-09-08T18:50:36Z", "updated_at": "2024-08-23T00:34:11Z", "closed_at": "2024-08-23T00:34:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am running the following Expectations but it is giving an error\r\n\r\nBelow are the expectation configurations. These expectation configuration were created using an Rule Based Profiler\r\n\r\n```\r\n[\r\n  {\r\n    \"kwargs\": {\r\n      \"min_value\": 1,\r\n      \"max_value\": 1,\r\n      \"mostly\": 1\r\n    },\r\n    \"meta\": {\r\n      \"profiler_details\": {\r\n        \"metric_configuration\": {\r\n          \"metric_name\": \"table.row_count\",\r\n          \"domain_kwargs\": {},\r\n          \"metric_value_kwargs\": null\r\n        },\r\n        \"num_batches\": 1\r\n      }\r\n    },\r\n    \"expectation_type\": \"expect_table_row_count_to_be_between\"\r\n  },\r\n  {\r\n    \"kwargs\": {\r\n      \"column\": \"spend\",\r\n      \"min_value\": {\r\n        \"$PARAMETER\": \"0.1 * mean_value\",\r\n        \"$PARAMETER.mean_value\": 2905\r\n      },\r\n      \"max_value\": {\r\n        \"$PARAMETER\": \"1.5 * mean_value\",\r\n        \"$PARAMETER.mean_value\": 2905\r\n      },\r\n      \"mostly\": 1\r\n    },\r\n    \"meta\": {\r\n      \"profiler_details\": {\r\n        \"metric_configuration\": {\r\n          \"metric_name\": \"column.mean\",\r\n          \"domain_kwargs\": {\r\n            \"column\": \"spend\"\r\n          },\r\n          \"metric_value_kwargs\": null\r\n        },\r\n        \"num_batches\": 1\r\n      }\r\n    },\r\n    \"expectation_type\": \"expect_column_mean_to_be_between\"\r\n  },\r\n  {\r\n    \"kwargs\": {\r\n      \"column\": \"impressions\",\r\n      \"min_value\": {\r\n        \"$PARAMETER\": \"0.1 * mean_value\",\r\n        \"$PARAMETER.mean_value\": 52035\r\n      },\r\n      \"max_value\": {\r\n        \"$PARAMETER\": \"1.5 * mean_value\",\r\n        \"$PARAMETER.mean_value\": 52035\r\n      },\r\n      \"mostly\": 1\r\n    },\r\n    \"meta\": {\r\n      \"profiler_details\": {\r\n        \"metric_configuration\": {\r\n          \"metric_name\": \"column.mean\",\r\n          \"domain_kwargs\": {\r\n            \"column\": \"impressions\"\r\n          },\r\n          \"metric_value_kwargs\": null\r\n        },\r\n        \"num_batches\": 1\r\n      }\r\n    },\r\n    \"expectation_type\": \"expect_column_mean_to_be_between\"\r\n  }\r\n]\r\n```\r\n\r\nThe code used to run the above Expectation Configuration\r\n\r\n```\r\nsuite = context_ge.create_expectation_suite(expectation_suite_name=suite_name,overwrite_existing=True)\r\nfor expectation in expectation_configurations:\r\n  suite.add_expectation(expectation_configuration=expectation)\r\n  \r\ncontext_ge.save_expectation_suite(suite, suite_name)\r\n\r\ncheckpoint = ge.checkpoint.SimpleCheckpoint(\r\n    name=client_name+\"_checkpoint\",\r\n    data_context=context_ge,\r\n    validations=[{\"batch_request\":batch_request_yesterday, \"expectation_suite_name\":suite_name}],\r\n    action_list=[{\"name\": \"store_validation_result\",\"action\": {\"class_name\": \"StoreValidationResultAction\"}}],\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\n```\r\n\r\nThe above code gives the below error\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 200, in evaluate_stack\r\n    evaluated = int(op)\r\nValueError: invalid literal for int() with base 10: 'mean_value'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 207, in evaluate_stack\r\n    evaluated = float(op)\r\nValueError: could not convert string to float: 'mean_value'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 437, in parse_evaluation_parameter\r\n    result = EXPR.evaluate_stack(EXPR.exprStack)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 175, in evaluate_stack\r\n    op2 = self.evaluate_stack(s)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 222, in evaluate_stack\r\n    raise e\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 214, in evaluate_stack\r\n    evaluated = dateutil.parser.parse(op)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/dateutil/parser/_parser.py\", line 1368, in parse\r\n    return DEFAULTPARSER.parse(timestr, **kwargs)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/dateutil/parser/_parser.py\", line 643, in parse\r\n    raise ParserError(\"Unknown string format: %s\", timestr)\r\ndateutil.parser._parser.ParserError: Unknown string format: mean_value\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/tmp/interpreter-input-5c9dc575-4984-4235-ac5e-733cc1f2c3ff.tmp\", line 309, in <module>\r\n    checkpoint_result = checkpoint.run()\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/checkpoint/checkpoint.py\", line 1260, in run\r\n    return super().run(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/usage_statistics/usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/checkpoint/checkpoint.py\", line 304, in run\r\n    self._run_validation(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/checkpoint/checkpoint.py\", line 529, in _run_validation\r\n    async_validation_operator_result = async_executor.submit(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/async_executor.py\", line 105, in submit\r\n    return AsyncResult(value=fn(*args, **kwargs))\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/validation_operators/validation_operators.py\", line 382, in run\r\n    async_executor.submit(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/async_executor.py\", line 105, in submit\r\n    return AsyncResult(value=fn(*args, **kwargs))\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/validator/validator.py\", line 1662, in validate\r\n    expectation.process_evaluation_parameters(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/expectation_configuration.py\", line 1044, in process_evaluation_parameters\r\n    evaluation_args, _ = build_evaluation_parameters(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 258, in build_evaluation_parameters\r\n    parameter_value = parse_evaluation_parameter(\r\n  File \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/evaluation_parameters.py\", line 445, in parse_evaluation_parameter\r\n    raise EvaluationParameterError(\r\ngreat_expectations.exceptions.exceptions.EvaluationParameterError: Error while evaluating evaluation parameter expression: Unknown string format: mean_value\r\nScript failed with status: 1\r\n```\r\n\r\nThe error is referencing the below part of the expectation configuration\r\n```\r\n  \"min_value\": {\r\n        \"$PARAMETER\": \"0.1 * mean_value\",\r\n        \"$PARAMETER.mean_value\": 52035\r\n      },\r\n```\r\n\r\nI am following [this documentation](https://docs.greatexpectations.io/docs/terms/evaluation_parameter/#use-cases) to create the above code.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Centos 7\r\n - Great Expectations Version: 0.17.5\r\n - Data Source: Redshift\r\n - Cloud environment: AWS\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8688/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8688/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8632", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8632/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8632/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8632/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8632", "id": 1872178798, "node_id": "I_kwDOBiS_IM5vly5u", "number": 8632, "title": "Unreadable rendering of data docs for a custom expectation", "user": {"login": "vasisthasinghal", "id": 24483258, "node_id": "MDQ6VXNlcjI0NDgzMjU4", "avatar_url": "https://avatars.githubusercontent.com/u/24483258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasisthasinghal", "html_url": "https://github.com/vasisthasinghal", "followers_url": "https://api.github.com/users/vasisthasinghal/followers", "following_url": "https://api.github.com/users/vasisthasinghal/following{/other_user}", "gists_url": "https://api.github.com/users/vasisthasinghal/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasisthasinghal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasisthasinghal/subscriptions", "organizations_url": "https://api.github.com/users/vasisthasinghal/orgs", "repos_url": "https://api.github.com/users/vasisthasinghal/repos", "events_url": "https://api.github.com/users/vasisthasinghal/events{/privacy}", "received_events_url": "https://api.github.com/users/vasisthasinghal/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-29T18:22:31Z", "updated_at": "2024-08-23T00:34:22Z", "closed_at": "2024-08-23T00:34:22Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI created a custom expectation - expect_multicolumn_sum_values_to_be_equal_to_single_column and when the data doc displays sampled unexpected values, it shows the decimal values in the different columns without any spaces, which makes it really difficult to read. \r\n\r\n**Snapshot**\r\n![Screen Shot 2023-08-28 at 10 08 19 AM](https://github.com/great-expectations/great_expectations/assets/24483258/0e8d33bb-ac29-4a45-8662-67a1bb92bfac)\r\n\r\n\r\n**Expected behavior**\r\nThe different values must be separated by a space or represented in different columns of the rendered table. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [MacOS]\r\n - Great Expectations Version: [e.g. 0.17.6]\r\n - Data Source: [Pandas]\r\n \r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8632/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8632/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8631", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8631/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8631/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8631/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8631", "id": 1872105296, "node_id": "I_kwDOBiS_IM5vlg9Q", "number": 8631, "title": "GX to not validate inactive stores", "user": {"login": "HuhtaLauri", "id": 16299982, "node_id": "MDQ6VXNlcjE2Mjk5OTgy", "avatar_url": "https://avatars.githubusercontent.com/u/16299982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HuhtaLauri", "html_url": "https://github.com/HuhtaLauri", "followers_url": "https://api.github.com/users/HuhtaLauri/followers", "following_url": "https://api.github.com/users/HuhtaLauri/following{/other_user}", "gists_url": "https://api.github.com/users/HuhtaLauri/gists{/gist_id}", "starred_url": "https://api.github.com/users/HuhtaLauri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HuhtaLauri/subscriptions", "organizations_url": "https://api.github.com/users/HuhtaLauri/orgs", "repos_url": "https://api.github.com/users/HuhtaLauri/repos", "events_url": "https://api.github.com/users/HuhtaLauri/events{/privacy}", "received_events_url": "https://api.github.com/users/HuhtaLauri/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-08-29T17:28:05Z", "updated_at": "2024-08-23T00:35:02Z", "closed_at": "2024-08-23T00:35:02Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Having stores listed in `great_expectations.yml` that cannot be accessed (i.e. Database in restricted network) will render GX useless even if that store is not in use and listed in the active stores.\r\n\r\n**Describe the solution you'd like**\r\nWhen loading context, only validate the connection into the active stores.\r\nWhen adding stores with `add_store()`-method, allow a flag to bypass the validation.\r\n\r\n**Example:**\r\n\r\n```yml\r\n# great_expectations.yml\r\n\r\nconfig_version: 3.0\r\n\r\ndatasources: {}\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n  expectations_store:\r\n      class_name: ExpectationsStore\r\n      store_backend:\r\n          class_name: TupleFilesystemStoreBackend\r\n          base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  # Troublemaker\r\n  validations_postgres_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: DatabaseStoreBackend\r\n      credentials: ${db_creds}\r\n      table_name: ge_validations\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: 00000000-0000-0000-0000-00000000e003\r\n  enabled: false\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\nfluent_datasources:\r\n\r\n```\r\n\r\nWith this configuration (note that the postgres store is not in use) the following will fail because GX attempts a connection to postgres:\r\n\r\n```python3\r\nfrom great_expectations.util import get_context\r\n\r\ncontext = get_context()\r\n\r\n# sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) connection to server at \"localhost\" (127.0.0.1), port 5432 failed: Connection refused\r\n#        Is the server running on that host and accepting TCP/IP connections?\r\n```\r\n\r\nEven a simple `great_expectations checkpoint list` will fail.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8631/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8631/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8618", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8618/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8618/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8618/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8618", "id": 1866388614, "node_id": "I_kwDOBiS_IM5vPtSG", "number": 8618, "title": "Assets of type query not working for Oracle datasource", "user": {"login": "hjannasch", "id": 6159925, "node_id": "MDQ6VXNlcjYxNTk5MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6159925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjannasch", "html_url": "https://github.com/hjannasch", "followers_url": "https://api.github.com/users/hjannasch/followers", "following_url": "https://api.github.com/users/hjannasch/following{/other_user}", "gists_url": "https://api.github.com/users/hjannasch/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjannasch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjannasch/subscriptions", "organizations_url": "https://api.github.com/users/hjannasch/orgs", "repos_url": "https://api.github.com/users/hjannasch/repos", "events_url": "https://api.github.com/users/hjannasch/events{/privacy}", "received_events_url": "https://api.github.com/users/hjannasch/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 2592316100, "node_id": "MDU6TGFiZWwyNTkyMzE2MTAw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:oracle", "name": "stack:oracle", "color": "ebf7f1", "default": false, "description": ""}, {"id": 6895831417, "node_id": "LA_kwDOBiS_IM8AAAABmwYJeQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/query-asset", "name": "query-asset", "color": "5EE822", "default": false, "description": "Related to use of a FDS QueryAsset"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-08-25T06:18:13Z", "updated_at": "2024-08-22T23:56:00Z", "closed_at": "2024-08-22T23:55:59Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAs our database stack if mainly Oracle based. I tried to setup an expectation suite using a fluent oracledb sql datasource, but using assets of type 'query' it not working.\r\nWell I know you are not supporting Oracle officially, but do you have any idea on this?\r\n\r\n**To Reproduce**\r\n```\r\nfluent_datasources:\r\n  dm:\r\n    type: sql\r\n    assets:\r\n      anrede:\r\n        type: table\r\n        order_by: []\r\n        batch_metadata: {}\r\n        table_name: anrede\r\n        schema_name:\r\n      person_query:\r\n        type: query\r\n        order_by: []\r\n        batch_metadata: {}\r\n        query: select * from PERSON\r\n    connection_string: oracle+oracledb://<user>:<pwd>@localhost:1521/xe`\r\n```\r\n\r\nThe table asset works fine, but the query asset generates a none valid SQL.\r\nWhen the person_query asset is used to create a new validator and suite:\r\n```\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\ndata_asset = context.get_datasource(\"dm\").get_asset(\"person_query\")\r\nbatch_request = data_asset.build_batch_request()\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request,\r\n    expectation_suite_name=\"nat_query_expectation_suite\",\r\n)\r\nvalidator.head()\r\n```\r\nThis leads to the error:\r\nDatabaseError: (oracledb.exceptions.DatabaseError) ORA-00907: missing right parenthesis\r\n[SQL: CREATE GLOBAL TEMPORARY TABLE gx_temp_5da3476a ON COMMIT PRESERVE ROWS AS SELECT * \r\nFROM (SELECT * from PERSON FROM DUAL) anon_1 \r\nWHERE 1 = 1]\r\n\r\n**Expected behavior**\r\nGenerate valid SQL, it looks like ... FROM DUAL is too much here.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.17.12\r\n - Data Source: SQL (Oracle with oracledb driver)\r\n\r\ngreat-expectations==0.17.12\r\nsqlalchemy==2.0.20\r\noracledb==1.4.0\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8618/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8618/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8616", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8616/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8616/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8616/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8616", "id": 1865976311, "node_id": "I_kwDOBiS_IM5vOIn3", "number": 8616, "title": "Add support for key-pair authentication to Snowflake data source", "user": {"login": "bennylu2", "id": 19192410, "node_id": "MDQ6VXNlcjE5MTkyNDEw", "avatar_url": "https://avatars.githubusercontent.com/u/19192410?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bennylu2", "html_url": "https://github.com/bennylu2", "followers_url": "https://api.github.com/users/bennylu2/followers", "following_url": "https://api.github.com/users/bennylu2/following{/other_user}", "gists_url": "https://api.github.com/users/bennylu2/gists{/gist_id}", "starred_url": "https://api.github.com/users/bennylu2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bennylu2/subscriptions", "organizations_url": "https://api.github.com/users/bennylu2/orgs", "repos_url": "https://api.github.com/users/bennylu2/repos", "events_url": "https://api.github.com/users/bennylu2/events{/privacy}", "received_events_url": "https://api.github.com/users/bennylu2/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2356556764, "node_id": "MDU6TGFiZWwyMzU2NTU2NzY0", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:snowflake", "name": "stack:snowflake", "color": "ebf7f1", "default": false, "description": ""}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2023-08-24T22:29:52Z", "updated_at": "2024-06-28T01:15:55Z", "closed_at": "2024-06-19T14:36:51Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nKey-pair authentication was added previously in https://github.com/great-expectations/great_expectations/pull/1662 but the fluent snowflake data source currently does not support this authentication.\r\n\r\n**Describe the solution you'd like**\r\nSupport of key-pair authentication for snowflake data source. The snowflake data source uses sqlalchemy and create_engine behind the scenes. Snowflake SQLAlchemy supports key-pair authentication https://github.com/snowflakedb/snowflake-sqlalchemy#key-pair-authentication-support therefore it is a simple feature to add\r\n\r\n**Describe alternatives you've considered**\r\nAlthough it's still possible to connect to Snowflake using the old data source api using the CLI, we'd like to use and follow the new fluent style\r\n\r\n**Additional context**\r\n- https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/datasource/fluent/snowflake_datasource.py\r\n- https://github.com/great-expectations/great_expectations/blob/bfccfd3ddf25cfff3e2c39162c7b2b1dd33c12b9/great_expectations/datasource/fluent/sources.pyi#L575\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8616/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8616/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8594", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8594/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8594/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8594/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8594", "id": 1859447247, "node_id": "I_kwDOBiS_IM5u1OnP", "number": 8594, "title": "Asset Name not showing on data docs for Spark Dataframe ", "user": {"login": "jmcorreia", "id": 11615737, "node_id": "MDQ6VXNlcjExNjE1NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/11615737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmcorreia", "html_url": "https://github.com/jmcorreia", "followers_url": "https://api.github.com/users/jmcorreia/followers", "following_url": "https://api.github.com/users/jmcorreia/following{/other_user}", "gists_url": "https://api.github.com/users/jmcorreia/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmcorreia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmcorreia/subscriptions", "organizations_url": "https://api.github.com/users/jmcorreia/orgs", "repos_url": "https://api.github.com/users/jmcorreia/repos", "events_url": "https://api.github.com/users/jmcorreia/events{/privacy}", "received_events_url": "https://api.github.com/users/jmcorreia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2023-08-21T14:01:34Z", "updated_at": "2024-06-28T20:39:14Z", "closed_at": "2024-06-28T20:39:01Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI was trying to migrate my spark dataframe asset/source to fluent apis.\r\nIt seems to be working properly, however, the data_docs produced are presenting some inconsistencies.\r\nLegacy:\r\n- everything is filled\r\n- batch id is auto generated\r\n![image](https://github.com/great-expectations/great_expectations/assets/11615737/2aad06fe-65e8-4548-b6e6-a92fbbf8e6e6)\r\n\r\nFluent:\r\n- asset_name not being field\r\n- batch_id seems to have changed it type, as it is now, not an auto generated\r\n![image](https://github.com/great-expectations/great_expectations/assets/11615737/c8886450-ebc7-432e-8224-ac096c98d15c)\r\n\r\n\r\n**To Reproduce**\r\nI have migrated from legacy to fluent datasource definition.\r\nBelow you find my configuration.\r\n\r\n`\r\n        context = great_expectations.get_context(project_config=cls._get_data_context_config())\r\n\r\n        dataframe_datasource = context.sources.add_or_update_spark(\r\n            name=\"datasource\",\r\n            force_reuse_spark_context=True,\r\n            persist=False\r\n        )\r\n\r\n        dataframe_asset = dataframe_datasource.add_dataframe_asset(\r\n            name=\"test\",\r\n            dataframe=df,\r\n            # batch_metadata={\r\n            #     \"batch_identifiers\": DQDefaults.DQ_BATCH_IDENTIFIERS.value\r\n            # }\r\n        )\r\n        assert dataframe_asset.name == \"test\" # this is passing\r\n\r\n        expectation_suite_name = name...\"\"\r\n        context.add_or_update_expectation_suite(\r\n            expectation_suite_name=expectation_suite_name\r\n        )\r\n       \r\n        batch_request = dataframe_asset.build_batch_request()\r\n...\r\n`\r\n\r\n**Expected behavior**\r\nData Asset Name should show up in the site.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Mac OS\r\n - Great Expectations Version: 0.17.11\r\n - Data Source: Spark Dataframe\r\n - Cloud environment: Databricks, Spark\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8594/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8594/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8591", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8591/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8591/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8591/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8591", "id": 1857714549, "node_id": "I_kwDOBiS_IM5uunl1", "number": 8591, "title": "expect_day_sum_to_be_close_to_equivalent_week_day_mean trying to find data for date '2022-08-03'", "user": {"login": "franciskuttivelil", "id": 69468027, "node_id": "MDQ6VXNlcjY5NDY4MDI3", "avatar_url": "https://avatars.githubusercontent.com/u/69468027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/franciskuttivelil", "html_url": "https://github.com/franciskuttivelil", "followers_url": "https://api.github.com/users/franciskuttivelil/followers", "following_url": "https://api.github.com/users/franciskuttivelil/following{/other_user}", "gists_url": "https://api.github.com/users/franciskuttivelil/gists{/gist_id}", "starred_url": "https://api.github.com/users/franciskuttivelil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/franciskuttivelil/subscriptions", "organizations_url": "https://api.github.com/users/franciskuttivelil/orgs", "repos_url": "https://api.github.com/users/franciskuttivelil/repos", "events_url": "https://api.github.com/users/franciskuttivelil/events{/privacy}", "received_events_url": "https://api.github.com/users/franciskuttivelil/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-19T13:39:12Z", "updated_at": "2024-08-22T23:56:12Z", "closed_at": "2024-08-22T23:56:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Description : \r\nI am trying to use the experimental expectation expect_day_sum_to_be_close_to_equivalent_week_day_mean. It gives an exception everytime I try to run it. It seems to be using the value for TODAY that is set for tests i.e. 2022-08-03\r\n\r\nExpectation Config : \r\n```\r\n{\r\n      \"kwargs\": {\r\n        \"template_dict\": {\r\n          \"summed_column\": \"clicks\",\r\n          \"date_column\": \"date\"\r\n        },\r\n        \"query\": \"\\n   \\tSELECT date as date_column, SUM(clicks) as column_sum_over_date\\n   \\tFROM schema_name.table_name\\n    \\tGROUP BY date\\n    \\t\",\r\n        \"run_date\": \"2023-08-16\",\r\n        \"weeks_back\": 1,\r\n        \"threshold\": 0.25,\r\n        \"catch_exceptions\": true\r\n      },\r\n      \"expectation_type\": \"expect_day_sum_to_be_close_to_equivalent_week_day_mean\",\r\n      \"meta\": {}\r\n    },\r\n```\r\n\r\nImplemented code : \r\n```\r\ncontext_ge.save_expectation_suite(suite, \"{}_standard_suite\".format(asset_name))\r\ncheckpoint_config = {\r\n    \"name\": \"{}_Checkpoint\".format(table_name),\r\n    \"config_version\": 1,\r\n    \"class_name\":\"SimpleCheckpoint\",\r\n    \"expectation_suite_name\": \"{}_standard_suite\".format(asset_name)\r\n}\r\ncontext_ge.add_checkpoint(**checkpoint_config)\r\nresults = context_ge.run_checkpoint(\r\n    checkpoint_name=\"{}_Checkpoint\".format(table_name),\r\n    validations=[\r\n        {\"batch_request\": batch_request}\r\n    ]\r\n)\r\n#print(results)\r\nprint(context_ge.open_data_docs())\r\n```\r\n\r\nError :\r\n```\r\nexpect_day_sum_to_be_close_to_equivalent_week_day_mean raised an exception:\r\n'2022-08-03'\r\n[Show exception traceback...](https://mcspgra-grab-dataquality.s3.eu-west-1.amazonaws.com/data_docs/validations/apple_search_ads_spend_ds_standard_suite/__none__/20230819T073813.152224Z/309bc8d68b7033f5cbcc0793225bd9e3.html#section-2-content-block-2-cell-1-2-content-2-collapse-body-f8df2374-1cb9-4aa3-ae1d-7f50758cc1d5)\r\n\r\nTraceback (most recent call last):\r\nFile \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/validator/validator.py\", line 1080, in graph_validate\r\nresult = configuration.metrics_validate(\r\nFile \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/core/expectation_configuration.py\", line 1486, in metrics_validate\r\nreturn expectation_impl(self).metrics_validate(\r\nFile \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations/expectations/expectation.py\", line 1065, in metrics_validate\r\n] = self._validate(\r\nFile \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations_experimental/expectations/expect_day_sum_to_be_close_to_equivalent_week_day_mean.py\", line 210, in _validate\r\ndiff_fraction = get_diff_fraction(yesterday_sum, result_dict, days_back_list)\r\nFile \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations_experimental/expectations/expect_day_sum_to_be_close_to_equivalent_week_day_mean.py\", line 251, in get_diff_fraction\r\nprevious_days_sums: List[int] = [\r\nFile \"/usr/share/tomcat8/.local/lib/python3.8/site-packages/great_expectations_experimental/expectations/expect_day_sum_to_be_close_to_equivalent_week_day_mean.py\", line 252, in\r\nresult_dict[equiv_day] for equiv_day in equivalent_previous_days_str\r\nKeyError: '2022-08-03'\r\n```\r\n\r\n\r\n\r\nEnvironment :\r\n - Operating System: Centos\r\n - Great Expectations Version: 0.17.5\r\n - Data Source: Redshift\r\n - Cloud environment: AWS\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8591/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8591/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8590", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8590/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8590/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8590/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8590", "id": 1857348056, "node_id": "I_kwDOBiS_IM5utOHY", "number": 8590, "title": "Quickstart Bug - context.view_validation_result(checkpoint_result) not opening results", "user": {"login": "Baelfur", "id": 17058000, "node_id": "MDQ6VXNlcjE3MDU4MDAw", "avatar_url": "https://avatars.githubusercontent.com/u/17058000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Baelfur", "html_url": "https://github.com/Baelfur", "followers_url": "https://api.github.com/users/Baelfur/followers", "following_url": "https://api.github.com/users/Baelfur/following{/other_user}", "gists_url": "https://api.github.com/users/Baelfur/gists{/gist_id}", "starred_url": "https://api.github.com/users/Baelfur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Baelfur/subscriptions", "organizations_url": "https://api.github.com/users/Baelfur/orgs", "repos_url": "https://api.github.com/users/Baelfur/repos", "events_url": "https://api.github.com/users/Baelfur/events{/privacy}", "received_events_url": "https://api.github.com/users/Baelfur/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-18T22:16:26Z", "updated_at": "2024-08-22T23:56:27Z", "closed_at": "2024-08-22T23:56:26Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI followed the [Quickstart Guilde](https://docs.greatexpectations.io/docs/tutorials/quickstart/) and when issuing the `context.view_validation_result(checkpoint_result)` command in a vscode notebook, the browser window opens to [This Page](https://www.msn.com/?ocid=iehp)\r\n\r\n**To Reproduce**\r\n```python\r\n# %%\r\nimport great_expectations as gx\r\n\r\n# %%\r\ncontext = gx.get_context()\r\n\r\n# %%\r\nvalidator = context.sources.pandas_default.read_csv(\r\n    \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\"\r\n)\r\n\r\n# %%\r\nvalidator.expect_column_values_to_not_be_null(\"pickup_datetime\")\r\nvalidator.expect_column_values_to_be_between(\"passenger_count\", auto=True)\r\nvalidator.save_expectation_suite()\r\n\r\n# %%\r\ncheckpoint = context.add_or_update_checkpoint(\r\n    name=\"my_quickstart_checkpoint\",\r\n    validator=validator,\r\n)\r\n\r\n# %%\r\ncheckpoint_result = checkpoint.run()\r\n\r\n# %%\r\ncontext.view_validation_result(checkpoint_result)\r\n```\r\n\r\n**Expected behavior**\r\nI expected the browser window to load some sort of profile output\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: \r\nEdition\tWindows 11 Pro\r\nVersion\t22H2\r\nInstalled on\t\u200e6/\u200e10/\u200e2023\r\nOS build\t22621.2134\r\nExperience\tWindows Feature Experience Pack 1000.22659.1000.0\r\n\r\nPS C:\\Users\\usr> systeminfo | findstr /B /C:\"OS Version\"\r\nOS Version:                10.0.22621 N/A Build 22621\r\n\r\n- Default Browser:\r\nPS C:\\Users\\usr> reg query \"HKEY_CURRENT_USER\\Software\\Microsoft\\Edge\\BLBeacon\" /v version\r\n\r\nHKEY_CURRENT_USER\\Software\\Microsoft\\Edge\\BLBeacon\r\n    version    REG_SZ    115.0.1901.203\r\n\r\n - Great Expectations Version: [e.g. 0.13.2]\r\n (.venv) PS C:\\Users\\usr\\OneDrive\\Documents\\dev\\personal\\gx_dev> great_expectations --version\r\ngreat_expectations, version 0.17.10+0.g0d308ac69.dirty\r\n\r\n- Python Version: \r\n(.venv) PS C:\\Users\\usr\\OneDrive\\Documents\\dev\\personal\\gx_dev> python --version\r\nPython 3.11.4\r\n\r\n - Data Source: [e.g. Pandas, Snowflake]\r\n \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\"\r\n\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n local\r\n\r\n**Additional context**\r\n**vsCode version**\r\n(.venv) PS C:\\Users\\usr\\OneDrive\\Documents\\dev\\personal\\gx_dev> code --version\r\n1.81.1\r\n6c3e3dba23e8fadc360aed75ce363ba185c49794\r\nx64\r\n\r\n**installed packages**\r\n(.venv) PS C:\\Users\\usr\\OneDrive\\Documents\\dev\\personal\\gx_dev> pip list --local\r\nPackage                   Version\r\n------------------------- -----------\r\naltair                    4.2.2\r\nanyio                     3.7.1\r\nargon2-cffi               23.1.0\r\nargon2-cffi-bindings      21.2.0\r\narrow                     1.2.3\r\nasttokens                 2.2.1\r\nasync-lru                 2.0.4\r\nattrs                     23.1.0\r\nBabel                     2.12.1\r\nbackcall                  0.2.0\r\nbeautifulsoup4            4.12.2\r\nbleach                    6.0.0\r\ncertifi                   2023.7.22\r\ncffi                      1.15.1\r\ncharset-normalizer        3.2.0\r\nclick                     8.1.7\r\ncolorama                  0.4.6\r\ncomm                      0.1.4\r\ncryptography              41.0.3\r\ndebugpy                   1.6.7.post1\r\ndecorator                 5.1.1\r\ndefusedxml                0.7.1\r\nentrypoints               0.4\r\nexecuting                 1.2.0\r\nfastjsonschema            2.18.0\r\nfqdn                      1.5.1\r\ngreat-expectations        0.17.11\r\nidna                      3.4\r\nipykernel                 6.25.1\r\nipython                   8.14.0\r\nipython-genutils          0.2.0\r\nipywidgets                8.1.0\r\nisoduration               20.11.0\r\njedi                      0.19.0\r\nJinja2                    3.1.2\r\njson5                     0.9.14\r\njsonpatch                 1.33\r\njsonpointer               2.4\r\njsonschema                4.19.0\r\njsonschema-specifications 2023.7.1\r\njupyter                   1.0.0\r\njupyter_client            8.3.0\r\njupyter-console           6.6.3\r\njupyter_core              5.3.1\r\njupyter-events            0.7.0\r\njupyter-lsp               2.2.0\r\njupyter_server            2.7.2\r\njupyter_server_terminals  0.4.4\r\njupyterlab                4.0.5\r\njupyterlab-pygments       0.2.2\r\njupyterlab_server         2.24.0\r\njupyterlab-widgets        3.0.8\r\nmakefun                   1.15.1\r\nMarkupSafe                2.1.3\r\nmarshmallow               3.20.1\r\nmatplotlib-inline         0.1.6\r\nmistune                   3.0.1\r\nnbclient                  0.8.0\r\nnbconvert                 7.7.4\r\nnbformat                  5.9.2\r\nnest-asyncio              1.5.7\r\nnotebook                  7.0.2\r\nnotebook_shim             0.2.3\r\nnumpy                     1.25.2\r\noverrides                 7.4.0\r\npackaging                 23.1\r\npandas                    2.0.3\r\npandocfilters             1.5.0\r\nparso                     0.8.3\r\npickleshare               0.7.5\r\npip                       23.2.1\r\nplatformdirs              3.10.0\r\nprometheus-client         0.17.1\r\nprompt-toolkit            3.0.39\r\npsutil                    5.9.5\r\npure-eval                 0.2.2\r\npycparser                 2.21\r\npydantic                  1.10.12\r\nPygments                  2.16.1\r\npyparsing                 3.1.1\r\npython-dateutil           2.8.2\r\npython-json-logger        2.0.7\r\npytz                      2023.3\r\npywin32                   306\r\npywinpty                  2.0.11\r\nPyYAML                    6.0.1\r\npyzmq                     25.1.1\r\nqtconsole                 5.4.3\r\nQtPy                      2.3.1\r\nreferencing               0.30.2\r\nrequests                  2.31.0\r\nrfc3339-validator         0.1.4\r\nrfc3986-validator         0.1.1\r\nrpds-py                   0.9.2\r\nruamel.yaml               0.17.17\r\nscipy                     1.11.2\r\nSend2Trash                1.8.2\r\nsetuptools                65.5.0\r\nsix                       1.16.0\r\nsniffio                   1.3.0\r\nsoupsieve                 2.4.1\r\nstack-data                0.6.2\r\nterminado                 0.17.1\r\ntinycss2                  1.2.1\r\ntoolz                     0.12.0\r\ntornado                   6.3.3\r\ntqdm                      4.66.1\r\ntraitlets                 5.9.0\r\ntyping_extensions         4.7.1\r\ntzdata                    2023.3\r\ntzlocal                   5.0.1\r\nuri-template              1.3.0\r\nurllib3                   2.0.4\r\nwcwidth                   0.2.6\r\nwebcolors                 1.13\r\nwebencodings              0.5.1\r\nwebsocket-client          1.6.1\r\nwidgetsnbextension        4.0.8", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8590/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8590/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8566", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8566/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8566/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8566/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8566", "id": 1853699892, "node_id": "I_kwDOBiS_IM5ufTc0", "number": 8566, "title": "expect_compound_columns_to_be_unique with problems with timestamps", "user": {"login": "guicorsi", "id": 52184436, "node_id": "MDQ6VXNlcjUyMTg0NDM2", "avatar_url": "https://avatars.githubusercontent.com/u/52184436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guicorsi", "html_url": "https://github.com/guicorsi", "followers_url": "https://api.github.com/users/guicorsi/followers", "following_url": "https://api.github.com/users/guicorsi/following{/other_user}", "gists_url": "https://api.github.com/users/guicorsi/gists{/gist_id}", "starred_url": "https://api.github.com/users/guicorsi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guicorsi/subscriptions", "organizations_url": "https://api.github.com/users/guicorsi/orgs", "repos_url": "https://api.github.com/users/guicorsi/repos", "events_url": "https://api.github.com/users/guicorsi/events{/privacy}", "received_events_url": "https://api.github.com/users/guicorsi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-16T18:13:25Z", "updated_at": "2024-08-22T23:56:39Z", "closed_at": "2024-08-22T23:56:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHey, i'd tried to use the expect_compound_columns_to_be_unique expectation in a dataset with a timestamp column and i received the following error:\r\n\r\n```\r\npython3.9/site-packages/great_expectations/execution_engine/execution_engine.py\", line 550, in _process_direct_and_bundled_metric_computation_configurations\r\nraise gx_exceptions.MetricResolutionError(\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: Casting to unit-less dtype 'datetime64' is not supported. Pass e.g. 'datetime64[ns]' instead.\r\n\r\n```\r\n\r\n**To Reproduce**\r\ntry to use this expectation in a dataset containing timestamp columns. example of the column value that brought this bug:\r\n2023-07-14 00:00:00\r\n\r\n**Expected behavior**\r\nthe expectation should not break with that kind of data\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Mac OS M1\r\n - Great Expectations Version: 0.17.9\r\n - Data Source: parquet processed with PySpark\r\n - Cloud environment: local\r\n\r\n**Additional context**\r\nit seems to be a simple casting problem, I cast the timestamp column to date and it worked.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8566/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8566/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8537", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8537/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8537/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8537/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8537", "id": 1846703375, "node_id": "I_kwDOBiS_IM5uEnUP", "number": 8537, "title": "ClickHouse broken with expect_column_values_to_be_unique expectation", "user": {"login": "ricardo-barreira", "id": 129752909, "node_id": "U_kgDOB7vfTQ", "avatar_url": "https://avatars.githubusercontent.com/u/129752909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ricardo-barreira", "html_url": "https://github.com/ricardo-barreira", "followers_url": "https://api.github.com/users/ricardo-barreira/followers", "following_url": "https://api.github.com/users/ricardo-barreira/following{/other_user}", "gists_url": "https://api.github.com/users/ricardo-barreira/gists{/gist_id}", "starred_url": "https://api.github.com/users/ricardo-barreira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ricardo-barreira/subscriptions", "organizations_url": "https://api.github.com/users/ricardo-barreira/orgs", "repos_url": "https://api.github.com/users/ricardo-barreira/repos", "events_url": "https://api.github.com/users/ricardo-barreira/events{/privacy}", "received_events_url": "https://api.github.com/users/ricardo-barreira/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-08-11T12:01:16Z", "updated_at": "2024-08-22T23:56:52Z", "closed_at": "2024-08-22T23:56:51Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Description**\r\nWhen using the expect_column_values_to_be_unique expectation with ClickHouse as the backend, I encountered an error related to the Decimal data type. The error message suggests there's an issue with how Great Expectations is generating the SQL query for this specific expectation. The issue seems to be related to the _sqlalchemy_window method in the column_values_unique.py Metric.\r\n\r\n**To Reproduce**\r\nRun the following code:\r\n```python\r\nimport great_expectations as gx\r\n\r\nusername = \"username\"\r\npassword = \"password\"\r\nhost = \"host\"\r\nnative_port = 11111\r\nschema = \"schema\"\r\n\r\nconnection_string = f\"clickhouse+native://{username}:{password}@{host}:{native_port}/{schema}?secure=True\"\r\n\r\ncontext = gx.get_context()\r\ndatasource = context.sources.add_sql(\r\n    name=\"test_datasource\", connection_string=connection_string\r\n)\r\n\r\ntable_asset = datasource.add_table_asset(name=\"test_table_asset\", table_name=\"target_table\")\r\nbatch_request = table_asset.build_batch_request()\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite_name=\"test_expectation_suite\"\r\n)\r\n\r\nvalidator.expect_column_values_to_be_unique(column=\"target_col\")\r\n\r\n```\r\nGenerated datasource in the great_expectations.yml: \r\n\r\n```yaml\r\n(...)\r\nfluent_datasources:\r\n  test_datasource:\r\n    type: sql\r\n    connection_string: clickhouse+native://username:password@host:11111/schema?secure=True\r\n```\r\nError stack trace:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nServerException                           Traceback (most recent call last)\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py:152](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py:152), in Cursor.execute(self, operation, parameters, context)\r\n    150     execute, execute_kwargs = self._prepare(context)\r\n--> 152     response = execute(\r\n    153         operation, params=parameters, with_column_types=True,\r\n    154         **execute_kwargs\r\n    155     )\r\n    157 except DriverError as orig:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:373](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:373), in Client.execute(self, query, params, with_column_types, external_tables, query_id, settings, types_check, columnar)\r\n    372 else:\r\n--> 373     rv = self.process_ordinary_query(\r\n    374         query, params=params, with_column_types=with_column_types,\r\n    375         external_tables=external_tables,\r\n    376         query_id=query_id, types_check=types_check,\r\n    377         columnar=columnar\r\n    378     )\r\n    379 self.last_query.store_elapsed(time() - start_time)\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:571](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:571), in Client.process_ordinary_query(self, query, params, with_column_types, external_tables, query_id, types_check, columnar)\r\n    569 self.connection.send_external_tables(external_tables,\r\n    570                                      types_check=types_check)\r\n--> 571 return self.receive_result(with_column_types=with_column_types,\r\n    572                            columnar=columnar)\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:204](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:204), in Client.receive_result(self, with_column_types, progress, columnar)\r\n    201 result = self.query_result_cls(\r\n    202     gen, with_column_types=with_column_types, columnar=columnar\r\n    203 )\r\n--> 204 return result.get_result()\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/result.py:50](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/result.py:50), in QueryResult.get_result(self)\r\n     46 \"\"\"\r\n     47 :return: stored query result.\r\n     48 \"\"\"\r\n---> 50 for packet in self.packet_generator:\r\n     51     self.store(packet)\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:220](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:220), in Client.packet_generator(self)\r\n    219 try:\r\n--> 220     packet = self.receive_packet()\r\n    221     if not packet:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:237](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_driver/client.py:237), in Client.receive_packet(self)\r\n    236 if packet.type == ServerPacketTypes.EXCEPTION:\r\n--> 237     raise packet.exception\r\n    239 elif packet.type == ServerPacketTypes.PROGRESS:\r\n\r\nServerException: Code: 43.\r\nDB::Exception: Decimal data type family must have two numbers as its arguments: While processing if((target_col IS NOT NULL) AND (target_col IN ((SELECT target_col FROM (SELECT * FROM target_table WHERE true) AS anon_2 GROUP BY target_col HAVING count(target_col) > 1) AS _subquery1912405)), CAST(1, 'Decimal(None, None)'), CAST(0, 'Decimal(None, None)')) AS condition. Stack trace:\r\n\r\n0. Poco::Exception::Exception(String const&, int) in /usr/bin/clickhouse\r\n1. DB::Exception::Exception(DB::Exception::MessageMasked&&, int, bool) in /usr/bin/clickhouse\r\n2. DB::Exception::Exception(int, char const (&) [64]) in /usr/bin/clickhouse\r\n3. DB::create(std::shared_ptr const&) in /usr/bin/clickhouse\r\n4. std::shared_ptr DB::DataTypeFactory::getImpl(String const&, std::shared_ptr const&) const in /usr/bin/clickhouse\r\n5. std::shared_ptr DB::DataTypeFactory::getImpl(String const&) const in /usr/bin/clickhouse\r\n6. DB::CastOverloadResolverImpl<(DB::CastType)0, false, DB::CastOverloadName, DB::CastName>::getReturnTypeImpl(std::vector> const&) const in /usr/bin/clickhouse\r\n7. DB::IFunctionOverloadResolver::getReturnTypeWithoutLowCardinality(std::vector> const&) const in /usr/bin/clickhouse\r\n8. DB::IFunctionOverloadResolver::getReturnType(std::vector> const&) const in /usr/bin/clickhouse\r\n9. DB::IFunctionOverloadResolver::build(std::vector> const&) const in /usr/bin/clickhouse\r\n10. DB::ActionsDAG::addFunction(std::shared_ptr const&, std::vector>, String) in /usr/bin/clickhouse\r\n11. DB::ScopeStack::addFunction(std::shared_ptr const&, std::vector> const&, String) in /usr/bin/clickhouse\r\n12. DB::ActionsMatcher::Data::addFunction(std::shared_ptr const&, std::vector> const&, String) in /usr/bin/clickhouse\r\n13. DB::ActionsMatcher::visit(DB::ASTFunction const&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n14. DB::ActionsMatcher::visit(DB::ASTFunction const&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n15. DB::ActionsMatcher::visit(DB::ASTExpressionList&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n16. DB::InDepthNodeVisitor const>::doVisit(std::shared_ptr const&) in /usr/bin/clickhouse\r\n17. DB::ExpressionAnalyzer::getRootActions(std::shared_ptr const&, bool, std::shared_ptr&, bool) in /usr/bin/clickhouse\r\n18. DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) in /usr/bin/clickhouse\r\n19. DB::ExpressionAnalysisResult::ExpressionAnalysisResult(DB::SelectQueryExpressionAnalyzer&, std::shared_ptr const&, bool, bool, bool, std::shared_ptr const&, std::shared_ptr const&, DB::Block const&) in /usr/bin/clickhouse\r\n20. DB::InterpreterSelectQuery::getSampleBlockImpl() in /usr/bin/clickhouse\r\n21. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr)::$_4::operator()(bool) const in /usr/bin/clickhouse\r\n22. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr) in /usr/bin/clickhouse\r\n23. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n24. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::shared_ptr const&, std::vector> const&) in /usr/bin/clickhouse\r\n25. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::shared_ptr const&, std::shared_ptr, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n26. DB::InterpreterSelectWithUnionQuery::getSampleBlock(std::shared_ptr const&, std::shared_ptr, bool, bool) in /usr/bin/clickhouse\r\n27. DB::getDatabaseAndTablesWithColumns(std::vector> const&, std::shared_ptr, bool, bool, bool) in /usr/bin/clickhouse\r\n28. DB::JoinedTables::resolveTables() in /usr/bin/clickhouse\r\n29. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr) in /usr/bin/clickhouse\r\n30. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n31. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::shared_ptr const&, std::vector> const&) in /usr/bin/clickhouse\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nDatabaseException                         Traceback (most recent call last)\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:546](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:546), in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    543 try:\r\n    544     resolved_metrics[\r\n    545         metric_computation_configuration.metric_configuration.id\r\n--> 546     ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    547         **metric_computation_configuration.metric_provider_kwargs\r\n    548     )\r\n    549 except Exception as e:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/expectations/metrics/map_metric_provider/map_condition_auxilliary_methods.py:353](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/expectations/metrics/map_metric_provider/map_condition_auxilliary_methods.py:353), in _sqlalchemy_map_condition_unexpected_count_value(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, metrics, **kwargs)\r\n    346 unexpected_count_query: sqlalchemy.Select = (\r\n    347     sa.select(\r\n    348         sa.func.sum(sa.column(\"condition\")).label(\"unexpected_count\"),\r\n   (...)\r\n    351     .alias(\"UnexpectedCountSubquery\")\r\n    352 )\r\n--> 353 unexpected_count: Union[float, int] = execution_engine.execute_query(\r\n    354     sa.select(\r\n    355         unexpected_count_query.c[\r\n    356             f\"{SummarizationMetricNameSuffixes.UNEXPECTED_COUNT.value}\"\r\n    357         ],\r\n    358     )\r\n    359 ).scalar()\r\n    360 # Unexpected count can be None if the table is empty, in which case the count\r\n    361 # should default to zero.\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py:1416](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py:1416), in SqlAlchemyExecutionEngine.execute_query(self, query)\r\n   1415 with self.get_connection() as connection:\r\n-> 1416     result = connection.execute(query)\r\n   1418 return result\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1385](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1385), in Connection.execute(self, statement, *multiparams, **params)\r\n   1384 else:\r\n-> 1385     return meth(self, multiparams, params, _EMPTY_EXECUTION_OPTS)\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/sql/elements.py:334](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/sql/elements.py:334), in ClauseElement._execute_on_connection(self, connection, multiparams, params, execution_options, _force)\r\n    333 if _force or self.supports_execution:\r\n--> 334     return connection._execute_clauseelement(\r\n    335         self, multiparams, params, execution_options\r\n    336     )\r\n    337 else:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1577](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1577), in Connection._execute_clauseelement(self, elem, multiparams, params, execution_options)\r\n   1569 compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(\r\n   1570     dialect=dialect,\r\n   1571     compiled_cache=compiled_cache,\r\n   (...)\r\n   1575     linting=self.dialect.compiler_linting | compiler.WARN_LINTING,\r\n   1576 )\r\n-> 1577 ret = self._execute_context(\r\n   1578     dialect,\r\n   1579     dialect.execution_ctx_cls._init_compiled,\r\n   1580     compiled_sql,\r\n   1581     distilled_params,\r\n   1582     execution_options,\r\n   1583     compiled_sql,\r\n   1584     distilled_params,\r\n   1585     elem,\r\n   1586     extracted_params,\r\n   1587     cache_hit=cache_hit,\r\n   1588 )\r\n   1589 if has_events:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1953](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1953), in Connection._execute_context(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)\r\n   1952 except BaseException as e:\r\n-> 1953     self._handle_dbapi_exception(\r\n   1954         e, statement, parameters, cursor, context\r\n   1955     )\r\n   1957 return result\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:2138](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:2138), in Connection._handle_dbapi_exception(self, e, statement, parameters, cursor, context)\r\n   2137     else:\r\n-> 2138         util.raise_(exc_info[1], with_traceback=exc_info[2])\r\n   2140 finally:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/util/compat.py:211](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/util/compat.py:211), in raise_(***failed resolving arguments***)\r\n    210 try:\r\n--> 211     raise exception\r\n    212 finally:\r\n    213     # credit to\r\n    214     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/\r\n    215     # as the __traceback__ object creates a cycle\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1910](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1910), in Connection._execute_context(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)\r\n   1909     if not evt_handled:\r\n-> 1910         self.dialect.do_execute(\r\n   1911             cursor, statement, parameters, context\r\n   1912         )\r\n   1914 if self._has_events or self.engine._has_events:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/base.py:416](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/base.py:416), in ClickHouseDialect.do_execute(self, cursor, statement, parameters, context)\r\n    415 def do_execute(self, cursor, statement, parameters, context=None):\r\n--> 416     cursor.execute(statement, parameters, context=context)\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py:158](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py:158), in Cursor.execute(self, operation, parameters, context)\r\n    157 except DriverError as orig:\r\n--> 158     raise DatabaseException(orig)\r\n    160 self._process_response(response)\r\n\r\nDatabaseException: Orig exception: Code: 43.\r\nDB::Exception: Decimal data type family must have two numbers as its arguments: While processing if((target_col IS NOT NULL) AND (target_col IN ((SELECT target_col FROM (SELECT * FROM target_table WHERE true) AS anon_2 GROUP BY target_col HAVING count(target_col) > 1) AS _subquery1912405)), CAST(1, 'Decimal(None, None)'), CAST(0, 'Decimal(None, None)')) AS condition. Stack trace:\r\n\r\n0. Poco::Exception::Exception(String const&, int) in /usr/bin/clickhouse\r\n1. DB::Exception::Exception(DB::Exception::MessageMasked&&, int, bool) in /usr/bin/clickhouse\r\n2. DB::Exception::Exception(int, char const (&) [64]) in /usr/bin/clickhouse\r\n3. DB::create(std::shared_ptr const&) in /usr/bin/clickhouse\r\n4. std::shared_ptr DB::DataTypeFactory::getImpl(String const&, std::shared_ptr const&) const in /usr/bin/clickhouse\r\n5. std::shared_ptr DB::DataTypeFactory::getImpl(String const&) const in /usr/bin/clickhouse\r\n6. DB::CastOverloadResolverImpl<(DB::CastType)0, false, DB::CastOverloadName, DB::CastName>::getReturnTypeImpl(std::vector> const&) const in /usr/bin/clickhouse\r\n7. DB::IFunctionOverloadResolver::getReturnTypeWithoutLowCardinality(std::vector> const&) const in /usr/bin/clickhouse\r\n8. DB::IFunctionOverloadResolver::getReturnType(std::vector> const&) const in /usr/bin/clickhouse\r\n9. DB::IFunctionOverloadResolver::build(std::vector> const&) const in /usr/bin/clickhouse\r\n10. DB::ActionsDAG::addFunction(std::shared_ptr const&, std::vector>, String) in /usr/bin/clickhouse\r\n11. DB::ScopeStack::addFunction(std::shared_ptr const&, std::vector> const&, String) in /usr/bin/clickhouse\r\n12. DB::ActionsMatcher::Data::addFunction(std::shared_ptr const&, std::vector> const&, String) in /usr/bin/clickhouse\r\n13. DB::ActionsMatcher::visit(DB::ASTFunction const&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n14. DB::ActionsMatcher::visit(DB::ASTFunction const&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n15. DB::ActionsMatcher::visit(DB::ASTExpressionList&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n16. DB::InDepthNodeVisitor const>::doVisit(std::shared_ptr const&) in /usr/bin/clickhouse\r\n17. DB::ExpressionAnalyzer::getRootActions(std::shared_ptr const&, bool, std::shared_ptr&, bool) in /usr/bin/clickhouse\r\n18. DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) in /usr/bin/clickhouse\r\n19. DB::ExpressionAnalysisResult::ExpressionAnalysisResult(DB::SelectQueryExpressionAnalyzer&, std::shared_ptr const&, bool, bool, bool, std::shared_ptr const&, std::shared_ptr const&, DB::Block const&) in /usr/bin/clickhouse\r\n20. DB::InterpreterSelectQuery::getSampleBlockImpl() in /usr/bin/clickhouse\r\n21. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr)::$_4::operator()(bool) const in /usr/bin/clickhouse\r\n22. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr) in /usr/bin/clickhouse\r\n23. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n24. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::shared_ptr const&, std::vector> const&) in /usr/bin/clickhouse\r\n25. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::shared_ptr const&, std::shared_ptr, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n26. DB::InterpreterSelectWithUnionQuery::getSampleBlock(std::shared_ptr const&, std::shared_ptr, bool, bool) in /usr/bin/clickhouse\r\n27. DB::getDatabaseAndTablesWithColumns(std::vector> const&, std::shared_ptr, bool, bool, bool) in /usr/bin/clickhouse\r\n28. DB::JoinedTables::resolveTables() in /usr/bin/clickhouse\r\n29. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr) in /usr/bin/clickhouse\r\n30. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n31. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::shared_ptr const&, std::vector> const&) in /usr/bin/clickhouse\r\n\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nCell In[10], line 1\r\n----> 1 validator.expect_column_values_to_be_unique(column=\"target_col\")\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:600](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:600), in Validator.validate_expectation..inst_expectation(*args, **kwargs)\r\n    594         validation_result = ExpectationValidationResult(\r\n    595             success=False,\r\n    596             exception_info=exception_info,\r\n    597             expectation_config=configuration,\r\n    598         )\r\n    599     else:\r\n--> 600         raise err\r\n    602 if self._include_rendered_content:\r\n    603     validation_result.render()\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:563](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:563), in Validator.validate_expectation..inst_expectation(*args, **kwargs)\r\n    559     validation_result = ExpectationValidationResult(\r\n    560         expectation_config=copy.deepcopy(expectation.configuration)\r\n    561     )\r\n    562 else:\r\n--> 563     validation_result = expectation.validate(\r\n    564         validator=self,\r\n    565         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    566         data_context=self._data_context,\r\n    567         runtime_configuration=basic_runtime_configuration,\r\n    568     )\r\n    570 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    571 # saving updating expectation configs to the same suite during validation runs\r\n    572 if self._active_validation is True:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1276](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1276), in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1267 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1268     configuration=configuration\r\n   1269 )\r\n   1271 configuration.process_evaluation_parameters(\r\n   1272     evaluation_parameters, interactive_evaluation, data_context\r\n   1273 )\r\n   1274 expectation_validation_result_list: list[\r\n   1275     ExpectationValidationResult\r\n-> 1276 ] = validator.graph_validate(\r\n   1277     configurations=[configuration],\r\n   1278     runtime_configuration=runtime_configuration,\r\n   1279 )\r\n   1280 return expectation_validation_result_list[0]\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:1075](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:1075), in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1073         return evrs\r\n   1074     else:\r\n-> 1075         raise err\r\n   1077 configuration: ExpectationConfiguration\r\n   1078 result: ExpectationValidationResult\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:1054](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:1054), in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1047 resolved_metrics: _MetricsDict\r\n   1049 try:\r\n   1050     (\r\n   1051         resolved_metrics,\r\n   1052         evrs,\r\n   1053         processed_configurations,\r\n-> 1054     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n   1055         graph=graph,\r\n   1056         runtime_configuration=runtime_configuration,\r\n   1057         expectation_validation_graphs=expectation_validation_graphs,\r\n   1058         evrs=evrs,\r\n   1059         processed_configurations=processed_configurations,\r\n   1060         show_progress_bars=self._determine_progress_bars(),\r\n   1061     )\r\n   1062 except Exception as err:\r\n   1063     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then\r\n   1064     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n   1065     if catch_exceptions:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:1213](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validator.py:1213), in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n   1205 resolved_metrics: _MetricsDict\r\n   1206 aborted_metrics_info: Dict[\r\n   1207     _MetricKey,\r\n   1208     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n   1209 ]\r\n   1210 (\r\n   1211     resolved_metrics,\r\n   1212     aborted_metrics_info,\r\n-> 1213 ) = self._metrics_calculator.resolve_validation_graph(\r\n   1214     graph=graph,\r\n   1215     runtime_configuration=runtime_configuration,\r\n   1216     min_graph_edges_pbar_enable=0,\r\n   1217 )\r\n   1219 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.\r\n   1220 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:287](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:287), in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    282 resolved_metrics: _MetricsDict\r\n    283 aborted_metrics_info: Dict[\r\n    284     _MetricKey,\r\n    285     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n    286 ]\r\n--> 287 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    288     runtime_configuration=runtime_configuration,\r\n    289     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    290     show_progress_bars=self._show_progress_bars,\r\n    291 )\r\n    292 return resolved_metrics, aborted_metrics_info\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:207](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:207), in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    201 resolved_metrics: Dict[_MetricKey, MetricValue] = {}\r\n    203 # updates graph with aborted metrics\r\n    204 aborted_metrics_info: Dict[\r\n    205     _MetricKey,\r\n    206     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n--> 207 ] = self._resolve(\r\n    208     metrics=resolved_metrics,\r\n    209     runtime_configuration=runtime_configuration,\r\n    210     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    211     show_progress_bars=show_progress_bars,\r\n    212 )\r\n    214 return resolved_metrics, aborted_metrics_info\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:313](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:313), in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    309                 failed_metric_info[failed_metric.id][\"exception_info\"] = {\r\n    310                     exception_info\r\n    311                 }\r\n    312     else:\r\n--> 313         raise err\r\n    314 except Exception as e:\r\n    315     if catch_exceptions:\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:283](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:283), in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    278         computable_metrics.add(metric)\r\n    280 try:\r\n    281     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.\r\n    282     metrics.update(\r\n--> 283         self._execution_engine.resolve_metrics(\r\n    284             metrics_to_resolve=computable_metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    285             metrics=metrics,  # type: ignore[arg-type]  # Metric typing needs further refinement.\r\n    286             runtime_configuration=runtime_configuration,\r\n    287         )\r\n    288     )\r\n    289     progress_bar.update(len(computable_metrics))\r\n    290     progress_bar.refresh()\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:281](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:281), in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    272 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    273 (\r\n    274     metric_fn_direct_configurations,\r\n    275     metric_fn_bundle_configurations,\r\n   (...)\r\n    279     runtime_configuration=runtime_configuration,\r\n    280 )\r\n--> 281 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    282     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    283     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    284 )\r\n\r\nFile [/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:550](https://file+.vscode-resource.vscode-cdn.net/opt/homebrew/Caskroom/miniconda/base/envs/gx_env/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:550), in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    544         resolved_metrics[\r\n    545             metric_computation_configuration.metric_configuration.id\r\n    546         ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    547             **metric_computation_configuration.metric_provider_kwargs\r\n    548         )\r\n    549     except Exception as e:\r\n--> 550         raise gx_exceptions.MetricResolutionError(\r\n    551             message=str(e),\r\n    552             failed_metrics=(\r\n    553                 metric_computation_configuration.metric_configuration,\r\n    554             ),\r\n    555         ) from e\r\n    557 try:\r\n    558     # an engine-specific way of computing metrics together\r\n    559     resolved_metric_bundle: Dict[\r\n    560         Tuple[str, str, str], MetricValue\r\n    561     ] = self.resolve_metric_bundle(\r\n    562         metric_fn_bundle=metric_fn_bundle_configurations\r\n    563     )\r\n\r\nMetricResolutionError: Orig exception: Code: 43.\r\nDB::Exception: Decimal data type family must have two numbers as its arguments: While processing if((target_col IS NOT NULL) AND (target_col IN ((SELECT target_col FROM (SELECT * FROM target_table WHERE true) AS anon_2 GROUP BY target_col HAVING count(target_col) > 1) AS _subquery1912405)), CAST(1, 'Decimal(None, None)'), CAST(0, 'Decimal(None, None)')) AS condition. Stack trace:\r\n\r\n0. Poco::Exception::Exception(String const&, int) in /usr/bin/clickhouse\r\n1. DB::Exception::Exception(DB::Exception::MessageMasked&&, int, bool) in /usr/bin/clickhouse\r\n2. DB::Exception::Exception(int, char const (&) [64]) in /usr/bin/clickhouse\r\n3. DB::create(std::shared_ptr const&) in /usr/bin/clickhouse\r\n4. std::shared_ptr DB::DataTypeFactory::getImpl(String const&, std::shared_ptr const&) const in /usr/bin/clickhouse\r\n5. std::shared_ptr DB::DataTypeFactory::getImpl(String const&) const in /usr/bin/clickhouse\r\n6. DB::CastOverloadResolverImpl<(DB::CastType)0, false, DB::CastOverloadName, DB::CastName>::getReturnTypeImpl(std::vector> const&) const in /usr/bin/clickhouse\r\n7. DB::IFunctionOverloadResolver::getReturnTypeWithoutLowCardinality(std::vector> const&) const in /usr/bin/clickhouse\r\n8. DB::IFunctionOverloadResolver::getReturnType(std::vector> const&) const in /usr/bin/clickhouse\r\n9. DB::IFunctionOverloadResolver::build(std::vector> const&) const in /usr/bin/clickhouse\r\n10. DB::ActionsDAG::addFunction(std::shared_ptr const&, std::vector>, String) in /usr/bin/clickhouse\r\n11. DB::ScopeStack::addFunction(std::shared_ptr const&, std::vector> const&, String) in /usr/bin/clickhouse\r\n12. DB::ActionsMatcher::Data::addFunction(std::shared_ptr const&, std::vector> const&, String) in /usr/bin/clickhouse\r\n13. DB::ActionsMatcher::visit(DB::ASTFunction const&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n14. DB::ActionsMatcher::visit(DB::ASTFunction const&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n15. DB::ActionsMatcher::visit(DB::ASTExpressionList&, std::shared_ptr const&, DB::ActionsMatcher::Data&) in /usr/bin/clickhouse\r\n16. DB::InDepthNodeVisitor const>::doVisit(std::shared_ptr const&) in /usr/bin/clickhouse\r\n17. DB::ExpressionAnalyzer::getRootActions(std::shared_ptr const&, bool, std::shared_ptr&, bool) in /usr/bin/clickhouse\r\n18. DB::SelectQueryExpressionAnalyzer::appendSelect(DB::ExpressionActionsChain&, bool) in /usr/bin/clickhouse\r\n19. DB::ExpressionAnalysisResult::ExpressionAnalysisResult(DB::SelectQueryExpressionAnalyzer&, std::shared_ptr const&, bool, bool, bool, std::shared_ptr const&, std::shared_ptr const&, DB::Block const&) in /usr/bin/clickhouse\r\n20. DB::InterpreterSelectQuery::getSampleBlockImpl() in /usr/bin/clickhouse\r\n21. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr)::$_4::operator()(bool) const in /usr/bin/clickhouse\r\n22. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr) in /usr/bin/clickhouse\r\n23. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n24. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::shared_ptr const&, std::vector> const&) in /usr/bin/clickhouse\r\n25. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::shared_ptr const&, std::shared_ptr, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n26. DB::InterpreterSelectWithUnionQuery::getSampleBlock(std::shared_ptr const&, std::shared_ptr, bool, bool) in /usr/bin/clickhouse\r\n27. DB::getDatabaseAndTablesWithColumns(std::vector> const&, std::shared_ptr, bool, bool, bool) in /usr/bin/clickhouse\r\n28. DB::JoinedTables::resolveTables() in /usr/bin/clickhouse\r\n29. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, std::optional, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&, std::shared_ptr const&, std::shared_ptr) in /usr/bin/clickhouse\r\n30. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::shared_ptr const&, std::shared_ptr const&, DB::SelectQueryOptions const&, std::vector> const&) in /usr/bin/clickhouse\r\n31. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::shared_ptr const&, std::vector> const&) in /usr/bin/clickhouse\r\n```\r\n**Expected behavior**\r\nThe expectation should run without any errors.\r\n\r\n**Environment:**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.17.7\r\n - Data Source: ClickHouse\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8537/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8537/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8535", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8535/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8535/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8535/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8535", "id": 1846061765, "node_id": "I_kwDOBiS_IM5uCKrF", "number": 8535, "title": "Evaluation Parameter null return behavior", "user": {"login": "ktc1016", "id": 9059807, "node_id": "MDQ6VXNlcjkwNTk4MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9059807?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktc1016", "html_url": "https://github.com/ktc1016", "followers_url": "https://api.github.com/users/ktc1016/followers", "following_url": "https://api.github.com/users/ktc1016/following{/other_user}", "gists_url": "https://api.github.com/users/ktc1016/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktc1016/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktc1016/subscriptions", "organizations_url": "https://api.github.com/users/ktc1016/orgs", "repos_url": "https://api.github.com/users/ktc1016/repos", "events_url": "https://api.github.com/users/ktc1016/events{/privacy}", "received_events_url": "https://api.github.com/users/ktc1016/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-11T00:53:50Z", "updated_at": "2024-08-22T23:57:04Z", "closed_at": "2024-08-22T23:57:04Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am currently trying to compare 2 datasets by mean value thus, to achieve this, I need to create a checkpoint with 2 expectation suites and use 1st expectation suite's results as basis for the 2nd suite's rules (evaluation parameter will be used here). My Checkpoint test works if there are values in the column since there is an actual numerical mean however if the values are Null it will resort to an error. Average value of Null is a probable return on our use case since there are times where this column is not filled up. \r\n\r\n**To Reproduce**\r\n\r\nData Setup - To reproduce easily, lets use sqlite but the actual setup is Pandas and Postgres\r\n```python\r\nimport pandas as pd\r\nfrom sqlalchemy import create_engine\r\nconn = create_engine('sqlite:///sample.sqlite3')\r\n\r\n# Adjust data values here\r\ndf_source_1 = pd.DataFrame([{'column_1': None}])\r\ndf_source_2 = pd.DataFrame([{'column_1': 1},{'column_1': 2},{'column_1': 3}])\r\n\r\ndf_source_1.to_sql(name='source_1', con=conn, if_exists='replace',index=False)\r\ndf_source_2.to_sql(name='source_2', con=conn, if_exists='replace',index=False)\r\n``` \r\n\r\nGX Code Prerequisites - Code to setup the Suite and fluent datasources\r\n```python\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\n\r\n# Run if gx config has not been setup.\r\n# connection_string = \"sqlite:///sample.sqlite3\"\r\n\r\n# datasource = context.sources.add_sql(\r\n#     name=\"my_datasource\", connection_string=connection_string\r\n# )\r\n\r\n# datasource.add_query_asset(name='asset_1', query='SELECT * FROM source_1')\r\n# datasource.add_query_asset(name='asset_2', query='SELECT * FROM source_2')\r\n\r\n \r\ncontext.add_or_update_expectation_suite(\r\n    expectation_suite_name='suite_1',\r\n)\r\ncontext.add_or_update_expectation_suite(\r\n    expectation_suite_name='suite_2'\r\n)\r\n\r\ndatasource = context.get_datasource('my_datasource')\r\n\r\nasset_1 = datasource.get_asset('asset_1')\r\nasset_2 = datasource.get_asset('asset_2')\r\n```\r\n\r\nGX Validations - Setup Validation rules including use of evaluation parameters. \r\n```python\r\nasset_1_request = asset_1.build_batch_request()\r\n\r\nvalidator_asset_1 = context.get_validator(\r\n    batch_request=asset_1_request,\r\n    expectation_suite_name='suite_1',\r\n)\r\n\r\nasset_2_request = asset_2.build_batch_request()\r\nvalidator_asset_2 = context.get_validator(\r\n    batch_request=asset_2_request,\r\n    expectation_suite_name='suite_2',\r\n)\r\n\r\nvalidator_asset_1.interactive_evaluation = False\r\nvalidator_asset_2.interactive_evaluation = False\r\n\r\n\r\nvalidator_asset_1.expect_column_mean_to_be_between(\r\n    \"column_1\",\r\n    min_value=None,\r\n    max_value=None,\r\n)\r\n\r\ncolumn_1_mean = f\"urn:great_expectations:validations:suite_1:expect_column_mean_to_be_between.result.observed_value:column=column_1\"\r\nvalidator_asset_2.expect_column_mean_to_be_between(\r\n    \"column_1\",\r\n    min_value={\r\n        \"$PARAMETER\": column_1_mean,\r\n    },\r\n    max_value={\r\n        \"$PARAMETER\": column_1_mean,\r\n    },\r\n)\r\n\r\n\r\nvalidator_asset_1.save_expectation_suite(discard_failed_expectations=False)\r\nvalidator_asset_2.save_expectation_suite(discard_failed_expectations=False)\r\n```\r\n\r\nGX Checkpoint and run - setup the checkpoint for execution\r\n```python\r\ncheckpoint = gx.checkpoint.SimpleCheckpoint(\r\n    name='checkpoint',\r\n    data_context=context,\r\n    validations=[\r\n        {\r\n            \"batch_request\": asset_1_request,\r\n            \"expectation_suite_name\": 'suite_1',\r\n        },\r\n        {\r\n            \"batch_request\": asset_2_request,\r\n            \"expectation_suite_name\": 'suite_2',\r\n        }\r\n    ],\r\n)\r\n\r\ncheckpoint.run()\r\n```\r\n\r\nError Message - Error if the source asset (asset 1) mean is null.\r\n![image](https://github.com/great-expectations/great_expectations/assets/9059807/6ff576b1-5f02-4a7e-b99d-e7c785f50de4)\r\n\r\n> [!NOTE]\\\r\n> If you want to make it work, change the `None` value in the data setup to an actual numerical number. \r\n\r\n\r\n**Expected behavior**\r\nNull value should be recognized and be used as comparison. If both asset_1 and asset_2 checks returns Null, the test should be successful \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.17.2\r\n - Data Source: Pandas & Postgres. (Sample used is Sqlite for easy replication. It returns the same behavior)\r\n\r\n**Additional context**\r\n[Raised this as a clarification in discourse and Austin asked me if I can write a Github issue](https://discourse.greatexpectations.io/t/evaluation-parameter-null-return-behavior/1326)", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8535/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8535/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8528", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8528/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8528/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8528/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8528", "id": 1844736585, "node_id": "I_kwDOBiS_IM5t9HJJ", "number": 8528, "title": "Sqlalchemy takes too much time", "user": {"login": "hymekeci", "id": 45127407, "node_id": "MDQ6VXNlcjQ1MTI3NDA3", "avatar_url": "https://avatars.githubusercontent.com/u/45127407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hymekeci", "html_url": "https://github.com/hymekeci", "followers_url": "https://api.github.com/users/hymekeci/followers", "following_url": "https://api.github.com/users/hymekeci/following{/other_user}", "gists_url": "https://api.github.com/users/hymekeci/gists{/gist_id}", "starred_url": "https://api.github.com/users/hymekeci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hymekeci/subscriptions", "organizations_url": "https://api.github.com/users/hymekeci/orgs", "repos_url": "https://api.github.com/users/hymekeci/repos", "events_url": "https://api.github.com/users/hymekeci/events{/privacy}", "received_events_url": "https://api.github.com/users/hymekeci/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4397538239, "node_id": "LA_kwDOBiS_IM8AAAABBh0bvw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:new_backend", "name": "feature:new_backend", "color": "741403", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-08-10T09:02:56Z", "updated_at": "2024-03-12T17:42:40Z", "closed_at": "2024-03-12T17:42:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Suppose I want to observe a lot of tables and a lot of rows in sql. But because the great expectations library uses `sqlalchemy` to read data from sql, each row is translated into a python object. \r\n\r\nThis takes a lot of time. \r\n\r\nTo avoid this I would like to be able to use `custom engines` instead of having to use sqlalchemy. \r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8528/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8528/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8518", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8518/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8518/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8518/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8518", "id": 1842755373, "node_id": "I_kwDOBiS_IM5t1jct", "number": 8518, "title": "Optimize BigQuery Batch Requests to fully leverage pruning", "user": {"login": "lmandruzzato-bc", "id": 102029941, "node_id": "U_kgDOBhTadQ", "avatar_url": "https://avatars.githubusercontent.com/u/102029941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lmandruzzato-bc", "html_url": "https://github.com/lmandruzzato-bc", "followers_url": "https://api.github.com/users/lmandruzzato-bc/followers", "following_url": "https://api.github.com/users/lmandruzzato-bc/following{/other_user}", "gists_url": "https://api.github.com/users/lmandruzzato-bc/gists{/gist_id}", "starred_url": "https://api.github.com/users/lmandruzzato-bc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lmandruzzato-bc/subscriptions", "organizations_url": "https://api.github.com/users/lmandruzzato-bc/orgs", "repos_url": "https://api.github.com/users/lmandruzzato-bc/repos", "events_url": "https://api.github.com/users/lmandruzzato-bc/events{/privacy}", "received_events_url": "https://api.github.com/users/lmandruzzato-bc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-08-09T08:35:32Z", "updated_at": "2024-08-22T23:57:22Z", "closed_at": "2024-08-22T23:57:22Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Initial context**\r\nReferring to the Discourse topic: https://discourse.greatexpectations.io/t/batch-requests-converted-to-non-optimized-queries-in-bigquery-googlesql/1316.\r\n\r\nI mapped a BigQuery dataset to a GX Datasource and then I mapped a BigQuery table to a GX Data Asset (via Table Asset). Afterward, I added a splitter (yearly, monthly, and daily) to the Data Asset so that I can control what data to fetch via GX Batch Requests. The splitter is on the partition column of the underlying table.\r\n\r\n**Is your feature request related to a problem? Please describe.**\r\nThe final Batch Request inferred by GX and executed on BigQuery is not optimized to fully leverage [pruning](https://cloud.google.com/bigquery/docs/querying-partitioned-tables). This is the way GX translates the Batch Request to the GoogleSQL dialect:\r\n```sql\r\nCREATE OR REPLACE TABLE `<GX TEMP ID>`\r\n\tOPTIONS(\r\n\t\texpiration_timestamp=TIMESTAMP_ADD(\r\n\t\tCURRENT_TIMESTAMP(), INTERVAL 24 HOUR)\r\n\t)\r\n\tAS SELECT * \r\nFROM `<NAME OF THE TABLE>` \r\nWHERE EXTRACT(year FROM `<COLUMN NAME>`) = <YEAR> AND EXTRACT(month FROM `<COLUMN NAME>`) = <MONTH> AND EXTRACT(day FROM `<COLUMN NAME>`) = <DAY>\r\n```\r\nIn my specific case, this is processing ~30GB because it does pruning on the `<YEAR>` only. So, it loads all the (daily) partitions of the `<YEAR>` instead of loading the daily partition only `<YEAR>-<MONTH>-<DAY>`.\r\n\r\n**Describe the solution you'd like**\r\nI'd like GX translating the Batch Request this way:\r\n```sql\r\nCREATE OR REPLACE TABLE `<GX TEMP ID>`\r\n\tOPTIONS(\r\n\t\texpiration_timestamp=TIMESTAMP_ADD(\r\n\t\tCURRENT_TIMESTAMP(), INTERVAL 24 HOUR)\r\n\t)\r\n\tAS SELECT * \r\nFROM `<NAME OF THE TABLE>` \r\nWHERE TIMESTAMP_TRUNC(<COLUMN NAME>, DAY) = TIMESTAMP(\"<YEAR>-<MONTH>-<DAY>\")\r\n```\r\nThis way, in my specific case, BigQuery processes ~130MB which is ~250 times more efficient than the current solution.\r\n\r\n**Describe alternatives you've considered**\r\nThe only alternative I see at the moment is to redefine a new Query Asset at every execution by providing an optimized query as input; this way I don't leverage Batch Requests at all (every time I ask for the whole Data Asset which is already filtered as needed). \r\nIn a nutshell:\r\n- from one single Table Asset + granular Batch Requests every time\r\n- to a new granular Query Asset every time + whole Batch Requests\r\n\r\n**Additional context**\r\nI don't know if it makes sense to extend the `split_on_date_parts` so that it behaves differently for the BigQuery dialect. Maybe the proper solution would be to have something similar to `split_on_converted_datetime` which works for SQLite only. So, something like `split_on_truncated_timestamp` that works for BigQuery only and given a `column_name` and a string representing the required timestamp `required_timestamp` (it must be well formatted according to ISO8601), it is able to return the required data. Pseudo-code:\r\n```\r\n# look for the most granular date part of the provided required_timestamp\r\nmost_granular_date_part = _extract_most_granular_date_part_from_timestamp(required_timestamp)\r\n\r\n# where statement in the final Batch Request (GoogleSQL dialect)\r\nTIMESTAMP_TRUNC(<column_name>, most_granular_date_part) = TIMESTAMP(required_timestamp)\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8518/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8518/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8503", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8503/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8503/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8503/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8503", "id": 1838892866, "node_id": "I_kwDOBiS_IM5tm0dC", "number": 8503, "title": "AWS Athena return 0 rows ", "user": {"login": "isiuni01", "id": 102531618, "node_id": "U_kgDOBhyCIg", "avatar_url": "https://avatars.githubusercontent.com/u/102531618?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isiuni01", "html_url": "https://github.com/isiuni01", "followers_url": "https://api.github.com/users/isiuni01/followers", "following_url": "https://api.github.com/users/isiuni01/following{/other_user}", "gists_url": "https://api.github.com/users/isiuni01/gists{/gist_id}", "starred_url": "https://api.github.com/users/isiuni01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isiuni01/subscriptions", "organizations_url": "https://api.github.com/users/isiuni01/orgs", "repos_url": "https://api.github.com/users/isiuni01/repos", "events_url": "https://api.github.com/users/isiuni01/events{/privacy}", "received_events_url": "https://api.github.com/users/isiuni01/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-08-07T07:51:33Z", "updated_at": "2024-08-22T23:57:33Z", "closed_at": "2024-08-22T23:57:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi, I am trying to use GX on AWS Glue with AWS athena as a data source, but athena returns 0 rows, if i re-run the same query on athena from his query editor it works well  \r\n\r\n**To Reproduce**\r\nMy config.yml\r\n```\r\nconfig_version: 3.0\r\ndatasources: {}\r\n        \r\n\r\n\r\nconfig_variables_file_path: great_expectations/uncommitted/config_variables.yml\r\n\r\nplugins_directory: great_expectations/plugins/\r\n\r\nstores:\r\n  expectations_S3_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleS3StoreBackend\r\n      bucket: 'my_bucket'\r\n      prefix: 'great_expectations/expectations/'\r\n\r\n  validations_S3_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleS3StoreBackend\r\n      bucket: my_bucket\r\n      prefix: 'great_expectations/uncommitted/validations/'\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n\r\n  checkpoint_S3_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleS3StoreBackend\r\n      bucket: my_bucket\r\n      prefix: 'great_expectations/checkpoints/'\r\n\r\nexpectations_store_name: expectations_S3_store\r\nvalidations_store_name: validations_S3_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_S3_store\r\n\r\ndata_docs_sites:\r\n  s3_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: false\r\n    store_backend:\r\n      class_name: TupleS3StoreBackend\r\n      bucket: gx-output\r\n      prefix: 'site/'\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n```\r\n\r\nAnd this is my code in my AWS Glue job\r\n```\r\n\r\n`yaml = YAMLHandler()\r\n\r\nsc = SparkContext.getOrCreate()\r\nglueContext = GlueContext(sc)\r\nspark = glueContext.spark_session\r\ns3_client = boto3.client(\"s3\")\r\n\r\ngx_bucket_name = getResolvedOptions(sys.argv, ['gxBucket'])[\"gxBucket\"]\r\ngxPath = getResolvedOptions(sys.argv, ['gxPath'])[\"gxPath\"]\r\n\r\nresponse = s3_client.get_object(\r\n    Bucket=gx_bucket_name, Key=gxPath\r\n)\r\nconfig_file = yaml.load(response[\"Body\"])\r\n\r\nconfig = DataContextConfig(\r\n    config_version=config_file[\"config_version\"],\r\n    datasources=config_file[\"datasources\"],\r\n    expectations_store_name=config_file[\"expectations_store_name\"],\r\n    validations_store_name=config_file[\"validations_store_name\"],\r\n    evaluation_parameter_store_name=config_file[\"evaluation_parameter_store_name\"],\r\n    plugins_directory=\"/great_expectations/plugins\",\r\n    validation_operators=None,#config_file[\"validation_operators\"],\r\n    stores=config_file[\"stores\"],\r\n    data_docs_sites=config_file[\"data_docs_sites\"],\r\n    config_variables_file_path=config_file[\"config_variables_file_path\"],\r\n    checkpoint_store_name=config_file[\"checkpoint_store_name\"],\r\n    store_backend_defaults=S3StoreBackendDefaults(\r\n        default_bucket_name=config_file[\"data_docs_sites\"][\"s3_site\"][\"store_backend\"][\r\n            \"bucket\"\r\n        ]\r\n    ),\r\n)\r\ncontext = gx.get_context(project_config=config)\r\n\r\ndatabase = getResolvedOptions(sys.argv, ['database'])[\"database\"]\r\n\r\n\r\nconnection_string = r\"awsathena+rest://@athena.eu-central-1.amazonaws.com/\" + database + \"?s3_staging_dir=dir\"\r\n\r\n\r\n\r\ndatasource = context.sources.add_sql(\r\n    name=\"my_datasource\", connection_string=connection_string\r\n)\r\n\r\n#table = getResolvedOptions(sys.argv, ['table'])[\"table\"]\r\nquery = getResolvedOptions(sys.argv, ['query'])[\"query\"]\r\n\r\n\r\ntable_asset = datasource.add_query_asset(\r\n        name=\"my_asset\",\r\n        query= query )\r\n\r\n\r\nbatch_request=table_asset.build_batch_request()\r\n\r\n\r\nexclude_column_names = []\r\n\r\ndata_assistant_result = context.assistants.onboarding.run(\r\n    batch_request=batch_request,\r\n    exclude_column_names=exclude_column_names,)\r\n    \r\nexpectation_suite_name = getResolvedOptions(sys.argv, ['expectations'])[\"expectations\"]\r\n\r\nexpectation_suite = data_assistant_result.get_expectation_suite(\r\n    expectation_suite_name=expectation_suite_name\r\n)\r\n\r\ncontext.add_or_update_expectation_suite(expectation_suite=expectation_suite)` \r\n```\r\n\r\n**Expected behavior**\r\ni expect athena return some rows, now it works but my expectations suite is empty, i think this is right because it dont have any data\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.17.8\r\n - Data Source: AWS Athena\r\n - Cloud environment: AWS glue\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8503/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8502", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8502/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8502/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8502/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8502", "id": 1838763156, "node_id": "I_kwDOBiS_IM5tmUyU", "number": 8502, "title": "[BUG] Unable to use query instead of a table for some core expectations", "user": {"login": "mantasmy", "id": 66936107, "node_id": "MDQ6VXNlcjY2OTM2MTA3", "avatar_url": "https://avatars.githubusercontent.com/u/66936107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mantasmy", "html_url": "https://github.com/mantasmy", "followers_url": "https://api.github.com/users/mantasmy/followers", "following_url": "https://api.github.com/users/mantasmy/following{/other_user}", "gists_url": "https://api.github.com/users/mantasmy/gists{/gist_id}", "starred_url": "https://api.github.com/users/mantasmy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mantasmy/subscriptions", "organizations_url": "https://api.github.com/users/mantasmy/orgs", "repos_url": "https://api.github.com/users/mantasmy/repos", "events_url": "https://api.github.com/users/mantasmy/events{/privacy}", "received_events_url": "https://api.github.com/users/mantasmy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-08-07T06:22:06Z", "updated_at": "2024-08-22T23:57:45Z", "closed_at": "2024-08-22T23:57:45Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\n**TL;DR:**\r\nQuery usage instead of a table isn't fully working (for Trino).\r\nTable name **with** catalog and schema is used at filtering in `information_schema.tables & information_schema.columns query` when table_name (inside these tables) is without catalog and schema.\r\nAfter removing catalog and schema locally it works well, but not for all expectations - fails to format query.\r\n\r\n**Long Version:**\r\nThere is a special handling for [Trino in utils.py](https://github.com/great-expectations/great_expectations/blob/a8ba562c9fe4a403fa00bdb8059c39d543fa67b1/great_expectations/expectations/metrics/util.py#L502-L508) in order to set the table_name from query. \r\nThis regex sets table_name **with** schema and catalog and the problem occurs when we are using this table_name to build [where condition for query](https://github.com/great-expectations/great_expectations/blob/a8ba562c9fe4a403fa00bdb8059c39d543fa67b1/great_expectations/expectations/metrics/util.py#L561-L562). \r\n```\r\n.where(\r\n    sa.and_(\r\n        *(\r\n            tables_table_query.c.table_name == table_name, # we are giving catalog.shema.table_name here, but expected only table_name\r\n            tables_table_query.c.schema_name == schema_name, # only schema here\r\n            # also in information_schema.tables catalog column exist so it can be used\r\n\r\n        )\r\n    )\r\n)\r\n```\r\nThis query is executed against information_schema tables, but table_name in information_schema.tables has no catalog and schema name.\r\n\r\nI locally removed catalog and schema and it worked, but not for all expectations...\r\n\r\nThere are expectations like `expect_compound_columns_to_be_unique` where we have to set column_list as tuple or list and it fails to format query properly. Inside one of the subquery levels it is limited to select only columns that are in a column_list, but then parent level (of query) tries to fetch all columns that exist in a table... and this throws error about invalid columns.\r\n\r\nI will try to visualise it better here:\r\n\r\n```\r\nSELECT\r\n...\r\n              column_list_column_2,\r\n              column_that_exist_in_source_table_1,\r\n              column_that_exist_in_source_table_2,\r\n              ...\r\n              column_that_exist_in_source_table_100\r\n            FROM\r\n              (\r\n                SELECT\r\n                  *\r\n                FROM\r\n                  (\r\n                    SELECT\r\n                      column_list_column_1, # column from column_list\r\n                      column_list_column_2 # column from column_list\r\n                    FROM\r\n                      catalog.schema.table # our table that we are running tests on\r\n                    ORDER BY\r\n                      1\r\n                    LIMIT\r\n                      1\r\n                  ) AS anon_2\r\n                WHERE\r\n                  NOT (\r\n                    column_list_column_1 IS NULL # column from column_list\r\n                    AND column_list_column_2 IS NULL # column from column_list\r\n...\r\n```\r\n\r\nThis is the connector I am using:\r\n```\r\n  \"default_runtime_data_connector_name\": {\r\n      \"batch_identifiers\": [\"default_identifier_name\"],\r\n      \"module_name\": \"great_expectations.datasource.data_connector\",\r\n      \"class_name\": \"RuntimeDataConnector\",\r\n  },\r\n\r\n```\r\n\r\n**Environment:**\r\nGreat Expectations Version: 0.17.7\r\nsqlalchemy: 1.4.48\r\ntrino: 0.326.0\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8502/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8502/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8446", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8446/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8446/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8446/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8446", "id": 1826363313, "node_id": "I_kwDOBiS_IM5s3Bex", "number": 8446, "title": "Clickhouse broken with like-pattern expectations", "user": {"login": "matveykortsev", "id": 78414814, "node_id": "MDQ6VXNlcjc4NDE0ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/78414814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matveykortsev", "html_url": "https://github.com/matveykortsev", "followers_url": "https://api.github.com/users/matveykortsev/followers", "following_url": "https://api.github.com/users/matveykortsev/following{/other_user}", "gists_url": "https://api.github.com/users/matveykortsev/gists{/gist_id}", "starred_url": "https://api.github.com/users/matveykortsev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matveykortsev/subscriptions", "organizations_url": "https://api.github.com/users/matveykortsev/orgs", "repos_url": "https://api.github.com/users/matveykortsev/repos", "events_url": "https://api.github.com/users/matveykortsev/events{/privacy}", "received_events_url": "https://api.github.com/users/matveykortsev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-07-28T12:44:58Z", "updated_at": "2024-03-18T16:26:54Z", "closed_at": "2024-03-18T16:26:53Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI'm attempting to use GE with the newly released ClickHouse support, but it appears that the  like-pattern expectations are not functioning properly. Another expectations works well.\r\n\r\n**To Reproduce**\r\nRun the following code:\r\n```python\r\nimport great_expectations as gx\r\ncontext = gx.get_context(context_root_dir='/home/jovyan/work')\r\ncontext.add_or_update_expectation_suite(expectation_suite_name=\"test_suite\")\r\ndatasource=context.sources.add_or_update_sql(name='fluent_clickhouse',connection_string='clickhouse+http://user:password@server_address')\r\nasset = datasource.add_table_asset(name=asset_name, table_name=table_name, schema_name=schema_name)\r\nasset.add_splitter_column_value(column_name='pdate')\r\nmy_batch_request = asset.build_batch_request(batch_slice = \"[-1:]\")\r\nvalidator = context.get_validator(\r\n    batch_request=my_batch_request, expectation_suite_name=\"test_suite\"\r\n)\r\nvalidator.expect_column_values_to_match_like_pattern(column='customer_user_id', like_pattern='kch%')\r\n```\r\nPart of great_expectations.yml with datasources setup:\r\n```yml\r\ndatasources:\r\n  clickhouse_test:\r\n    name: clickhouse_test\r\n    class_name: Datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      class_name: SqlAlchemyExecutionEngine\r\n      module_name: great_expectations.execution_engine\r\n      connection_string: clickhouse+http://user:password@server_address\r\n      create_temp_table: true\r\n    data_connectors:\r\n      inferred_data_connector_single_batch_asset:\r\n        name: inferred_data_connector_single_batch_asset\r\n        class_name: InferredAssetSqlDataConnector\r\n        module_name: great_expectations.datasource.data_connector\r\n        include_schema_name: true\r\n  fluent_clickhouse:\r\n    type: sql\r\n    assets:\r\n      asset_name:\r\n        type: table\r\n        order_by: []\r\n        batch_metadata: {}\r\n        splitter:\r\n          column_name: pdate\r\n          method_name: split_on_column_value\r\n        table_name: table_name\r\n        schema_name: schema_name\r\n    connection_string: clickhouse+http://user:passowrd@server_address\r\n```\r\n```\r\n---------------------------------------------------------------------------\r\nAttributeError                            Traceback (most recent call last)\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:546, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    543 try:\r\n    544     resolved_metrics[\r\n    545         metric_computation_configuration.metric_configuration.id\r\n--> 546     ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    547         **metric_computation_configuration.metric_provider_kwargs\r\n    548     )\r\n    549 except Exception as e:\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py:90, in metric_partial.<locals>.wrapper.<locals>.inner_func(*args, **kwargs)\r\n     88 @wraps(metric_fn)\r\n     89 def inner_func(*args, **kwargs):\r\n---> 90     return metric_fn(*args, **kwargs)\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/expectations/metrics/map_metric_provider/column_condition_partial.py:186, in column_condition_partial.<locals>.wrapper.<locals>.inner_func(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, metrics, runtime_configuration)\r\n    184         dialect = sqlalchemy_engine.dialect\r\n--> 186 expected_condition = metric_fn(\r\n    187     cls,\r\n    188     sa.column(column_name),\r\n    189     **metric_value_kwargs,\r\n    190     _dialect=dialect,\r\n    191     _table=selectable,\r\n    192     _execution_engine=execution_engine,\r\n    193     _sqlalchemy_engine=sqlalchemy_engine,\r\n    194     _metrics=metrics,\r\n    195 )\r\n    197 filter_column_isnull = kwargs.get(\r\n    198     \"filter_column_isnull\", getattr(cls, \"filter_column_isnull\", True)\r\n    199 )\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/expectations/metrics/column_map_metrics/column_values_match_like_pattern.py:28, in ColumnValuesMatchLikePattern._sqlalchemy(cls, column, like_pattern, _dialect, **kwargs)\r\n     26 if like_pattern_expression is None:\r\n     27     logger.warning(\r\n---> 28         f\"Like patterns are not supported for dialect {str(_dialect.name)}\"\r\n     29     )\r\n     30     raise NotImplementedError\r\n\r\nAttributeError: module 'clickhouse_sqlalchemy.drivers.base' has no attribute 'name'\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nCell In[168], line 1\r\n----> 1 validator.expect_column_values_to_match_like_pattern(column='customer_user_id', like_pattern='kch%')\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validator.py:597, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    591         validation_result = ExpectationValidationResult(\r\n    592             success=False,\r\n    593             exception_info=exception_info,\r\n    594             expectation_config=configuration,\r\n    595         )\r\n    596     else:\r\n--> 597         raise err\r\n    599 if self._include_rendered_content:\r\n    600     validation_result.render()\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validator.py:560, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    556     validation_result = ExpectationValidationResult(\r\n    557         expectation_config=copy.deepcopy(expectation.configuration)\r\n    558     )\r\n    559 else:\r\n--> 560     validation_result = expectation.validate(\r\n    561         validator=self,\r\n    562         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    563         data_context=self._data_context,\r\n    564         runtime_configuration=basic_runtime_configuration,\r\n    565     )\r\n    567 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    568 # saving updating expectation configs to the same suite during validation runs\r\n    569 if self._active_validation is True:\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/expectations/expectation.py:1276, in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1267 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1268     configuration=configuration\r\n   1269 )\r\n   1271 configuration.process_evaluation_parameters(\r\n   1272     evaluation_parameters, interactive_evaluation, data_context\r\n   1273 )\r\n   1274 expectation_validation_result_list: list[\r\n   1275     ExpectationValidationResult\r\n-> 1276 ] = validator.graph_validate(\r\n   1277     configurations=[configuration],\r\n   1278     runtime_configuration=runtime_configuration,\r\n   1279 )\r\n   1280 return expectation_validation_result_list[0]\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validator.py:1072, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1070         return evrs\r\n   1071     else:\r\n-> 1072         raise err\r\n   1074 configuration: ExpectationConfiguration\r\n   1075 result: ExpectationValidationResult\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validator.py:1051, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1044 resolved_metrics: Dict[Tuple[str, str, str], MetricValue]\r\n   1046 try:\r\n   1047     (\r\n   1048         resolved_metrics,\r\n   1049         evrs,\r\n   1050         processed_configurations,\r\n-> 1051     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n   1052         graph=graph,\r\n   1053         runtime_configuration=runtime_configuration,\r\n   1054         expectation_validation_graphs=expectation_validation_graphs,\r\n   1055         evrs=evrs,\r\n   1056         processed_configurations=processed_configurations,\r\n   1057         show_progress_bars=self._determine_progress_bars(),\r\n   1058     )\r\n   1059 except Exception as err:\r\n   1060     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then\r\n   1061     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n   1062     if catch_exceptions:\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validator.py:1210, in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n   1202 resolved_metrics: Dict[Tuple[str, str, str], MetricValue]\r\n   1203 aborted_metrics_info: Dict[\r\n   1204     Tuple[str, str, str],\r\n   1205     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n   1206 ]\r\n   1207 (\r\n   1208     resolved_metrics,\r\n   1209     aborted_metrics_info,\r\n-> 1210 ) = self._metrics_calculator.resolve_validation_graph(\r\n   1211     graph=graph,\r\n   1212     runtime_configuration=runtime_configuration,\r\n   1213     min_graph_edges_pbar_enable=0,\r\n   1214 )\r\n   1216 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.\r\n   1217 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/metrics_calculator.py:283, in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    278 resolved_metrics: Dict[Tuple[str, str, str], MetricValue]\r\n    279 aborted_metrics_info: Dict[\r\n    280     Tuple[str, str, str],\r\n    281     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n    282 ]\r\n--> 283 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    284     runtime_configuration=runtime_configuration,\r\n    285     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    286     show_progress_bars=self._show_progress_bars,\r\n    287 )\r\n    288 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:206, in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    200 resolved_metrics: Dict[Tuple[str, str, str], MetricValue] = {}\r\n    202 # updates graph with aborted metrics\r\n    203 aborted_metrics_info: Dict[\r\n    204     Tuple[str, str, str],\r\n    205     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n--> 206 ] = self._resolve(\r\n    207     metrics=resolved_metrics,\r\n    208     runtime_configuration=runtime_configuration,\r\n    209     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    210     show_progress_bars=show_progress_bars,\r\n    211 )\r\n    213 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:312, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    308                 failed_metric_info[failed_metric.id][\"exception_info\"] = {\r\n    309                     exception_info\r\n    310                 }\r\n    311     else:\r\n--> 312         raise err\r\n    313 except Exception as e:\r\n    314     if catch_exceptions:\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/validator/validation_graph.py:282, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    277         computable_metrics.add(metric)\r\n    279 try:\r\n    280     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.\r\n    281     metrics.update(\r\n--> 282         self._execution_engine.resolve_metrics(\r\n    283             metrics_to_resolve=computable_metrics,\r\n    284             metrics=metrics,\r\n    285             runtime_configuration=runtime_configuration,\r\n    286         )\r\n    287     )\r\n    288     progress_bar.update(len(computable_metrics))\r\n    289     progress_bar.refresh()\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:281, in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    272 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    273 (\r\n    274     metric_fn_direct_configurations,\r\n    275     metric_fn_bundle_configurations,\r\n   (...)\r\n    279     runtime_configuration=runtime_configuration,\r\n    280 )\r\n--> 281 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    282     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    283     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    284 )\r\n\r\nFile /opt/conda/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py:550, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    544         resolved_metrics[\r\n    545             metric_computation_configuration.metric_configuration.id\r\n    546         ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    547             **metric_computation_configuration.metric_provider_kwargs\r\n    548         )\r\n    549     except Exception as e:\r\n--> 550         raise gx_exceptions.MetricResolutionError(\r\n    551             message=str(e),\r\n    552             failed_metrics=(\r\n    553                 metric_computation_configuration.metric_configuration,\r\n    554             ),\r\n    555         ) from e\r\n    557 try:\r\n    558     # an engine-specific way of computing metrics together\r\n    559     resolved_metric_bundle: Dict[\r\n    560         Tuple[str, str, str], MetricValue\r\n    561     ] = self.resolve_metric_bundle(\r\n    562         metric_fn_bundle=metric_fn_bundle_configurations\r\n    563     )\r\n\r\nMetricResolutionError: module 'clickhouse_sqlalchemy.drivers.base' has no attribute 'name'\r\n```\r\nBut as I can see in clickhouse_sqlalchemy package here https://github.com/xzkostyan/clickhouse-sqlalchemy/blob/060c60131a7a830cb691c23bc9c9931f5e3e19cc/clickhouse_sqlalchemy/drivers/base.py#L78\r\nAttribute 'name' exists.\r\nI have the thought that there is mistyping here https://github.com/great-expectations/great_expectations/blob/3aacc5c4309ca6ee5f3291d0840bd16a9ee0ae76/great_expectations/expectations/metrics/util.py#L849 and by that reason, it can be broken?\r\nIm also looking for this part of code https://github.com/great-expectations/great_expectations/blob/3aacc5c4309ca6ee5f3291d0840bd16a9ee0ae76/great_expectations/expectations/metrics/map_metric_provider/column_condition_partial.py#L188C3-L188C3 maybe some problem here with ClickHouseDialect?\r\n\r\n**Expected behavior**\r\nExpecting that like-pattern expectation will work as usual.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: docker container on MacOS jupyter/pyspark-notebook image\r\n - Great Expectations Version: great-expectations==0.17.6, great-expectations-experimental==0.1.20230725070\r\n - Datasource: ClickHouse\r\n   clickhouse-cityhash==1.0.2.4\r\n   clickhouse-driver==0.2.6\r\n   clickhouse-sqlalchemy==0.2.4\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8446/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8409", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8409/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8409/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8409/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8409", "id": 1820642716, "node_id": "I_kwDOBiS_IM5shM2c", "number": 8409, "title": "Turning off include_unexpected_rows is ignored for \"COMPLETE\" result format", "user": {"login": "ezgigurkan", "id": 5398527, "node_id": "MDQ6VXNlcjUzOTg1Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/5398527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezgigurkan", "html_url": "https://github.com/ezgigurkan", "followers_url": "https://api.github.com/users/ezgigurkan/followers", "following_url": "https://api.github.com/users/ezgigurkan/following{/other_user}", "gists_url": "https://api.github.com/users/ezgigurkan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezgigurkan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezgigurkan/subscriptions", "organizations_url": "https://api.github.com/users/ezgigurkan/orgs", "repos_url": "https://api.github.com/users/ezgigurkan/repos", "events_url": "https://api.github.com/users/ezgigurkan/events{/privacy}", "received_events_url": "https://api.github.com/users/ezgigurkan/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-07-25T15:53:24Z", "updated_at": "2024-08-22T23:57:56Z", "closed_at": "2024-08-22T23:57:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**The bug:**\r\nI've been trying to get PySpark queries (unexpected_index_query) for validations that fail wtihout including all those failed rows in the results since there can be a very large number of rows.\r\n\r\nIt doesn't seem possible to suppress unexpected_list and unexpected_index_list values in the \"COMPLETE\" result format.\r\n\r\n**To Reproduce:**\r\nHere is the format I'm using, both at expectation-level and checkpoint-level:\r\n```\r\n\"result_format\": {\r\n\t\"result_format\": \"COMPLETE\",\r\n\t\"include_unexpected_rows\": False,\r\n\t\"partial_unexpected_count\": 0,\r\n\t\"return_unexpected_index_query\": True\r\n}\r\n```\r\n\r\n**Expected behavior:**\r\nI would expect no results for unexpected_list or unexpected_index_list if include_unexpected_rows is set to False.\r\n\r\n**Environment:**\r\n - Great Expectations Version: 0.17.6\r\n - Datasource: Databricks/Spark\r\n - Cloud environment: Azure Databricks Notebook\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8409/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8407", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8407/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8407/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8407/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8407", "id": 1820561743, "node_id": "I_kwDOBiS_IM5sg5FP", "number": 8407, "title": "Queries returned by the unexpected_index_query have syntax errors", "user": {"login": "nebloc", "id": 15227649, "node_id": "MDQ6VXNlcjE1MjI3NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/15227649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nebloc", "html_url": "https://github.com/nebloc", "followers_url": "https://api.github.com/users/nebloc/followers", "following_url": "https://api.github.com/users/nebloc/following{/other_user}", "gists_url": "https://api.github.com/users/nebloc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nebloc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nebloc/subscriptions", "organizations_url": "https://api.github.com/users/nebloc/orgs", "repos_url": "https://api.github.com/users/nebloc/repos", "events_url": "https://api.github.com/users/nebloc/events{/privacy}", "received_events_url": "https://api.github.com/users/nebloc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2023-07-25T15:10:20Z", "updated_at": "2024-06-07T19:46:42Z", "closed_at": "2023-10-25T13:26:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAttempting to create a spark dataframe from the returned `unexpected_index_query` in the checkpoint result, however the returned queries can't be evaluated in pyspark.\r\n\r\n**To Reproduce**\r\nUsing pyspark notebook, create a dataframe:\r\n`df = spark.read.parquet(\"Files/Raw/assetnum/test.parquet\")`\r\nCreate an expectations, such as expect column value to not be null for serialnum, and set result format for a simple checkpoint\r\n```python\r\ncheckpoint = gx.checkpoint.SimpleCheckpoint( # Create Checkpoint\r\n    name = checkpoint_name,\r\n    data_context = context,\r\n    validations = [{\r\n        \"batch_request\": batch_request,\r\n        \"expectation_suite_name\": expectationsuite_name,\r\n    }],\r\n    runtime_configuration = {\r\n        \"result_format\": {\r\n            \"result_format\": \"COMPLETE\",\r\n            \"unexpected_index_column_names\": [\"assetnum\"],\r\n            \"return_unexpected_index_query\": True,\r\n        },\r\n    },\r\n)\r\n```\r\nExtract the unexpected_index_query from the checkpoint result, and evaluate it with `eval(returned_query)`\r\n```\r\n    df.filter(F.expr(NOT (serialnum IS NOT NULL)))\r\n                          ^\r\nSyntaxError: invalid syntax. Perhaps you forgot a comma?\r\n```\r\n\r\n**Expected behavior**\r\nDataframe filter to run and provide unexpected rows.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows - But Azure Synapse\r\n - Great Expectations Version: 0.17.4\r\n - Datasource: Spark Dataframe from parquet file\r\n - Cloud environment: Azure Synapse\r\n\r\n**Additional context**\r\nCreating it as a pandas dataframe works and query can be evaluated, but is different (just contains a filter for all the index values)\r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8407/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8407/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8375", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8375/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8375/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8375/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8375", "id": 1815675183, "node_id": "I_kwDOBiS_IM5sOQEv", "number": 8375, "title": "DataAssistant cannot handle empty values", "user": {"login": "MarcelBeining", "id": 1278660, "node_id": "MDQ6VXNlcjEyNzg2NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1278660?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcelBeining", "html_url": "https://github.com/MarcelBeining", "followers_url": "https://api.github.com/users/MarcelBeining/followers", "following_url": "https://api.github.com/users/MarcelBeining/following{/other_user}", "gists_url": "https://api.github.com/users/MarcelBeining/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcelBeining/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcelBeining/subscriptions", "organizations_url": "https://api.github.com/users/MarcelBeining/orgs", "repos_url": "https://api.github.com/users/MarcelBeining/repos", "events_url": "https://api.github.com/users/MarcelBeining/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcelBeining/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-07-21T11:51:03Z", "updated_at": "2024-08-22T23:58:20Z", "closed_at": "2024-08-22T23:58:20Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI wanted to use the Assistant for profiling my Data in Kedro, however most of the columns produce errors during profiling because they also contain None values. Wondering why I am the first one reporting this.\r\n\r\n\r\n**To Reproduce**\r\nRun this code\r\n```\r\nimport pandas as pd\r\nimport great_expectations as gx\r\nge_context = gx.data_context.DataContext()\r\n\r\n result = ge_context.assistants.onboarding.run(\r\n            batch_request={\r\n        \"runtime_parameters\": {\"batch_data\": pd.DataFrame([{'a': True, 'b': 0}, {'a': False, 'b': 0}, {'b': 0}])},\r\n        \"data_connector_name\": \"default_runtime_data_connector_name\",\r\n        \"datasource_name\": \"validation_datasource\",\r\n        \"data_asset_name\": \"asset\",\r\n        \"batch_identifiers\": {\r\n            \"default_identifier_name\": \"default_identifier\"\r\n        }\r\n    },\r\n            exclude_column_names=[],\r\n        )\r\n```\r\n\r\n_great_expectations.yml_\r\n\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources:\r\n  validation_datasource:\r\n    module_name: great_expectations.datasource\r\n    data_connectors:\r\n      default_runtime_data_connector_name:\r\n        module_name: great_expectations.datasource.data_connector\r\n        class_name: RuntimeDataConnector\r\n        batch_identifiers:\r\n          - default_identifier_name\r\n    class_name: Datasource\r\n    execution_engine:\r\n      module_name: great_expectations.execution_engine\r\n      class_name: PandasExecutionEngine\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GE encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: 43f5a1f6-975d-4b98-a685-01d98ca9ecba\r\n  enabled: true\r\nnotebooks:\r\ninclude_rendered_content:\r\n  expectation_validation_result: false\r\n  expectation_suite: false\r\n  globally: false\r\n\r\n```\r\n\r\nError Traceback_\r\n\r\n\r\n>   File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\data_assistant\\data_assistant_runner.py\", line 172, in run\r\n    data_assistant_result: DataAssistantResult = data_assistant.run(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\data_assistant\\data_assistant.py\", line 538, in run\r\n    run_profiler_on_data(\r\n  File \"...\\lib\\site-packages\\great_expectations\\util.py\", line 223, in compute_delta_t\r\n    return func(*args, **kwargs)\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\data_assistant\\data_assistant.py\", line 726, in run_profiler_on_data\r\n    rule_based_profiler_result: RuleBasedProfilerResult = profiler.run(\r\n  File \"...\\lib\\site-packages\\great_expectations\\core\\usage_statistics\\usage_statistics.py\", line 304, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\rule_based_profiler.py\", line 325, in run\r\n    rule_state = rule.run(\r\n  File \"...\\lib\\site-packages\\great_expectations\\util.py\", line 223, in compute_delta_t\r\n    return func(*args, **kwargs)\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\rule\\rule.py\", line 167, in run\r\n    expectation_configuration_builder.resolve_validation_dependencies(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\expectation_configuration_builder\\expectation_configuration_builder.py\", line 122, in resolve_validation_dependencies         File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\expectation_configuration_builder\\expectation_configuration_builder.py\", line 122, in resolve_validation_dependencies        \r\n    validation_parameter_builder.build_parameters(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\parameter_builder\\parameter_builder.py\", line 167, in build_parameters\r\n    parameter_computation_result: Attributes = parameter_computation_impl(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\parameter_builder\\numeric_metric_range_multi_batch_parameter_builder.py\", line 383, in _build_parameters\r\n    self._estimate_metric_value_range(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\parameter_builder\\numeric_metric_range_multi_batch_parameter_builder.py\", line 616, in _estimate_metric_value_range\r\n    numeric_range_estimator.get_numeric_range_estimate(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\estimators\\numeric_range_estimator.py\", line 73, in get_numeric_range_estimate\r\n    return self._get_numeric_range_estimate(\r\n  File \"...\\lib\\site-packages\\great_expectations\\rule_based_profiler\\estimators\\exact_numeric_range_estimator.py\", line 63, in _get_numeric_range_estimate\r\n    min_value: MetricValue = np.amin(a=metric_values_converted)\r\n  File \"<__array_function__ internals>\", line 180, in amin\r\n  File \"...\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 2916, in amin\r\n    return _wrapreduction(a, np.minimum, 'min', axis, None, out,\r\n  File \"...\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 86, in _wrapreduction\r\n    return ufunc.reduce(obj, axis, dtype, out, **passkwargs)\r\nValueError: zero-size array to reduction operation minimum which has no identity\r\n\r\n\r\n\r\n**Expected behavior**\r\nFill my expectation suite with valuable expectations about column a and b\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows 11\r\n - Great Expectations Version: 0.17.5\r\n - Datasource:  PandasSQLTable (originally)\r\n - Cloud environment: -\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8375/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8375/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8343", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8343/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8343/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8343/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8343", "id": 1810044632, "node_id": "I_kwDOBiS_IM5r4xbY", "number": 8343, "title": "Data docs rendering the unexpected and expected values in the wrong order at random", "user": {"login": "Adchartuni", "id": 31518853, "node_id": "MDQ6VXNlcjMxNTE4ODUz", "avatar_url": "https://avatars.githubusercontent.com/u/31518853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Adchartuni", "html_url": "https://github.com/Adchartuni", "followers_url": "https://api.github.com/users/Adchartuni/followers", "following_url": "https://api.github.com/users/Adchartuni/following{/other_user}", "gists_url": "https://api.github.com/users/Adchartuni/gists{/gist_id}", "starred_url": "https://api.github.com/users/Adchartuni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Adchartuni/subscriptions", "organizations_url": "https://api.github.com/users/Adchartuni/orgs", "repos_url": "https://api.github.com/users/Adchartuni/repos", "events_url": "https://api.github.com/users/Adchartuni/events{/privacy}", "received_events_url": "https://api.github.com/users/Adchartuni/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-07-18T14:23:38Z", "updated_at": "2024-08-22T23:58:33Z", "closed_at": "2024-08-22T23:58:33Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen running a checkpoint, the validation doc sometimes, at random, reverses the order of the pair values compared. This introduces confusion when sharing the report with another person as it is not clear to which column the value belongs to.\r\n**To Reproduce**\r\nThis has happened to me with the expectation: expect_column_pair_values_to_be_equal. \r\nThis is the config of the expectation:\r\n`\"expectation_type\": \"expect_column_pair_values_to_be_equal\",\r\n        \"kwargs\": {\r\n          \"batch_id\": \"data_equality_datasource-data_equality_asset\",\r\n          \"column_A\": \"ordered_quantity\",\r\n          \"column_B\": \"ordered_item_quantity\"`\r\n\r\nThe result of this expectation as stored in the validation JSON file looks like this:\r\n`\"result\": {\r\n        \"element_count\": 748259,\r\n        \"missing_count\": 0,\r\n        \"missing_percent\": 0.0,\r\n        \"partial_unexpected_counts\": [\r\n          {\r\n            \"count\": 15,\r\n            \"value\": [\r\n              1,\r\n              0\r\n            ]\r\n          },\r\n          {\r\n            \"count\": 1,\r\n            \"value\": [\r\n              2,\r\n              0\r\n            ]\r\n          },\r\n          {\r\n            \"count\": 1,\r\n            \"value\": [\r\n              4,\r\n              0\r\n            ]\r\n          }\r\n        ],`\r\n\r\n\r\n\r\nWhen rendered in the data docs it looks like [this](https://files.slack.com/files-pri/T7NEH00BA-F05HHRD8LAY/image.png)\r\n\r\n\r\n**Expected behavior**\r\nThe expected behavior should be:\r\nThe order of the valeus should match with the order of the columns,that means, column_A should be the first value, column_B should be the second value.\r\n\r\nLike in this [picture](https://files.slack.com/files-pri/T7NEH00BA-F05H0S29QTZ/image.png), where I ran the same expectation but got the right order without changing anything.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.17.5\r\n - Datasource: Pandas Dataframe\r\n\r\n**Additional context**\r\nThe order changes occassionally, it is not a persistent error.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8343/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8343/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8333", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8333/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8333/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8333/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8333", "id": 1807999758, "node_id": "I_kwDOBiS_IM5rw-MO", "number": 8333, "title": "[feature] substitution syntax is not working for table_name attribute of fluent_datasources (in Athena)", "user": {"login": "hagai-arad", "id": 112857442, "node_id": "U_kgDOBroRYg", "avatar_url": "https://avatars.githubusercontent.com/u/112857442?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hagai-arad", "html_url": "https://github.com/hagai-arad", "followers_url": "https://api.github.com/users/hagai-arad/followers", "following_url": "https://api.github.com/users/hagai-arad/following{/other_user}", "gists_url": "https://api.github.com/users/hagai-arad/gists{/gist_id}", "starred_url": "https://api.github.com/users/hagai-arad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hagai-arad/subscriptions", "organizations_url": "https://api.github.com/users/hagai-arad/orgs", "repos_url": "https://api.github.com/users/hagai-arad/repos", "events_url": "https://api.github.com/users/hagai-arad/events{/privacy}", "received_events_url": "https://api.github.com/users/hagai-arad/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}, {"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-07-17T15:08:47Z", "updated_at": "2024-08-22T23:58:48Z", "closed_at": "2024-08-22T23:58:48Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen using a substitution syntax in `great_expectations.yml` (e.g. `${my_value}`) in the table_name attribute of a data asset - it doesn't substitute by the env var value nor the value given in `uncommitted/config_variables.yml`. Instead, it uses the string itself as the table name when running queries against this data asset: `select count(*) from ${table_name}`. \r\n\r\n**To Reproduce**\r\ngreat_expectations.yml config:\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n  \r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  enabled: true\r\n  data_context_id: 89ae52ad-b736-43d8-a4b5-2a91d10041a5\r\nfluent_datasources:\r\n  my_datasource:\r\n    type: sql\r\n    assets:\r\n      my_asset:\r\n        type: table\r\n        order_by: []\r\n        batch_metadata: {}\r\n        table_name: ${TABLE_PREFIX}_my_table\r\n        schema_name:\r\n    connection_string: awsathena+rest://@athena.${REGION}.amazonaws.com/{SCHEMA_NAME}?s3_staging_dir=s3://${S3_BUCKET_NAME}/{SCHEMA_NAME}/staging/\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_validation_result: false\r\n  expectation_suite: false\r\n``` \r\n\r\nThe executed code:\r\n```python\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context(context_root_dir=GX_ROOT_DIR)\r\n\r\nresult = context.run_checkpoint(checkpoint_name=\"my_checkpoint\")\r\n``` \r\n\r\nFull stack trace:\r\n```\r\nAn SQL execution Exception occurred.  OperationalError: \"(pyathena.error.OperationalError) TABLE_NOT_FOUND: line 3:6: Table 'awsdatacatalog.my_schema.${TABLE_PREFIX}_my_table' does not exist\r\n[SQL: SELECT count(*) AS \"table.row_count\"\r\nFROM (SELECT *\r\nFROM \"${TABLE_PREFIX}_my_table\"\r\nWHERE true) AS anon_1]\r\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\".  \r\nTraceback: \"Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1965, in _exec_single_context\r\n    self.dialect.do_execute(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 921, in do_execute\r\n    cursor.execute(statement, parameters)\r\n  File \"/usr/local/lib/python3.9/site-packages/pyathena/cursor.py\", line 121, in execute\r\n    raise OperationalError(query_execution.state_change_reason)\r\npyathena.error.OperationalError: TABLE_NOT_FOUND: line 3:6: Table 'awsdatacatalog.my_schema.${TABLE_PREFIX}_my_table' does not exist\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1112, in resolve_metric_bundle\r\n    res = self.execute_query(sa_query_object).fetchall()\r\n  File \"/usr/local/lib/python3.9/site-packages/great_expectations/execution_engine/sqlalchemy_execution_engine.py\", line 1415, in execute_query\r\n    result = connection.execute(query)\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1412, in execute\r\n    return meth(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/sql/elements.py\", line 483, in _execute_on_connection\r\n    return connection._execute_clauseelement(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1635, in _execute_clauseelement\r\n    ret = self._execute_context(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1844, in _execute_context\r\n    return self._exec_single_context(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1984, in _exec_single_context\r\n    self._handle_dbapi_exception(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 2339, in _handle_dbapi_exception\r\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1965, in _exec_single_context\r\n    self.dialect.do_execute(\r\n  File \"/usr/local/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 921, in do_execute\r\n    cursor.execute(statement, parameters)\r\n  File \"/usr/local/lib/python3.9/site-packages/pyathena/cursor.py\", line 121, in execute\r\n    raise OperationalError(query_execution.state_change_reason)\r\nsqlalchemy.exc.OperationalError: (pyathena.error.OperationalError) TABLE_NOT_FOUND: line 3:6: Table 'awsdatacatalog.my_schema.${TABLE_PREFIX}_my_table' does not exist\r\n[SQL: SELECT count(*) AS \"table.row_count\"\r\nFROM (SELECT *\r\nFROM \"${TABLE_PREFIX}_my_table\"\r\nWHERE true) AS anon_1]\r\n(Background on this error at: https://sqlalche.me/e/20/e3q8)\r\n``` \r\n\r\n**Expected behavior**\r\nThe `${TABLE_PREFIX}` should have been replaced with the value stored in `uncommitted/config_variables.yml` or by the value of the `TABLE_PREFIX` env var. The substitution works in all other places in my great_expectations.yml file (e.g. connection_string).\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.17.1\r\n - Datasource: Athena\r\n - Cloud environment: Airflow, AWS\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8333/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8333/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8325", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8325/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8325/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8325/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8325", "id": 1805666420, "node_id": "I_kwDOBiS_IM5roEh0", "number": 8325, "title": "Error when running an expectation with `create_temp_table` is set to `False`", "user": {"login": "moatazelmohtaseb", "id": 7484918, "node_id": "MDQ6VXNlcjc0ODQ5MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7484918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moatazelmohtaseb", "html_url": "https://github.com/moatazelmohtaseb", "followers_url": "https://api.github.com/users/moatazelmohtaseb/followers", "following_url": "https://api.github.com/users/moatazelmohtaseb/following{/other_user}", "gists_url": "https://api.github.com/users/moatazelmohtaseb/gists{/gist_id}", "starred_url": "https://api.github.com/users/moatazelmohtaseb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moatazelmohtaseb/subscriptions", "organizations_url": "https://api.github.com/users/moatazelmohtaseb/orgs", "repos_url": "https://api.github.com/users/moatazelmohtaseb/repos", "events_url": "https://api.github.com/users/moatazelmohtaseb/events{/privacy}", "received_events_url": "https://api.github.com/users/moatazelmohtaseb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2023-07-14T22:32:28Z", "updated_at": "2024-08-22T23:58:59Z", "closed_at": "2024-08-22T23:58:59Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn my current environment I want to run validations on an SQL data source (which is a PostgreSQL database), But as the database is a read-replica, I set the datasource config `create_temp_table` to `False` in order to avoid an error the was thrown when great-expectations tried to create a temp table. But I got a different error instead.\r\n\r\nNote: the validation worked when it was a read/write instance of the database.\r\n\r\n**To Reproduce**\r\ndatasource.py:\r\n```\r\npg_datasource = context.sources.add_or_update_sql(\r\n    name=\"test_datasource\",\r\n    connection_string=my_connection_string,\r\n    create_temp_table=False,\r\n)\r\nquery_asset = pg_datasource.add_query_asset(name=\"test_asset\", query=\"SELECT id  FROM table\")\r\n```\r\nCode:\r\n```\r\ndata_asset = context.get_datasource(\"test_datasource\").get_asset(\"test_asset\")\r\nexpectation_suite_name = \"test_suite\"\r\nbatch_request = data_asset.build_batch_request(options={})\r\ncontext.add_or_update_expectation_suite(expectation_suite_name)\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request,\r\n    expectation_suite_name=expectation_suite_name,\r\n)\r\nexpectation_validation_result2 = validator.expect_column_values_to_be_between(\r\n    \"order_id\", 1,80\r\n)\r\n```\r\ngreat_expectations.yml:\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: ff81e21f-6536-4bb5-aaff-11a149ca16a5\r\n  enabled: true\r\nfluent_datasources:\r\n  test_datasource:\r\n    type: sql\r\n    assets:\r\n      test_asset:\r\n        type: query\r\n        order_by: []\r\n        batch_metadata: {}\r\n        query: SELECT id AS order_id FROM orders\r\n    connection_string: ${DB_URI}\r\n    create_temp_table: false\r\ninclude_rendered_content:\r\n  expectation_suite: false\r\n  globally: false\r\n  expectation_validation_result: false\r\nnotebooks:\r\n\r\n```\r\nfull stack trace:\r\n```\r\n---------------------------------------------------------------------------\r\nArgumentError                             Traceback (most recent call last)\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py:546, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    543 try:\r\n    544     resolved_metrics[\r\n    545         metric_computation_configuration.metric_configuration.id\r\n--> 546     ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    547         **metric_computation_configuration.metric_provider_kwargs\r\n    548     )\r\n    549 except Exception as e:\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/expectations/metrics/metric_provider.py:50, in metric_value.<locals>.wrapper.<locals>.inner_func(*args, **kwargs)\r\n     48 @wraps(metric_fn)\r\n     49 def inner_func(*args, **kwargs):\r\n---> 50     return metric_fn(*args, **kwargs)\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/expectations/metrics/table_metrics/table_column_types.py:71, in ColumnTypes._sqlalchemy(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, metrics, runtime_configuration)\r\n     67     raise GreatExpectationsError(\r\n     68         \"the requested batch is not available; please load the batch into the execution engine.\"\r\n     69     )\r\n---> 71 return _get_sqlalchemy_column_metadata(execution_engine.engine, batch_data)\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/expectations/metrics/table_metrics/table_column_types.py:103, in _get_sqlalchemy_column_metadata(engine, batch_data)\r\n    101     schema_name = batch_data.source_schema_name or batch_data.selectable.schema\r\n--> 103 return get_sqlalchemy_column_metadata(\r\n    104     engine=engine,\r\n    105     table_selectable=table_selectable,\r\n    106     schema_name=schema_name,\r\n    107 )\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/expectations/metrics/util.py:356, in get_sqlalchemy_column_metadata(engine, table_selectable, schema_name)\r\n    348 except (\r\n    349     KeyError,\r\n    350     AttributeError,\r\n   (...)\r\n    354     # we will get a KeyError for temporary tables, since\r\n    355     # reflection will not find the temporary schema\r\n--> 356     columns = column_reflection_fallback(\r\n    357         selectable=table_selectable,\r\n    358         dialect=engine.dialect,\r\n    359         sqlalchemy_engine=engine,\r\n    360     )\r\n    362 # Use fallback because for mssql and trino reflection mechanisms do not throw an error but return an empty list\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/expectations/metrics/util.py:600, in column_reflection_fallback(selectable, dialect, sqlalchemy_engine)\r\n    599     else:\r\n--> 600         query = sa.select(sa.text(\"*\")).select_from(selectable).limit(1)\r\n    602 result_object = connection.execute(query)\r\n\r\nFile <string>:2, in select_from(self, *froms)\r\n\r\nFile /usr/local/lib/python3.8/site-packages/sqlalchemy/sql/base.py:283, in _generative.<locals>._generative(fn, self, *args, **kw)\r\n    282 self = self._generate()\r\n--> 283 x = fn(self, *args, **kw)\r\n    284 assert x is self, \"generative methods must return self\"\r\n\r\nFile /usr/local/lib/python3.8/site-packages/sqlalchemy/sql/selectable.py:6043, in Select.select_from(self, *froms)\r\n   6009 r\"\"\"Return a new :func:`_expression.select` construct with the\r\n   6010 given FROM expression(s)\r\n   6011 merged into its list of FROM objects.\r\n   (...)\r\n   6040 \r\n   6041 \"\"\"\r\n-> 6043 self._from_obj += tuple(\r\n   6044     coercions.expect(\r\n   6045         roles.FromClauseRole, fromclause, apply_propagate_attrs=self\r\n   6046     )\r\n   6047     for fromclause in froms\r\n   6048 )\r\n   6049 return self\r\n\r\nFile /usr/local/lib/python3.8/site-packages/sqlalchemy/sql/selectable.py:6044, in <genexpr>(.0)\r\n   6009 r\"\"\"Return a new :func:`_expression.select` construct with the\r\n   6010 given FROM expression(s)\r\n   6011 merged into its list of FROM objects.\r\n   (...)\r\n   6040 \r\n   6041 \"\"\"\r\n   6043 self._from_obj += tuple(\r\n-> 6044     coercions.expect(\r\n   6045         roles.FromClauseRole, fromclause, apply_propagate_attrs=self\r\n   6046     )\r\n   6047     for fromclause in froms\r\n   6048 )\r\n   6049 return self\r\n\r\nFile /usr/local/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py:413, in expect(role, element, apply_propagate_attrs, argname, post_inspect, disable_inspection, **kw)\r\n    412     if resolved is None:\r\n--> 413         resolved = impl._literal_coercion(\r\n    414             element, argname=argname, **kw\r\n    415         )\r\n    416 else:\r\n\r\nFile /usr/local/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py:619, in _NoTextCoercion._literal_coercion(self, element, argname, **kw)\r\n    616 if isinstance(element, str) and issubclass(\r\n    617     elements.TextClause, self._role_class\r\n    618 ):\r\n--> 619     _no_text_coercion(element, argname)\r\n    620 else:\r\n\r\nFile /usr/local/lib/python3.8/site-packages/sqlalchemy/sql/coercions.py:601, in _no_text_coercion(element, argname, exc_cls, extra, err)\r\n    594 def _no_text_coercion(\r\n    595     element: Any,\r\n    596     argname: Optional[str] = None,\r\n   (...)\r\n    599     err: Optional[Exception] = None,\r\n    600 ) -> NoReturn:\r\n--> 601     raise exc_cls(\r\n    602         \"%(extra)sTextual SQL expression %(expr)r %(argname)sshould be \"\r\n    603         \"explicitly declared as text(%(expr)r)\"\r\n    604         % {\r\n    605             \"expr\": util.ellipses_string(element),\r\n    606             \"argname\": \"for argument %s\" % (argname,) if argname else \"\",\r\n    607             \"extra\": \"%s \" % extra if extra else \"\",\r\n    608         }\r\n    609     ) from err\r\n\r\nArgumentError: Textual SQL expression '%(139839236142800 anon)s' should be explicitly declared as text('%(139839236142800 anon)s')\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nMetricResolutionError                     Traceback (most recent call last)\r\nCell In[10], line 1\r\n----> 1 expectation_validation_result2 = validator.expect_column_values_to_be_between(\r\n      2     \"order_id\", 1,80\r\n      3 )\r\n      5 # print(expectation_validation_result2)\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validator.py:597, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    591         validation_result = ExpectationValidationResult(\r\n    592             success=False,\r\n    593             exception_info=exception_info,\r\n    594             expectation_config=configuration,\r\n    595         )\r\n    596     else:\r\n--> 597         raise err\r\n    599 if self._include_rendered_content:\r\n    600     validation_result.render()\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validator.py:560, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    556     validation_result = ExpectationValidationResult(\r\n    557         expectation_config=copy.deepcopy(expectation.configuration)\r\n    558     )\r\n    559 else:\r\n--> 560     validation_result = expectation.validate(\r\n    561         validator=self,\r\n    562         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n    563         data_context=self._data_context,\r\n    564         runtime_configuration=basic_runtime_configuration,\r\n    565     )\r\n    567 # If validate has set active_validation to true, then we do not save the config to avoid\r\n    568 # saving updating expectation configs to the same suite during validation runs\r\n    569 if self._active_validation is True:\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/expectations/expectation.py:1276, in Expectation.validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n   1267 self._warn_if_result_format_config_in_expectation_configuration(\r\n   1268     configuration=configuration\r\n   1269 )\r\n   1271 configuration.process_evaluation_parameters(\r\n   1272     evaluation_parameters, interactive_evaluation, data_context\r\n   1273 )\r\n   1274 expectation_validation_result_list: list[\r\n   1275     ExpectationValidationResult\r\n-> 1276 ] = validator.graph_validate(\r\n   1277     configurations=[configuration],\r\n   1278     runtime_configuration=runtime_configuration,\r\n   1279 )\r\n   1280 return expectation_validation_result_list[0]\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validator.py:1072, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1070         return evrs\r\n   1071     else:\r\n-> 1072         raise err\r\n   1074 configuration: ExpectationConfiguration\r\n   1075 result: ExpectationValidationResult\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validator.py:1051, in Validator.graph_validate(self, configurations, runtime_configuration)\r\n   1044 resolved_metrics: Dict[Tuple[str, str, str], MetricValue]\r\n   1046 try:\r\n   1047     (\r\n   1048         resolved_metrics,\r\n   1049         evrs,\r\n   1050         processed_configurations,\r\n-> 1051     ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n   1052         graph=graph,\r\n   1053         runtime_configuration=runtime_configuration,\r\n   1054         expectation_validation_graphs=expectation_validation_graphs,\r\n   1055         evrs=evrs,\r\n   1056         processed_configurations=processed_configurations,\r\n   1057         show_progress_bars=self._determine_progress_bars(),\r\n   1058     )\r\n   1059 except Exception as err:\r\n   1060     # If a general Exception occurs during the execution of \"ValidationGraph.resolve()\", then\r\n   1061     # all expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n   1062     if catch_exceptions:\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validator.py:1210, in Validator._resolve_suite_level_graph_and_process_metric_evaluation_errors(self, graph, runtime_configuration, expectation_validation_graphs, evrs, processed_configurations, show_progress_bars)\r\n   1202 resolved_metrics: Dict[Tuple[str, str, str], MetricValue]\r\n   1203 aborted_metrics_info: Dict[\r\n   1204     Tuple[str, str, str],\r\n   1205     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n   1206 ]\r\n   1207 (\r\n   1208     resolved_metrics,\r\n   1209     aborted_metrics_info,\r\n-> 1210 ) = self._metrics_calculator.resolve_validation_graph(\r\n   1211     graph=graph,\r\n   1212     runtime_configuration=runtime_configuration,\r\n   1213     min_graph_edges_pbar_enable=0,\r\n   1214 )\r\n   1216 # Trace MetricResolutionError occurrences to expectations relying on corresponding malfunctioning metrics.\r\n   1217 rejected_configurations: List[ExpectationConfiguration] = []\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/metrics_calculator.py:283, in MetricsCalculator.resolve_validation_graph(self, graph, runtime_configuration, min_graph_edges_pbar_enable)\r\n    278 resolved_metrics: Dict[Tuple[str, str, str], MetricValue]\r\n    279 aborted_metrics_info: Dict[\r\n    280     Tuple[str, str, str],\r\n    281     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n    282 ]\r\n--> 283 resolved_metrics, aborted_metrics_info = graph.resolve(\r\n    284     runtime_configuration=runtime_configuration,\r\n    285     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    286     show_progress_bars=self._show_progress_bars,\r\n    287 )\r\n    288 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validation_graph.py:206, in ValidationGraph.resolve(self, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    200 resolved_metrics: Dict[Tuple[str, str, str], MetricValue] = {}\r\n    202 # updates graph with aborted metrics\r\n    203 aborted_metrics_info: Dict[\r\n    204     Tuple[str, str, str],\r\n    205     Dict[str, Union[MetricConfiguration, Set[ExceptionInfo], int]],\r\n--> 206 ] = self._resolve(\r\n    207     metrics=resolved_metrics,\r\n    208     runtime_configuration=runtime_configuration,\r\n    209     min_graph_edges_pbar_enable=min_graph_edges_pbar_enable,\r\n    210     show_progress_bars=show_progress_bars,\r\n    211 )\r\n    213 return resolved_metrics, aborted_metrics_info\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validation_graph.py:312, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    308                 failed_metric_info[failed_metric.id][\"exception_info\"] = {\r\n    309                     exception_info\r\n    310                 }\r\n    311     else:\r\n--> 312         raise err\r\n    313 except Exception as e:\r\n    314     if catch_exceptions:\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/validator/validation_graph.py:282, in ValidationGraph._resolve(self, metrics, runtime_configuration, min_graph_edges_pbar_enable, show_progress_bars)\r\n    277         computable_metrics.add(metric)\r\n    279 try:\r\n    280     # Access \"ExecutionEngine.resolve_metrics()\" method, to resolve missing \"MetricConfiguration\" objects.\r\n    281     metrics.update(\r\n--> 282         self._execution_engine.resolve_metrics(\r\n    283             metrics_to_resolve=computable_metrics,\r\n    284             metrics=metrics,\r\n    285             runtime_configuration=runtime_configuration,\r\n    286         )\r\n    287     )\r\n    288     progress_bar.update(len(computable_metrics))\r\n    289     progress_bar.refresh()\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py:281, in ExecutionEngine.resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    272 metric_fn_bundle_configurations: List[MetricComputationConfiguration]\r\n    273 (\r\n    274     metric_fn_direct_configurations,\r\n    275     metric_fn_bundle_configurations,\r\n   (...)\r\n    279     runtime_configuration=runtime_configuration,\r\n    280 )\r\n--> 281 return self._process_direct_and_bundled_metric_computation_configurations(\r\n    282     metric_fn_direct_configurations=metric_fn_direct_configurations,\r\n    283     metric_fn_bundle_configurations=metric_fn_bundle_configurations,\r\n    284 )\r\n\r\nFile /usr/local/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py:550, in ExecutionEngine._process_direct_and_bundled_metric_computation_configurations(self, metric_fn_direct_configurations, metric_fn_bundle_configurations)\r\n    544         resolved_metrics[\r\n    545             metric_computation_configuration.metric_configuration.id\r\n    546         ] = metric_computation_configuration.metric_fn(  # type: ignore[misc] # F not callable\r\n    547             **metric_computation_configuration.metric_provider_kwargs\r\n    548         )\r\n    549     except Exception as e:\r\n--> 550         raise gx_exceptions.MetricResolutionError(\r\n    551             message=str(e),\r\n    552             failed_metrics=(\r\n    553                 metric_computation_configuration.metric_configuration,\r\n    554             ),\r\n    555         ) from e\r\n    557 try:\r\n    558     # an engine-specific way of computing metrics together\r\n    559     resolved_metric_bundle: Dict[\r\n    560         Tuple[str, str, str], MetricValue\r\n    561     ] = self.resolve_metric_bundle(\r\n    562         metric_fn_bundle=metric_fn_bundle_configurations\r\n    563     )\r\n\r\nMetricResolutionError: Textual SQL expression '%(139839236142800 anon)s' should be explicitly declared as text('%(139839236142800 anon)s')\r\n```\r\n\r\n**Expected behavior**\r\n`validator` should be able to run on the read replica if `create_temp_table: false`\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: docker-image:python:3.8 running on Ubuntu 20.04\r\n - Great Expectations Version: 0.17.4\r\n - Datasource: PostgreSQL\r\n - Cloud environment: [e.g. Airflow, AWS, Azure, Databricks, GCP]\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8325/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8325/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8294", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8294/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8294/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8294/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8294", "id": 1801347835, "node_id": "I_kwDOBiS_IM5rXmL7", "number": 8294, "title": "Can't run checkpoints in parallel because great_expectations.yml is opened in write mode", "user": {"login": "Chr96er", "id": 8114107, "node_id": "MDQ6VXNlcjgxMTQxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8114107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chr96er", "html_url": "https://github.com/Chr96er", "followers_url": "https://api.github.com/users/Chr96er/followers", "following_url": "https://api.github.com/users/Chr96er/following{/other_user}", "gists_url": "https://api.github.com/users/Chr96er/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chr96er/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chr96er/subscriptions", "organizations_url": "https://api.github.com/users/Chr96er/orgs", "repos_url": "https://api.github.com/users/Chr96er/repos", "events_url": "https://api.github.com/users/Chr96er/events{/privacy}", "received_events_url": "https://api.github.com/users/Chr96er/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 6901116375, "node_id": "LA_kwDOBiS_IM8AAAABm1at1w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/fluent-datasources", "name": "fluent-datasources", "color": "37A060", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-07-12T16:28:29Z", "updated_at": "2024-06-17T13:32:32Z", "closed_at": "2024-06-17T13:32:32Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n(I have looked into the code to the best of my abilities without being able to debug because this happens when multiple threads run at the same time)\r\nWhen multiple checkpoints are triggered simultaneously it sometimes happens that an exception is caused. In my case 5 checkpoints are triggered from Airflow and most of the time 2-4 of them fail with the exception below. Setting retries to 5 and the retry delay to 3 solves my particular problem, although the amount of checkpoints is likely to grow to 50-100 soon.\r\n\r\nAs far as I can tell this happens because Great Expectations opens great_expectations.yml in write mode in line 159 of `file_data_context.py`:\r\n`with open(config_filepath, \"w\") as outfile:`\r\n\r\nThis was completely unexpected to me, since I don't think running a checkpoint requires any write operation on that file.\r\n\r\nAirflow logs:\r\n```\r\n\r\n scheduler | [2023-07-12T11:09:43.252-0500] {dagbag.py:541} INFO - Filling up the DagBag from airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:43.251-0500] {dagbag.py:541} INFO - Filling up the DagBag from airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:43.252-0500] {dagbag.py:541} INFO - Filling up the DagBag from airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:43.260-0500] {dagbag.py:541} INFO - Filling up the DagBag from airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:43.260-0500] {dagbag.py:541} INFO - Filling up the DagBag from airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:46.414-0500] {file_data_context.py:214} INFO - FileDataContext loading fluent config\r\n scheduler | [2023-07-12T11:09:46.426-0500] {config.py:185} INFO - Loading 'datasources' ->\r\n scheduler | [{'assets': [...],\r\n scheduler | 'REDACTED\r\n scheduler | 'create_temp_table': True,\r\n scheduler | 'name': 'REDACTED',\r\n scheduler | 'type': 'sql'}]\r\n scheduler | [2023-07-12T11:09:46.483-0500] {file_data_context.py:214} INFO - FileDataContext loading fluent config\r\n scheduler | [2023-07-12T11:09:46.488-0500] {file_data_context.py:214} INFO - FileDataContext loading fluent config\r\n scheduler | [2023-07-12T11:09:46.499-0500] {config.py:185} INFO - Loading 'datasources' ->\r\n scheduler | [{'assets': [...],\r\n scheduler | 'REDACTED\r\n scheduler | 'create_temp_table': True,\r\n scheduler | 'name': 'REDACTED',\r\n scheduler | 'type': 'sql'}]\r\n scheduler | [2023-07-12T11:09:46.501-0500] {config.py:185} INFO - Loading 'datasources' ->\r\n scheduler | [{'assets': [...],\r\n scheduler | 'REDACTED\r\n scheduler | 'create_temp_table': True,\r\n scheduler | 'name': 'REDACTED',\r\n scheduler | 'type': 'sql'}]\r\n scheduler | [2023-07-12T11:09:46.643-0500] {file_data_context.py:214} INFO - FileDataContext loading fluent config\r\n scheduler | [2023-07-12T11:09:46.649-0500] {abstract_data_context.py:5891} INFO - Loaded 'REDACTED' from fluent config\r\n scheduler | [2023-07-12T11:09:46.649-0500] {file_data_context.py:165} INFO - Saving 1 Fluent Datasources to data-testing/great_expectations/great_expectations.yml\r\n scheduler | [2023-07-12T11:09:46.654-0500] {config.py:185} INFO - Loading 'datasources' ->\r\n scheduler | [{'assets': [...],\r\n scheduler | 'REDACTED\r\n scheduler | 'create_temp_table': True,\r\n scheduler | 'name': 'REDACTED',\r\n scheduler | 'type': 'sql'}]\r\n scheduler | [2023-07-12T11:09:46.699-0500] {file_data_context.py:214} INFO - FileDataContext loading fluent config\r\n scheduler | [2023-07-12T11:09:46.707-0500] {config.py:185} INFO - Loading 'datasources' ->\r\n scheduler | [{'assets': [...], 'name': 'REDACTED', 'type': 'sql'}]\r\n scheduler | [2023-07-12T11:09:46.711-0500] {dagbag.py:350} ERROR - Failed to import: airflow/dags/run-constraints-checkpoint.py\r\n scheduler | Traceback (most recent call last):\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/models/dagbag.py\", line 346, in parse\r\n scheduler | loader.exec_module(new_module)\r\n scheduler | File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n scheduler | File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n scheduler | File \"airflow/dags/run-constraints-checkpoint.py\", line 29, in <module>\r\n scheduler | context = gx.get_context(context_root_dir=gx_context_root_dir)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/util.py\", line 1917, in get_context\r\n scheduler | file_context = _get_file_context(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/util.py\", line 2047, in _get_file_context\r\n scheduler | return FileDataContext(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/file_data_context.py\", line 64, in __init__\r\n scheduler | super().__init__(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/serializable_data_context.py\", line 69, in __init__\r\n scheduler | super().__init__(runtime_environment=runtime_environment)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/core/usage_statistics/usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n scheduler | result = func(*args, **kwargs)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/abstract_data_context.py\", line 284, in __init__\r\n scheduler | self.fluent_config = self._load_fluent_config(self._config_provider)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/file_data_context.py\", line 220, in _load_fluent_config\r\n scheduler | gx_config = GxConfig.parse_yaml(path_to_fluent_yaml, _allow_empty=True)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/datasource/fluent/config.py\", line 252, in parse_yaml\r\n scheduler | config = cls(**loaded)\r\n scheduler | File \"pydantic/main.py\", line 341, in pydantic.main.BaseModel.__init__\r\n scheduler | pydantic.error_wrappers.ValidationError: 1 validation error for GxConfig\r\n scheduler | fluent_datasources -> REDACTED\r\n scheduler | field required (type=value_error.missing)\r\n scheduler | [2023-07-12T11:09:46.717-0500] {cli.py:232} WARNING - Dag 'gx_run_constraints_checkpoints' not found in path airflow/dags/run-constraints-checkpoint.py; trying path airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:46.717-0500] {dagbag.py:541} INFO - Filling up the DagBag from airflow/dags/run-constraints-checkpoint.py\r\n scheduler | [2023-07-12T11:09:46.718-0500] {abstract_data_context.py:5891} INFO - Loaded 'REDACTED' from fluent config\r\n scheduler | [2023-07-12T11:09:46.718-0500] {file_data_context.py:165} INFO - Saving 1 Fluent Datasources to data-testing/great_expectations/great_expectations.yml\r\n scheduler | [2023-07-12T11:09:46.720-0500] {dagbag.py:350} ERROR - Failed to import: airflow/dags/run-constraints-checkpoint.py\r\n scheduler | Traceback (most recent call last):\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/models/dagbag.py\", line 346, in parse\r\n scheduler | loader.exec_module(new_module)\r\n scheduler | File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n scheduler | File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n scheduler | File \"airflow/dags/run-constraints-checkpoint.py\", line 29, in <module>\r\n scheduler | context = gx.get_context(context_root_dir=gx_context_root_dir)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/util.py\", line 1917, in get_context\r\n scheduler | file_context = _get_file_context(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/util.py\", line 2047, in _get_file_context\r\n scheduler | return FileDataContext(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/file_data_context.py\", line 61, in __init__\r\n scheduler | self._scaffold_project()\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/file_data_context.py\", line 86, in _scaffold_project\r\n scheduler | if self.is_project_scaffolded(self._context_root_directory):\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/serializable_data_context.py\", line 480, in is_project_scaffolded\r\n scheduler | and cls.config_variables_yml_exist(ge_dir)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/serializable_data_context.py\", line 240, in config_variables_yml_exist\r\n scheduler | config_var_path = config.get(\"config_variables_file_path\")\r\n scheduler | AttributeError: 'NoneType' object has no attribute 'get'\r\n scheduler | [2023-07-12T11:09:46.721-0500] {local_executor.py:135} ERROR - Failed to execute task Dag 'gx_run_constraints_checkpoints' could not be found; either it does not exist or it failed to parse..\r\n scheduler | Traceback (most recent call last):\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/executors/local_executor.py\", line 131, in _execute_work_in_fork\r\n scheduler | args.func(args)\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/cli/cli_config.py\", line 52, in command\r\n scheduler | return func(*args, **kwargs)\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/utils/cli.py\", line 112, in wrapper\r\n scheduler | return f(*args, **kwargs)\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/cli/commands/task_command.py\", line 401, in task_run\r\n scheduler | _dag = get_dag(args.subdir, args.dag_id)\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/utils/cli.py\", line 235, in get_dag\r\n scheduler | raise AirflowException(\r\n scheduler | airflow.exceptions.AirflowException: Dag 'gx_run_constraints_checkpoints' could not be found; either it does not exist or it failed to parse.\r\n scheduler | [2023-07-12T11:09:46.732-0500] {abstract_data_context.py:5891} INFO - Loaded 'REDACTED' from fluent config\r\n scheduler | [2023-07-12T11:09:46.733-0500] {file_data_context.py:165} INFO - Saving 1 Fluent Datasources to data-testing/great_expectations/great_expectations.yml\r\n scheduler | [2023-07-12T11:09:46.850-0500] {abstract_data_context.py:5891} INFO - Loaded 'REDACTED' from fluent config\r\n scheduler | [2023-07-12T11:09:46.850-0500] {file_data_context.py:165} INFO - Saving 1 Fluent Datasources to data-testing/great_expectations/great_expectations.yml\r\n scheduler | [2023-07-12T11:09:47.472-0500] {run-constraints-checkpoint.py:51} INFO - REDACTED.constraints.fragments.3-0-0\r\n scheduler | [2023-07-12T11:09:47.537-0500] {run-constraints-checkpoint.py:51} INFO - REDACTED.constraints.fragments.3-0-0\r\n scheduler | [2023-07-12T11:09:47.547-0500] {run-constraints-checkpoint.py:51} INFO - REDACTED.constraints.fragments.3-0-0\r\n scheduler | [2023-07-12T11:09:47.607-0500] {run-constraints-checkpoint.py:51} INFO - REDACTED.constraints.segments.2-5\r\n scheduler | [2023-07-12T11:09:47.613-0500] {scheduler_job_runner.py:677} INFO - Received executor event with state failed for task instance TaskInstanceKey(dag_id='gx_run_constraints_checkpoints', task_id='REDACTED_constraints_fragments_3-0-0.load_templated_json', run_id='scheduled__2023-07-11T00:00:00+00:00', try_number=2, map_index=-1)\r\n scheduler | [2023-07-12T11:09:47.618-0500] {run-constraints-checkpoint.py:51} INFO - REDACTED.constraints.segments.3-0-0\r\n scheduler | [2023-07-12T11:09:47.621-0500] {scheduler_job_runner.py:713} INFO - TaskInstance Finished: dag_id=gx_run_constraints_checkpoints, task_id=REDACTED_constraints_fragments_3-0-0.load_templated_json, run_id=scheduled__2023-07-11T00:00:00+00:00, map_index=-1, run_start_date=2023-07-12 00:00:04.725685+00:00, run_end_date=2023-07-12 00:00:04.987151+00:00, run_duration=0.261466, state=queued, executor_state=failed, try_number=2, max_tries=6, job_id=197, pool=default_pool, queue=default, priority_weight=2, operator=_PythonDecoratedOperator, queued_dttm=2023-07-12 16:09:43.009241+00:00, queued_by_job_id=206, pid=2120366\r\n scheduler | [2023-07-12T11:09:47.621-0500] {scheduler_job_runner.py:761} ERROR - Executor reports task instance <TaskInstance: gx_run_constraints_checkpoints.REDACTED_constraints_fragments_3-0-0.load_templated_json scheduled__2023-07-11T00:00:00+00:00 [queued]> finished (failed) although the task says its queued. (Info: None) Was the task killed externally?\r\n scheduler | [2023-07-12T11:09:47.625-0500] {taskinstance.py:1826} ERROR - Executor reports task instance <TaskInstance: gx_run_constraints_checkpoints.REDACTED_constraints_fragments_3-0-0.load_templated_json scheduled__2023-07-11T00:00:00+00:00 [queued]> finished (failed) although the task says its queued. (Info: None) Was the task killed externally?\r\n scheduler | [2023-07-12T11:09:47.638-0500] {taskinstance.py:1345} INFO - Marking task as UP_FOR_RETRY. dag_id=gx_run_constraints_checkpoints, task_id=REDACTED_constraints_fragments_3-0-0.load_templated_json, execution_date=20230711T000000, start_date=20230712T000004, end_date=20230712T160947\r\n\r\n```\r\n\r\n**To Reproduce**\r\nTrigger many checkpoints that use the same great_expectations.yml at the same time. \r\n\r\nStack trace (same as above):\r\n\r\n```\r\n scheduler | [2023-07-12T11:09:46.711-0500] {dagbag.py:350} ERROR - Failed to import: airflow/dags/run-constraints-checkpoint.py\r\n scheduler | Traceback (most recent call last):\r\n scheduler | File \"data-testing/venv/lib/python3.9/site-packages/airflow/models/dagbag.py\", line 346, in parse\r\n scheduler | loader.exec_module(new_module)\r\n scheduler | File \"<frozen importlib._bootstrap_external>\", line 850, in exec_module\r\n scheduler | File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\r\n scheduler | File \"airflow/dags/run-constraints-checkpoint.py\", line 29, in <module>\r\n scheduler | context = gx.get_context(context_root_dir=gx_context_root_dir)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/util.py\", line 1917, in get_context\r\n scheduler | file_context = _get_file_context(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/util.py\", line 2047, in _get_file_context\r\n scheduler | return FileDataContext(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/file_data_context.py\", line 64, in __init__\r\n scheduler | super().__init__(\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/serializable_data_context.py\", line 69, in __init__\r\n scheduler | super().__init__(runtime_environment=runtime_environment)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/core/usage_statistics/usage_statistics.py\", line 260, in usage_statistics_wrapped_method\r\n scheduler | result = func(*args, **kwargs)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/abstract_data_context.py\", line 284, in __init__\r\n scheduler | self.fluent_config = self._load_fluent_config(self._config_provider)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/data_context/data_context/file_data_context.py\", line 220, in _load_fluent_config\r\n scheduler | gx_config = GxConfig.parse_yaml(path_to_fluent_yaml, _allow_empty=True)\r\n scheduler | File \"gx_fork/great_expectations/great_expectations/datasource/fluent/config.py\", line 252, in parse_yaml\r\n scheduler | config = cls(**loaded)\r\n scheduler | File \"pydantic/main.py\", line 341, in pydantic.main.BaseModel.__init__\r\n scheduler | pydantic.error_wrappers.ValidationError: 1 validation error for GxConfig\r\n\r\n```\r\n\r\n**Expected behavior**\r\nI'd expect Great Expectations to successfully trigger the checkpoints and not open great_expectations.yml in write mode, since no changes on that file are required for running a checkpoint.\r\n\r\n**Environment (please complete the following information):**\r\nOperating System: Ubuntu 22.04\r\nGreat Expectations Version: 0.17.3\r\nDatasource: BigQuery\r\nCloud environment: GCP\r\n", "closed_by": {"login": "jcampbell", "id": 332575, "node_id": "MDQ6VXNlcjMzMjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/332575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcampbell", "html_url": "https://github.com/jcampbell", "followers_url": "https://api.github.com/users/jcampbell/followers", "following_url": "https://api.github.com/users/jcampbell/following{/other_user}", "gists_url": "https://api.github.com/users/jcampbell/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcampbell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcampbell/subscriptions", "organizations_url": "https://api.github.com/users/jcampbell/orgs", "repos_url": "https://api.github.com/users/jcampbell/repos", "events_url": "https://api.github.com/users/jcampbell/events{/privacy}", "received_events_url": "https://api.github.com/users/jcampbell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8294/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8294/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8276", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8276/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8276/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8276/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8276", "id": 1798248146, "node_id": "I_kwDOBiS_IM5rLxbS", "number": 8276, "title": "URN Parameter defined in the checkpoint is passed as a string to the expectation during runtime", "user": {"login": "Ranji-1712", "id": 114416830, "node_id": "U_kgDOBtHcvg", "avatar_url": "https://avatars.githubusercontent.com/u/114416830?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ranji-1712", "html_url": "https://github.com/Ranji-1712", "followers_url": "https://api.github.com/users/Ranji-1712/followers", "following_url": "https://api.github.com/users/Ranji-1712/following{/other_user}", "gists_url": "https://api.github.com/users/Ranji-1712/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ranji-1712/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ranji-1712/subscriptions", "organizations_url": "https://api.github.com/users/Ranji-1712/orgs", "repos_url": "https://api.github.com/users/Ranji-1712/repos", "events_url": "https://api.github.com/users/Ranji-1712/events{/privacy}", "received_events_url": "https://api.github.com/users/Ranji-1712/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2023-07-11T06:59:37Z", "updated_at": "2024-08-22T23:59:11Z", "closed_at": "2024-08-22T23:59:11Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn the checkpoint configuration (like below) , when passing the query parameter which is configured in the sqlalchemy_query_store to the evaluation parameter and also calling the same in the expectation suite (added below) . While running the checkpoint instead of the query results the parameter value is passed as it is to the validation .\r\n\r\n**Checkpoint Config:**\r\n \r\n```\r\nname: validation_checkpoint\r\nconfig_version: 1\r\nclass_name: Checkpoint\r\nmodule_name: great_expectations.checkpoint\r\ntemplate_name:\r\nrun_name_template: \"%Y-%m-%d %H:%M:%S_validation_result\"\r\naction_list:\r\n  - name: store_validation_result\r\n    action:\r\n      class_name: StoreValidationResultAction\r\n  - name: store_evaluation_params\r\n    action:\r\n      class_name: StoreEvaluationParametersAction\r\n  - name: update_data_docs\r\n    action:\r\n      class_name: UpdateDataDocsAction\r\nvalidations:\r\n  - name: vaidation\r\n    batch_request:\r\n      data_asset_name: data_asset_name\r\n      data_connector_name: data_connector_name\r\n      datasource_name: datasource_name\r\n    expectation_suite_name: expect_table_row_count_to_equal\r\n    evaluation_parameters:\r\n      source_count: { \"$PARAMETER\": \"urn:great_expectations:stores:sqlalchemy_query_store:source_count\" }\r\n```\r\n\r\n**Expectation Suite with Parameter defined in checkpoint**\r\n```\r\n{\r\n  \"expectation_suite_name\": \"expect_table_row_count_to_equal\",\r\n  \"expectations\": [\r\n    {\r\n      \"expectation_type\": \"expect_table_row_count_to_equal\",\r\n      \"kwargs\": {\r\n        \"value\": {\"$PARAMETER\": \"source_count\"},\r\n        \"result_format\": \"COMPLETE\",\r\n        \"catch_exceptions\": true\r\n      },\r\n      \"meta\":{\r\n        \"notes\": {\r\n            \"format\": \"markdown\",\r\n            \"content\": [\"**Validate the count**\"]\r\n              }\r\n      }\r\n    }\r\n  ]\r\n} \r\n\r\n```\r\n\r\n**Stores Config from great_expectations.yml file :** \r\n```\r\nsqlalchemy_query_store:\r\n    class_name: SqlAlchemyQueryStore\r\n    credentials:\r\n      connection_string: ${connection_string}\r\n    queries:\r\n      source_count:\r\n        query: select count(*) as source_count from schema.table;\r\n        return_type: scalar\r\n```\r\n\r\n**Error :** \r\n`Must have exactly {\u2018$PARAMETER\u2019: \u2018urn:great_expectations:stores:sqlalchemy_query_store:source_count\u2019} rows`\r\n\r\n**great_expectations.yml config** \r\n\r\n```\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources:\r\n  lake_prod_data_source:\r\n    name: lake_data_source\r\n    class_name: Datasource\r\n    module_name: great_expectations.datasource\r\n    data_connectors:\r\n      lake_prod_data_connector:\r\n        class_name: ConfiguredAssetSqlDataConnector\r\n        assets:\r\n          luna_lazypay_transactions_data_asset:\r\n            schema_name: luna_lazypay\r\n            table_name: transactions\r\n        name: lake_prod_data_connector\r\n        module_name: great_expectations.datasource.data_connector\r\n    execution_engine:\r\n      module_name: great_expectations.execution_engine\r\n      create_temp_table: false\r\n      class_name: SqlAlchemyExecutionEngine\r\n      connection_string: ${lake_prod_connection_string}\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n  # Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n\r\n#luna_lazypay.transactions\r\n  sqlalchemy_query_store_1:\r\n    class_name: SqlAlchemyQueryStore\r\n    credentials:\r\n      connection_string: ${connection_string}\r\n    queries:\r\n      source_total_count:\r\n        query: select count(*) as source_count from <schema name>.<table_name>;\r\n        return_type: scalar\r\n\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    store_backend_parameters:\r\n      class_name: TupleStoreBackend\r\n      base_directory: uncommitted/config_variables/\r\n      prefix: \"parameters\"\r\n      sep: \"__\"\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  data_context_id: 20556d2a-71ce-4407-b376-2085a8454936\r\n  enabled: true\r\ninclude_rendered_content:\r\n  expectation_suite: false\r\n  expectation_validation_result: false\r\n  globally: false\r\nnotebooks:\r\n```\r\n\r\n**Expected behavior**\r\nInstead of the passing the same URN parameter defined in the evaluation parameter , expected to pass the respective query results during the checkpoint run / validation\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  MacOS\r\n - Great Expectations Version: 0.16.13\r\n - Datasource: Athena\r\n - Cloud environment: -\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8276/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8276/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8267", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8267/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8267/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8267/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8267", "id": 1797175793, "node_id": "I_kwDOBiS_IM5rHrnx", "number": 8267, "title": "Databrick link says Page Not Found", "user": {"login": "drishyatm", "id": 66368262, "node_id": "MDQ6VXNlcjY2MzY4MjYy", "avatar_url": "https://avatars.githubusercontent.com/u/66368262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drishyatm", "html_url": "https://github.com/drishyatm", "followers_url": "https://api.github.com/users/drishyatm/followers", "following_url": "https://api.github.com/users/drishyatm/following{/other_user}", "gists_url": "https://api.github.com/users/drishyatm/gists{/gist_id}", "starred_url": "https://api.github.com/users/drishyatm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drishyatm/subscriptions", "organizations_url": "https://api.github.com/users/drishyatm/orgs", "repos_url": "https://api.github.com/users/drishyatm/repos", "events_url": "https://api.github.com/users/drishyatm/events{/privacy}", "received_events_url": "https://api.github.com/users/drishyatm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-07-10T17:04:32Z", "updated_at": "2024-03-12T17:16:47Z", "closed_at": "2024-03-12T17:16:47Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIntegration says about databricks integration. However the hyperlink connect to the data source as databricks says Page Not Found. \r\n\r\n**To Reproduce**\r\nhttps://docs.greatexpectations.io/docs/deployment_patterns/how_to_use_great_expectations_in_databricks/\r\n\r\nClick on databricks on the Integrations sections\r\n\r\n**Expected behavior**\r\nThe web page corresponding to the provided URL should load successfully, displaying its content.\r\n\r\nOS : Ubuntu\r\nBrowser tried : Google Chrome\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8267/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8267/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8243", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8243/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8243/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8243/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8243", "id": 1791591081, "node_id": "I_kwDOBiS_IM5qyYKp", "number": 8243, "title": "PERFORMANCE DEGRADATION if generating DataDocs is on - a lot of \"SELECT value FROM ge_validations_store\" SQLs are issued for expectation_suite_names NOT RELEVANT to executed Checkpoint", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2023-07-06T13:41:16Z", "updated_at": "2024-04-19T08:54:28Z", "closed_at": "2023-10-16T16:28:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nAfter executing a Checkpoint upon a Snowflake table and saving its results to Snowflake ge_validations_store table \r\na lot of \"SELECT value FROM ge_validations_store\" SQLs are issued for expectation_suite_names NOT RELEVANT to executed Checkpoint\r\n\r\nExample SQL log from Snowflake Query history: \r\n```\r\n\r\n--looks like storing results (OK):\r\nINSERT INTO ge_validations_store (expectation_suite_name, run_name, run_time, batch_identifier, value) VALUES ('....\r\n\r\n--looks like getting all expectation_suite_names - WHY do we need it?\r\nSELECT expectation_suite_name, run_name, run_time, batch_identifier \r\nFROM ge_validations_store \r\nWHERE true\r\n\r\n--series of problematic SQLs -\r\n--looks like completely not needed as it loops thru a lot of expectation_suite_names:\r\n\r\nSELECT value FROM ge_validations_store \r\nWHERE ge_validations_store.expectation_suite_name = 'suite_1' AND ge_validations_store.run_name = 'run_name' AND ge_validations_store.run_time = '...\r\n\r\nSELECT value FROM ge_validations_store \r\nWHERE ge_validations_store.expectation_suite_name = 'suite_2' AND ge_validations_store.run_name = 'run_name' AND ge_validations_store.run_time = '...\r\n\r\n....\r\n\r\nSELECT value FROM ge_validations_store \r\nWHERE ge_validations_store.expectation_suite_name = 'suite_X' AND ge_validations_store.run_name = 'run_name' AND ge_validations_store.run_time = '...\r\n\r\n```\r\n\r\n**To Reproduce**\r\n\r\n1) run any checkpoint having GE configured to save results to Snowflake ge_validations_store table\r\n2) review Snowflake Query history\r\n\r\nif not reproduced/tested on a clean environment, add more checkpoints with new expectation_suites\r\n\r\n**Expected behavior**\r\n\r\nSELECT value FROM ge_validations_store (for each expectation_suite_name ) are not issued\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  Linux\r\n - Great Expectations Version:  0.16.1\r\n - Datasource: Snowflake\r\n\r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8243/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8243/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8201", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8201/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8201/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8201/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8201", "id": 1778600784, "node_id": "I_kwDOBiS_IM5qA0tQ", "number": 8201, "title": "Access to Trino source used unexpected credentials for authorization", "user": {"login": "Stefs-2142", "id": 23437843, "node_id": "MDQ6VXNlcjIzNDM3ODQz", "avatar_url": "https://avatars.githubusercontent.com/u/23437843?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stefs-2142", "html_url": "https://github.com/Stefs-2142", "followers_url": "https://api.github.com/users/Stefs-2142/followers", "following_url": "https://api.github.com/users/Stefs-2142/following{/other_user}", "gists_url": "https://api.github.com/users/Stefs-2142/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stefs-2142/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stefs-2142/subscriptions", "organizations_url": "https://api.github.com/users/Stefs-2142/orgs", "repos_url": "https://api.github.com/users/Stefs-2142/repos", "events_url": "https://api.github.com/users/Stefs-2142/events{/privacy}", "received_events_url": "https://api.github.com/users/Stefs-2142/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-06-28T09:51:41Z", "updated_at": "2024-08-22T23:59:23Z", "closed_at": "2024-08-22T23:59:23Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nInstead of using credentials defined in DataSource config for Trino source called `trino_datasource_config`, GE trying to use my local Linux user name- **sbubnov**.\r\n\r\nWhile running example bellow got next error - \r\n```\r\nFile \"/home/sbubnov/s7/projects/ge/env/lib/python3.8/site-packages/trino/client.py\", line 613, in raise_response_error\r\n    raise exceptions.HttpError(\r\ntrino.exceptions.HttpError: error 401: b'Access Denied: User [sbubnov] not a member of an authorized group'\r\n```\r\ni assume that Trino connector broken (\r\n\r\n**To Reproduce**\r\nin my build i use EphemeralDataContext. Bellow code that i used.\r\n1. define script.\r\n```\r\n    datasources_name = 'Glacier_UAT_2'\r\n    connection_string = f\"trino://{user}:{password}@{host}:{port}/{database}\"\r\n    data_context_config = DataContextConfig(\r\n        config_version=3,\r\n        store_backend_defaults=InMemoryStoreBackendDefaults()\r\n    )\r\n    trino_datasource_config = {\r\n        'name': datasources_name,\r\n        \"class_name\": \"Datasource\",\r\n        \"execution_engine\": {\r\n            \"class_name\": \"SqlAlchemyExecutionEngine\",\r\n            \"connection_string\": connection_string,\r\n        },\r\n        \"data_connectors\": {\r\n            \"default_configured_data_connector_name\": {\r\n                \"class_name\": \"ConfiguredAssetSqlDataConnector\",\r\n                'assets': {\r\n                    \"test11\": {\r\n                        \"class_name\": \"Asset\",\r\n                        \"schema_name\": \"samples\",\r\n                        \"table_name\": \"test11\",\r\n                    },\r\n                }\r\n            },\r\n        },\r\n    }\r\n\r\n    context = EphemeralDataContext(project_config=data_context_config)\r\n    context.add_datasource(**trino_datasource_config)\r\n\r\n    suite = context.add_expectation_suite(\r\n        expectation_suite_name='trino_test',\r\n        expectations=[\r\n            ExpectationConfiguration(\r\n                expectation_type=\"expect_column_values_to_be_in_set\",\r\n                kwargs={\r\n                    \"column\": \"accelerated\",\r\n                    \"value_set\": ['true', 'false'],\r\n                },\r\n            ),\r\n        ]\r\n    )\r\n    context.save_expectation_suite(expectation_suite=suite)\r\n\r\n    trino_batch_request = {\r\n        'data_connector_name': 'default_configured_data_connector_name',\r\n        \"datasource_name\": datasources_name,\r\n        \"data_asset_name\": \"test11\",\r\n    }\r\n\r\n    checkpoint = ge.checkpoint.SimpleCheckpoint(\r\n        name=\"trino_test\",\r\n        data_context=context,\r\n        expectation_suite_name=\"trino_test\",\r\n        batch_request=trino_batch_request,\r\n    )\r\n    context.add_checkpoint(checkpoint=checkpoint)\r\n\r\n    datahub_action = {\r\n        \"name\": \"datahub_action\",\r\n        \"action\": {\r\n            \"module_name\": \"datahub.integrations.great_expectations.action\",\r\n            \"class_name\": \"DataHubValidationAction\",\r\n            \"server_url\": datahub_host,\r\n            \"token\": datahub_password,\r\n        }\r\n    }\r\n\r\n    checkpoint = context.get_checkpoint(\"trino_test\")\r\n    checkpoint.action_list.append(datahub_action)\r\n\r\n    print('Run Great Expectation task...')\r\n    checkpoint_result = checkpoint.run()\r\n\r\n    if not checkpoint_result[\"success\"]:\r\n        print(\"Validation failed!\")\r\n    else:\r\n        print(\"Validation succeeded!\")\r\n```\r\n2. run script\r\n\r\n**Expected behavior**\r\noutput print - \"Validation succeeded!\"\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  Linux Mint 20.2\r\n - Great Expectations Version: 0.17.1\r\n - Datasource: Trino\r\n - Cloud environment: None\r\n\r\n**Additional context**\r\nuser - sbubnov that linux user on my laptop\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8201/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8201/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8162", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8162/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8162/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8162/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8162", "id": 1769298783, "node_id": "I_kwDOBiS_IM5pdVtf", "number": 8162, "title": "Unable to create a validator for data on S3 with different endpoint_url", "user": {"login": "blaze225", "id": 22424814, "node_id": "MDQ6VXNlcjIyNDI0ODE0", "avatar_url": "https://avatars.githubusercontent.com/u/22424814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blaze225", "html_url": "https://github.com/blaze225", "followers_url": "https://api.github.com/users/blaze225/followers", "following_url": "https://api.github.com/users/blaze225/following{/other_user}", "gists_url": "https://api.github.com/users/blaze225/gists{/gist_id}", "starred_url": "https://api.github.com/users/blaze225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blaze225/subscriptions", "organizations_url": "https://api.github.com/users/blaze225/orgs", "repos_url": "https://api.github.com/users/blaze225/repos", "events_url": "https://api.github.com/users/blaze225/events{/privacy}", "received_events_url": "https://api.github.com/users/blaze225/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}, {"id": 5710436171, "node_id": "LA_kwDOBiS_IM8AAAABVF5XSw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:s3_datasources", "name": "feature:s3_datasources", "color": "80C3BA", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2023-06-22T09:30:00Z", "updated_at": "2025-01-23T15:32:16Z", "closed_at": "2023-10-24T13:54:47Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUnable to create a validator for data on S3 with different endpoint_url\r\n\r\nThe error: \r\n`ExecutionEngineError: PandasExecutionEngine encountered the following error while trying to read data from S3 Bucket: An error occurred (InvalidAccessKeyId) when calling the GetObject operation: The AWS Access Key Id you provided does not exist in our records.` \r\n\r\nThis is happening (most likely) due to `boto3_options` not being carried over to this step. Since, I use a different `endpoint_url`, this is crucial for my use case.\r\n\r\n**To Reproduce**\r\n\r\nCode:\r\n``` python\r\nimport great_expectations as gx\r\nboto3_options = {\r\n    \"endpoint_url\": <endpoint_url>,\r\n     \"aws_access_key_id\": <aws_access_key_id>,\r\n    \"aws_secret_access_key\": <aws_secret_access_key>\r\n}\r\ncontext = gx.get_context(context_root_dir=<path_to_gx_folder>)\r\ndatasource = context.sources.add_pandas_s3(\r\n    name=datasource_name, bucket=bucket_name, boto3_options=boto3_options\r\n)\r\nasset = datasource.add_parquet_asset(\r\n    name=\"s3_asset\",\r\n    batching_regex=r\"(.*).parquet\",\r\n    s3_prefix=<s3_prefix>\r\n)\r\nbatch_request = asset.build_batch_request()\r\ncontext.add_or_update_expectation_suite(expectation_suite_name=\"test_suite\")\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite_name=\"test_suite\"\r\n)\r\n```\r\n\r\ngreat_expectations.yml: \r\n``` yaml\r\n# Welcome to Great Expectations! Always know what to expect from your data.\r\n#\r\n# Here you can define datasources, batch kwargs generators, integrations and\r\n# more. This file is intended to be committed to your repo. For help with\r\n# configuration please:\r\n#   - Read our docs: https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview/#2-configure-your-datasource\r\n#   - Join our slack channel: http://greatexpectations.io/slack\r\n\r\n# config_version refers to the syntactic version of this config file, and is used in maintaining backwards compatibility\r\n# It is auto-generated and usually does not need to be changed.\r\nconfig_version: 3.0\r\n\r\n# Datasources tell Great Expectations where your data lives and how to get it.\r\n# You can use the CLI command `great_expectations datasource new` to help you\r\n# add a new datasource. Read more at https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/connect_to_data_overview\r\ndatasources: {}\r\n\r\n# This config file supports variable substitution which enables: 1) keeping\r\n# secrets out of source control & 2) environment-based configuration changes\r\n# such as staging vs prod.\r\n#\r\n# When GX encounters substitution syntax (like `my_key: ${my_value}` or\r\n# `my_key: $my_value`) in the great_expectations.yml file, it will attempt\r\n# to replace the value of `my_key` with the value from an environment\r\n# variable `my_value` or a corresponding key read from this config file,\r\n# which is defined through the `config_variables_file_path`.\r\n# Environment variables take precedence over variables defined here.\r\n#\r\n# Substitution values defined here can be a simple (non-nested) value,\r\n# nested value such as a dictionary, or an environment variable (i.e. ${ENV_VAR})\r\n#\r\n#\r\n# https://docs.greatexpectations.io/docs/guides/setup/configuring_data_contexts/how_to_configure_credentials\r\n\r\n\r\nconfig_variables_file_path: uncommitted/config_variables.yml\r\n\r\n# The plugins_directory will be added to your python path for custom modules\r\n# used to override and extend Great Expectations.\r\nplugins_directory: plugins/\r\n\r\nstores:\r\n# Stores are configurable places to store things like Expectations, Validations\r\n# Data Docs, and more. These are for advanced users only - most users can simply\r\n# leave this section alone.\r\n#\r\n# Three stores are required: expectations, validations, and\r\n# evaluation_parameters, and must exist with a valid store entry. Additional\r\n# stores can be configured for uses such as data_docs, etc.\r\n  expectations_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: expectations/\r\n\r\n  expectations_S3_store:\r\n    class_name: ExpectationsStore\r\n    store_backend:\r\n      class_name: TupleS3StoreBackend\r\n      bucket: gx-testing\r\n      prefix: expectations/\r\n      boto3_options:\r\n        endpoint_url: <endpoint_url>\r\n        region_name: default\r\n        aws_access_key_id: <aws_access_key_id>\r\n        aws_secret_access_key: <aws_secret_access_key>\r\n\r\n  validations_store:\r\n    class_name: ValidationsStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/validations/\r\n\r\n  evaluation_parameter_store:\r\n    class_name: EvaluationParameterStore\r\n  checkpoint_store:\r\n    class_name: CheckpointStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: checkpoints/\r\n\r\n  profiler_store:\r\n    class_name: ProfilerStore\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      suppress_store_backend_id: true\r\n      base_directory: profilers/\r\n\r\nexpectations_store_name: expectations_S3_store\r\nvalidations_store_name: validations_store\r\nevaluation_parameter_store_name: evaluation_parameter_store\r\ncheckpoint_store_name: checkpoint_store\r\n\r\ndata_docs_sites:\r\n  # Data Docs make it simple to visualize data quality in your project. These\r\n  # include Expectations, Validations & Profiles. The are built for all\r\n  # Datasources from JSON artifacts in the local repo including validations &\r\n  # profiles from the uncommitted directory. Read more at https://docs.greatexpectations.io/docs/terms/data_docs\r\n  local_site:\r\n    class_name: SiteBuilder\r\n    show_how_to_buttons: true\r\n    store_backend:\r\n      class_name: TupleFilesystemStoreBackend\r\n      base_directory: uncommitted/data_docs/local_site/\r\n    site_index_builder:\r\n      class_name: DefaultSiteIndexBuilder\r\n\r\nanonymous_usage_statistics:\r\n  enabled: false\r\n  data_context_id: 2e3a8ad6-e000-4ec0-a847-9fe5a36d1226\r\nfluent_datasources:\r\n  test:\r\n    type: pandas_s3\r\n    assets:\r\n      s3_asset:\r\n        type: parquet\r\n        batching_regex: (.*).parquet\r\n        connect_options:\r\n          s3_prefix: <prefix>\r\n    bucket: sherpa\r\n    boto3_options:\r\n      endpoint_url: <endpoint_url>\r\n      aws_access_key_id: <aws_access_key_id>\r\n      aws_secret_access_key: <aws_secret_access_key>\r\n\r\nnotebooks:\r\ninclude_rendered_content:\r\n  globally: false\r\n  expectation_validation_result: false\r\n  expectation_suite: false\r\n\r\n```\r\nFull stack trace of the error:\r\n \r\n```\r\n---------------------------------------------------------------------------\r\nClientError                               Traceback (most recent call last)\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/execution_engine/pandas_execution_engine.py:251, in PandasExecutionEngine.get_batch_data_and_markers(self, batch_spec)\r\n    250     if s3_engine:\r\n--> 251         s3_object: dict = s3_engine.get_object(\r\n    252             Bucket=s3_url.bucket, Key=s3_url.key\r\n    253         )\r\n    254 except (\r\n    255     aws.exceptions.ParamValidationError,\r\n    256     aws.exceptions.ClientError,\r\n    257 ) as error:\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/botocore/client.py:530, in ClientCreator._create_api_method.<locals>._api_call(self, *args, **kwargs)\r\n    529 # The \"self\" in this scope is referring to the BaseClient.\r\n--> 530 return self._make_api_call(operation_name, kwargs)\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/botocore/client.py:964, in BaseClient._make_api_call(self, operation_name, api_params)\r\n    963     error_class = self.exceptions.from_code(error_code)\r\n--> 964     raise error_class(parsed_response, operation_name)\r\n    965 else:\r\n\r\nClientError: An error occurred (InvalidAccessKeyId) when calling the GetObject operation: The AWS Access Key Id you provided does not exist in our records.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nExecutionEngineError                      Traceback (most recent call last)\r\nCell In[14], line 1\r\n----> 1 validator = context.get_validator(\r\n      2     batch_request=batch_request, expectation_suite_name=\"test_suite\"\r\n      3 )\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:2583, in AbstractDataContext.get_validator(***failed resolving arguments***)\r\n   2579         batch_request_list = [batch_request]  # type: ignore[list-item]\r\n   2581     for batch_request in batch_request_list:\r\n   2582         batch_list.extend(\r\n-> 2583             self.get_batch_list(\r\n   2584                 datasource_name=datasource_name,\r\n   2585                 data_connector_name=data_connector_name,\r\n   2586                 data_asset_name=data_asset_name,\r\n   2587                 batch_request=batch_request,\r\n   2588                 batch_data=batch_data,\r\n   2589                 data_connector_query=data_connector_query,\r\n   2590                 batch_identifiers=batch_identifiers,\r\n   2591                 limit=limit,\r\n   2592                 index=index,\r\n   2593                 custom_filter_function=custom_filter_function,\r\n   2594                 sampling_method=sampling_method,\r\n   2595                 sampling_kwargs=sampling_kwargs,\r\n   2596                 splitter_method=splitter_method,\r\n   2597                 splitter_kwargs=splitter_kwargs,\r\n   2598                 runtime_parameters=runtime_parameters,\r\n   2599                 query=query,\r\n   2600                 path=path,\r\n   2601                 batch_filter_parameters=batch_filter_parameters,\r\n   2602                 batch_spec_passthrough=batch_spec_passthrough,\r\n   2603                 **kwargs,\r\n   2604             )\r\n   2605         )\r\n   2607 return self.get_validator_using_batch_list(\r\n   2608     expectation_suite=expectation_suite,  # type: ignore[arg-type]\r\n   2609     batch_list=batch_list,\r\n   2610     include_rendered_content=include_rendered_content,\r\n   2611 )\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/core/usage_statistics/usage_statistics.py:260, in usage_statistics_enabled_method.<locals>.usage_statistics_wrapped_method(*args, **kwargs)\r\n    257         args_payload = args_payload_fn(*args, **kwargs) or {}\r\n    258         nested_update(event_payload, args_payload)\r\n--> 260     result = func(*args, **kwargs)\r\n    261     message[\"success\"] = True\r\n    262 except Exception:\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:2752, in AbstractDataContext.get_batch_list(self, datasource_name, data_connector_name, data_asset_name, batch_request, batch_data, data_connector_query, batch_identifiers, limit, index, custom_filter_function, sampling_method, sampling_kwargs, splitter_method, splitter_kwargs, runtime_parameters, query, path, batch_filter_parameters, batch_spec_passthrough, batch_request_options, **kwargs)\r\n   2674 @public_api\r\n   2675 @usage_statistics_enabled_method(\r\n   2676     event_name=UsageStatsEvents.DATA_CONTEXT_GET_BATCH_LIST,\r\n   (...)\r\n   2701     **kwargs: Optional[dict],\r\n   2702 ) -> List[Batch]:\r\n   2703     \"\"\"Get the list of zero or more batches, based on a variety of flexible input types.\r\n   2704\r\n   2705     `get_batch_list` is the main user-facing API for getting batches.\r\n   (...)\r\n   2750\r\n   2751     \"\"\"\r\n-> 2752     return self._get_batch_list(\r\n   2753         datasource_name=datasource_name,\r\n   2754         data_connector_name=data_connector_name,\r\n   2755         data_asset_name=data_asset_name,\r\n   2756         batch_request=batch_request,\r\n   2757         batch_data=batch_data,\r\n   2758         data_connector_query=data_connector_query,\r\n   2759         batch_identifiers=batch_identifiers,\r\n   2760         limit=limit,\r\n   2761         index=index,\r\n   2762         custom_filter_function=custom_filter_function,\r\n   2763         sampling_method=sampling_method,\r\n   2764         sampling_kwargs=sampling_kwargs,\r\n   2765         splitter_method=splitter_method,\r\n   2766         splitter_kwargs=splitter_kwargs,\r\n   2767         runtime_parameters=runtime_parameters,\r\n   2768         query=query,\r\n   2769         path=path,\r\n   2770         batch_filter_parameters=batch_filter_parameters,\r\n   2771         batch_spec_passthrough=batch_spec_passthrough,\r\n   2772         batch_request_options=batch_request_options,\r\n   2773         **kwargs,\r\n   2774     )\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:2834, in AbstractDataContext._get_batch_list(self, datasource_name, data_connector_name, data_asset_name, batch_request, batch_data, data_connector_query, batch_identifiers, limit, index, custom_filter_function, sampling_method, sampling_kwargs, splitter_method, splitter_kwargs, runtime_parameters, query, path, batch_filter_parameters, batch_spec_passthrough, batch_request_options, **kwargs)\r\n   2825     raise gx_exceptions.DatasourceError(\r\n   2826         datasource_name,\r\n   2827         \"The given datasource could not be retrieved from the DataContext; \"\r\n   2828         \"please confirm that your configuration is accurate.\",\r\n   2829     )\r\n   2831 datasource = self.datasources[\r\n   2832     datasource_name\r\n   2833 ]  # this can return one of three datasource types, including Fluent datasource types\r\n-> 2834 return datasource.get_batch_list_from_batch_request(batch_request=result)\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/datasource/new_datasource.py:218, in BaseDatasource.get_batch_list_from_batch_request(self, batch_request)\r\n    212 batch_spec: PathBatchSpec  # type: ignore[no-redef]\r\n    213 batch_markers: BatchMarkers  # type: ignore[no-redef]\r\n    214 (\r\n    215     batch_data,\r\n    216     batch_spec,\r\n    217     batch_markers,\r\n--> 218 ) = data_connector.get_batch_data_and_metadata(\r\n    219     batch_definition=batch_definition\r\n    220 )\r\n    221 new_batch = Batch(\r\n    222     data=batch_data,\r\n    223     batch_request=batch_request,\r\n   (...)\r\n    226     batch_markers=batch_markers,\r\n    227 )\r\n    228 batches.append(new_batch)\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/datasource/data_connector/data_connector.py:120, in DataConnector.get_batch_data_and_metadata(self, batch_definition)\r\n    111 \"\"\"\r\n    112 Uses batch_definition to retrieve batch_data and batch_markers by building a batch_spec from batch_definition,\r\n    113 then using execution_engine to return batch_data and batch_markers\r\n   (...)\r\n    117\r\n    118 \"\"\"\r\n    119 batch_spec: BatchSpec = self.build_batch_spec(batch_definition=batch_definition)\r\n--> 120 batch_data, batch_markers = self._execution_engine.get_batch_data_and_markers(\r\n    121     batch_spec=batch_spec\r\n    122 )\r\n    123 self._execution_engine.load_batch_data(batch_definition.id, batch_data)  # type: ignore[arg-type] # got ExecutionEngine\r\n    124 return (\r\n    125     batch_data,\r\n    126     batch_spec,\r\n    127     batch_markers,\r\n    128 )\r\n\r\nFile /sharedvolume/saad/quality_check_gx/lib/python3.8/site-packages/great_expectations/execution_engine/pandas_execution_engine.py:258, in PandasExecutionEngine.get_batch_data_and_markers(self, batch_spec)\r\n    251         s3_object: dict = s3_engine.get_object(\r\n    252             Bucket=s3_url.bucket, Key=s3_url.key\r\n    253         )\r\n    254 except (\r\n    255     aws.exceptions.ParamValidationError,\r\n    256     aws.exceptions.ClientError,\r\n    257 ) as error:\r\n--> 258     raise gx_exceptions.ExecutionEngineError(\r\n    259         f\"\"\"PandasExecutionEngine encountered the following error while trying to read data from S3 Bucket: {error}\"\"\"\r\n    260     )\r\n    261 logger.debug(\r\n    262     f\"Fetching s3 object. Bucket: {s3_url.bucket} Key: {s3_url.key}\"\r\n    263 )\r\n    264 reader_fn: DataFrameFactoryFn = self._get_reader_fn(\r\n    265     reader_method, s3_url.key\r\n    266 )\r\n\r\nExecutionEngineError: PandasExecutionEngine encountered the following error while trying to read data from S3 Bucket: An error occurred (InvalidAccessKeyId) when calling the GetObject operation: The AWS Access Key Id you provided does not exist in our records.\r\n```\r\n\r\n**Expected behavior**\r\n`validator` should be created without any errors.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.17.0\r\n - Datasource: Pandas\r\n - Cloud environment: Corporate implementation of S3\r\n\r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8162/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8162/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8161", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8161/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8161/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8161/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8161", "id": 1768785730, "node_id": "I_kwDOBiS_IM5pbYdC", "number": 8161, "title": "expect_column_most_common_value_to_be_in_set unexpectedly fails for DateType column in pyspark", "user": {"login": "mbassennesm", "id": 124280601, "node_id": "U_kgDOB2hfGQ", "avatar_url": "https://avatars.githubusercontent.com/u/124280601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbassennesm", "html_url": "https://github.com/mbassennesm", "followers_url": "https://api.github.com/users/mbassennesm/followers", "following_url": "https://api.github.com/users/mbassennesm/following{/other_user}", "gists_url": "https://api.github.com/users/mbassennesm/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbassennesm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbassennesm/subscriptions", "organizations_url": "https://api.github.com/users/mbassennesm/orgs", "repos_url": "https://api.github.com/users/mbassennesm/repos", "events_url": "https://api.github.com/users/mbassennesm/events{/privacy}", "received_events_url": "https://api.github.com/users/mbassennesm/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2023-06-22T01:46:20Z", "updated_at": "2024-08-22T23:59:34Z", "closed_at": "2024-08-22T23:59:34Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "- Create a spark dataframe with a single column with DateType. \r\n- Validate against the rule \"expect_column_most_common_value_to_be_in_set\" where the value set is a list with a single element (tried with both datetime.type and string type values in Python).\r\n- The validation fails even though the validation object shows this ( observed value is the same as value set element but fails to validate?!):\r\n\r\n\r\n```\r\n {\r\n      \"exception_info\": {\r\n        \"exception_message\": null,\r\n        \"exception_traceback\": null,\r\n        \"raised_exception\": false\r\n      },\r\n      \"expectation_config\": {\r\n        \"expectation_type\": \"expect_column_most_common_value_to_be_in_set\",\r\n        \"kwargs\": {\r\n          \"batch_id\": \"feddfd34bae72c55769bfbd96946fe1e\",\r\n          \"column\": \"date_col\",\r\n          \"value_set\": [\r\n            \"2023-06-20\"\r\n          ]\r\n        },\r\n        \"meta\": {},\r\n      },\r\n      \"meta\": {},\r\n      \"result\": {\r\n        \"observed_value\": [\r\n          \"2023-06-20\"\r\n        ]\r\n      },\r\n      \"success\": false\r\n    },\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8161/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8161/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8150", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8150/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8150/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8150/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8150", "id": 1766524745, "node_id": "I_kwDOBiS_IM5pSwdJ", "number": 8150, "title": "Documentation request: how to use temp_table_schema_name support for BigQuery", "user": {"login": "Chr96er", "id": 8114107, "node_id": "MDQ6VXNlcjgxMTQxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8114107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chr96er", "html_url": "https://github.com/Chr96er", "followers_url": "https://api.github.com/users/Chr96er/followers", "following_url": "https://api.github.com/users/Chr96er/following{/other_user}", "gists_url": "https://api.github.com/users/Chr96er/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chr96er/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chr96er/subscriptions", "organizations_url": "https://api.github.com/users/Chr96er/orgs", "repos_url": "https://api.github.com/users/Chr96er/repos", "events_url": "https://api.github.com/users/Chr96er/events{/privacy}", "received_events_url": "https://api.github.com/users/Chr96er/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-06-21T01:44:40Z", "updated_at": "2025-01-23T14:22:12Z", "closed_at": "2023-07-27T17:56:39Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "`temp_table_schema_name support for BigQuery` has been around for a while now but I can't find documentation on how to use it. I've spent hours and hours trying to get this to work, digging into the source code and trying to figure out where to provide the parameter. I'm not sure whether it's only possible using `RuntimeBatchRequest` or also `BatchRequest`. I haven't figured out how to do it using either.\r\n\r\nLink to PR containing changes:\r\nhttps://github.com/great-expectations/great_expectations/pull/6303/files\r\n\r\nThere is already a note in the official GX-BQ documentation on temporary tables. It would be great to elaborate on how to specify a custom dataset.\r\n\r\nThis is very important in my opinion because there are many issues with using the default dataset for temporary tables or not creating temp tables at all:\r\n1) Great Expectation Service Account currently needs `createTable` and `updateTable` permissions in the default dataset.\r\n2) `datasource.add_query_asset` currently unsupported when using `create_temp_table=false`.\r\n3) I expect the default dataset will be spammed with `gx_temp_` tables, at least for 24 hours which is enough to create hundreds of tables and slow down UI and API calls to list BigQuery tables. \r\n", "closed_by": {"login": "HaebichanGX", "id": 133805639, "node_id": "U_kgDOB_m2Rw", "avatar_url": "https://avatars.githubusercontent.com/u/133805639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HaebichanGX", "html_url": "https://github.com/HaebichanGX", "followers_url": "https://api.github.com/users/HaebichanGX/followers", "following_url": "https://api.github.com/users/HaebichanGX/following{/other_user}", "gists_url": "https://api.github.com/users/HaebichanGX/gists{/gist_id}", "starred_url": "https://api.github.com/users/HaebichanGX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HaebichanGX/subscriptions", "organizations_url": "https://api.github.com/users/HaebichanGX/orgs", "repos_url": "https://api.github.com/users/HaebichanGX/repos", "events_url": "https://api.github.com/users/HaebichanGX/events{/privacy}", "received_events_url": "https://api.github.com/users/HaebichanGX/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8150/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8150/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8147", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8147/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8147/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8147/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8147", "id": 1766310447, "node_id": "I_kwDOBiS_IM5pR8Iv", "number": 8147, "title": "datasource.add_query_asset not respecting create_temp_table equals false", "user": {"login": "Chr96er", "id": 8114107, "node_id": "MDQ6VXNlcjgxMTQxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/8114107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Chr96er", "html_url": "https://github.com/Chr96er", "followers_url": "https://api.github.com/users/Chr96er/followers", "following_url": "https://api.github.com/users/Chr96er/following{/other_user}", "gists_url": "https://api.github.com/users/Chr96er/gists{/gist_id}", "starred_url": "https://api.github.com/users/Chr96er/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Chr96er/subscriptions", "organizations_url": "https://api.github.com/users/Chr96er/orgs", "repos_url": "https://api.github.com/users/Chr96er/repos", "events_url": "https://api.github.com/users/Chr96er/events{/privacy}", "received_events_url": "https://api.github.com/users/Chr96er/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-06-20T22:52:50Z", "updated_at": "2024-08-22T23:59:45Z", "closed_at": "2024-08-22T23:59:44Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "This issue is analogue to https://github.com/great-expectations/great_expectations/issues/6064.\r\n\r\nDescribe the bug\r\nWhen using `datasource.add_query_asset`, the `create_temp_table=false` is not respected.\r\n\r\nReproducible example:\r\n```\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\n\r\nconnection_string = \"\"\"bigquery://bigquery-public-data/samples\"\"\"\r\n\r\ndatasource = context.sources.add_or_update_sql(\r\n    name=\"github_timeline\", connection_string=connection_string, create_temp_table=False\r\n)\r\n\r\ntable_asset = datasource.add_query_asset(\r\n        name=\"github_timeline\", \r\n        query=\"SELECT * FROM `bigquery-public-data.samples.github_timeline`\"\r\n)\r\n\r\nmy_batch_request = table_asset.build_batch_request()\r\n\r\nbatches = table_asset.get_batch_list_from_batch_request(my_batch_request)\r\n\r\ncontext.add_or_update_expectation_suite(\"github_timeline_suite\")\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=my_batch_request,\r\n    expectation_suite_name=\"github_timeline_suite\",\r\n)\r\n\r\nvalidator.expect_column_values_to_not_be_null(column = \"repository_url\")\r\n\r\n\r\n```\r\n\r\n```\r\nNotFound: 404 GET https://bigquery.googleapis.com/bigquery/v2/projects/bigquery-public-data/datasets/samples/tables/great_expectations_sub_selection?prettyPrint=false: Not found: Table bigquery-public-data:samples.great_expectations_sub_selection\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nNoSuchTableError                          Traceback (most recent call last)\r\n```\r\n\r\n\r\nEnvironment (please complete the following information):\r\n\r\nOperating System: Ubuntu\r\nGreat Expectations Version: 0.17.0\r\n.\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8147/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8147/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8140", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8140/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8140/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8140/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8140", "id": 1762015285, "node_id": "I_kwDOBiS_IM5pBjg1", "number": 8140, "title": "circular import error on great_expectations.core.usage_statistics.usage_statistics", "user": {"login": "ralemy", "id": 978303, "node_id": "MDQ6VXNlcjk3ODMwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/978303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ralemy", "html_url": "https://github.com/ralemy", "followers_url": "https://api.github.com/users/ralemy/followers", "following_url": "https://api.github.com/users/ralemy/following{/other_user}", "gists_url": "https://api.github.com/users/ralemy/gists{/gist_id}", "starred_url": "https://api.github.com/users/ralemy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ralemy/subscriptions", "organizations_url": "https://api.github.com/users/ralemy/orgs", "repos_url": "https://api.github.com/users/ralemy/repos", "events_url": "https://api.github.com/users/ralemy/events{/privacy}", "received_events_url": "https://api.github.com/users/ralemy/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-06-17T22:21:20Z", "updated_at": "2024-08-22T23:59:57Z", "closed_at": "2024-08-22T23:59:56Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nImport of BaseDataConfig fails due to circular import error in usage_statistics module\r\n**To Reproduce**\r\n`\r\n> pip show great_expectations\r\nName: great-expectations\r\nVersion: 0.17.0\r\nSummary: Always know what to expect from your data.\r\nHome-page: https://greatexpectations.io\r\nAuthor: The Great Expectations Team`\r\n\r\nsimply importing BaseDataContext:\r\n\r\n`from great_expectations.data_context import BaseDataContext`\r\n\r\nFails with Import Error:\r\n\r\n`ImportError                               Traceback (most recent call last)\r\nCell In[34], line 8\r\n      1 # Great Expectations:\r\n      2 \r\n      3 \r\n   (...)\r\n      6 # import great_expectations as ge\r\n      7 # from great_expectations.data_context.types.base import DataContextConfig, FilesystemStoreBackendDefaults, DatasourceConfig\r\n----> 8 from great_expectations.data_context import BaseDataContext\r\n      9 # def prepare_ge_context(root_dir: str) -> BaseDataContext:\r\n     10 #     data_context_config = DataContextConfig(\r\n     11 #         store_backend_defaults=FilesystemStoreBackendDefaults(\r\n   (...)\r\n     15 #     ge_context = BaseDataContext(project_config=data_context_config)\r\n     16 #     return ge_context\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/__init__.py:6\r\n      2 from ._version import get_versions  # isort:skip\r\n      4 __version__ = get_versions()[\"version\"]  # isort:skip\r\n----> 6 from great_expectations.data_context.migrator.cloud_migrator import CloudMigrator\r\n      7 from great_expectations.expectations.registry import register_core_expectations\r\n      9 del get_versions  # isort:skip\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/data_context/__init__.py:1\r\n----> 1 from great_expectations.data_context.data_context import (\r\n      2     AbstractDataContext,\r\n      3     BaseDataContext,\r\n      4     CloudDataContext,\r\n      5     DataContext,\r\n      6     EphemeralDataContext,\r\n      7     FileDataContext,\r\n      8 )\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/data_context/data_context/__init__.py:1\r\n----> 1 from great_expectations.data_context.data_context.abstract_data_context import (\r\n      2     AbstractDataContext,\r\n      3 )\r\n      4 from great_expectations.data_context.data_context.base_data_context import (\r\n      5     BaseDataContext,\r\n      6 )\r\n      7 from great_expectations.data_context.data_context.cloud_data_context import (\r\n      8     CloudDataContext,\r\n      9 )\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:71\r\n     69 from great_expectations.core.yaml_handler import YAMLHandler\r\n     70 from great_expectations.data_asset import DataAsset\r\n---> 71 from great_expectations.data_context.config_validator.yaml_config_validator import (\r\n     72     _YamlConfigValidator,\r\n     73 )\r\n     74 from great_expectations.data_context.store import Store, TupleStoreBackend\r\n     75 from great_expectations.data_context.store.profiler_store import ProfilerStore\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/data_context/config_validator/yaml_config_validator.py:20\r\n     17 from ruamel.yaml import YAML\r\n     19 from great_expectations.alias_types import JSONValues  # noqa: TCH001\r\n---> 20 from great_expectations.checkpoint import Checkpoint, SimpleCheckpoint\r\n     21 from great_expectations.core.usage_statistics.anonymizers.anonymizer import Anonymizer\r\n     22 from great_expectations.core.usage_statistics.anonymizers.datasource_anonymizer import (\r\n     23     DatasourceAnonymizer,\r\n     24 )\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/checkpoint/__init__.py:16\r\n      1 from ..util import verify_dynamic_loading_support\r\n      2 from .actions import (\r\n      3     EmailAction,\r\n      4     MicrosoftTeamsNotificationAction,\r\n   (...)\r\n     14     ValidationAction,\r\n     15 )\r\n---> 16 from .checkpoint import Checkpoint, SimpleCheckpoint\r\n     17 from .configurator import SimpleCheckpointConfigurator\r\n     19 for module_name, package_name in [\r\n     20     (\".actions\", \"great_expectations.checkpoint\"),\r\n     21     (\".checkpoint\", \"great_expectations.checkpoint\"),\r\n     22     (\".util\", \"great_expectations.checkpoint\"),\r\n     23 ]:\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/checkpoint/checkpoint.py:49\r\n     47 from great_expectations.core.config_peer import ConfigOutputModes, ConfigPeer\r\n     48 from great_expectations.core.usage_statistics.events import UsageStatsEvents\r\n---> 49 from great_expectations.core.usage_statistics.usage_statistics import (\r\n     50     get_checkpoint_run_usage_statistics,\r\n     51     usage_statistics_enabled_method,\r\n     52 )\r\n     53 from great_expectations.data_context.cloud_constants import GXCloudRESTResource\r\n     54 from great_expectations.data_context.types.base import (\r\n     55     CheckpointConfig,\r\n     56     CheckpointValidationConfig,\r\n     57 )\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/core/usage_statistics/usage_statistics.py:29\r\n     27 from great_expectations.core.util import nested_update\r\n     28 from great_expectations.data_context.types.base import CheckpointConfig\r\n---> 29 from great_expectations.rule_based_profiler.config import RuleBasedProfilerConfig\r\n     31 if TYPE_CHECKING:\r\n     32     import uuid\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/rule_based_profiler/__init__.py:1\r\n----> 1 from .rule_based_profiler_result import RuleBasedProfilerResult  # isort:skip\r\n      2 from .rule_based_profiler import BaseRuleBasedProfiler, RuleBasedProfiler  # isort:skip\r\n\r\nFile /opt/conda/lib/python3.11/site-packages/great_expectations/rule_based_profiler/rule_based_profiler_result.py:13\r\n     11 from great_expectations.core.domain import Domain  # noqa: TCH001\r\n     12 from great_expectations.core.usage_statistics.events import UsageStatsEvents\r\n---> 13 from great_expectations.core.usage_statistics.usage_statistics import (\r\n     14     UsageStatisticsHandler,\r\n     15     get_expectation_suite_usage_statistics,\r\n     16     usage_statistics_enabled_method,\r\n     17 )\r\n     18 from great_expectations.core.util import convert_to_json_serializable\r\n     19 from great_expectations.rule_based_profiler.helpers.util import (\r\n     20     get_or_create_expectation_suite,\r\n     21 )\r\n\r\nImportError: cannot import name 'UsageStatisticsHandler' from partially initialized module 'great_expectations.core.usage_statistics.usage_statistics' (most likely due to a circular import) (/opt/conda/lib/python3.11/site-packages/great_expectations/core/usage_statistics/usage_statistics.py)`\r\n\r\n**Expected behavior**\r\nimport should succeed\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux d86244d92e7a 5.15.49-linuxkit-pr #1 SMP PREEMPT Thu May 25 07:27:39 UTC 2023 aarch64 aarch64 aarch64 GNU/Linux\r\n - Great Expectations Version: 0.17.0\r\n - Datasource: N/A\r\n - Cloud environment: N/A\r\n**Additional context**\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8140/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8053", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8053/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8053/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8053/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8053", "id": 1738167055, "node_id": "I_kwDOBiS_IM5nmlMP", "number": 8053, "title": "Not NULL clause using row_condition for SQLAlchemy", "user": {"login": "macro128", "id": 29261232, "node_id": "MDQ6VXNlcjI5MjYxMjMy", "avatar_url": "https://avatars.githubusercontent.com/u/29261232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/macro128", "html_url": "https://github.com/macro128", "followers_url": "https://api.github.com/users/macro128/followers", "following_url": "https://api.github.com/users/macro128/following{/other_user}", "gists_url": "https://api.github.com/users/macro128/gists{/gist_id}", "starred_url": "https://api.github.com/users/macro128/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/macro128/subscriptions", "organizations_url": "https://api.github.com/users/macro128/orgs", "repos_url": "https://api.github.com/users/macro128/repos", "events_url": "https://api.github.com/users/macro128/events{/privacy}", "received_events_url": "https://api.github.com/users/macro128/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-06-02T13:04:14Z", "updated_at": "2024-03-12T17:21:27Z", "closed_at": "2024-03-12T17:21:27Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi! Seems like GX row_condition parsing doesn't recognize a clause `.null()` as opposite to `.notnull()` which works.\r\nI checked the parsing process in `great_expectations/expectations/row_conditions.sql` and only not null clause is implemented.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nAdd an expectation with this row_condition:\r\n```\r\n\"condition_parser\": \"great_expectations__experimental__\",\r\n\"row_condition\": \"col(\\\"my_column_name\\\").null()\"\r\n```\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux, MacOS\r\n - Great Expectations Version: 0.16.14\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8053/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8053/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8023", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8023/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8023/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8023/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8023", "id": 1730712231, "node_id": "I_kwDOBiS_IM5nKJKn", "number": 8023, "title": "Support for Polars", "user": {"login": "jordan-carson", "id": 7357108, "node_id": "MDQ6VXNlcjczNTcxMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7357108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jordan-carson", "html_url": "https://github.com/jordan-carson", "followers_url": "https://api.github.com/users/jordan-carson/followers", "following_url": "https://api.github.com/users/jordan-carson/following{/other_user}", "gists_url": "https://api.github.com/users/jordan-carson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jordan-carson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jordan-carson/subscriptions", "organizations_url": "https://api.github.com/users/jordan-carson/orgs", "repos_url": "https://api.github.com/users/jordan-carson/repos", "events_url": "https://api.github.com/users/jordan-carson/events{/privacy}", "received_events_url": "https://api.github.com/users/jordan-carson/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 4397538239, "node_id": "LA_kwDOBiS_IM8AAAABBh0bvw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:new_backend", "name": "feature:new_backend", "color": "741403", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-05-29T12:52:50Z", "updated_at": "2024-04-30T11:27:59Z", "closed_at": "2023-06-13T20:19:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nFeature request to add polars data frame support to great_expectations. \r\n\r\n**Describe the solution you'd like**\r\nAddition of polars as a data source, data_set, execution_engine, configured_asset, inferred_asset, and all of the above.\r\n\r\n**Describe alternatives you've considered**\r\nPandas is great, but other libraries and frameworks have emerged over the past few years that perform better, see [DuckDB Benchmarks](https://duckdblabs.github.io/db-benchmark/). As these new technologies are released and used by the data analytics/science/AI community, great expectations can leverage such opportunities to widen its support. \r\n\r\n**Additional context**\r\n[Polars User Guide](https://pola-rs.github.io/polars-book/user-guide/)\r\n[Polars GitHub](https://github.com/pola-rs/polars)\r\n\r\n\r\nHave begun researching the requirements, i.e. the folders within the repo that will need to be added. There's a good amount of work involved, I will be reaching out in the Slack community as well. \r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8023/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8022", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8022/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8022/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8022/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/8022", "id": 1730652323, "node_id": "I_kwDOBiS_IM5nJ6ij", "number": 8022, "title": "How to use row_condition for Spark and SQLAlchemy (Not documented)", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-29T12:08:14Z", "updated_at": "2024-08-23T00:00:07Z", "closed_at": "2024-08-23T00:00:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nNot complete documentation page -\r\nhttps://docs.greatexpectations.io/docs/reference/expectations/conditional_expectations/\r\n\r\n**1) it does not explain how to use row_condition for SQLAlchemy**\r\n\r\nAt least this condition works in 0.16.x (JSON example):\r\n```\r\n\r\n        \"condition_parser\": \"great_expectations__experimental__\",\r\n        \"row_condition\": \"col(\\\"my_column_name\\\")!=\\\"My text\\\" and col(\\\"my_column2_name\\\")!=\\\"My text\\\"\"\r\n```\r\n\r\n- notice col() syntax not mentioned in the docs at all\r\n- make sure you have **no spaces around \"!=\"** \r\n\r\n**2) it looks like GE has a dedicated spark condition_parser not explained, too**\r\n\r\nAt least this condition works in 0.16.x (JSON example):\r\n```\r\n\r\n        \"condition_parser\": \"spark\",\r\n        \"row_condition\": \"my_date > DATE \\\"2001-01-01\\\"\",\r\n\r\n```\r\n**To Reproduce**\r\n\r\nOpen documentation page\r\nhttps://docs.greatexpectations.io/docs/reference/expectations/conditional_expectations/\r\nand read ;)\r\n\r\n**Expected behavior**\r\n\r\nDocumentation is up to date.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System:  Linux, \r\n - Great Expectations Version:  0.16.x\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8022/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/8022/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7948", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7948/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7948/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7948/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7948", "id": 1718287213, "node_id": "I_kwDOBiS_IM5mavtt", "number": 7948, "title": "Quick guide validation result incorrectly opens in Edge", "user": {"login": "vfg222", "id": 65224950, "node_id": "MDQ6VXNlcjY1MjI0OTUw", "avatar_url": "https://avatars.githubusercontent.com/u/65224950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vfg222", "html_url": "https://github.com/vfg222", "followers_url": "https://api.github.com/users/vfg222/followers", "following_url": "https://api.github.com/users/vfg222/following{/other_user}", "gists_url": "https://api.github.com/users/vfg222/gists{/gist_id}", "starred_url": "https://api.github.com/users/vfg222/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vfg222/subscriptions", "organizations_url": "https://api.github.com/users/vfg222/orgs", "repos_url": "https://api.github.com/users/vfg222/repos", "events_url": "https://api.github.com/users/vfg222/events{/privacy}", "received_events_url": "https://api.github.com/users/vfg222/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-20T20:50:16Z", "updated_at": "2024-03-12T17:22:34Z", "closed_at": "2024-03-12T17:22:34Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI'm trying out the [quickstart](https://docs.greatexpectations.io/docs/tutorials/quickstart/) guide, and when I try to view the validation result the Microsoft Edge browser opens to the start page, instead of the expected data documentation. My default browser is Firefox. I'm executing the code in a notebook in jupyter lab. The complete code that I run is\r\n\r\n```\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\n\r\nvalidator = context.sources.pandas_default.read_csv(\r\n    \"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\"\r\n)\r\n\r\nvalidator.expect_column_values_to_not_be_null(\"pickup_datetime\")\r\nvalidator.expect_column_values_to_be_between(\"passenger_count\", auto=True)\r\n\r\ncheckpoint = gx.checkpoint.SimpleCheckpoint(\r\n    name=\"my_quickstart_checkpoint\",\r\n    data_context=context,\r\n    validator=validator,\r\n)\r\n\r\ncheckpoint_result = checkpoint.run()\r\n\r\nvalidation_result_identifier = checkpoint_result.list_validation_result_identifiers()[0]\r\nprint(validation_result_identifier)\r\ncontext.open_data_docs(resource_identifier=validation_result_identifier)\r\n```\r\n\r\n**Expected behavior**\r\nI expect the specific validation result page in the Data Docs to be displayed in my default browser (Firefox) when I run `context.open_data_docs(resource_identifier=validation_result_identifier).`\r\n\r\n**Environment**\r\n- OS: Windows 11 Home\r\n- Python Version: 3.10.11\r\n- Great Expectations Version: 0.16.12\r\n\r\n**Additional context**\r\nIf I run\r\n```\r\ncontext.open_data_docs()\r\n```\r\ninstead of \r\n```\r\ncontext.open_data_docs(resource_identifier=validation_result_identifier)\r\n```\r\nthe browser opens correctly in firefox.\r\n\r\n\r\nI'm new to Great Expectations and learning it through the quick guide. Any help would be much appreciated. Thanks!\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7948/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7948/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7856", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7856/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7856/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7856/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7856", "id": 1704338372, "node_id": "I_kwDOBiS_IM5lliPE", "number": 7856, "title": "StoreMetricsAction updates AWS S3 w/ '__' filename", "user": {"login": "ren0nie0", "id": 32780767, "node_id": "MDQ6VXNlcjMyNzgwNzY3", "avatar_url": "https://avatars.githubusercontent.com/u/32780767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ren0nie0", "html_url": "https://github.com/ren0nie0", "followers_url": "https://api.github.com/users/ren0nie0/followers", "following_url": "https://api.github.com/users/ren0nie0/following{/other_user}", "gists_url": "https://api.github.com/users/ren0nie0/gists{/gist_id}", "starred_url": "https://api.github.com/users/ren0nie0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ren0nie0/subscriptions", "organizations_url": "https://api.github.com/users/ren0nie0/orgs", "repos_url": "https://api.github.com/users/ren0nie0/repos", "events_url": "https://api.github.com/users/ren0nie0/events{/privacy}", "received_events_url": "https://api.github.com/users/ren0nie0/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-05-10T17:16:29Z", "updated_at": "2024-08-23T00:00:17Z", "closed_at": "2024-08-23T00:00:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "StoreMetricsAction updates AWS S3 w/ '__' filename\r\n\r\n  A key, value pair of the desired metric is output albeit to a file named '__' which is not desirable for future use.\r\n\r\nI have added the following action in my checkpoint:\r\n\r\n name: store_metrics\r\n\u00a0\u00a0\u00a0 action:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 class_name: StoreMetricsAction\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 target_store_name: metric_store\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 requested_metrics:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 expectation_name_test:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 - expect_table_row_count_to_equal.result.observed_value\r\n\r\nMy metricstore store is configured as follows:\r\n\r\n\u00a0 metric_store:\r\n\u00a0\u00a0\u00a0 class_name: MetricStore\r\n\u00a0\u00a0\u00a0 store_backend:\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 class_name: TupleS3StoreBackend\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 bucket: s3_bucket\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 prefix: /metric_store\r\n\r\n\r\nI expected an .JSON file to be output with a more informant filename.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.16.11\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7856/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7856/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7839", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7839/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7839/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7839/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7839", "id": 1700559916, "node_id": "I_kwDOBiS_IM5lXHws", "number": 7839, "title": "Glue2.0 job with great expectations version > 0.16.7 failing.", "user": {"login": "da-sbarde", "id": 117156939, "node_id": "U_kgDOBvusSw", "avatar_url": "https://avatars.githubusercontent.com/u/117156939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/da-sbarde", "html_url": "https://github.com/da-sbarde", "followers_url": "https://api.github.com/users/da-sbarde/followers", "following_url": "https://api.github.com/users/da-sbarde/following{/other_user}", "gists_url": "https://api.github.com/users/da-sbarde/gists{/gist_id}", "starred_url": "https://api.github.com/users/da-sbarde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/da-sbarde/subscriptions", "organizations_url": "https://api.github.com/users/da-sbarde/orgs", "repos_url": "https://api.github.com/users/da-sbarde/repos", "events_url": "https://api.github.com/users/da-sbarde/events{/privacy}", "received_events_url": "https://api.github.com/users/da-sbarde/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2023-05-08T16:25:48Z", "updated_at": "2024-08-23T00:00:29Z", "closed_at": "2024-08-23T00:00:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "We have a glue2.0 script which uses Great Expectations module.\r\nThe jobs are failing for the version > 0.16.7 with error-\r\n*ImportError: cannot import name 'DEFAULT_CIPHERS' from 'urllib3.util.ssl_' (/home/spark/.local/lib/python3.10/site-packages/urllib3/util/ssl_.py)*\r\n\r\nEverything works fine for Great Expectation version = 0.16.7\r\nI am using spark_s3 as datasource, S3 as the backend_store.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7839/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7839/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7833", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7833/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7833/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7833/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7833", "id": 1698992353, "node_id": "I_kwDOBiS_IM5lRJDh", "number": 7833, "title": "Does great expectations support validating nested json elements", "user": {"login": "ramakanthmpowered", "id": 104178653, "node_id": "U_kgDOBjWj3Q", "avatar_url": "https://avatars.githubusercontent.com/u/104178653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramakanthmpowered", "html_url": "https://github.com/ramakanthmpowered", "followers_url": "https://api.github.com/users/ramakanthmpowered/followers", "following_url": "https://api.github.com/users/ramakanthmpowered/following{/other_user}", "gists_url": "https://api.github.com/users/ramakanthmpowered/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramakanthmpowered/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramakanthmpowered/subscriptions", "organizations_url": "https://api.github.com/users/ramakanthmpowered/orgs", "repos_url": "https://api.github.com/users/ramakanthmpowered/repos", "events_url": "https://api.github.com/users/ramakanthmpowered/events{/privacy}", "received_events_url": "https://api.github.com/users/ramakanthmpowered/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-07T10:11:54Z", "updated_at": "2024-03-12T17:23:29Z", "closed_at": "2024-03-12T17:23:29Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi Team,\r\n\r\nWe want to validate the data accuracy in an json file, can we validate json file ? does great expectations support nested elements validation ?", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7833/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7833/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7802", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7802/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7802/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7802/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7802", "id": 1694025232, "node_id": "I_kwDOBiS_IM5k-MYQ", "number": 7802, "title": "Malicious vulnerability with GuardDog", "user": {"login": "lucasmengual92", "id": 37154049, "node_id": "MDQ6VXNlcjM3MTU0MDQ5", "avatar_url": "https://avatars.githubusercontent.com/u/37154049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucasmengual92", "html_url": "https://github.com/lucasmengual92", "followers_url": "https://api.github.com/users/lucasmengual92/followers", "following_url": "https://api.github.com/users/lucasmengual92/following{/other_user}", "gists_url": "https://api.github.com/users/lucasmengual92/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucasmengual92/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucasmengual92/subscriptions", "organizations_url": "https://api.github.com/users/lucasmengual92/orgs", "repos_url": "https://api.github.com/users/lucasmengual92/repos", "events_url": "https://api.github.com/users/lucasmengual92/events{/privacy}", "received_events_url": "https://api.github.com/users/lucasmengual92/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-05-03T12:55:55Z", "updated_at": "2024-08-23T00:00:39Z", "closed_at": "2024-08-23T00:00:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThese past days I was running for malicious checks on the open-source and 3rd-party packages using the GuardDog python [library](https://github.com/DataDog/guarddog) from DataDog, and 2 issues come up when scanning the Great Expectations package. I'm really in love with the GE package, but also I have to comply to some cybersecurity and malicious check rules, so that's why it will be great if these issues are fixed, most likely other individuals and organizations will come up to this and feel less confident on the GE package.\r\n\r\n1. First, in the **default_expectation_configuration_builder.py** script in the line of code `return eval(\"\".join([str(t) for t in binary_list]))` This package contains a call to the `eval` function with a `base64` encoded string as argument. This is a common method used to hide a malicious payload in a module as static analysis will not decode the string.\r\n\r\n2. The other is a repository integrity mismatch which alerts that some files present in the package (great_expectations version 0.16.8) are different from the ones on GitHub for the same version of the package, and that file is **great_expectations/_version.py**.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Install guarddog (`pip install guarddog`) with a Python env version of 3.10 or higher, and run the following code:\r\n```\r\nfrom guarddog import PypiPackageScanner\r\n\r\nscanner = PypiPackageScanner()\r\nreport = scanner.scan_remote(\"great_expectations\", \"0.16.8\")\r\n\r\nprint(report)\r\n```\r\n2. The print shall show a dictionary and with 2 issues, as mentioned above. Here's how the returned dictionary looks like:\r\n```\r\n{'issues': 2, 'errors': {}, 'results': {'repository_integrity_mismatch': 'Some files present in the package are different from the ones on GitHub for the same version of the package: \\n* great_expectations/_version.py', 'shady-links': {}, 'npm-exec-base64': {}, 'exec-base64': [{'location': 'great_expectations-0.16.8/great_expectations/rule_based_profiler/expectation_configuration_builder/default_expectation_configuration_builder.py:324', 'code': '        return eval(\"\".join([str(t) for t in binary_list]))', 'message': 'This package contains a call to the `eval` function with a `base64` encoded string as argument.\\nThis is a common method used to hide a malicious payload in a module as static analysis will not decode the\\nstring.\\n'}], 'exfiltrate-sensitive-data': {}, 'npm-serialize-environment': {}, 'silent-process-execution': {}, 'cmd-overwrite': {}, 'download-executable': {}, 'obfuscation': {}, 'npm-silent-process-execution': {}, 'code-execution': {}, 'npm-install-script': {}, 'steganography': {}}, 'path': '/tmp/tmp__2mob1r/great_expectations'}\r\n```\r\n4. See errors, these 2 issues should be probably fixed.\r\n\r\n**Expected behavior**\r\nAfter running the `scanner.scan_remote(\"great_expectations\", \"0.16.8\")` or technically a newer version because this bug will be fixed, then the returned dictionary shall return 0 issues.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.16.8\r\n\r\n**Additional context**\r\nN/A\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7802/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7802/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7721", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7721/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7721/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7721/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7721", "id": 1683044226, "node_id": "I_kwDOBiS_IM5kUTeC", "number": 7721, "title": "Multiple conditions doesnt work on row_condition field using SqlAlchemyExecutionEngine", "user": {"login": "oguzAydin", "id": 6437444, "node_id": "MDQ6VXNlcjY0Mzc0NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6437444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oguzAydin", "html_url": "https://github.com/oguzAydin", "followers_url": "https://api.github.com/users/oguzAydin/followers", "following_url": "https://api.github.com/users/oguzAydin/following{/other_user}", "gists_url": "https://api.github.com/users/oguzAydin/gists{/gist_id}", "starred_url": "https://api.github.com/users/oguzAydin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oguzAydin/subscriptions", "organizations_url": "https://api.github.com/users/oguzAydin/orgs", "repos_url": "https://api.github.com/users/oguzAydin/repos", "events_url": "https://api.github.com/users/oguzAydin/events{/privacy}", "received_events_url": "https://api.github.com/users/oguzAydin/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2325051803, "node_id": "MDU6TGFiZWwyMzI1MDUxODAz", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mysql", "name": "stack:mysql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2023-04-25T12:06:48Z", "updated_at": "2024-08-23T00:00:50Z", "closed_at": "2024-08-23T00:00:49Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I'm using great_expectations 0.16.7. I'm facing a problem when i try to use multiple conditions in row_condition field. I have a vertica and mysql database. i tried both of them and got same result. in my case, in my table there are 408 rows as 'SUCCEEDED' and 4 rows as 'CANCELLED_BEFORE' values in completion_status column. when i use single condition it works well, but when i try to use two condition it only notices first one.\r\n\r\nMy expectation is like\r\n```\r\nexpectation_configuration1 = ExpectationConfiguration(\r\n    expectation_type=\"expect_table_row_count_to_equal\",\r\n    kwargs={\r\n        \"value\": 412,\r\n        \"row_condition\": 'col(\"completion_status\")==\\'SUCCEEDED\\'', #  \"observed_value\": 408 as expected\r\n        #  \"row_condition\": 'col(\"completion_status\")==\\'CANCELLED_BEFORE\\'' , # observed_value: 4 as expected\r\n        #  \"row_condition\": 'col(\"completion_status\")==\\'SUCCEEDED\\' OR col(\"completion_status\")==\\'CANCELLED_BEFORE\\'', #  \"observed_value\": 408 but it should be 412\r\n        #  \"row_condition\": 'col(\"completion_status\")==\\'CANCELLED_BEFORE\\' OR col(\"completion_status\")==\\'SUCCEEDED\\'', #  \"observed_value\": 4 but it should be 412\r\n        \"condition_parser\": \"great_expectations__experimental__\"\r\n    }\r\n)\r\n```\r\n\r\nmy datasource yaml is like\r\n\r\n```\r\nexample_yaml = f\"\"\"\r\nname: {datasource_name}\r\nclass_name: Datasource\r\nexecution_engine:\r\n  class_name: SqlAlchemyExecutionEngine\r\n  credentials:\r\n    host: {host}\r\n    port: '{port}'\r\n    username: {username}\r\n    password: {password}\r\n    database: {database}\r\n    drivername: vertica+vertica_python\r\ndata_connectors:\r\n  default_configured_data_connector_name:\r\n    class_name: ConfiguredAssetSqlDataConnector\r\n    assets:\r\n      {table_name_1}:\r\n        class_name: Asset\r\n        schema_name: {schema_name_1}\r\n\"\"\"\r\n```\r\n\r\nhow can we use multiple conditions on SqlAlchemyExecutionEngine? Doesn't support great expectations multiple conditions for Sql based database?", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7721/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7721/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7659", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7659/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7659/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7659/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7659", "id": 1675473950, "node_id": "I_kwDOBiS_IM5j3bQe", "number": 7659, "title": "expectations get duplicated in the results+statistics when the spark executor hits exceptions", "user": {"login": "paul-felt", "id": 7230402, "node_id": "MDQ6VXNlcjcyMzA0MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7230402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paul-felt", "html_url": "https://github.com/paul-felt", "followers_url": "https://api.github.com/users/paul-felt/followers", "following_url": "https://api.github.com/users/paul-felt/following{/other_user}", "gists_url": "https://api.github.com/users/paul-felt/gists{/gist_id}", "starred_url": "https://api.github.com/users/paul-felt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paul-felt/subscriptions", "organizations_url": "https://api.github.com/users/paul-felt/orgs", "repos_url": "https://api.github.com/users/paul-felt/repos", "events_url": "https://api.github.com/users/paul-felt/events{/privacy}", "received_events_url": "https://api.github.com/users/paul-felt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-04-19T19:13:52Z", "updated_at": "2024-08-23T00:01:01Z", "closed_at": "2024-08-23T00:01:01Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nA single expectation gets reported as many expectations in the results list and stats when\r\n1. you run on spark backend\r\n2. the expectation results in an exception (eg, malformed regex)\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\nthis snippet reproduces\r\n\r\n```\r\nimport pandas as pd\r\nfrom datetime import datetime\r\n\r\nimport great_expectations as gx\r\nfrom great_expectations.core.batch import RuntimeBatchRequest\r\nfrom great_expectations.core.yaml_handler import YAMLHandler\r\nfrom great_expectations.core.expectation_configuration import ExpectationConfiguration\r\n\r\nyaml = YAMLHandler()\r\n\r\ncontext = gx.get_context()\r\n\r\ndatasource_config = {\r\n    \"name\": \"taxi_datasource\",\r\n    \"class_name\": \"Datasource\",\r\n    \"module_name\": \"great_expectations.datasource\",\r\n    \"execution_engine\": {\r\n        \"module_name\": \"great_expectations.execution_engine\",\r\n        \"class_name\": \"SparkDFExecutionEngine\",\r\n    },\r\n    \"data_connectors\": {\r\n        \"default_runtime_data_connector_name\": {\r\n            \"class_name\": \"RuntimeDataConnector\",\r\n            \"batch_identifiers\": [\"default_identifier_name\"],\r\n        },\r\n    },\r\n}\r\ncontext.add_datasource(**datasource_config)\r\n\r\n\r\n# We're going to create a single expectation here that raises an exception (it's a malformed regex)\r\ncontext.add_expectation_suite(\r\n\texpectation_suite_name=\"my_expectation_suite\",\r\n\tid=None,\r\n\texpectations=[\r\n\t\tExpectationConfiguration(**{\r\n\t\t\t\"expectation_type\": \"expect_column_values_to_match_regex\",\r\n\t\t\t\"kwargs\": {\r\n\t\t\t\t\"column\": \"passenger_count\",\r\n\t\t\t\t\"regex\": \"[1\",\r\n\t\t\t\t\"batch_id\": \"default_pandas_datasource-#ephemeral_pandas_asset\"\r\n\t\t\t}\r\n\t\t})\r\n\t]\r\n)\r\n\r\n\r\ncheckpoint_config = {\r\n    \"name\": \"my_checkpoint\",\r\n    \"config_version\": 1,\r\n    \"class_name\": \"SimpleCheckpoint\",\r\n    \"validations\": [\r\n        {\r\n            \"batch_request\": {\r\n                \"datasource_name\": \"taxi_datasource\",\r\n                \"data_connector_name\": \"default_runtime_data_connector_name\",\r\n                \"data_asset_name\": \"taxi_data\",\r\n            },\r\n            \"expectation_suite_name\": \"my_expectation_suite\",\r\n        }\r\n    ],\r\n}\r\ncontext.add_or_update_checkpoint(**checkpoint_config)\r\n\r\nspark = gx.core.util.get_or_create_spark_application()\r\npdf = pd.read_csv(\"https://raw.githubusercontent.com/great-expectations/gx_tutorials/main/data/yellow_tripdata_sample_2019-01.csv\")\r\ndf = spark.createDataFrame(pdf)\r\n\r\nresults = context.run_checkpoint(\r\n    checkpoint_name=\"my_checkpoint\",\r\n    batch_request={\r\n        \"runtime_parameters\": {\"batch_data\": df},\r\n        \"batch_identifiers\": {\r\n            \"default_identifier_name\": \"\"\r\n        },\r\n    },\r\n)\r\n\r\n# we just ran one expectation -- we should get just one result\r\nassert 1 == len(list(results[\"run_results\"].values())[0][\"validation_result\"][\"results\"])\r\nassert 1 == list(results[\"run_results\"].values())[0][\"validation_result\"][\"statistics\"][\"evaluated_expectations\"]\r\n\r\n```\r\n\r\n\r\n\r\n\r\n**Expected behavior**\r\nThe two asserts at the end should pass: you should get a single expectation result and report just 1 \"evaluated_expectations\".  This is the case for pandas, but not spark. Instead I see 6 of them\r\n```\r\n{\r\n  \"evaluated_expectations\": 6,\r\n  \"successful_expectations\": 0,\r\n  \"unsuccessful_expectations\": 6,\r\n  \"success_percent\": 0.0\r\n}\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.16.7\r\n\r\n**Additional context**\r\nDidn't test extensively, but I also noticed it affecting expectations that reference non-existent columns, so I don't think it's regex-specific.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7659/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7659/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7655", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7655/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7655/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7655/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7655", "id": 1674919726, "node_id": "I_kwDOBiS_IM5j1T8u", "number": 7655, "title": "DataContext scans through all datasources even if only one is being used (yes, I'm back!)", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-04-19T13:36:25Z", "updated_at": "2024-08-22T23:44:46Z", "closed_at": "2024-08-22T23:44:46Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nDataContext scans through all datasources even if only one is being used\r\nSimilar or same to https://github.com/great-expectations/great_expectations/issues/2241 \r\n\r\n**To Reproduce**\r\nadd for example spark datasource to great_expectations.yml:\r\n```\r\n\r\n  spark_datasource:\r\n    class_name: Datasource\r\n    module_name: great_expectations.datasource\r\n    execution_engine:\r\n      class_name: SparkDFExecutionEngine\r\n      module_name: great_expectations.execution_engine\r\n    data_connectors:\r\n      spark_data_connector:\r\n        class_name: RuntimeDataConnector\r\n        module_name: great_expectations.datasource.data_connector\r\n        batch_identifiers:\r\n          - some_key_maybe_pipeline_stage\r\n          - some_other_key_maybe_run_id\r\n\r\n\r\n```\r\nand run an Airflow DAG with GreatExpectationsOperator with checkpoint upon a different datasource (not spark_datasource!)\r\n\r\nYou will get this in Airflow DAG log:\r\n\r\n {{util.py:849}} ERROR - Unable to load spark context; install optional spark dependency for support.\r\n\r\n {{abstract_data_context.py:2992}} WARNING - Cannot initialize datasource spark_datasource: Cannot initialize datasource spark_datasource, error: SparkContext could not be started.\r\n\r\n**Expected behavior**\r\n\r\nonly datasource needed for the checkpoint is initialized\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Linux]\r\n - Great Expectations Version: [e.g. 0.16.1]\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7655/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7655/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7605", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7605/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7605/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7605/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7605", "id": 1661542854, "node_id": "I_kwDOBiS_IM5jCSHG", "number": 7605, "title": "AttributeError in PandasFilesystemDatasource when trying to create interactive expectations via CLI", "user": {"login": "tjholsman", "id": 7084922, "node_id": "MDQ6VXNlcjcwODQ5MjI=", "avatar_url": "https://avatars.githubusercontent.com/u/7084922?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tjholsman", "html_url": "https://github.com/tjholsman", "followers_url": "https://api.github.com/users/tjholsman/followers", "following_url": "https://api.github.com/users/tjholsman/following{/other_user}", "gists_url": "https://api.github.com/users/tjholsman/gists{/gist_id}", "starred_url": "https://api.github.com/users/tjholsman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tjholsman/subscriptions", "organizations_url": "https://api.github.com/users/tjholsman/orgs", "repos_url": "https://api.github.com/users/tjholsman/repos", "events_url": "https://api.github.com/users/tjholsman/events{/privacy}", "received_events_url": "https://api.github.com/users/tjholsman/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-04-10T23:30:22Z", "updated_at": "2024-03-12T17:26:53Z", "closed_at": "2024-03-12T17:26:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe pandas fluent datasource appears to be incompatible with the interactive CLI expectation builder.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Run this code (based on the [documentation](https://docs.greatexpectations.io/docs/guides/connecting_to_your_data/fluent/filesystem/how_to_connect_to_one_or_more_files_using_pandas) for connecting to multiple files with pandas). I have two taxi data CSVs saved locally:\r\n```\r\nimport great_expectations as gx\r\n\r\ncontext = gx.get_context()\r\ndatasource = context.sources.add_or_update_pandas_filesystem(name=\"taxi_data\",base_directory=\"taxi_data\")\r\ndata_asset = datasource.add_csv_asset(\"taxi_data\", batching_regex=\"yellow_tripdata_sample_2019-\\d{2}\\.csv\")\r\n\r\ntaxi_data = context.get_datasource(\"taxi_data\").get_asset(\"taxi_data\")\r\nbatch_request = taxi_data.build_batch_request()\r\nbatches = datasource.get_batch_list_from_batch_request(batch_request)\r\nfor batch in batches:\r\n    print(batch.batch_spec)\r\n```\r\n\r\nResult:\r\n```\r\n{'path': 'taxi_data/yellow_tripdata_sample_2019-01.csv', 'reader_method': 'read_csv', 'reader_options': {}}\r\n{'path': 'taxi_data/yellow_tripdata_sample_2019-02.csv', 'reader_method': 'read_csv', 'reader_options': {}}\r\n```\r\n\r\n2. The [creating expectations overview](https://docs.greatexpectations.io/docs/guides/expectations/create_expectations_overview) in the docs recommends using the interactive workflow to create expectations. Following that [doc](https://docs.greatexpectations.io/docs/guides/expectations/how_to_create_and_edit_expectations_with_instant_feedback_from_a_sample_batch_of_data), from a terminal, run:\r\n\r\n```great_expectations suite new --interactive```\r\n\r\n3. Terminal returns the AttributeError:\r\n\r\n```\r\nA batch of data is required to edit the suite - let's help you to specify it.\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/bin/great_expectations\", line 8, in <module>\r\n    sys.exit(main())\r\n             ^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/great_expectations/cli/cli.py\", line 142, in main\r\n    cli()\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/core.py\", line 1130, in __call__\r\n    return self.main(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/core.py\", line 1055, in main\r\n    rv = self.invoke(ctx)\r\n         ^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/core.py\", line 1657, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/core.py\", line 1657, in invoke\r\n    return _process_result(sub_ctx.command.invoke(sub_ctx))\r\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/core.py\", line 1404, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/core.py\", line 760, in invoke\r\n    return __callback(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/click/decorators.py\", line 26, in new_func\r\n    return f(get_current_context(), *args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/great_expectations/cli/suite.py\", line 153, in suite_new\r\n    _suite_new_workflow(\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/great_expectations/cli/suite.py\", line 337, in _suite_new_workflow\r\n    raise e\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/great_expectations/cli/suite.py\", line 255, in _suite_new_workflow\r\n    batch_request = toolkit.get_batch_request_using_datasource_name(\r\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/great_expectations/cli/toolkit.py\", line 1112, in get_batch_request_using_datasource_name\r\n    batch_request: Dict[str, Union[str, int, Dict[str, Any]]] = get_batch_request(\r\n                                                                ^^^^^^^^^^^^^^^^^^\r\n  File \"/Users/holsmantj/anaconda3/envs/gx/lib/python3.11/site-packages/great_expectations/cli/batch_request.py\", line 74, in get_batch_request\r\n    ] = datasource.get_available_data_asset_names()\r\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAttributeError: 'PandasFilesystemDatasource' object has no attribute 'get_available_data_asset_names'\r\n```\r\n\r\n**Expected behavior**\r\nAccording to the docs, I should be prompted to name the new expectation suite. Following that, a Jupyter notebook would open allowing me to create expectations using sample data from my asset.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: macOS Ventura 13.3\r\n - Great Expectations Version: 0.16.6\r\n\r\n**Additional context**\r\nIf I create my own expectation suite in code, it works without issue and opens the data docs.\r\n\r\n```\r\n# Create Expectations\r\nexp_suite_name = \"test_suite\"\r\ncontext.create_expectation_suite(\r\n    expectation_suite_name=exp_suite_name, overwrite_existing=True\r\n)\r\nv = context.get_validator(batch_request=data_asset.build_batch_request(), expectation_suite_name=exp_suite_name)\r\nv.expect_column_values_to_not_be_null(\"pickup_datetime\")\r\n\r\n# Validate data\r\nfrom great_expectations.checkpoint import SimpleCheckpoint\r\ncheckpoint = SimpleCheckpoint( \r\n    f\"NY-Taxi-Data\",\r\n    context,\r\n    validator=v\r\n)\r\ncheckpoint_result = checkpoint.run()\r\n\r\n# View results\r\nvalidation_result_identifier = checkpoint_result.list_validation_result_identifiers()[0]\r\ncontext.open_data_docs(resource_identifier=validation_result_identifier)\r\n```\r\n<img width=\"1202\" alt=\"image\" src=\"https://user-images.githubusercontent.com/7084922/231018220-0bd8e6b4-24fc-4352-9dfb-10934ba8029b.png\">\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7605/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7605/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7593", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7593/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7593/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7593/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7593", "id": 1661044720, "node_id": "I_kwDOBiS_IM5jAYfw", "number": 7593, "title": "The table.column_type metric can't be calculated when using SQLAlchemy backend with RuntimeDataConnector and create_temp_table set to False", "user": {"login": "dreamofi", "id": 19624744, "node_id": "MDQ6VXNlcjE5NjI0NzQ0", "avatar_url": "https://avatars.githubusercontent.com/u/19624744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dreamofi", "html_url": "https://github.com/dreamofi", "followers_url": "https://api.github.com/users/dreamofi/followers", "following_url": "https://api.github.com/users/dreamofi/following{/other_user}", "gists_url": "https://api.github.com/users/dreamofi/gists{/gist_id}", "starred_url": "https://api.github.com/users/dreamofi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dreamofi/subscriptions", "organizations_url": "https://api.github.com/users/dreamofi/orgs", "repos_url": "https://api.github.com/users/dreamofi/repos", "events_url": "https://api.github.com/users/dreamofi/events{/privacy}", "received_events_url": "https://api.github.com/users/dreamofi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2325051803, "node_id": "MDU6TGFiZWwyMzI1MDUxODAz", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mysql", "name": "stack:mysql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-04-10T16:39:50Z", "updated_at": "2024-08-22T23:45:02Z", "closed_at": "2024-08-22T23:45:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThis is probably the root cause for this issue: https://github.com/great-expectations/great_expectations/issues/7316\r\nCurrently I'm trying to generate the expectation suite with the UserConfigurableProfiler and  SQLAlchemy backend (connecting to AWS RDS MySQL). My user doesn't have the permission to create temp table, so I pass the parameter create_temp_table: False to the execution engine.\r\nI've seen the following behaviors:\r\n- Triggering the **UserConfigurableProfiler** with **RuntimeDataConnector** results in `KeyError: 'type'` error related to the `expect_column_values_to_be_in_type_list` expectation. When I remove the create_temp_table parameter, the profiler runs successfully.\r\n- Switching from **RuntimeBatchRequest**  to **ConfiguredAssetDataConnector** (while keeping the create_temp_table False) results in the profiler runs successfully.\r\n\r\nUpon further investigation, it has dawn on me that the problem actually lies with the calculation of \"table.column_type\" metric in  the file /expectations/metrics/util.py, so using either OnboardingDataAssistant or UserConfigurableProfiler will still give out error.\r\n\r\nIn function `get_sqlalchemy_column_metadata()`, with `create_temp_table: False` then the column metadata will be fetched by running this line:\r\n\r\n```\r\nif isinstance(table_selectable, TextClause):\r\n    if hasattr(table_selectable, \"selected_columns\"):\r\n        columns = table_selectable.selected_columns.columns\r\n    else:\r\n--->>   columns = table_selectable.columns().columns\r\n```\r\n\r\nHowever, with the way SQLAlchemy working with TextClause object, it will return an empty list, and as such it will fallback to column_reflection_fallback() function. Since this function does not do much for mysql dialect, it just returns a list of column name without the type, and so we get the `KeyError: type error`. To temporarily fix this, I've added this code:\r\n\r\n```\r\ndef column_reflection_fallback(\r\n    selectable: Select, dialect: Dialect, sqlalchemy_engine: Engine\r\n) -> List[Dict[str, str]]:\r\n    \"\"\"If we can't reflect the table, use a query to at least get column names.\"\"\"\r\n    col_info_dict_list: List[Dict[str, str]]\r\n    if dialect.name.lower() == \"mssql\":\r\n      ...\r\n    elif dialect.name.lower() == \"trino\":\r\n      ...\r\n    # The addition code is from here, since I can only test with mysql at the moment, I explicitly only check for mysql dialect\r\n    elif dialect.name.lower() == \"mysql\":\r\n        if isinstance(selectable, TextClause):\r\n            query: TextClause = selectable\r\n        else:\r\n            query = sa.select(sa.text(\"*\")).select_from(selectable).limit(1)\r\n        result_object = sqlalchemy_engine.execute(query)\r\n        # noinspection PyProtectedMember\r\n\r\n        col_names: List[str] = result_object.keys()\r\n\r\n        # To get column types need to use the cursor.description, and since it return Type code\r\n        # it's needed to have a dict to retrieve the type in String.\r\n        # This dict is obtained from here: https://github.com/PyMySQL/PyMySQL/blob/main/pymysql/constants/FIELD_TYPE.py\r\n        column_types: List[str] = [desc[1] for desc in result_object.cursor.description]\r\n        MySqlTypeCode = {\r\n            0: \"DECIMAL\",\r\n            1: \"CHAR\",\r\n            2: \"SHORT\",\r\n            3: \"LONG\",\r\n            4: \"FLOAT\",\r\n            5: \"DOUBLE\",\r\n            6: \"NULL\",\r\n            7: \"TIMESTAMP\",\r\n            8: \"LONGLONG\",\r\n            9: \"INT24\",\r\n            10: \"DATE\",\r\n            11: \"TIME\",\r\n            12: \"DATETIME\",\r\n            13: \"YEAR\",\r\n            14: \"NEWDATE\",\r\n            15: \"VARCHAR\",\r\n            16: \"BIT\",\r\n            245: \"JSON\",\r\n            246: \"NEWDECIMAL\",\r\n            247: \"INTERVAL\",\r\n            252: \"TEXT\",\r\n            253: \"VAR_STRING\",\r\n            254: \"STRING\"\r\n        }\r\n        get_dialect_name = dialect.name.lower()\r\n        get_dialect_type = getattr(sa.dialects, get_dialect_name)\r\n        # to get the type similar to that returned by the inspector in normal case, need to convert type name to dialect type instance\r\n        col_info_dict_list = [\r\n            {\"name\": name, \"type\": getattr(get_dialect_type.types, MySqlTypeCode[typ])()}\r\n            for name, typ in zip(col_names, column_types)\r\n        ]\r\n    else:\r\n       ...\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows/Linux\r\n - Great Expectations Version tested: 0.15.50 to 0.16.5\r\n - Databases: AWS RDS MySQL, MySQL 5.7 \r\n - Backend: SQLAlchemy", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7593/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7593/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7586", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7586/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7586/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7586/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7586", "id": 1658976584, "node_id": "I_kwDOBiS_IM5i4flI", "number": 7586, "title": "Specified Key does not exist/Access denied : While building data docs | AWS EMR or AWS EMR Serverless", "user": {"login": "abhishek0603", "id": 84580625, "node_id": "MDQ6VXNlcjg0NTgwNjI1", "avatar_url": "https://avatars.githubusercontent.com/u/84580625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhishek0603", "html_url": "https://github.com/abhishek0603", "followers_url": "https://api.github.com/users/abhishek0603/followers", "following_url": "https://api.github.com/users/abhishek0603/following{/other_user}", "gists_url": "https://api.github.com/users/abhishek0603/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhishek0603/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhishek0603/subscriptions", "organizations_url": "https://api.github.com/users/abhishek0603/orgs", "repos_url": "https://api.github.com/users/abhishek0603/repos", "events_url": "https://api.github.com/users/abhishek0603/events{/privacy}", "received_events_url": "https://api.github.com/users/abhishek0603/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-07T16:22:10Z", "updated_at": "2024-08-22T23:45:19Z", "closed_at": "2024-08-22T23:45:19Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nGetting 'Specified Key does not exist / Access denied' error while building data docs in AWS EMR and EMR Serverless.\r\n\r\n**To Reproduce**\r\n\r\nAs per the great expectations guide, boto3_options needs to be added in data_doc site specified in great_expectations.yml\r\n\r\n![image](https://user-images.githubusercontent.com/84580625/230633858-04466a64-cf1c-49f6-8e41-d381e3b615cc.png)\r\n\r\nwhile executing the following command in AWS EMR serverless or EMR environment,\r\n\r\n![image](https://user-images.githubusercontent.com/84580625/230635688-2a3c115b-143b-4da9-87e2-c431651292e8.png)\r\n\r\ngetting this error: \r\n\r\n![image](https://user-images.githubusercontent.com/84580625/230637854-f4bffa47-8531-4c6b-b75d-b8eb93d67941.png)\r\n\r\n\r\nWhen I remove boto3_options from data doc sites in great_expectations.yml then it throws 'Access denied error' but data doc is being generated successfully in the s3 bucket which I have configured in great_expectations.yml but causing EMR serverless job to get failed.\r\n\r\n![image](https://user-images.githubusercontent.com/84580625/230639275-bff415a4-3d25-4740-baa0-7446262b6810.png)\r\n\r\n\r\n**Expected behavior**\r\nEMR serverless job shouldn't be failed. It should be success with no errors.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Ubuntu EMR serverless]\r\n - Great Expectations Version: [e.g. 0.16.3]\r\n\r\n**Additional context**\r\nIn local jupyter notebook, this seems to be working fine(no errors). No boto3_options is specified in great_expectations.yml(for data doc site)\r\n\r\n\r\nGetting below output in the local when the same command is executed.\r\n\r\n![image](https://user-images.githubusercontent.com/84580625/230642490-db9e1c68-c825-4569-bdac-6242217bae09.png)\r\n\r\nPlease let me know if any other info needs to be provided.\r\n\r\nThanks,\r\nAbhishek\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7586/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7586/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7555", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7555/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7555/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7555/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7555", "id": 1653556142, "node_id": "I_kwDOBiS_IM5ij0Ou", "number": 7555, "title": "Databricks Error - py4j.security.Py4JSecurityException: Constructor public org.apache.spark.SparkConf(boolean) is not whitelisted", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-04T09:52:26Z", "updated_at": "2024-08-22T23:46:10Z", "closed_at": "2024-08-22T23:46:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Details - https://github.com/great-expectations/great_expectations/issues/3538\r\n\r\nWhile this issue is not reproducible on Databricks Community 11.3 LTS (includes Apache Spark 3.3.0, Scala 2.12),\r\nit **is reproducible** on AWS Databricks 12.2 LTS Shared cluster (includes Apache Spark 3.3.2, Scala 2.12)\r\nwith great_expectations-0.16.5-py3-none-any.whl\r\n\r\nMany thanks to @dbeswick-bupa - monkey-patch from https://github.com/great-expectations/great_expectations/issues/3538 works!\r\n\r\nPlease consider merging the monkey-patch to core library...", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7555/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7555/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7450", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7450/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7450/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7450/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7450", "id": 1639223982, "node_id": "I_kwDOBiS_IM5htJKu", "number": 7450, "title": "Extra (not needed) SQL Query issued to a database when running a checkpoint", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-24T11:30:45Z", "updated_at": "2024-08-22T23:46:24Z", "closed_at": "2024-08-22T23:46:24Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nExtra (not needed) full table SELECT issued to a database when running a checkpoint as a first SQL before all expected_to_be_issued_for_real_validations SQLs are run, \r\nonly after you Turn OFF temp table creation,\r\n\r\nSQL example:\r\n\r\n```\r\nSELECT * \r\nfrom public.customer_demographics \r\n```\r\n\r\n**To Reproduce**\r\n\r\nDetected on Snowflake, reproducible on a Snowflake trial account:\r\n\r\n1) Turn OFF temp table creation in great_expectations.yml:\r\n\r\n      class_name: SqlAlchemyExecutionEngine\r\n      create_temp_table: False\r\n\r\n2) run a checkpoint upon a SQL Select:\r\n\r\nsample checkpoint:\r\n```\r\nname: test_checkpoint \r\nconfig_version: 1.0\r\ntemplate_name:\r\nmodule_name: great_expectations.checkpoint\r\nclass_name: Checkpoint\r\nrun_name_template: Full\r\nexpectation_suite_name:\r\nbatch_request: {}\r\naction_list:\r\n  - name: store_validation_result\r\n    action:\r\n      class_name: StoreValidationResultAction\r\n  - name: store_evaluation_params\r\n    action:\r\n      class_name: StoreEvaluationParametersAction\r\n  - name: update_data_docs\r\n    action:\r\n      class_name: UpdateDataDocsAction\r\nevaluation_parameters: {}\r\nruntime_configuration: {}\r\nvalidations:\r\n  - batch_request:\r\n      datasource_name: sflake\r\n      data_connector_name: default_runtime_data_connector_name\r\n      data_asset_name: my_table_name\r\n      runtime_parameters:\r\n        query: \"\\nSELECT * \\nfrom public.customer_demographics\"\r\n      batch_identifiers:\r\n        default_identifier_name: default_identifier\r\n    expectation_suite_name: sflake_suite\r\nprofilers: []\r\nge_cloud_id:\r\nexpectation_suite_ge_cloud_id:\r\n```\r\n\r\nsample expectation_suite:\r\n```\r\n{\r\n  \"data_asset_type\": null,\r\n  \"expectation_suite_name\": \"sflake_suite\",\r\n  \"expectations\": [\r\n    {\r\n      \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n      \"kwargs\": {\r\n        \"column\": \"cd_demo_sk\"\r\n      },\r\n      \"meta\": {}\r\n    },\r\n    {\r\n      \"expectation_type\": \"expect_column_values_to_be_between\",\r\n      \"kwargs\": {\r\n        \"column\": \"cd_purchase_estimate\",\r\n        \"max_value\": 3000,\r\n        \"min_value\": 0\r\n      },\r\n      \"meta\": {}\r\n    }\r\n  ],\r\n  \"ge_cloud_id\": null,\r\n  \"meta\": {\r\n    \"citations\": [\r\n      {\r\n        \"batch_request\": {\r\n          \"data_asset_name\": \"default_data_asset_name\",\r\n          \"data_connector_name\": \"default_runtime_data_connector_name\",\r\n          \"datasource_name\": \"sf_dev\",\r\n          \"limit\": 1000\r\n        },\r\n        \"citation_date\": \"2023-03-23T15:06:56.714677Z\",\r\n        \"comment\": \"Created suite added via CLI\"\r\n      }\r\n    ],\r\n    \"great_expectations_version\": \"0.16.1\"\r\n  }\r\n}\r\n```\r\n\r\n\r\n**Expected behavior**\r\n\r\nNo extra full table SELECTs issued\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux Ubuntu\r\n - Great Expectations Version: \"0.16.1\"\r\n - SQLAlchemy 1.4.46\r\n\r\n**Additional info\r\nbefore you Turn OFF temp table creation, the SQL issued would be like this (as expected):\r\n\r\nCREATE OR REPLACE TEMPORARY TABLE ge_temp_b8f8eeae AS\r\nSELECT * \r\nfrom public.customer_demographics ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7450/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7435", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7435/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7435/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7435/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7435", "id": 1637265537, "node_id": "I_kwDOBiS_IM5hlrCB", "number": 7435, "title": "[DOCS] How to configure Checkpoints store in Amazon S3", "user": {"login": "kujaska", "id": 49131090, "node_id": "MDQ6VXNlcjQ5MTMxMDkw", "avatar_url": "https://avatars.githubusercontent.com/u/49131090?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kujaska", "html_url": "https://github.com/kujaska", "followers_url": "https://api.github.com/users/kujaska/followers", "following_url": "https://api.github.com/users/kujaska/following{/other_user}", "gists_url": "https://api.github.com/users/kujaska/gists{/gist_id}", "starred_url": "https://api.github.com/users/kujaska/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kujaska/subscriptions", "organizations_url": "https://api.github.com/users/kujaska/orgs", "repos_url": "https://api.github.com/users/kujaska/repos", "events_url": "https://api.github.com/users/kujaska/events{/privacy}", "received_events_url": "https://api.github.com/users/kujaska/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-03-23T10:39:19Z", "updated_at": "2024-03-12T17:38:16Z", "closed_at": "2024-03-12T17:38:16Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Is there a manual How to configure Checkpoints store in Amazon S3?\r\n\r\nNothing here - Customize your deployment page\r\nhttps://docs.greatexpectations.io/docs/reference/customize_your_deployment/#additional-checkpoints-and-actions\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7435/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7435/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7432", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7432/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7432/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7432/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7432", "id": 1636845422, "node_id": "I_kwDOBiS_IM5hkEdu", "number": 7432, "title": "empty data asset return success for expect_column_values_to_not_be_null expectation", "user": {"login": "tmilitino", "id": 23370997, "node_id": "MDQ6VXNlcjIzMzcwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/23370997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmilitino", "html_url": "https://github.com/tmilitino", "followers_url": "https://api.github.com/users/tmilitino/followers", "following_url": "https://api.github.com/users/tmilitino/following{/other_user}", "gists_url": "https://api.github.com/users/tmilitino/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmilitino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmilitino/subscriptions", "organizations_url": "https://api.github.com/users/tmilitino/orgs", "repos_url": "https://api.github.com/users/tmilitino/repos", "events_url": "https://api.github.com/users/tmilitino/events{/privacy}", "received_events_url": "https://api.github.com/users/tmilitino/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-23T04:50:14Z", "updated_at": "2025-08-13T14:14:10Z", "closed_at": "2023-03-23T17:45:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nwhen passing an empty data asset to use the `expect_column_values_to_not_be_null` expectations,  the test passes successfully for the column but the observed value renders an error as in the image below\r\n\r\n![Captura de tela de 2023-03-23 01-33-12](https://user-images.githubusercontent.com/23370997/227105411-0053a1b1-f636-40a0-bf37-1ec670d8a7b6.png)\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. create mass without row, only columns name\r\n2. create a suite expectation with expect_column_values_to_not_be_null expectation\r\n3. execute checkpoint\r\n4. open data docs\r\n5. see the result\r\n\r\n**Expected behavior**\r\nI believe is a false positive. the correct outcome for these situations is not \"success\"\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 20.4\r\n - Great Expectations 15.50", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7432/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7432/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7420", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7420/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7420/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7420/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7420", "id": 1634714728, "node_id": "I_kwDOBiS_IM5hb8Ro", "number": 7420, "title": "AttributeError for 'sqlalchemy_redshift.dialect' has no attribute 'GEOMETRY'", "user": {"login": "jonastim", "id": 1749498, "node_id": "MDQ6VXNlcjE3NDk0OTg=", "avatar_url": "https://avatars.githubusercontent.com/u/1749498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonastim", "html_url": "https://github.com/jonastim", "followers_url": "https://api.github.com/users/jonastim/followers", "following_url": "https://api.github.com/users/jonastim/following{/other_user}", "gists_url": "https://api.github.com/users/jonastim/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonastim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonastim/subscriptions", "organizations_url": "https://api.github.com/users/jonastim/orgs", "repos_url": "https://api.github.com/users/jonastim/repos", "events_url": "https://api.github.com/users/jonastim/events{/privacy}", "received_events_url": "https://api.github.com/users/jonastim/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-21T21:29:25Z", "updated_at": "2024-02-14T22:26:08Z", "closed_at": "2024-02-14T22:26:08Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nGetting an attribute error when importing GE into my application because of a missing field in `'sqlalchemy_redshift.dialect`. \r\n`sqlalchemy-redshift` is pulled into the application as a transitive dependency of another library and not actively used.\r\nExceptions for importing in GE are expected but only `ImportError` and `KeyError` [are caught](https://github.com/great-expectations/great_expectations/blob/6337648fc292b56eb56be0b31a1f61f15c8a654f/great_expectations/self_check/util.py#L374).\r\n\r\n```\r\n    import great_expectations as ge\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/__init__.py\", line 7, in <module>\r\n    from great_expectations.data_context import DataContext\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/data_context/__init__.py\", line 1, in <module>\r\n    from great_expectations.data_context.data_context import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/data_context/data_context/__init__.py\", line 4, in <module>\r\n    from great_expectations.data_context.data_context.base_data_context import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/data_context/data_context/base_data_context.py\", line 108, in <module>\r\n    from great_expectations.render.renderer.site_builder import SiteBuilder\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/render/renderer/__init__.py\", line 2, in <module>\r\n    from .column_section_renderer import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/render/renderer/column_section_renderer.py\", line 13, in <module>\r\n    from great_expectations.render.renderer.content_block import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/render/renderer/content_block/__init__.py\", line 1, in <module>\r\n    from great_expectations.render.renderer.content_block.validation_results_table_content_block import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/render/renderer/content_block/validation_results_table_content_block.py\", line 7, in <module>\r\n    from great_expectations.expectations.core.expect_column_kl_divergence_to_be_less_than import (  # noqa: F401\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/expectations/core/__init__.py\", line 1, in <module>\r\n    from .expect_column_distinct_values_to_be_in_set import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/expectations/core/expect_column_distinct_values_to_be_in_set.py\", line 8, in <module>\r\n    from great_expectations.expectations.expectation import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/expectations/expectation.py\", line 82, in <module>\r\n    from great_expectations.self_check.util import (\r\n  File \"/code/venvs/venv/lib/python3.8/site-packages/great_expectations/self_check/util.py\", line 352, in <module>\r\n    \"GEOMETRY\": redshifttypes.GEOMETRY,\r\nAttributeError: module 'sqlalchemy_redshift.dialect' has no attribute 'GEOMETRY'\r\n```\r\nThe issue is that with `sqlalchemy-redshift` present in the venv, GE assumes that is going to be used for GE. As none of the versions restrictions ([like here](https://github.com/great-expectations/great_expectations/blob/5dde359202db87a1b485e3565971787702734bbe/reqs/requirements-dev-redshift.txt#L2)) are enforced it's easy for the self-test to fail.\r\n\r\n**To Reproduce**\r\nI am seeing this issue with `sqlalchemy-redshift==0.8.2` but not with `sqlalchemy-redshift==0.8.9`.\r\n\r\n**Expected behavior**\r\nHave less strict self-tests, e.g. catch `AttributeError`s and emit logs instead of blowing up.  \r\n\r\n**Environment**\r\n - Operating System: Ubuntu 18.04\r\n - Great Expectations Version: tested with 0.15.40 and 0.14.3 but also expected to happen in the latest version as the exception isn't caught in the current source code (can't test latest version because of numpy clashes)\r\n\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7420/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7420/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7337", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7337/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7337/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7337/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7337", "id": 1619943064, "node_id": "I_kwDOBiS_IM5gjl6Y", "number": 7337, "title": "Using great_expectation with streaming data/databricks autoloader", "user": {"login": "chhayavishwakarma", "id": 7696087, "node_id": "MDQ6VXNlcjc2OTYwODc=", "avatar_url": "https://avatars.githubusercontent.com/u/7696087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chhayavishwakarma", "html_url": "https://github.com/chhayavishwakarma", "followers_url": "https://api.github.com/users/chhayavishwakarma/followers", "following_url": "https://api.github.com/users/chhayavishwakarma/following{/other_user}", "gists_url": "https://api.github.com/users/chhayavishwakarma/gists{/gist_id}", "starred_url": "https://api.github.com/users/chhayavishwakarma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chhayavishwakarma/subscriptions", "organizations_url": "https://api.github.com/users/chhayavishwakarma/orgs", "repos_url": "https://api.github.com/users/chhayavishwakarma/repos", "events_url": "https://api.github.com/users/chhayavishwakarma/events{/privacy}", "received_events_url": "https://api.github.com/users/chhayavishwakarma/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-11T09:18:38Z", "updated_at": "2024-03-18T16:16:52Z", "closed_at": "2024-03-18T16:16:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi everyone ,\r\n\r\n\r\nI have implemented a data pipeline using autoloader bronze-->silver-->gold .\r\n\r\nnow while I do this I want to perform some data quality checks , and for that I'm using great expectations library.\r\n\r\nHowever I'm stuck with below error when trying to validate the data\r\n\r\n\r\nvalidator.expect_column_values_to_not_be_null(column=\"col1\")\r\n\r\nvalidator.expect_column_values_to_be_in_set(\r\n\r\n   column=\"col2\",\r\n\r\n   value_set=[1,6]\r\n\r\n)\r\n\r\nMetricResolutionError: Queries with streaming sources must be executed with writeStream.start();\r\n\r\nlooks like great expectations can work with only static/batch data.\r\n\r\nCan someone advise how can I go about getting it working ?\r\n\r\nI followed below in my databricks notebook to get started with great_expectations\r\n\r\nhttps://docs.greatexpectations.io/docs/deployment_patterns/how_to_use_great_expectations_in_databricks/\r\n\r\nI couldn't find a documentation on streaming use cases. I have a customer who is looking to use it for streaming data\r\n\r\nappreciate your support.", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7337/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7337/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7335", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7335/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7335/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7335/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7335", "id": 1619529172, "node_id": "I_kwDOBiS_IM5giA3U", "number": 7335, "title": "TupleAzureBlobStoreBackend Prefix List Keys", "user": {"login": "ashboot-rgb", "id": 118351454, "node_id": "U_kgDOBw3mXg", "avatar_url": "https://avatars.githubusercontent.com/u/118351454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashboot-rgb", "html_url": "https://github.com/ashboot-rgb", "followers_url": "https://api.github.com/users/ashboot-rgb/followers", "following_url": "https://api.github.com/users/ashboot-rgb/following{/other_user}", "gists_url": "https://api.github.com/users/ashboot-rgb/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashboot-rgb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashboot-rgb/subscriptions", "organizations_url": "https://api.github.com/users/ashboot-rgb/orgs", "repos_url": "https://api.github.com/users/ashboot-rgb/repos", "events_url": "https://api.github.com/users/ashboot-rgb/events{/privacy}", "received_events_url": "https://api.github.com/users/ashboot-rgb/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-03-10T19:44:06Z", "updated_at": "2024-03-12T17:37:42Z", "closed_at": "2024-03-12T17:37:42Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Using TupleAzureBlobStoreBackend as the expectation, checkpoint and validation store. Was able to save expectations and checkpoint files to these stores, however, when invoking a checkpoint run resulted in a `Exception: DataContextError: expectation_suite EXPECTATION_SUITE_NAME not found`. It appears the list_keys() method has the filepath delimiter hardcoded as \"/\" potential fix is to use os.sep. Developing on Windows causes error, deploying to Linux works fine. \r\n\r\n> [tuple_store_backend.py](https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/data_context/store/tuple_store_backend.py#L1065l)\r\n` if az_blob_key.startswith(f\"{self.prefix}{os.sep}\"): `\r\n\r\n - Developing Azure Function in Windows\r\n - Deploying Azure Function in Linux\r\n - Great Expectations Version: 0.15.50\r\n\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7335/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7335/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7289", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7289/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7289/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7289/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7289", "id": 1611985828, "node_id": "I_kwDOBiS_IM5gFPOk", "number": 7289, "title": "build data_docs in S3 bucket with AES256 encrpytion", "user": {"login": "elPichon98", "id": 20584293, "node_id": "MDQ6VXNlcjIwNTg0Mjkz", "avatar_url": "https://avatars.githubusercontent.com/u/20584293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elPichon98", "html_url": "https://github.com/elPichon98", "followers_url": "https://api.github.com/users/elPichon98/followers", "following_url": "https://api.github.com/users/elPichon98/following{/other_user}", "gists_url": "https://api.github.com/users/elPichon98/gists{/gist_id}", "starred_url": "https://api.github.com/users/elPichon98/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elPichon98/subscriptions", "organizations_url": "https://api.github.com/users/elPichon98/orgs", "repos_url": "https://api.github.com/users/elPichon98/repos", "events_url": "https://api.github.com/users/elPichon98/events{/privacy}", "received_events_url": "https://api.github.com/users/elPichon98/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2023-03-06T18:21:22Z", "updated_at": "2024-08-22T23:46:50Z", "closed_at": "2024-08-22T23:46:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\nCurrently, I see no options that allows users to build data-docs in a S3 bucket that only allow uploads\r\nAES256 encryption. This will help users who have to work with data that must always be encrypted \r\n\r\n\r\nCurrently if a user attempts to upload to an S3 bucket with a policy that only allows encrypted uploads will lead to \r\nAccess Denied Errors despite having correct credentials\r\n\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\nA nice way to make this possible is via a command line option such as \r\n\r\n`great_expectations docs build --site-name <your-site-name> --encryption-params AES256`\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\nAn alternative could be to ask if s3 requires any encrpytion\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7289/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7289/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7248", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7248/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7248/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7248/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7248", "id": 1602078812, "node_id": "I_kwDOBiS_IM5ffchc", "number": 7248, "title": "OpenLineage and Great Expectations integrated", "user": {"login": "jingyichen790", "id": 106801421, "node_id": "U_kgDOBl2pDQ", "avatar_url": "https://avatars.githubusercontent.com/u/106801421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jingyichen790", "html_url": "https://github.com/jingyichen790", "followers_url": "https://api.github.com/users/jingyichen790/followers", "following_url": "https://api.github.com/users/jingyichen790/following{/other_user}", "gists_url": "https://api.github.com/users/jingyichen790/gists{/gist_id}", "starred_url": "https://api.github.com/users/jingyichen790/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jingyichen790/subscriptions", "organizations_url": "https://api.github.com/users/jingyichen790/orgs", "repos_url": "https://api.github.com/users/jingyichen790/repos", "events_url": "https://api.github.com/users/jingyichen790/events{/privacy}", "received_events_url": "https://api.github.com/users/jingyichen790/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3880359478, "node_id": "LA_kwDOBiS_IM7nSZY2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/discussion", "name": "discussion", "color": "55F088", "default": false, "description": "All items that are inside of Discussions"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2023-02-27T22:57:21Z", "updated_at": "2024-03-12T17:36:37Z", "closed_at": "2024-03-12T17:36:37Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hello team, we used OpenLineage and Great Expectations integrated. I want to use GE to verify the table in Snowflake. I found that the configuration I added OpenLineage into GE produced this error after running. Could someone please give me some answers?\r\n`  File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/great_expectations/validation_operators/validation_operators.py\", line 469, in _run_actions\r\n    action_result = self.actions[action[\"name\"]].run(\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/great_expectations/checkpoint/actions.py\", line 106, in run\r\n    return self._run(\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/openlineage/common/provider/great_expectations/action.py\", line 156, in _run\r\n    datasets = self._fetch_datasets_from_sql_source(\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/openlineage/common/provider/great_expectations/action.py\", line 362, in _fetch_datasets_from_sql_source\r\n    self._get_sql_table(\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/openlineage/common/provider/great_expectations/action.py\", line 395, in _get_sql_table\r\n    if engine.connection_string:\r\nAttributeError: 'Engine' object has no attribute 'connection_string'\r\n'Engine' object has no attribute 'connection_string'\r\n`\r\n\r\nThis is my package version list:\r\n`openlineage-integration-common\r\ngreat_expectations==0.15.44\r\nsqlalchemy\r\npsycopg2-binary\r\nnumpy\r\npandas\r\nsnowflake-connector-python\r\nsnowflake-sqlalchemy\r\nblack\r\n`\r\n\r\nThis is my configuration:\r\n\r\nname: 'openlineage_checkpoint'\r\nconfig_version: 1.0\r\ntemplate_name:\r\nmodule_name: great_expectations.checkpoint\r\nclass_name: Checkpoint\r\nrun_name_template: '%Y%m%d-%H%M%S-my_checkpoint'\r\nexpectation_suite_name: EMAIL_VALIDATION\r\nbatch_request:\r\naction_list:\r\n  \\- name: store_validation_result\r\n    action:\r\n      class_name: StoreValidationResultAction\r\n  \\- name: store_evaluation_params\r\n    action:\r\n      class_name: StoreEvaluationParametersAction\r\n  \\- name: update_data_docs\r\n    action:\r\n      class_name: UpdateDataDocsAction\r\n      site_names: []\r\n  \\- name: openlineage\r\n    action:\r\n      class_name: OpenLineageValidationAction\r\n      module_name: openlineage.common.provider.great_expectations\r\n      openlineage_host: http://localhost:5000/\r\n      openlineage_namespace: ge_expectations # Replace with your job namespace; we recommend a meaningful namespace like `dev` or `prod`, etc.\r\n      job_name: ge_validation\r\nevaluation_parameters: {}\r\nruntime_configuration: {}\r\nvalidations:\r\n  \\- batch_request:\r\n      datasource_name: LANDING_DEV\r\n      data_connector_name: default_inferred_data_connector_name\r\n      data_asset_name: 'snowpipe.pii'\r\n      data_connector_query:\r\n        index: -1\r\n    expectation_suite_name: EMAIL_VALIDATION\r\nprofilers: []\r\nge_cloud_id:\r\nexpectation_suite_ge_cloud_id:\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7248/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7248/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7234", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7234/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7234/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7234/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7234", "id": 1599465345, "node_id": "I_kwDOBiS_IM5fVeeB", "number": 7234, "title": "Passing A List As An Evaluation Paremeter", "user": {"login": "bkraft4257", "id": 10143816, "node_id": "MDQ6VXNlcjEwMTQzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/10143816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkraft4257", "html_url": "https://github.com/bkraft4257", "followers_url": "https://api.github.com/users/bkraft4257/followers", "following_url": "https://api.github.com/users/bkraft4257/following{/other_user}", "gists_url": "https://api.github.com/users/bkraft4257/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkraft4257/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkraft4257/subscriptions", "organizations_url": "https://api.github.com/users/bkraft4257/orgs", "repos_url": "https://api.github.com/users/bkraft4257/repos", "events_url": "https://api.github.com/users/bkraft4257/events{/privacy}", "received_events_url": "https://api.github.com/users/bkraft4257/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-02-25T01:09:30Z", "updated_at": "2024-08-22T23:47:05Z", "closed_at": "2024-08-22T23:47:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI wanted to create a dynamic expectation using an Evaluation Parameter and the expect_column_values_to_be_in_set.  I asked the question on Great Expectations Slack support channel \r\n\r\n\"How do I create an Evaluation Parameter that I may use as a list for the expect_column_values_to_be_in_set\"?\r\n\r\nAustin Robinson asked me to file an issue on GitHub.\r\n\r\n```\r\nAustin Robinson (GX)\r\n:gx:  [4 hours ago](https://greatexpectationstalk.slack.com/archives/CUTCNHN82/p1677269473491059?thread_ts=1677248032.328259&cid=CUTCNHN82)\r\nHey \r\n[@Bob Kraft](https://greatexpectationstalk.slack.com/team/UNUSQPAHK)\r\n! Thanks for reaching out. Would you be willing to raise a GitHub Issue detailing this behavior? From there we can review this functionality.\r\n```\r\n\r\n\r\n**To Reproduce**\r\nI created a simple test case with the following expectation snippet.  \r\n\r\n```\r\n{\r\n      \"expectation_type\": \"expect_column_values_to_be_in_set\",\r\n      \"kwargs\": {\r\n        \"column\": \"as_of_dt\",\r\n        \"value_set\": [ {\"$PARAMETER\": \"as_of_dt_string\"} ]\r\n      }\r\n    }\r\n```\r\n\r\nThis failed with the MetricResolutionError exception \r\n\r\n```\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: <class 'dict'> is not defined formatter.\\n\",\r\n              \"exception_message\": \"<class 'dict'> is not defined formatter.\",\r\n              \"raised_exception\": true\r\n            }\r\n```\r\n\r\nbecause I was passing the  {\"$PARAMETER\": \"as_of_dt_string\"}  inside a list.  For testing purposes, I rewrote the expectation without the list\r\n\r\n```\r\n{\r\n      \"expectation_type\": \"expect_column_values_to_be_in_set\",\r\n      \"kwargs\": {\r\n        \"column\": \"as_of_dt\",\r\n        \"value_set\":  {\"$PARAMETER\": \"as_of_dt_string\"} \r\n      }\r\n    }\r\n```\r\n\r\nI then encountered this error \"exception_message\": \"IN expression list, SELECT construct, or bound parameter object expected, got '2023-01-01'.\",\r\n\r\n\r\n\r\n**Expected behavior**\r\nI want to be able to pass in a list as an evaluation parameter.   This functionality may already exist but I couldn't find it in your documentation. \r\n\r\n\r\n**Environment (please complete the following information):**\r\nLinux \r\ngreat-expectations==0.15.42\r\npython version 3.7.15\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7234/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7234/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7208", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7208/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7208/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7208/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7208", "id": 1596213797, "node_id": "I_kwDOBiS_IM5fJEol", "number": 7208, "title": "GX does not identify timestamp/date column datatype from Databricks sql", "user": {"login": "adarsha-jll", "id": 107102139, "node_id": "U_kgDOBmI_uw", "avatar_url": "https://avatars.githubusercontent.com/u/107102139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adarsha-jll", "html_url": "https://github.com/adarsha-jll", "followers_url": "https://api.github.com/users/adarsha-jll/followers", "following_url": "https://api.github.com/users/adarsha-jll/following{/other_user}", "gists_url": "https://api.github.com/users/adarsha-jll/gists{/gist_id}", "starred_url": "https://api.github.com/users/adarsha-jll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adarsha-jll/subscriptions", "organizations_url": "https://api.github.com/users/adarsha-jll/orgs", "repos_url": "https://api.github.com/users/adarsha-jll/repos", "events_url": "https://api.github.com/users/adarsha-jll/events{/privacy}", "received_events_url": "https://api.github.com/users/adarsha-jll/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "dctalbot", "id": 17692467, "node_id": "MDQ6VXNlcjE3NjkyNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/17692467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dctalbot", "html_url": "https://github.com/dctalbot", "followers_url": "https://api.github.com/users/dctalbot/followers", "following_url": "https://api.github.com/users/dctalbot/following{/other_user}", "gists_url": "https://api.github.com/users/dctalbot/gists{/gist_id}", "starred_url": "https://api.github.com/users/dctalbot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dctalbot/subscriptions", "organizations_url": "https://api.github.com/users/dctalbot/orgs", "repos_url": "https://api.github.com/users/dctalbot/repos", "events_url": "https://api.github.com/users/dctalbot/events{/privacy}", "received_events_url": "https://api.github.com/users/dctalbot/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "dctalbot", "id": 17692467, "node_id": "MDQ6VXNlcjE3NjkyNDY3", "avatar_url": "https://avatars.githubusercontent.com/u/17692467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dctalbot", "html_url": "https://github.com/dctalbot", "followers_url": "https://api.github.com/users/dctalbot/followers", "following_url": "https://api.github.com/users/dctalbot/following{/other_user}", "gists_url": "https://api.github.com/users/dctalbot/gists{/gist_id}", "starred_url": "https://api.github.com/users/dctalbot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dctalbot/subscriptions", "organizations_url": "https://api.github.com/users/dctalbot/orgs", "repos_url": "https://api.github.com/users/dctalbot/repos", "events_url": "https://api.github.com/users/dctalbot/events{/privacy}", "received_events_url": "https://api.github.com/users/dctalbot/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2023-02-23T04:49:43Z", "updated_at": "2024-08-22T23:47:35Z", "closed_at": "2024-08-22T23:47:35Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nGX does not identify timestamp/date column datatype from Databricks sql. The data is passed into GX as a pandas dataframe.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. connect to databricks sql, fetch data and create a pandas dataframe.\r\n2. setup GX to use in memory checkpoint using the pandas datasource.\r\n3. expectation suite defined for date column as \r\n{\r\n      \"expectation_type\": \"expect_column_values_to_be_in_type_list\",\r\n      \"kwargs\": {\r\n        \"column\": \"last_invited_on\",\r\n        \"type_list\": [\"Timestamp_NTZ\", \"datetime64[ns]\", \"Timestamp\", \"datetime64[ns, UTC]\"]\r\n      },\r\n      \"meta\": {}\r\n    }\r\n4. the column in the dataframe is of type \u2018datetime64[ns, UTC]\u2019\r\n5. after running the checkpoint validation result does not identify the date column type, expectation fails. result is as below.\r\n![image](https://user-images.githubusercontent.com/107102139/220823168-0ce78ce0-0b39-439b-a4a6-c6d59b7cb256.png)\r\n\r\n\r\n**Expected behavior**\r\nGX identifies date column type from databricks sql and the expectation validation status is pass.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: [0.15.48]\r\n - Python: 3.9.16\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7208/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7208/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7017", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7017/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7017/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7017/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7017", "id": 1565672439, "node_id": "I_kwDOBiS_IM5dUkP3", "number": 7017, "title": "Change Result Format logic to not be additive or at least have a way to opt out", "user": {"login": "jmcorreia", "id": 11615737, "node_id": "MDQ6VXNlcjExNjE1NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/11615737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmcorreia", "html_url": "https://github.com/jmcorreia", "followers_url": "https://api.github.com/users/jmcorreia/followers", "following_url": "https://api.github.com/users/jmcorreia/following{/other_user}", "gists_url": "https://api.github.com/users/jmcorreia/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmcorreia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmcorreia/subscriptions", "organizations_url": "https://api.github.com/users/jmcorreia/orgs", "repos_url": "https://api.github.com/users/jmcorreia/repos", "events_url": "https://api.github.com/users/jmcorreia/events{/privacy}", "received_events_url": "https://api.github.com/users/jmcorreia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 4391178824, "node_id": "LA_kwDOBiS_IM8AAAABBbwSSA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:optimization", "name": "feature:optimization", "color": "5CA71F", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2023-02-01T08:34:21Z", "updated_at": "2025-03-27T17:00:31Z", "closed_at": "2023-03-21T19:59:30Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Description:**\r\nThe RESULT_FORMAT has an additive nature, so more detailed the RESULT_FORMAT, more keywords are added to the return. However, people using always \"COMPLETE\", for example, are, for sure, not interested in the \"partial...\" keywords. \r\n\r\n**Proposed Solutions**\r\nThus, the logic should be changed, not to be additive, but to have 1-1 relationship between keywords and RESULT_FORMAT selected. \r\nIf this is technically not possible or do not make sense, I would say that at least for the COMPLETE RESULT_FORMAT, a an opt out flag should be available to chose if people want the \"partial\" keywords or not, for example.", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7017/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7017/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7016", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7016/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7016/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7016/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/7016", "id": 1565567662, "node_id": "I_kwDOBiS_IM5dUKqu", "number": 7016, "title": "Extra filepath error in Slack notification", "user": {"login": "data-han", "id": 51312880, "node_id": "MDQ6VXNlcjUxMzEyODgw", "avatar_url": "https://avatars.githubusercontent.com/u/51312880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/data-han", "html_url": "https://github.com/data-han", "followers_url": "https://api.github.com/users/data-han/followers", "following_url": "https://api.github.com/users/data-han/following{/other_user}", "gists_url": "https://api.github.com/users/data-han/gists{/gist_id}", "starred_url": "https://api.github.com/users/data-han/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/data-han/subscriptions", "organizations_url": "https://api.github.com/users/data-han/orgs", "repos_url": "https://api.github.com/users/data-han/repos", "events_url": "https://api.github.com/users/data-han/events{/privacy}", "received_events_url": "https://api.github.com/users/data-han/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2023-02-01T07:13:09Z", "updated_at": "2024-07-19T20:04:51Z", "closed_at": "2024-07-19T18:55:27Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nSince upgrading (i think) to 15.43, the slack notification includes extra filepath error at the top. Im wondering what config I can change to remove it? (SS1 shows current, SS2 shows previous which is what I wanted) \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n\r\n**Expected behavior**\r\nThe extra line at the top should not been there\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [e.g. Linux, MacOS, Windows]: MacOS\r\n - Great Expectations Version: [e.g. 0.13.2]: 0.15.46\r\n\r\nSS1: After (current state)\r\n![image](https://user-images.githubusercontent.com/51312880/215975552-5f817fb3-d892-4431-bec7-bf9c048f7288.png)\r\nSS2: Before (what i want)\r\n![image](https://user-images.githubusercontent.com/51312880/215975608-7595744c-3d53-49d5-a7db-4b7c511486c0.png)\r\n\r\ncheckpoint yml\r\n![image](https://user-images.githubusercontent.com/51312880/215975850-e724efc4-d4c8-4948-a42e-282a1de6369e.png)\r\n\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7016/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/7016/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6847", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6847/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6847/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6847/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6847", "id": 1550065741, "node_id": "I_kwDOBiS_IM5cZCBN", "number": 6847, "title": "Encountering runtime error when checkpoint tries NoOpAction", "user": {"login": "jamesngo", "id": 5660105, "node_id": "MDQ6VXNlcjU2NjAxMDU=", "avatar_url": "https://avatars.githubusercontent.com/u/5660105?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamesngo", "html_url": "https://github.com/jamesngo", "followers_url": "https://api.github.com/users/jamesngo/followers", "following_url": "https://api.github.com/users/jamesngo/following{/other_user}", "gists_url": "https://api.github.com/users/jamesngo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamesngo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamesngo/subscriptions", "organizations_url": "https://api.github.com/users/jamesngo/orgs", "repos_url": "https://api.github.com/users/jamesngo/repos", "events_url": "https://api.github.com/users/jamesngo/events{/privacy}", "received_events_url": "https://api.github.com/users/jamesngo/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2023-01-19T22:52:24Z", "updated_at": "2024-08-22T23:47:48Z", "closed_at": "2024-08-22T23:47:48Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Using great expectations 0.15.41 throws runtime exception when running a skeleton checkpoint. \r\nCheckpoint configuration:\r\n```\r\nname: birthday_checkpoint\r\nconfig_version: 1.0\r\ntemplate_name:\r\nmodule_name: great_expectations.checkpoint\r\nclass_name: Checkpoint\r\nrun_name_template: '%Y%m%d-%H%M%S-birthday-checkpoint'\r\nexpectation_suite_name:\r\nbatch_request: {}\r\nevaluation_parameters: {}\r\nruntime_configuration: {}\r\nvalidations:\r\n  - batch_request:\r\n      datasource_name: test\r\n      data_connector_name: test_connector\r\n      data_asset_name: test_data\r\n      data_connector_query:\r\n        index: -1\r\n    expectation_suite_name: birthday_suite\r\n    action_list: \r\n      - name: no_op\r\n        action:\r\n          class_name: NoOpAction\r\nprofilers: []\r\nge_cloud_id:\r\nexpectation_suite_ge_cloud_id:\r\n```\r\n\r\nexpectations suite:\r\n```\r\n{\r\n  \"data_asset_type\": null,\r\n  \"expectation_suite_name\": \"birthday_suite\",\r\n  \"expectations\": [\r\n    {\r\n      \"expectation_type\": \"expect_table_row_count_to_be_between\",\r\n      \"kwargs\": {\r\n        \"max_value\": {\r\n          \"$PARAMETER\": \"max_row_count\",\r\n          \"$PARAMETER.max_row_count\": 10\r\n        },\r\n        \"min_value\": {\r\n          \"$PARAMETER\": \"min_row_count\",\r\n          \"$PARAMETER.min_row_count\": 0\r\n        }\r\n      },\r\n      \"meta\": {}\r\n    }\r\n  ],\r\n  \"ge_cloud_id\": null,\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.15.41\"\r\n  }\r\n}\r\n\r\n```\r\n\r\nError:\r\n```\r\nTypeError: _run() got an unexpected keyword argument 'payload'\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6847/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6779", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6779/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6779/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6779/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6779", "id": 1530856537, "node_id": "I_kwDOBiS_IM5bPwRZ", "number": 6779, "title": "\"The domain column is currently set to None\" when running compound columns expectation on Pandas", "user": {"login": "KHerashchenko", "id": 43710814, "node_id": "MDQ6VXNlcjQzNzEwODE0", "avatar_url": "https://avatars.githubusercontent.com/u/43710814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KHerashchenko", "html_url": "https://github.com/KHerashchenko", "followers_url": "https://api.github.com/users/KHerashchenko/followers", "following_url": "https://api.github.com/users/KHerashchenko/following{/other_user}", "gists_url": "https://api.github.com/users/KHerashchenko/gists{/gist_id}", "starred_url": "https://api.github.com/users/KHerashchenko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KHerashchenko/subscriptions", "organizations_url": "https://api.github.com/users/KHerashchenko/orgs", "repos_url": "https://api.github.com/users/KHerashchenko/repos", "events_url": "https://api.github.com/users/KHerashchenko/events{/privacy}", "received_events_url": "https://api.github.com/users/KHerashchenko/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-01-12T14:56:30Z", "updated_at": "2024-08-22T23:51:00Z", "closed_at": "2024-08-22T23:51:00Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am facing an exception while running expect_compound_columns_to_be_unique expectation using Pandas engine against DataFrame with multiple indices.  \r\n```Error: The domain column is currently set to None. Please check your configuration.```\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Create Pandas DataFrame with multiple indices `col1`, `col2`\r\n2. Create expectation expect_compound_columns_to_be_unique for `col3`, `col4`\r\n3. Run checkpoint and retrieve `ExpectationValidationResult` object\r\n4. You should see the error inside `exception_info` and empty `result` dict\r\n\r\n**Expected behavior**\r\nInstead, you should see validation results inside `result` dict\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux, Windows\r\n - Great Expectations Version: 0.15.42\r\n\r\n**Additional context**\r\nI believe there must be an issue in [ this line ](https://github.com/great-expectations/great_expectations/blob/0.15.42/great_expectations/expectations/metrics/map_metric_provider.py#L1785)  \r\nWhile running expectations against compound columns, `domain_kwargs` does not contain `column` key, instead it contains `column_list`. That is why `expectation_domain_column_name` is being assigned to `None` and later exhausts into error [here](https://github.com/great-expectations/great_expectations/blob/0.15.42/great_expectations/expectations/metrics/util.py#L1086)\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6779/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6608", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6608/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6608/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6608/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6608", "id": 1503333098, "node_id": "I_kwDOBiS_IM5Zmwrq", "number": 6608, "title": "unexpected_rows not being reported for MulticolumnMapExpectation or ColumnPairMapExpectation", "user": {"login": "pablofelt", "id": 721638, "node_id": "MDQ6VXNlcjcyMTYzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/721638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pablofelt", "html_url": "https://github.com/pablofelt", "followers_url": "https://api.github.com/users/pablofelt/followers", "following_url": "https://api.github.com/users/pablofelt/following{/other_user}", "gists_url": "https://api.github.com/users/pablofelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/pablofelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pablofelt/subscriptions", "organizations_url": "https://api.github.com/users/pablofelt/orgs", "repos_url": "https://api.github.com/users/pablofelt/repos", "events_url": "https://api.github.com/users/pablofelt/events{/privacy}", "received_events_url": "https://api.github.com/users/pablofelt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-12-19T17:48:26Z", "updated_at": "2024-08-22T23:51:22Z", "closed_at": "2024-08-22T23:51:21Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen I run a checkpoint with \r\n```\r\n\"result_format\":{\r\n        \"result_format\": \"COMPLETE\",\r\n        \"include_unexpected_rows\":True,\r\n    }\r\n```\r\n\r\nsubclasses of MulticolumnMapExpectation and ColumnPairMapExpectation both return `unexpected_rows=None` instead of returning the list of rows that failed validation.\r\n\r\nColumnMapExpectation subclasses work fine (they return `unexpected_rows=[...]` as expected). \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Create a MulticolumnMapExpectation or ColumnPairMapExpectation expectation, e.g., `expect_column_pair_values_a_to_be_greater_than_b`\r\n\r\n```json\r\n{\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.15.26\"\r\n  },\r\n  \"expectation_suite_name\": \"simple-expectation-suite\",\r\n  \"data_asset_type\": null,\r\n  \"expectations\": [\r\n    {\r\n      \"meta\": {},\r\n      \"expectation_type\": \"expect_column_pair_values_a_to_be_greater_than_b\",\r\n      \"kwargs\": {\r\n        \"column_A\": \"COPAYAMT\",\r\n        \"column_B\": \"NETPAY\",\r\n        \"expectation_type\": \"expect_column_pair_values_a_to_be_greater_than_b\",\r\n        \"ignore_row_if\": \"either_value_is_missing\",\r\n        \"mostly\": 1.0,\r\n        \"name\": \"e192b8f5-e577-4547-abf3-6dca95c1563e\",\r\n        \"or_equal\": false,\r\n        \"row_condition\": null,\r\n        \"version\": \"1.0\"\r\n      }\r\n    }\r\n  ],\r\n  \"ge_cloud_id\": null\r\n}\r\n```\r\n\r\n2. Run it in a checkpoint with `include_unexpected_rows=true`, e.g., \r\n```json\r\n{\r\n  \"action_list\": [\r\n    {\r\n      \"name\": \"store_validation_result\",\r\n      \"action\": {\r\n        \"class_name\": \"StoreValidationResultAction\"\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"store_evaluation_params\",\r\n      \"action\": {\r\n        \"class_name\": \"StoreEvaluationParametersAction\"\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"update_data_docs\",\r\n      \"action\": {\r\n        \"class_name\": \"UpdateDataDocsAction\",\r\n        \"site_names\": []\r\n      }\r\n    }\r\n  ],\r\n  \"batch_request\": {},\r\n  \"class_name\": \"Checkpoint\",\r\n  \"config_version\": 1.0,\r\n  \"evaluation_parameters\": {},\r\n  \"module_name\": \"great_expectations.checkpoint\",\r\n  \"name\": \"checkpoint-None-66438f03-4ea6-42db-8c86-02cd012e6213\",\r\n  \"profilers\": [],\r\n  \"run_name_template\": \"%Y%m%d-%H%M%S-compiled-checkpoint-template\",\r\n  \"runtime_configuration\": {\r\n    \"result_format\": {\r\n      \"result_format\": \"COMPLETE\",\r\n      \"partial_unexpected_count\": 20,\r\n      \"include_unexpected_rows\": true\r\n    }\r\n  },\r\n  \"validations\": []\r\n}\r\n\r\n```\r\n\r\n**Expected behavior**\r\nvalidation results should set `unexpected_rows` to a list of all the rows that failed validation as documented here: https://docs.greatexpectations.io/docs/reference/expectations/result_format. Instead we get `unexpected_rows: None`.\r\n\r\n**Environment (please complete the following information):**\r\n - ubuntu:20.04 running in docker desktop on MacOS\r\n - Great Expectations Version: 0.15.26\r\n\r\n**Additional context**\r\n- When I compare the working ColumnMapExpectation and the not working multi/pair variants, it appears that `...unexpected_rows` metrics are being computed in all cases, but the multi/pair variants just don't report the info. \r\n\r\nHere's where the (correctly functioning) ColumnMapExpectation._validate() passes `unexpected_rows` to its `_format_map_output()` call: https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/expectation.py#L2717\r\n\r\nThe corresponding line for the (not working) ColumnPairMapExpectation._validate() does not report unexpected_rows, even though a debugger shows that the `[metric.name].unexpected_rows` metric was computed and is available: https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/expectation.py#L2930\r\n\r\nAnd neither does the MulticolumnMapExpectation._validate(): https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/expectation.py#L3147\r\n\r\n\r\n\r\nI can work around this in our code--but seemed like maybe an easy-to-fix thing on your side you might want to know about. Thanks for maintaining this great library!", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6608/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6608/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6558", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6558/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6558/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6558/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6558", "id": 1492390118, "node_id": "I_kwDOBiS_IM5Y9BDm", "number": 6558, "title": "Warning seen while passing batch request to an in memory checkpoint.", "user": {"login": "adarsha-jll", "id": 107102139, "node_id": "U_kgDOBmI_uw", "avatar_url": "https://avatars.githubusercontent.com/u/107102139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adarsha-jll", "html_url": "https://github.com/adarsha-jll", "followers_url": "https://api.github.com/users/adarsha-jll/followers", "following_url": "https://api.github.com/users/adarsha-jll/following{/other_user}", "gists_url": "https://api.github.com/users/adarsha-jll/gists{/gist_id}", "starred_url": "https://api.github.com/users/adarsha-jll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adarsha-jll/subscriptions", "organizations_url": "https://api.github.com/users/adarsha-jll/orgs", "repos_url": "https://api.github.com/users/adarsha-jll/repos", "events_url": "https://api.github.com/users/adarsha-jll/events{/privacy}", "received_events_url": "https://api.github.com/users/adarsha-jll/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-12T17:29:29Z", "updated_at": "2024-08-22T23:51:37Z", "closed_at": "2024-08-22T23:51:36Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn Memory checkpoint gives warning \r\nExpected type \u2018Optional[BatchRequestBase]\u2019, got \u2018Dict[str, Union[Dict[str, str], Dict[str, Any]]]\u2019 instead\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Add runtime batch request\r\n```\r\n    batch_request = RuntimeBatchRequest(\r\n    datasource_name=self.data_source_name,\r\n    data_connector_name=\"default_runtime_data_connector_name\",\r\n    data_asset_name=self.batch_asset,  # data asset name\r\n    runtime_parameters={\"batch_data\": df},  # Passing the DataFrame here.\r\n    batch_identifiers={\"default_identifier_name\": \"default_identifier\"},\r\n    )\r\n```      \r\n2. validations\r\n```\r\n    validation_list_db = [{'batch_request': {'datasource_name': datasource_name,\r\n                                                 'data_connector_name': 'default_runtime_data_connector_name',\r\n                                                 'data_asset_name': data_asset_name,\r\n                                                 },\r\n                               'expectation_suite_name': expectation_suite_name\r\n                               },\r\n                              ]\r\n```\r\n3. checkpoint\r\n```\r\n    context.add_checkpoint(name=self.checkpoint_name,\r\n                                            config_version=1.0,\r\n                                            class_name='SimpleCheckpoint',\r\n                                            run_name_template=self.run_name_template,\r\n                                            expectation_suite_name=self.expectation_suite_name,\r\n                                            batch_request={},\r\n                                            action_list=Base.action_list(self),\r\n                                            evaluation_parameters={},\r\n                                            runtime_configuration={},\r\n                                            validations=validation_list_db,\r\n                                            profilers=[],\r\n                                            slack_webhook=self.db_utils.set_slack_url(),\r\n                                            notify_on=self.db_utils.set_slack_notify(),\r\n                                            notify_with='all',\r\n                                            ge_cloud_id='',\r\n                                            expectation_suite_ge_cloud_id=''\r\n                                            )\r\n\r\n    context.run_checkpoint(checkpoint_name=self.checkpoint_name,\r\n                                             batch_request={\r\n                                                 \"runtime_parameters\": {\"batch_data\": df},\r\n                                                 \"batch_identifiers\": {\r\n                                                     \"default_identifier_name\": \"default_identifier\"\r\n                                                 },\r\n                                             },\r\n                                             )\r\n```\r\n**Expected behavior**\r\nNo error or warning is given for the run_checkpoint method. \r\n    But pycharm IDE gives\r\n    Expected type \u2018Optional[BatchRequestBase]\u2019, got \u2018Dict[str, Union[Dict[str, str], Dict[str, Any]]]\u2019 instead\r\n    \r\n   but providing RuntimeBatchRequest this way does not do anything. \r\n   No visible logs, nor exceptions generated.\r\n  ``` \r\n   run_checkpoint(checkpoint_name=self.checkpoint_name,\r\n                               batch_request=RuntimeBatchRequest(\r\n                                   datasource_name=self.data_source_name,\r\n                                   data_connector_name=\"default_runtime_data_connector_name\r\n                                   data_asset_name=self.batch_asset,  # data asset name\r\n                                   runtime_parameters={\"batch_data\": df},  # Passing the DataFrame here.\r\n                                    batch_identifiers={\"default_identifier_name\": \"default_identifier\"},\r\n                                    ))\r\n\r\n```\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [MacOS]\r\n - Great Expectations Version: [0.15.31]\r\n - Python 3.8.14\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6558/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6558/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6519", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6519/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6519/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6519/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6519", "id": 1485159085, "node_id": "I_kwDOBiS_IM5Yhbqt", "number": 6519, "title": "feature: support Azure AD token based authentication for azure storage account", "user": {"login": "geekwhocodes", "id": 10639200, "node_id": "MDQ6VXNlcjEwNjM5MjAw", "avatar_url": "https://avatars.githubusercontent.com/u/10639200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geekwhocodes", "html_url": "https://github.com/geekwhocodes", "followers_url": "https://api.github.com/users/geekwhocodes/followers", "following_url": "https://api.github.com/users/geekwhocodes/following{/other_user}", "gists_url": "https://api.github.com/users/geekwhocodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/geekwhocodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geekwhocodes/subscriptions", "organizations_url": "https://api.github.com/users/geekwhocodes/orgs", "repos_url": "https://api.github.com/users/geekwhocodes/repos", "events_url": "https://api.github.com/users/geekwhocodes/events{/privacy}", "received_events_url": "https://api.github.com/users/geekwhocodes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 4395587605, "node_id": "LA_kwDOBiS_IM8AAAABBf9YFQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community-action-needed", "name": "community-action-needed", "color": "EB9EE5", "default": false, "description": ""}, {"id": 4798646779, "node_id": "LA_kwDOBiS_IM8AAAABHgWJ-w", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:authentication", "name": "feature:authentication", "color": "C63E2E", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "geekwhocodes", "id": 10639200, "node_id": "MDQ6VXNlcjEwNjM5MjAw", "avatar_url": "https://avatars.githubusercontent.com/u/10639200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geekwhocodes", "html_url": "https://github.com/geekwhocodes", "followers_url": "https://api.github.com/users/geekwhocodes/followers", "following_url": "https://api.github.com/users/geekwhocodes/following{/other_user}", "gists_url": "https://api.github.com/users/geekwhocodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/geekwhocodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geekwhocodes/subscriptions", "organizations_url": "https://api.github.com/users/geekwhocodes/orgs", "repos_url": "https://api.github.com/users/geekwhocodes/repos", "events_url": "https://api.github.com/users/geekwhocodes/events{/privacy}", "received_events_url": "https://api.github.com/users/geekwhocodes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "geekwhocodes", "id": 10639200, "node_id": "MDQ6VXNlcjEwNjM5MjAw", "avatar_url": "https://avatars.githubusercontent.com/u/10639200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geekwhocodes", "html_url": "https://github.com/geekwhocodes", "followers_url": "https://api.github.com/users/geekwhocodes/followers", "following_url": "https://api.github.com/users/geekwhocodes/following{/other_user}", "gists_url": "https://api.github.com/users/geekwhocodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/geekwhocodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geekwhocodes/subscriptions", "organizations_url": "https://api.github.com/users/geekwhocodes/orgs", "repos_url": "https://api.github.com/users/geekwhocodes/repos", "events_url": "https://api.github.com/users/geekwhocodes/events{/privacy}", "received_events_url": "https://api.github.com/users/geekwhocodes/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2022-12-08T18:11:03Z", "updated_at": "2024-08-22T23:52:07Z", "closed_at": "2024-08-22T23:52:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nCurrently, GX supports string metadata in azure storage account and use `connection string` for authentication. It would be great if we support [`azure ad token`](https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/connection-strings/storage-authentication-methods#token) based authentication since it is proffered method.   \r\n\r\n**Describe the solution you'd like**\r\nImplement another authentication provider where users can choose which authentication method to use.  \r\n\r\n**Additional context**\r\nIf user is using azure ad token using SPN to access data from datalake on azure, it is cumbersome to maintain azure storage account connection strin to configure gx. It would be streamlined if we provide user an option to use same SPN.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6519/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6519/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6514", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6514/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6514/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6514/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6514", "id": 1483788954, "node_id": "I_kwDOBiS_IM5YcNKa", "number": 6514, "title": "MSSQL TypeError: 16:00:00 type time which cannot be serialized.", "user": {"login": "YuliaPopovaTibra", "id": 120081396, "node_id": "U_kgDOByhL9A", "avatar_url": "https://avatars.githubusercontent.com/u/120081396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YuliaPopovaTibra", "html_url": "https://github.com/YuliaPopovaTibra", "followers_url": "https://api.github.com/users/YuliaPopovaTibra/followers", "following_url": "https://api.github.com/users/YuliaPopovaTibra/following{/other_user}", "gists_url": "https://api.github.com/users/YuliaPopovaTibra/gists{/gist_id}", "starred_url": "https://api.github.com/users/YuliaPopovaTibra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YuliaPopovaTibra/subscriptions", "organizations_url": "https://api.github.com/users/YuliaPopovaTibra/orgs", "repos_url": "https://api.github.com/users/YuliaPopovaTibra/repos", "events_url": "https://api.github.com/users/YuliaPopovaTibra/events{/privacy}", "received_events_url": "https://api.github.com/users/YuliaPopovaTibra/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2831990796, "node_id": "MDU6TGFiZWwyODMxOTkwNzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stack:mssql", "name": "stack:mssql", "color": "ebf7f1", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-12-08T06:12:06Z", "updated_at": "2024-08-22T23:55:20Z", "closed_at": "2024-08-22T23:55:20Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "DataHub uses great_expectations for profiling. I'm running great_expectations against Microsoft SQL table.\r\n\r\nCode from DataHub\r\n```\r\nfrom great_expectations.core.util import convert_to_json_serializable\r\n\r\ndef get_column_unique_count_patch(self, column):\r\n    if self.engine.dialect.name.lower() == \"redshift\":\r\n        element_values = self.engine.execute(\r\n            sa.select(\r\n                [sa.text(f'APPROXIMATE count(distinct \"{column}\")')]  # type:ignore\r\n            ).select_from(self._table)\r\n        )\r\n        return convert_to_json_serializable(element_values.fetchone()[0])\r\n```\r\n\r\nThe issue appears in convert_to_json_serializable when it is works with **time** data type from MS SQL.\r\nError message is following\r\n\r\n`'    return convert_to_json_serializable(\\n'`\r\n`           '  File \"/tmp/datahub/ingest/venv-mssql-0.9.2/lib/python3.10/site-packages/great_expectations/core/util.py\", line 296, in '`\r\n`           'convert_to_json_serializable\\n'`\r\n`           '    raise TypeError(\\n'`\r\n`           'TypeError: 16:00:00 is of type time which cannot be serialized.\\n'`\r\n\r\n\r\n**Expected behavior**\r\n\"Time\" datatype to be supported in convert_to_json_serializable\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.15.36\r\n - Python Version: 3.9.7\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6514/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6514/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6463", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6463/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6463/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6463/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6463", "id": 1471142907, "node_id": "I_kwDOBiS_IM5Xr9v7", "number": 6463, "title": "Validator throws unexpected `KeyError` when using `sampling`", "user": {"login": "KentonParton", "id": 20202312, "node_id": "MDQ6VXNlcjIwMjAyMzEy", "avatar_url": "https://avatars.githubusercontent.com/u/20202312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KentonParton", "html_url": "https://github.com/KentonParton", "followers_url": "https://api.github.com/users/KentonParton/followers", "following_url": "https://api.github.com/users/KentonParton/following{/other_user}", "gists_url": "https://api.github.com/users/KentonParton/gists{/gist_id}", "starred_url": "https://api.github.com/users/KentonParton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KentonParton/subscriptions", "organizations_url": "https://api.github.com/users/KentonParton/orgs", "repos_url": "https://api.github.com/users/KentonParton/repos", "events_url": "https://api.github.com/users/KentonParton/events{/privacy}", "received_events_url": "https://api.github.com/users/KentonParton/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-12-01T11:23:50Z", "updated_at": "2024-08-22T23:52:38Z", "closed_at": "2024-08-22T23:52:38Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen using a Validator with `sampling` present and an incorrect `column_name` is given to one of the `sampling_methods`, an unexpected `KeyError` is thrown instead of the SQLAlchemy exception `psycopg2.errors.UndefinedColumn: column \"p_sizee\" does not exist`.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behaviour:\r\nPlease replace `connection_string`, `schema_name`, `table_name` with valid values.\r\n\r\n```python\r\nfrom great_expectations.core import ExpectationSuite\r\nfrom great_expectations.core.batch import BatchRequest\r\nfrom great_expectations.data_context import BaseDataContext\r\nfrom great_expectations.data_context.types.base import DataContextConfig, AnonymizedUsageStatisticsConfig\r\nfrom great_expectations.data_context.types.base import InMemoryStoreBackendDefaults\r\n\r\ndatasource_name = \"my_data_source\"\r\nconnection_string = \"postgresql+psycopg2://postgres:postgres@localhost:5432/postgres\"\r\nschema_name = \"sample_data\"\r\ntable_name = \"part\"\r\n\r\ndata_context_config = DataContextConfig(\r\n    datasources={\r\n        datasource_name: {\r\n            \"class_name\": \"Datasource\",\r\n            \"module_name\": \"great_expectations.datasource\",\r\n            \"execution_engine\": {\r\n                \"class_name\": \"SqlAlchemyExecutionEngine\",\r\n                \"connection_string\": connection_string,\r\n            },\r\n            \"data_connectors\": {\r\n                \"default_configured_asset_data_connector_name\": {\r\n                    \"class_name\": \"ConfiguredAssetSqlDataConnector\",\r\n                    \"assets\": {\r\n                        table_name: {\r\n                            \"include_schema_name\": True,\r\n                            \"schema_name\": schema_name,\r\n                            \"table_name\": table_name,\r\n                        }\r\n                    }\r\n                },\r\n            }\r\n        }\r\n    },\r\n    store_backend_defaults=InMemoryStoreBackendDefaults(),\r\n    concurrency={\r\n        \"enabled\": True,\r\n    },\r\n    anonymous_usage_statistics=AnonymizedUsageStatisticsConfig(enabled=False)\r\n)\r\n\r\ncontext = BaseDataContext(project_config=data_context_config)\r\n\r\nbatch_request = BatchRequest(\r\n    datasource_name=datasource_name,\r\n    data_connector_name=\"default_configured_asset_data_connector_name\",\r\n    data_asset_name=f\"{schema_name}.{table_name}\",\r\n    batch_spec_passthrough={\r\n        \"create_temp_table\": False,\r\n        \"sampling_method\": \"sample_using_mod\",\r\n        \"sampling_kwargs\": {\r\n            \"column_name\": \"incorrect_column_name\",\r\n            \"mod\": \"2\",\r\n            \"value\": \"1\",\r\n        }\r\n    },\r\n)\r\nsuite: ExpectationSuite = context.create_expectation_suite(\"default\", overwrite_existing=True)\r\n\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite=suite\r\n)\r\n\r\nhead = validator.head()\r\nprint(head)\r\n```\r\n**Expected behavior**\r\nI would expect the SQLAlchemy exception `psycopg2.errors.UndefinedColumn: column \"p_sizee\" does not exist` to be raised instead of a `KeyError`.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.15.34\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6463/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6463/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6461", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6461/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6461/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6461/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6461", "id": 1470580003, "node_id": "I_kwDOBiS_IM5Xp0Uj", "number": 6461, "title": "[BUG] Expectations Raise \"The column \"xxx\" in BatchData does not exist\" Error", "user": {"login": "zhangchi1", "id": 16889847, "node_id": "MDQ6VXNlcjE2ODg5ODQ3", "avatar_url": "https://avatars.githubusercontent.com/u/16889847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangchi1", "html_url": "https://github.com/zhangchi1", "followers_url": "https://api.github.com/users/zhangchi1/followers", "following_url": "https://api.github.com/users/zhangchi1/following{/other_user}", "gists_url": "https://api.github.com/users/zhangchi1/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangchi1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangchi1/subscriptions", "organizations_url": "https://api.github.com/users/zhangchi1/orgs", "repos_url": "https://api.github.com/users/zhangchi1/repos", "events_url": "https://api.github.com/users/zhangchi1/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangchi1/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 19, "created_at": "2022-12-01T02:55:01Z", "updated_at": "2024-08-13T10:13:07Z", "closed_at": "2023-02-01T16:55:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi team, we are working on integrating GX with snowflake datasource into our data validation system via GreatExpectations Version: 0.15.34.\r\n\r\nWe are planning to batch-run 3 expectations validation against a snowflake table named test_table. However, we got \r\n`Error The column \"my_column\" in BatchData does not exist`\r\nfor expectations **expect_column_values_to_not_be_null** and **expect_column_values_to_be_between**. \r\nHowever, expectation **expect_column_distinct_values_to_be_in_set**  worked as expected.    \r\n\r\n> Detailed Error Msg: \r\n```\r\ngreat_expectations.exceptions.exceptions.MetricResolutionError: Error: The column \"my_column\" in BatchData does not exist.\r\n```\r\n\r\nDoes anyone know what the issue could be? Or is there any configuration issue in my expectation_suite, data_context_config, or checkpoint_config? Any help would be greatly appreciated ~~\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. expectation_suite: \r\n```\r\n{\r\n  \"data_asset_type\": null,\r\n  \"expectation_suite_name\": \"test_table.demo\",\r\n  \"expectations\": [\r\n    {\r\n      \"expectation_context\": {\r\n        \"description\": null\r\n      },\r\n      \"expectation_type\": \"expect_column_values_to_not_be_null\",\r\n      \"ge_cloud_id\": null,\r\n      \"kwargs\": {\r\n        \"column\": \"my_column\"\r\n      },\r\n      \"meta\": {}\r\n    },\r\n    {\r\n      \"expectation_context\": {\r\n        \"description\": null\r\n      },\r\n      \"expectation_type\": \"expect_column_distinct_values_to_be_in_set\",\r\n      \"ge_cloud_id\": null,\r\n      \"kwargs\": {\r\n        \"column\": \"my_column\",\r\n        \"value_set\": [\r\n          1,\r\n          2,\r\n          4\r\n        ]\r\n      },\r\n      \"meta\": {}\r\n    },\r\n    {\r\n      \"expectation_context\": {\r\n        \"description\": null\r\n      },\r\n      \"expectation_type\": \"expect_column_values_to_be_between\",\r\n      \"ge_cloud_id\": null,\r\n      \"kwargs\": {\r\n        \"column\": \"my_column\",\r\n        \"max_value\": 6,\r\n        \"min_value\": 1\r\n      },\r\n      \"meta\": {}\r\n    }\r\n  ],\r\n  \"ge_cloud_id\": null,\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.15.34\"\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n**Expected behavior**\r\nExpectations **expect_column_values_to_not_be_null** and **expect_column_values_to_be_between** should be able to find the column in batch data\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS \r\n - Great Expectations Version: 0.15.34\r\n - Python: 3.7\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6461/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6461/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6430", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6430/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6430/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6430/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6430", "id": 1462957459, "node_id": "I_kwDOBiS_IM5XMvWT", "number": 6430, "title": "include_unexpected_rows not working for Spark", "user": {"login": "jmcorreia", "id": 11615737, "node_id": "MDQ6VXNlcjExNjE1NzM3", "avatar_url": "https://avatars.githubusercontent.com/u/11615737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmcorreia", "html_url": "https://github.com/jmcorreia", "followers_url": "https://api.github.com/users/jmcorreia/followers", "following_url": "https://api.github.com/users/jmcorreia/following{/other_user}", "gists_url": "https://api.github.com/users/jmcorreia/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmcorreia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmcorreia/subscriptions", "organizations_url": "https://api.github.com/users/jmcorreia/orgs", "repos_url": "https://api.github.com/users/jmcorreia/repos", "events_url": "https://api.github.com/users/jmcorreia/events{/privacy}", "received_events_url": "https://api.github.com/users/jmcorreia/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2022-11-24T08:32:56Z", "updated_at": "2024-01-02T13:57:58Z", "closed_at": "2023-03-22T20:01:40Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI wanted to clearly identify the row that is failing an expectation and I got to know that I could achieve this by using 'include_unexpected_rows' in the expectation or checkpoint. https://docs.greatexpectations.io/docs/reference/expectations/result_format/#expectation-level-config \r\nHowever, when I am using this property, I get no difference in the return of the results.\r\nIs there any limitation of this feature for spark?\r\n\r\n**To Reproduce**\r\nI am trying to use result_format complete and include_unexpected_rows, without success. I tried it for both expectations below.\r\nexpect_column_values_to_be_in_set\r\nexpect_column_values_to_not_be_null\r\n\r\n**Expected behavior**\r\nReturn the complete row that failed the expectation. Either that or someway making it possible to identify the problematic row.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Databricks, Spark\r\n - Version: 0.15.34\r\n", "closed_by": {"login": "talagluck", "id": 15267635, "node_id": "MDQ6VXNlcjE1MjY3NjM1", "avatar_url": "https://avatars.githubusercontent.com/u/15267635?v=4", "gravatar_id": "", "url": "https://api.github.com/users/talagluck", "html_url": "https://github.com/talagluck", "followers_url": "https://api.github.com/users/talagluck/followers", "following_url": "https://api.github.com/users/talagluck/following{/other_user}", "gists_url": "https://api.github.com/users/talagluck/gists{/gist_id}", "starred_url": "https://api.github.com/users/talagluck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/talagluck/subscriptions", "organizations_url": "https://api.github.com/users/talagluck/orgs", "repos_url": "https://api.github.com/users/talagluck/repos", "events_url": "https://api.github.com/users/talagluck/events{/privacy}", "received_events_url": "https://api.github.com/users/talagluck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6430/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6430/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6409", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6409/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6409/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6409/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6409", "id": 1457861157, "node_id": "I_kwDOBiS_IM5W5TIl", "number": 6409, "title": "Unrecognized urn_type in ge_urn: must be \u2018stores\u2019 to use a metric store", "user": {"login": "cmck", "id": 4190841, "node_id": "MDQ6VXNlcjQxOTA4NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/4190841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cmck", "html_url": "https://github.com/cmck", "followers_url": "https://api.github.com/users/cmck/followers", "following_url": "https://api.github.com/users/cmck/following{/other_user}", "gists_url": "https://api.github.com/users/cmck/gists{/gist_id}", "starred_url": "https://api.github.com/users/cmck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cmck/subscriptions", "organizations_url": "https://api.github.com/users/cmck/orgs", "repos_url": "https://api.github.com/users/cmck/repos", "events_url": "https://api.github.com/users/cmck/events{/privacy}", "received_events_url": "https://api.github.com/users/cmck/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-11-21T12:27:29Z", "updated_at": "2024-08-22T23:52:52Z", "closed_at": "2024-08-22T23:52:52Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI could be missing a simple step here. After following the the guide at \"How to create Expectations that span multiple Batches using Evaluation Parameters\" at\r\nhttps://docs.greatexpectations.io/docs/guides/expectations/advanced/how_to_create_expectations_that_span_multiple_batches_using_evaluation_parameters/\r\n\r\nI get the following error:\r\n\r\n`Unrecognized urn_type in ge_urn: must be \u2018stores\u2019 to use a metric store`\r\n`EvaluationParameterError: No value found for $PARAMETER urn:great_expectations:validations:<MY_DOWNSTREAM_EXPECTATION_SUITE>:expect_table_row_count_to_be_between.result.observed_value`\r\n\r\n```\r\nEvaluationParameterError                  Traceback (most recent call last)\r\nCell In [6], line 1\r\n----> 1 results1 = context.run_checkpoint(\r\n      2   checkpoint_name=\"<MY_CHECKPOINT>\"\r\n      3 )\r\n\r\nFile ~/path/to/.venv/lib/python3.8/site-packages/great_expectations/core/usage_statistics/usage_statistics.py:304, in usage_statistics_enabled_method.<locals>.usage_statistics_wrapped_method(*args, **kwargs)\r\n    301     if args_payload_fn is not None:\r\n    302         nested_update(event_payload, args_payload_fn(*args, **kwargs))\r\n--> 304     result = func(*args, **kwargs)\r\n    305     message[\"success\"] = True\r\n    306 except Exception:\r\n\r\nFile ~/path/to/.venv/lib/python3.8/site-packages/great_expectations/data_context/data_context/abstract_data_context.py:1244, in AbstractDataContext.run_checkpoint(self, checkpoint_name, ge_cloud_id, template_name, run_name_template, expectation_suite_name, batch_request, action_list, evaluation_parameters, runtime_configuration, validations, profilers, run_id, run_name, run_time, result_format, expectation_suite_ge_cloud_id, **kwargs)\r\n   1216 \"\"\"\r\n   1217 Validate against a pre-defined Checkpoint. (Experimental)\r\n   1218 Args:\r\n   (...)\r\n   1238     CheckpointResult\r\n   1239 \"\"\"\r\n   1240 checkpoint: Checkpoint = self.get_checkpoint(\r\n   1241     name=checkpoint_name,\r\n   1242     ge_cloud_id=ge_cloud_id,\r\n   1243 )\r\n...\r\n    361     logger.debug(\r\n    362         f\"Parse exception while parsing evaluation parameter: {str(e)}\"\r\n    363     )\r\n\r\nEvaluationParameterError: No value found for $PARAMETER urn:great_expectations:validations:<MY_DOWNSTREAM_EXPECTATION_SUITE>:expect_table_row_count_to_be_between.result.observed_value\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n\r\n1. Follow the guide at  \"How to create Expectations that span multiple Batches using Evaluation Parameters\" at\r\nhttps://docs.greatexpectations.io/docs/guides/expectations/advanced/how_to_create_expectations_that_span_multiple_batches_using_evaluation_parameters/\r\n\r\n- I am using Postgres upstream and Postgres downstream data sources. \r\n- Project is very basic with nothing custom. Expectations were generated by GE profilers as per the getting started docs.\r\n- I am using jupyter notebook as per the documentation at the web page.\r\n- I am using in-memory evaluation parameter store\r\n- Validations results exist for both the upstream and the downstream. At the upstream, a result for `expect_table_row_count_to_be_between` exists in a validation result.\r\n- In the downstream expectation suite I can see the following was added which looks correct:\r\n```\r\n    {\r\n      \"expectation_type\": \"expect_table_row_count_to_equal\",\r\n      \"kwargs\": {\r\n        \"value\": {\r\n          \"$PARAMETER\": \"urn:great_expectations:validations:<MY_DOWNSTREAM_EXPECTATION_SUITE>:expect_table_row_count_to_be_between.result.observed_value\"\r\n        }\r\n      },\r\n      \"meta\": {}\r\n    }\r\n```\r\n- My checkpoint looks like this:\r\n```\r\n---\r\nname: <NAME>\r\nconfig_version: 1.0\r\ntemplate_name:\r\nmodule_name: great_expectations.checkpoint\r\nclass_name: Checkpoint\r\nrun_name_template: '%Y%m%d-%H%M%S-checkpoint'\r\nexpectation_suite_name:\r\nbatch_request: {}\r\naction_list:\r\n  - name: store_validation_result\r\n    action:\r\n      class_name: StoreValidationResultAction\r\n  - name: store_evaluation_params\r\n    action:\r\n      class_name: StoreEvaluationParametersAction\r\n  - name: update_data_docs\r\n    action:\r\n      class_name: UpdateDataDocsAction\r\n      site_names: []\r\nevaluation_parameters: {}\r\nruntime_configuration: {}\r\nvalidations:\r\n  - batch_request:\r\n      datasource_name: <MY_DOWNSTREAM_DATASOURCE>\r\n      data_connector_name: default_configured_data_connector_name\r\n      data_asset_name: <MY_DATA_TABLE>\r\n      data_connector_query:\r\n        index: -1\r\n    expectation_suite_name: <MY_DOWNSTREAM_EXPECTATION_SUITE>\r\nprofilers: []\r\nge_cloud_id:\r\nexpectation_suite_ge_cloud_id:\r\n```\r\n\r\n**Expected behavior**\r\nI'm expecting the downstream to read the expectation observed value from the upstream validation result.\r\n\r\n**Environment (please complete the following information):**\r\n - Mac OS\r\n - Great Expectations Version: 0.15.34, 0.15.33, 0.15.32\r\n\r\n**Additional context**\r\nEdit: This issue is still unresolved, however as a workaround for anyone interested I am using Metric Store + dynamically loading eval params from the metric store using `SqlAlchemyQueryStore` as per: https://docs.greatexpectations.io/docs/guides/expectations/advanced/how_to_dynamically_load_evaluation_parameters_from_a_database\r\nin order to compare values between batch requests. \r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6409/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6409/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6344", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6344/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6344/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6344/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6344", "id": 1445181778, "node_id": "I_kwDOBiS_IM5WI7lS", "number": 6344, "title": "Hyperlinks in GCS (still) relative rather than absolute -> not working", "user": {"login": "morkunz", "id": 117978841, "node_id": "U_kgDOBwg22Q", "avatar_url": "https://avatars.githubusercontent.com/u/117978841?v=4", "gravatar_id": "", "url": "https://api.github.com/users/morkunz", "html_url": "https://github.com/morkunz", "followers_url": "https://api.github.com/users/morkunz/followers", "following_url": "https://api.github.com/users/morkunz/following{/other_user}", "gists_url": "https://api.github.com/users/morkunz/gists{/gist_id}", "starred_url": "https://api.github.com/users/morkunz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/morkunz/subscriptions", "organizations_url": "https://api.github.com/users/morkunz/orgs", "repos_url": "https://api.github.com/users/morkunz/repos", "events_url": "https://api.github.com/users/morkunz/events{/privacy}", "received_events_url": "https://api.github.com/users/morkunz/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-11-11T09:19:02Z", "updated_at": "2024-08-22T23:53:02Z", "closed_at": "2024-08-22T23:53:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nAs described in [this issue](https://github.com/great-expectations/great_expectations/issues/1528) over two years ago, the links in the index.html within Data Docs in a GCS bucket lead nowhere, because they are missing the prefix \"https://_GCS stuff_\". \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nFollow the steps in the older issue linked above (quintessence: Choose GCS for storing Data Docs\r\n\r\n**Expected behavior**\r\nHyperlinks should work within a GCS bucket without an App Engine. \r\n\r\n**Environment (please complete the following information):**\r\nGE is configured entirely in code in Google Cloud Functions, but that should not matter for the issue.\r\n\r\n**Additional context**\r\nI am trying to avoid using Google App Engine for different reasons. It would be nice to be given the option within GE to generate Data Docs for direct inspection in the GCS bucket, or perhaps get some handholding on how to change very small parts of the GE renderers rather than having to reimplement one \"from scratch\". The older issue linked above is still relevant, and perhaps GE's code now allows for an easier way to handle it.", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6344/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6344/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6214", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6214/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6214/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6214/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6214", "id": 1424496000, "node_id": "I_kwDOBiS_IM5U6BWA", "number": 6214, "title": "Using \"row_condition\" in conjunction with \"$PARAMETER\" in a Conditional Expectation", "user": {"login": "msanchezBek", "id": 116745938, "node_id": "U_kgDOBvVm0g", "avatar_url": "https://avatars.githubusercontent.com/u/116745938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msanchezBek", "html_url": "https://github.com/msanchezBek", "followers_url": "https://api.github.com/users/msanchezBek/followers", "following_url": "https://api.github.com/users/msanchezBek/following{/other_user}", "gists_url": "https://api.github.com/users/msanchezBek/gists{/gist_id}", "starred_url": "https://api.github.com/users/msanchezBek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msanchezBek/subscriptions", "organizations_url": "https://api.github.com/users/msanchezBek/orgs", "repos_url": "https://api.github.com/users/msanchezBek/repos", "events_url": "https://api.github.com/users/msanchezBek/events{/privacy}", "received_events_url": "https://api.github.com/users/msanchezBek/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 4391178824, "node_id": "LA_kwDOBiS_IM8AAAABBbwSSA", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:optimization", "name": "feature:optimization", "color": "5CA71F", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-10-26T18:06:41Z", "updated_at": "2024-08-22T23:53:24Z", "closed_at": "2024-08-22T23:53:23Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Request Summary**\r\nI am looking to create a conditional expectation using: `expect_column_values_to_be_in_set`. Specifically, I would like the `row_condition` to check if a certain column is in a certain row of a csv file (instead of just comparing a column value to a string value).\r\n\r\n**Desired Solution**\r\nTheoretically I would be able to do this by using `row_condition` in conjunction with a `$PARAMETER` value which would look something like the following:\r\n````\r\n{\r\n      \"expectation_type\": \"expect_column_values_to_be_in_set\",\r\n      \"kwargs\": {\r\n        \"column\": \"COL1\",\r\n        \"value_set\": {\r\n          \"$PARAMETER\": \"valid_col_1_values\"\r\n        },\r\n        \"condition_parser\": \"pandas\",\r\n        \"row_condition\": {\r\n          \"column\": \"COL2\",\r\n          \"expectation\":  \"expect_column_values_to_not_be_in_set\",\r\n          \"value_set\": {\r\n            \"$PARAMETER\": \"valid_col_2_names\"\r\n          }\r\n        }\r\n      }\r\n    }\r\n````\r\n**Alternatives**\r\nI have considered writing a wrapper that would take the content of the target csv (value of `valid_col_2_names` in the example) above and writing that to the above expectation's `row_condition` before validation is performed. For example:\r\n````\r\n...\r\n\"row_condition\": \"COL2 not in [<value1>, <value2>, ...] <- this list generated dynamically\r\n...\r\n````\r\nThis approach, however, seems hacky and against the spirit of how Great Expectations is structured. \r\n\r\n**Note**\r\nI wasn't able to find an existing expectation that satisfied my requirement for this situation but I certainly acknowledge there could be one out there that I haven't seen. Please let me know if that's the case or if there's a cleaner way to evaluate the above expectation. Any input is appreciated! Thanks!\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6214/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6214/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6135", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6135/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6135/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6135/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6135", "id": 1398384185, "node_id": "I_kwDOBiS_IM5TWaY5", "number": 6135, "title": "multiple sample_using methods fail for BigQuery datasource", "user": {"login": "rbertsche", "id": 72034227, "node_id": "MDQ6VXNlcjcyMDM0MjI3", "avatar_url": "https://avatars.githubusercontent.com/u/72034227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rbertsche", "html_url": "https://github.com/rbertsche", "followers_url": "https://api.github.com/users/rbertsche/followers", "following_url": "https://api.github.com/users/rbertsche/following{/other_user}", "gists_url": "https://api.github.com/users/rbertsche/gists{/gist_id}", "starred_url": "https://api.github.com/users/rbertsche/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rbertsche/subscriptions", "organizations_url": "https://api.github.com/users/rbertsche/orgs", "repos_url": "https://api.github.com/users/rbertsche/repos", "events_url": "https://api.github.com/users/rbertsche/events{/privacy}", "received_events_url": "https://api.github.com/users/rbertsche/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-10-05T21:09:23Z", "updated_at": "2024-08-22T23:53:50Z", "closed_at": "2024-08-22T23:53:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen using the sampling_methods: \r\n* `sample_using_random` & \r\n* `sample_using_mod`  &\r\n* `sample_using_md5`\r\nusing a BigQuery datasource, the DataAssistant fails with errors. This occurs because the SQL code generated when using those sampling methods includes the SQL functions `random()` and `mod()`. Those functions are not valid functions in the BigQuery SQL dialect. \r\n\r\n### sample_using_random\r\nThere was a previous issue opened for this, but it has since been closed without resolution: \r\nhttps://github.com/great-expectations/great_expectations/issues/4429 \r\ni.e. This is the SQL generated by the Data Assistant. You can see that :\r\n```\r\nSELECT count(*) AS `table_row_count` \r\nFROM (SELECT * \r\nFROM `bq_project.schema.table` \r\nWHERE EXTRACT(year FROM `_date`) = @`param_1` AND EXTRACT(month FROM `_date`) = @`param_2` AND EXTRACT(day FROM `_date`) = @`param_3` ORDER BY random()\r\n LIMIT @`param_4`) AS `great_expectations_sub_selection`\r\n```\r\nBQ throws the following Error message:\r\n```\r\nFunction not found: random; Did you mean rand?\r\n```\r\n\r\nBased on this information, it seems this can be fixed by recognizing when the sample method is using BQ, and pass in a BQ dialect specific `rand` function, and not the generic SQL `random()`.\r\n\r\nThe line of code where this issue is occurring is: \r\nhttps://github.com/great-expectations/great_expectations/blob/b3761729b156367229b5cd8895d225cb13d3267a/great_expectations/execution_engine/split_and_sample/sqlalchemy_data_sampler.py#L174 \r\n\r\n\r\n### Using mod\r\nThere are similar SQL dialect issues when using`sample_using_mod`. This method injects the mod symbol `%` into the SQL. This is not a supported function in the BQ dialect of SQL. B! requires mod to use the function `MOD(param1, param2)`\r\n\r\n### Using md5\r\nThere are a couple of errors with the md5 function. Firstly, the doc describes the function name as `sample_using_hash`. However, that is not a valid function for SQLAlchemy based runs. Instead, the correct name in `sample_using_md5`. I believe the correct action would be to change the function name to `sample_using_hash` to align with the other execution engines, as well as the documentation. \r\n\r\nThere is also an issue with execution on BQ. The problem lies in the generated function. In this example, I replaced the hash_digits = 1, and hash_value = 'f'. I manually replaced them in the query for clarity:\r\n```\r\nSELECT count(*) AS `table_row_count` \r\nFROM (SELECT * \r\nFROM `project.schema.table` \r\nWHERE EXTRACT(year FROM `_date`) = @`param_1` AND EXTRACT(month FROM `_date`) = @`param_2` AND EXTRACT(day FROM `_date`) = @`param_3` AND right(md5(CAST(`column_name` AS STRING)), 1) = 'f') AS `great_expectations_sub_selection`\r\n```\r\nThe error thrown is:\r\n`No matching signature for operator = for argument types: BYTES, STRING. STRING and BYTES are different types that are not directly comparable.`\r\n\r\n\r\nThis error is directly related to the return types of BQ in certain functions. The `md5()` function returns type BYTES, and the `right()` method will return type `BYTES` or `STRING` depending on the input. Since `md5()` always returns `BYTES`, then `right()` always returns `BYTES`. The 'f' parameter that is being passed into the query is of type `STRING`. BigQuery does not allow `=` comparisons between `BYTES` and `STRINGS`. Therefore, the query returns an error.\r\nhttps://cloud.google.com/bigquery/docs/reference/standard-sql/hash_functions#md5\r\nhttps://cloud.google.com/bigquery/docs/reference/standard-sql/string_functions#right\r\n\r\nFixing this error may be possible by wrapping the `right` statement in a cast to string function or the `hash_value` into bytes. \r\nhttps://cloud.google.com/bigquery/docs/reference/standard-sql/conversion_functions#cast_as_bytes \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Create a BQ datasource connection that uses the `sampling_method`: `sample_using_random`\r\n2. Run the DataAssistant on that new Data Connection\r\n4. See error\r\n\r\n**Expected behavior**\r\nThis sample_using_random should recognize that this is a Bigquery connection, and substitute the appropriate `random` function for the bq dialect. In this case it is `rand`. If that were done, the DataAssistant would run and execute correctly. \r\n\r\nThis doesn't just apply to the DataAssistant, but all expectations run on a `sample_using_random` configured BigQuery Dataset. \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: `Debian GNU/Linux 11 (bullseye)`\r\n - Great Expectations Version: `0.15.25`\r\n - Python Version: `Python 3.9.14`\r\n - `sqlalchemy-bigquery==1.4.3`\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6135/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6135/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6131", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6131/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6131/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6131/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6131", "id": 1396618469, "node_id": "I_kwDOBiS_IM5TPrTl", "number": 6131, "title": "How to run checkpoint on all Batches instead of by default 1.", "user": {"login": "rishabhreply", "id": 97909042, "node_id": "U_kgDOBdX5Mg", "avatar_url": "https://avatars.githubusercontent.com/u/97909042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabhreply", "html_url": "https://github.com/rishabhreply", "followers_url": "https://api.github.com/users/rishabhreply/followers", "following_url": "https://api.github.com/users/rishabhreply/following{/other_user}", "gists_url": "https://api.github.com/users/rishabhreply/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabhreply/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabhreply/subscriptions", "organizations_url": "https://api.github.com/users/rishabhreply/orgs", "repos_url": "https://api.github.com/users/rishabhreply/repos", "events_url": "https://api.github.com/users/rishabhreply/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabhreply/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2022-10-04T17:31:16Z", "updated_at": "2024-03-03T08:45:20Z", "closed_at": "2023-05-18T20:23:14Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am using great expectations to run on csv files stored on S3 like this-\r\ns3://bucket-name/folder1/**sub-folder1**/bonus.csv\r\ns3://bucket-name/folder1/**sub-folder2**/bonus.csv\r\n\r\nI built a checkpoint with following config-\r\n```\r\n        checkpoint_config = {\r\n            \"class_name\": \"SimpleCheckpoint\",\r\n            \"validations\": [\r\n                {\r\n                    \"batch_request\": {\r\n                        \"datasource_name\": self.data_source_name + \"_datasource\",\r\n                        \"data_connector_name\": \"default_inferred_data_connector_name\",\r\n                        \"data_asset_name\": \"DEFAULT_ASSET_NAME\",\r\n                        \"batch_spec_passthrough\": {\"reader_options\": {\"sep\": \"|\", \"header\": \"true\"}},\r\n                    },\r\n                    \"expectation_suite_name\": self.data_source_name + \"_1st_suite\",\r\n                }\r\n            ],\r\n        }\r\n```\r\nOn running this checkpoint it checks only the csv under the **sub-folder2** (s3://bucket-name/folder1/**sub-folder2**/bonus.csv). I want the check to also run over the csv under **sub-folder1**.  In my batch request list, I can see an ordered dict with two requests. I went through many documentation pages but could not find the exact way of achieving this. Please help, thank you!\r\n", "closed_by": {"login": "billdirks", "id": 12725591, "node_id": "MDQ6VXNlcjEyNzI1NTkx", "avatar_url": "https://avatars.githubusercontent.com/u/12725591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/billdirks", "html_url": "https://github.com/billdirks", "followers_url": "https://api.github.com/users/billdirks/followers", "following_url": "https://api.github.com/users/billdirks/following{/other_user}", "gists_url": "https://api.github.com/users/billdirks/gists{/gist_id}", "starred_url": "https://api.github.com/users/billdirks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/billdirks/subscriptions", "organizations_url": "https://api.github.com/users/billdirks/orgs", "repos_url": "https://api.github.com/users/billdirks/repos", "events_url": "https://api.github.com/users/billdirks/events{/privacy}", "received_events_url": "https://api.github.com/users/billdirks/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6131/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6131/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6105", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6105/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6105/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6105/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6105", "id": 1388603413, "node_id": "I_kwDOBiS_IM5SxGgV", "number": 6105, "title": "Can't support AWS china secrets manger for data context", "user": {"login": "karry-li-lego", "id": 82805776, "node_id": "MDQ6VXNlcjgyODA1Nzc2", "avatar_url": "https://avatars.githubusercontent.com/u/82805776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karry-li-lego", "html_url": "https://github.com/karry-li-lego", "followers_url": "https://api.github.com/users/karry-li-lego/followers", "following_url": "https://api.github.com/users/karry-li-lego/following{/other_user}", "gists_url": "https://api.github.com/users/karry-li-lego/gists{/gist_id}", "starred_url": "https://api.github.com/users/karry-li-lego/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karry-li-lego/subscriptions", "organizations_url": "https://api.github.com/users/karry-li-lego/orgs", "repos_url": "https://api.github.com/users/karry-li-lego/repos", "events_url": "https://api.github.com/users/karry-li-lego/events{/privacy}", "received_events_url": "https://api.github.com/users/karry-li-lego/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-28T01:51:15Z", "updated_at": "2024-08-22T23:54:03Z", "closed_at": "2024-08-22T23:54:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "As great_expectations/data_context/data_context/abstract_data_context.py\r\nline 263  is:\r\nif value.startswith(\"secret|arn:aws:secretsmanager\"):\r\nbut for aws china region, the third part is **aws-cn**, not **aws**, so could you please support AWS China region?", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6105/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6105/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6089", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6089/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6089/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6089/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6089", "id": 1385428000, "node_id": "I_kwDOBiS_IM5Sk_Qg", "number": 6089, "title": "Regex-Based Column Map Expectations based on MSSQL & Oracle DB", "user": {"login": "as93717913", "id": 16937091, "node_id": "MDQ6VXNlcjE2OTM3MDkx", "avatar_url": "https://avatars.githubusercontent.com/u/16937091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/as93717913", "html_url": "https://github.com/as93717913", "followers_url": "https://api.github.com/users/as93717913/followers", "following_url": "https://api.github.com/users/as93717913/following{/other_user}", "gists_url": "https://api.github.com/users/as93717913/gists{/gist_id}", "starred_url": "https://api.github.com/users/as93717913/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/as93717913/subscriptions", "organizations_url": "https://api.github.com/users/as93717913/orgs", "repos_url": "https://api.github.com/users/as93717913/repos", "events_url": "https://api.github.com/users/as93717913/events{/privacy}", "received_events_url": "https://api.github.com/users/as93717913/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 6299997269, "node_id": "LA_kwDOBiS_IM8AAAABd4JUVQ", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bounty-board", "name": "bounty-board", "color": "fbca04", "default": false, "description": "An Issue selected for the GX Bounty Board."}], "state": "closed", "locked": false, "assignee": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-09-26T05:07:07Z", "updated_at": "2024-03-18T15:49:07Z", "closed_at": "2024-03-18T15:49:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\n\r\n\r\n**Describe the solution you'd like**\r\nWe need to check is data follow company's guideline like naming convention, and our company use mssql and oracle as standard DB stack \r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6089/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6089/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6073", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6073/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6073/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6073/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6073", "id": 1383700652, "node_id": "I_kwDOBiS_IM5SeZis", "number": 6073, "title": "Using PySpark Timestamp Type throws \"TypeError: Object of type Timestamp is not JSON serializable\"", "user": {"login": "juliankeppel", "id": 11732938, "node_id": "MDQ6VXNlcjExNzMyOTM4", "avatar_url": "https://avatars.githubusercontent.com/u/11732938?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juliankeppel", "html_url": "https://github.com/juliankeppel", "followers_url": "https://api.github.com/users/juliankeppel/followers", "following_url": "https://api.github.com/users/juliankeppel/following{/other_user}", "gists_url": "https://api.github.com/users/juliankeppel/gists{/gist_id}", "starred_url": "https://api.github.com/users/juliankeppel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juliankeppel/subscriptions", "organizations_url": "https://api.github.com/users/juliankeppel/orgs", "repos_url": "https://api.github.com/users/juliankeppel/repos", "events_url": "https://api.github.com/users/juliankeppel/events{/privacy}", "received_events_url": "https://api.github.com/users/juliankeppel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-09-23T12:02:09Z", "updated_at": "2024-04-04T17:05:52Z", "closed_at": "2024-04-04T17:02:22Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Hi,\r\n\r\nI use GE version 0.15.24, PySpark version 3.2.1 and Python version 3.8.6\r\n\r\nI have some custom expectations based on timestamp columns in PySpark dataframes.\r\n\r\nThe validation itself works perfectly, but whenever we want to call the result object, we get the following stacktrace: \r\n```\r\nreturn json.dumps(self.to_json_dict(), indent=2)\r\n  File \"/usr/lib64/python3.8/json/__init__.py\", line 234, in dumps\r\n    return cls(\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 201, in encode\r\n    chunks = list(chunks)\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 431, in _iterencode\r\n    yield from _iterencode_dict(o, _current_indent_level)\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 325, in _iterencode_list\r\n    yield from chunks\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 405, in _iterencode_dict\r\n    yield from chunks\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 438, in _iterencode\r\n    o = _default(o)\r\n  File \"/usr/lib64/python3.8/json/encoder.py\", line 179, in default\r\n    raise TypeError(f'Object of type {o.__class__.__name__} '\r\nTypeError: Object of type Timestamp is not JSON serializable\r\n```\r\n\r\nIt looks like there is a problem in correctly interpreting the PySpark Timestamp time. \r\n\r\nWhen I remove the corresponding expectations that include Timestamps, it works perfectly. ", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6073/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 1}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6073/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6048", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6048/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6048/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6048/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6048", "id": 1379469025, "node_id": "I_kwDOBiS_IM5SOQbh", "number": 6048, "title": "Suddenly unable to log check result", "user": {"login": "JoeJoe1313", "id": 61312176, "node_id": "MDQ6VXNlcjYxMzEyMTc2", "avatar_url": "https://avatars.githubusercontent.com/u/61312176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoeJoe1313", "html_url": "https://github.com/JoeJoe1313", "followers_url": "https://api.github.com/users/JoeJoe1313/followers", "following_url": "https://api.github.com/users/JoeJoe1313/following{/other_user}", "gists_url": "https://api.github.com/users/JoeJoe1313/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoeJoe1313/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoeJoe1313/subscriptions", "organizations_url": "https://api.github.com/users/JoeJoe1313/orgs", "repos_url": "https://api.github.com/users/JoeJoe1313/repos", "events_url": "https://api.github.com/users/JoeJoe1313/events{/privacy}", "received_events_url": "https://api.github.com/users/JoeJoe1313/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2022-09-20T13:56:22Z", "updated_at": "2025-02-22T15:23:00Z", "closed_at": "2022-09-22T08:26:13Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": null, "closed_by": {"login": "JoeJoe1313", "id": 61312176, "node_id": "MDQ6VXNlcjYxMzEyMTc2", "avatar_url": "https://avatars.githubusercontent.com/u/61312176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoeJoe1313", "html_url": "https://github.com/JoeJoe1313", "followers_url": "https://api.github.com/users/JoeJoe1313/followers", "following_url": "https://api.github.com/users/JoeJoe1313/following{/other_user}", "gists_url": "https://api.github.com/users/JoeJoe1313/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoeJoe1313/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoeJoe1313/subscriptions", "organizations_url": "https://api.github.com/users/JoeJoe1313/orgs", "repos_url": "https://api.github.com/users/JoeJoe1313/repos", "events_url": "https://api.github.com/users/JoeJoe1313/events{/privacy}", "received_events_url": "https://api.github.com/users/JoeJoe1313/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6048/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6048/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6035", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6035/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6035/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6035/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/6035", "id": 1376376697, "node_id": "I_kwDOBiS_IM5SCdd5", "number": 6035, "title": "[BUG] Batch IDs are *NOT* accessible in the order in which they were loaded in Validator", "user": {"login": "dansola", "id": 40698988, "node_id": "MDQ6VXNlcjQwNjk4OTg4", "avatar_url": "https://avatars.githubusercontent.com/u/40698988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dansola", "html_url": "https://github.com/dansola", "followers_url": "https://api.github.com/users/dansola/followers", "following_url": "https://api.github.com/users/dansola/following{/other_user}", "gists_url": "https://api.github.com/users/dansola/gists{/gist_id}", "starred_url": "https://api.github.com/users/dansola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dansola/subscriptions", "organizations_url": "https://api.github.com/users/dansola/orgs", "repos_url": "https://api.github.com/users/dansola/repos", "events_url": "https://api.github.com/users/dansola/events{/privacy}", "received_events_url": "https://api.github.com/users/dansola/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-09-16T19:20:04Z", "updated_at": "2024-08-22T23:54:16Z", "closed_at": "2024-08-22T23:54:16Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen accessing validation results for example like this: `validation_results.meta[\"active_batch_definition\"][\"batch_identifiers\"]`, the keys are not in the same order as they were loaded according to the order of `batch_identifiers` listed in the `great_expectations.yml` file for a datasource. I got this error when updating from 0.13.28 to 0.15.22.\r\n\r\nLooking at the [changelog](https://github.com/great-expectations/great_expectations/blob/34839c0d35b464418e96c5d3e7d425be18036b13/docs/changelog.md), it looks like this bug was addressed by [PR #5112](https://github.com/great-expectations/great_expectations/pull/5112).\r\n\r\nAny idea why this bug appears to be persisting? \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Make a `RuntimeBatchRequest` instance.\r\n2. Use `add_checkpoint()` method to to add a checkpoint config dictionary.\r\n3. Use the `run_checkpoint()` method with the `RuntimeBatchRequest` instance passed in a dictionary, in a list, to the `validator` argument. Example: `validations=[{\"batch_request\": runtime_batch_request}]`. An action list is also provided.\r\n\r\n**Expected behavior**\r\nWhen working in a custom `ValidationResultsPageRenderer` child class, the `validation_results.meta[\"active_batch_definition\"][\"batch_identifiers\"]` keys are expected to be in the same order as they are defined in the `great_expectations.yml` file. Instead they are in alphabetical order.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: [e.g. 0.15.22]\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6035/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/6035/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5906", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5906/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5906/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5906/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5906", "id": 1358469310, "node_id": "I_kwDOBiS_IM5Q-Ji-", "number": 5906, "title": "Clickhouse KeyError", "user": {"login": "marcelatoffernet", "id": 102469502, "node_id": "U_kgDOBhuPfg", "avatar_url": "https://avatars.githubusercontent.com/u/102469502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcelatoffernet", "html_url": "https://github.com/marcelatoffernet", "followers_url": "https://api.github.com/users/marcelatoffernet/followers", "following_url": "https://api.github.com/users/marcelatoffernet/following{/other_user}", "gists_url": "https://api.github.com/users/marcelatoffernet/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcelatoffernet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcelatoffernet/subscriptions", "organizations_url": "https://api.github.com/users/marcelatoffernet/orgs", "repos_url": "https://api.github.com/users/marcelatoffernet/repos", "events_url": "https://api.github.com/users/marcelatoffernet/events{/privacy}", "received_events_url": "https://api.github.com/users/marcelatoffernet/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 4397538239, "node_id": "LA_kwDOBiS_IM8AAAABBh0bvw", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:new_backend", "name": "feature:new_backend", "color": "741403", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2022-09-01T08:37:38Z", "updated_at": "2024-08-22T23:54:27Z", "closed_at": "2024-08-22T23:54:27Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Using `clickhouse-sqlalchemy`, the profiler causes an issue:\r\n\r\n``` python\r\n...\r\nvalidator.head(n_rows=5, fetch_all=False)\r\n```\r\n\r\n```console\r\n2022-09-01T10:28:32+0200 - WARNING - Exceptions\r\n{('table.head', 'batch_id=8a5811cca948ef555530e233973f214c', '04166707abe073177c1dd922d3584468'): {'metric_configuration': {\r\n  \"metric_name\": \"table.head\",\r\n  \"metric_domain_kwargs\": {\r\n    \"batch_id\": \"8a5811cca948ef555530e233973f214c\"\r\n  },\r\n  \"metric_domain_kwargs_id\": \"batch_id=8a5811cca948ef555530e233973f214c\",\r\n  \"metric_value_kwargs\": {\r\n    \"n_rows\": 5,\r\n    \"fetch_all\": false\r\n  },\r\n  \"metric_value_kwargs_id\": \"04166707abe073177c1dd922d3584468\",\r\n  \"id\": [\r\n    \"table.head\",\r\n    \"batch_id=8a5811cca948ef555530e233973f214c\",\r\n    \"04166707abe073177c1dd922d3584468\"\r\n  ]\r\n}, 'num_failures': 3, 'exception_info': {{'exception_traceback': 'Traceback (most recent call last):\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py\", line 152, in execute\\n    response = execute(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_driver/client.py\", line 304, in execute\\n    rv = self.process_ordinary_query(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_driver/client.py\", line 491, in process_ordinary_query\\n    return self.receive_result(with_column_types=with_column_types,\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_driver/client.py\", line 151, in receive_result\\n    return result.get_result()\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_driver/result.py\", line 50, in get_result\\n    for packet in self.packet_generator:\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_driver/client.py\", line 167, in packet_generator\\n    packet = self.receive_packet()\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_driver/client.py\", line 184, in receive_packet\\n    raise packet.exception\\nclickhouse_driver.errors.ServerException: Code: 60.\\nDB::Exception: Table touchpoint.ge_temp_8f4ec061 doesn\\'t exist. Stack trace:\\n\\n0. DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool) in /usr/bin/clickhouse\\n1. DB::DatabaseCatalog::getTableImpl(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>, std::__1::optional<DB::Exception>*) const in /usr/bin/clickhouse\\n2. DB::DatabaseCatalog::getTable(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>) const in /usr/bin/clickhouse\\n3. DB::JoinedTables::getLeftTableStorage() in /usr/bin/clickhouse\\n4. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context> const&, std::__1::optional<DB::Pipe>, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&, std::__1::shared_ptr<DB::PreparedSets>) in /usr/bin/clickhouse\\n5. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::__1::shared_ptr<DB::IAST> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n6. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n7. DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&) in /usr/bin/clickhouse\\n8. ? in /usr/bin/clickhouse\\n9. DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::shared_ptr<DB::Context>, bool, DB::QueryProcessingStage::Enum) in /usr/bin/clickhouse\\n10. DB::TCPHandler::runImpl() in /usr/bin/clickhouse\\n11. DB::TCPHandler::run() in /usr/bin/clickhouse\\n12. Poco::Net::TCPServerConnection::start() in /usr/bin/clickhouse\\n13. Poco::Net::TCPServerDispatcher::run() in /usr/bin/clickhouse\\n14. Poco::PooledThread::run() in /usr/bin/clickhouse\\n15. Poco::ThreadImpl::runnableEntry(void*) in /usr/bin/clickhouse\\n16. ? in ?\\n17. clone in ?\\n\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 393, in resolve_metrics\\n    resolved_metrics[metric_to_resolve.id] = metric_fn(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/expectations/metrics/metric_provider.py\", line 34, in inner_func\\n    return metric_fn(*args, **kwargs)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/expectations/metrics/table_metrics/table_head.py\", line 138, in _sqlalchemy\\n    df = pd.read_sql(sql, con=execution_engine.engine)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/pandas/io/sql.py\", line 592, in read_sql\\n    return pandas_sql.read_query(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/pandas/io/sql.py\", line 1557, in read_query\\n    result = self.execute(*args)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/pandas/io/sql.py\", line 1402, in execute\\n    return self.connectable.execution_options().execute(*args, **kwargs)\\n  File \"<string>\", line 2, in execute\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/util/deprecations.py\", line 402, in warned\\n    return fn(*args, **kwargs)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/engine/base.py\", line 3257, in execute\\n    return connection.execute(statement, *multiparams, **params)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/engine/base.py\", line 1380, in execute\\n    return meth(self, multiparams, params, _EMPTY_EXECUTION_OPTS)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/sql/compiler.py\", line 475, in _execute_on_connection\\n    return connection._execute_compiled(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/engine/base.py\", line 1625, in _execute_compiled\\n    ret = self._execute_context(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/engine/base.py\", line 1943, in _execute_context\\n    self._handle_dbapi_exception(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/engine/base.py\", line 2128, in _handle_dbapi_exception\\n    util.raise_(exc_info[1], with_traceback=exc_info[2])\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/util/compat.py\", line 208, in raise_\\n    raise exception\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/sqlalchemy/engine/base.py\", line 1900, in _execute_context\\n    self.dialect.do_execute(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/base.py\", line 411, in do_execute\\n    cursor.execute(statement, parameters, context=context)\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/clickhouse_sqlalchemy/drivers/native/connector.py\", line 158, in execute\\n    raise DatabaseException(orig)\\nclickhouse_sqlalchemy.exceptions.DatabaseException: Orig exception: Code: 60.\\nDB::Exception: Table touchpoint.ge_temp_8f4ec061 doesn\\'t exist. Stack trace:\\n\\n0. DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool) in /usr/bin/clickhouse\\n1. DB::DatabaseCatalog::getTableImpl(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>, std::__1::optional<DB::Exception>*) const in /usr/bin/clickhouse\\n2. DB::DatabaseCatalog::getTable(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>) const in /usr/bin/clickhouse\\n3. DB::JoinedTables::getLeftTableStorage() in /usr/bin/clickhouse\\n4. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context> const&, std::__1::optional<DB::Pipe>, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&, std::__1::shared_ptr<DB::PreparedSets>) in /usr/bin/clickhouse\\n5. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::__1::shared_ptr<DB::IAST> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n6. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n7. DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&) in /usr/bin/clickhouse\\n8. ? in /usr/bin/clickhouse\\n9. DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::shared_ptr<DB::Context>, bool, DB::QueryProcessingStage::Enum) in /usr/bin/clickhouse\\n10. DB::TCPHandler::runImpl() in /usr/bin/clickhouse\\n11. DB::TCPHandler::run() in /usr/bin/clickhouse\\n12. Poco::Net::TCPServerConnection::start() in /usr/bin/clickhouse\\n13. Poco::Net::TCPServerDispatcher::run() in /usr/bin/clickhouse\\n14. Poco::PooledThread::run() in /usr/bin/clickhouse\\n15. Poco::ThreadImpl::runnableEntry(void*) in /usr/bin/clickhouse\\n16. ? in ?\\n17. clone in ?\\n\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/validator/validator.py\", line 1324, in resolve_validation_graph\\n    self._resolve_metrics(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/validator/validator.py\", line 2247, in _resolve_metrics\\n    return execution_engine.resolve_metrics(\\n  File \"/Users/marcelcoetzee/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/execution_engine/execution_engine.py\", line 397, in resolve_metrics\\n    raise ge_exceptions.MetricResolutionError(\\ngreat_expectations.exceptions.exceptions.MetricResolutionError: Orig exception: Code: 60.\\nDB::Exception: Table touchpoint.ge_temp_8f4ec061 doesn\\'t exist. Stack trace:\\n\\n0. DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool) in /usr/bin/clickhouse\\n1. DB::DatabaseCatalog::getTableImpl(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>, std::__1::optional<DB::Exception>*) const in /usr/bin/clickhouse\\n2. DB::DatabaseCatalog::getTable(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>) const in /usr/bin/clickhouse\\n3. DB::JoinedTables::getLeftTableStorage() in /usr/bin/clickhouse\\n4. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context> const&, std::__1::optional<DB::Pipe>, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&, std::__1::shared_ptr<DB::PreparedSets>) in /usr/bin/clickhouse\\n5. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::__1::shared_ptr<DB::IAST> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n6. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n7. DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&) in /usr/bin/clickhouse\\n8. ? in /usr/bin/clickhouse\\n9. DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::shared_ptr<DB::Context>, bool, DB::QueryProcessingStage::Enum) in /usr/bin/clickhouse\\n10. DB::TCPHandler::runImpl() in /usr/bin/clickhouse\\n11. DB::TCPHandler::run() in /usr/bin/clickhouse\\n12. Poco::Net::TCPServerConnection::start() in /usr/bin/clickhouse\\n13. Poco::Net::TCPServerDispatcher::run() in /usr/bin/clickhouse\\n14. Poco::PooledThread::run() in /usr/bin/clickhouse\\n15. Poco::ThreadImpl::runnableEntry(void*) in /usr/bin/clickhouse\\n16. ? in ?\\n17. clone in ?\\n\\n', 'exception_message': \"Orig exception: Code: 60.\\nDB::Exception: Table touchpoint.ge_temp_8f4ec061 doesn't exist. Stack trace:\\n\\n0. DB::Exception::Exception(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int, bool) in /usr/bin/clickhouse\\n1. DB::DatabaseCatalog::getTableImpl(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>, std::__1::optional<DB::Exception>*) const in /usr/bin/clickhouse\\n2. DB::DatabaseCatalog::getTable(DB::StorageID const&, std::__1::shared_ptr<DB::Context const>) const in /usr/bin/clickhouse\\n3. DB::JoinedTables::getLeftTableStorage() in /usr/bin/clickhouse\\n4. DB::InterpreterSelectQuery::InterpreterSelectQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context> const&, std::__1::optional<DB::Pipe>, std::__1::shared_ptr<DB::IStorage> const&, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, std::__1::shared_ptr<DB::StorageInMemoryMetadata const> const&, std::__1::shared_ptr<DB::PreparedSets>) in /usr/bin/clickhouse\\n5. DB::InterpreterSelectWithUnionQuery::buildCurrentChildInterpreter(std::__1::shared_ptr<DB::IAST> const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n6. DB::InterpreterSelectWithUnionQuery::InterpreterSelectWithUnionQuery(std::__1::shared_ptr<DB::IAST> const&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&, std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&) in /usr/bin/clickhouse\\n7. DB::InterpreterFactory::get(std::__1::shared_ptr<DB::IAST>&, std::__1::shared_ptr<DB::Context>, DB::SelectQueryOptions const&) in /usr/bin/clickhouse\\n8. ? in /usr/bin/clickhouse\\n9. DB::executeQuery(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::shared_ptr<DB::Context>, bool, DB::QueryProcessingStage::Enum) in /usr/bin/clickhouse\\n10. DB::TCPHandler::runImpl() in /usr/bin/clickhouse\\n11. DB::TCPHandler::run() in /usr/bin/clickhouse\\n12. Poco::Net::TCPServerConnection::start() in /usr/bin/clickhouse\\n13. Poco::Net::TCPServerDispatcher::run() in /usr/bin/clickhouse\\n14. Poco::PooledThread::run() in /usr/bin/clickhouse\\n15. Poco::ThreadImpl::runnableEntry(void*) in /usr/bin/clickhouse\\n16. ? in ?\\n17. clone in ?\\n\", 'raised_exception': True}}}}\r\noccurred while resolving metrics.\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\nInput In [2], in <cell line: 43>()\r\n     41 column_names = [f'\"{column_name}\"' for column_name in validator.columns()]\r\n     42 print(f\"Columns: {', '.join(column_names)}.\")\r\n---> 43 validator.head(n_rows=5, fetch_all=False)\r\n\r\nFile ~/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/validator/validator.py:2187, in Validator.head(self, n_rows, domain_kwargs, fetch_all)\r\n   2182 if domain_kwargs is None:\r\n   2183     domain_kwargs = {\r\n   2184         \"batch_id\": self.execution_engine.active_batch_data_id,\r\n   2185     }\r\n-> 2187 data: Any = self.get_metric(\r\n   2188     metric=MetricConfiguration(\r\n   2189         metric_name=\"table.head\",\r\n   2190         metric_domain_kwargs=domain_kwargs,\r\n   2191         metric_value_kwargs={\r\n   2192             \"n_rows\": n_rows,\r\n   2193             \"fetch_all\": fetch_all,\r\n   2194         },\r\n   2195     )\r\n   2196 )\r\n   2198 df: pd.DataFrame\r\n   2199 if isinstance(\r\n   2200     self.execution_engine, (PandasExecutionEngine, SqlAlchemyExecutionEngine)\r\n   2201 ):\r\n\r\nFile ~/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/validator/validator.py:921, in Validator.get_metric(self, metric, force_no_progress_bar)\r\n    915 def get_metric(\r\n    916     self,\r\n    917     metric: MetricConfiguration,\r\n    918     force_no_progress_bar: bool = False,\r\n    919 ) -> Any:\r\n    920     \"\"\"return the value of the requested metric.\"\"\"\r\n--> 921     return self.get_metrics(\r\n    922         metrics={metric.metric_name: metric},\r\n    923         force_no_progress_bar=force_no_progress_bar,\r\n    924     )[metric.metric_name]\r\n\r\nFile ~/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/validator/validator.py:882, in Validator.get_metrics(self, metrics, force_no_progress_bar)\r\n    869 \"\"\"\r\n    870 Args:\r\n    871     metrics: Dictionary of desired metrics to be resolved, with metric_name as key and MetricConfiguration as value.\r\n   (...)\r\n    875     Return Dictionary with requested metrics resolved, with metric_name as key and computed metric as value.\r\n    876 \"\"\"\r\n    877 resolved_metrics: Dict[Tuple[str, str, str], Any] = self.compute_metrics(\r\n    878     metric_configurations=list(metrics.values()),\r\n    879     force_no_progress_bar=force_no_progress_bar,\r\n    880 )\r\n--> 882 return {\r\n    883     metric_configuration.metric_name: resolved_metrics[metric_configuration.id]\r\n    884     for metric_configuration in metrics.values()\r\n    885 }\r\n\r\nFile ~/mambaforge/envs/ge/lib/python3.10/site-packages/great_expectations/validator/validator.py:883, in <dictcomp>(.0)\r\n    869 \"\"\"\r\n    870 Args:\r\n    871     metrics: Dictionary of desired metrics to be resolved, with metric_name as key and MetricConfiguration as value.\r\n   (...)\r\n    875     Return Dictionary with requested metrics resolved, with metric_name as key and computed metric as value.\r\n    876 \"\"\"\r\n    877 resolved_metrics: Dict[Tuple[str, str, str], Any] = self.compute_metrics(\r\n    878     metric_configurations=list(metrics.values()),\r\n    879     force_no_progress_bar=force_no_progress_bar,\r\n    880 )\r\n    882 return {\r\n--> 883     metric_configuration.metric_name: resolved_metrics[metric_configuration.id]\r\n    884     for metric_configuration in metrics.values()\r\n    885 }\r\n\r\nKeyError: ('table.head', 'batch_id=8a5811cca948ef555530e233973f214c', '04166707abe073177c1dd922d3584468')\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5906/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5906/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5788", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5788/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5788/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5788/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5788", "id": 1343350176, "node_id": "I_kwDOBiS_IM5QEeWg", "number": 5788, "title": "Dealing with NoneType", "user": {"login": "shivankitsharma", "id": 37122288, "node_id": "MDQ6VXNlcjM3MTIyMjg4", "avatar_url": "https://avatars.githubusercontent.com/u/37122288?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivankitsharma", "html_url": "https://github.com/shivankitsharma", "followers_url": "https://api.github.com/users/shivankitsharma/followers", "following_url": "https://api.github.com/users/shivankitsharma/following{/other_user}", "gists_url": "https://api.github.com/users/shivankitsharma/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivankitsharma/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivankitsharma/subscriptions", "organizations_url": "https://api.github.com/users/shivankitsharma/orgs", "repos_url": "https://api.github.com/users/shivankitsharma/repos", "events_url": "https://api.github.com/users/shivankitsharma/events{/privacy}", "received_events_url": "https://api.github.com/users/shivankitsharma/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-08-18T16:36:15Z", "updated_at": "2024-08-22T23:54:38Z", "closed_at": "2024-08-22T23:54:38Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Getting this error \r\n\r\n```\r\n---------------------------------------------------------------------------\r\nDataContextError                          Traceback (most recent call last)\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/commonfunctions/data_quality_testing/profile/profile.py in onboarding_data_assistant_profiler(df)\r\n     25     try:\r\n---> 26         print(f\"Onboarding Data Assistant Profiler Suite found: {data_context.get_expectation_suite(pipeline_data_profile).expectation_suite_name}\")\r\n     27     except DataContextError:\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/data_context/data_context/abstract_data_context.py in get_expectation_suite(self, expectation_suite_name, ge_cloud_id)\r\n   1022         else:\r\n-> 1023             raise ge_exceptions.DataContextError(\r\n   1024                 f\"expectation_suite {expectation_suite_name} not found\"\r\n\r\nDataContextError: expectation_suite TESTING_POC_PROFILING_SUITE not found\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTypeError                                 Traceback (most recent call last)\r\n<command-308301866353764> in <cell line: 1>()\r\n----> 1 data_quality_check(df)\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/commonfunctions/data_quality_testing/profile/profile.py in data_quality_check(df)\r\n     86     create_storage_container()\r\n     87     base_profiler(df)\r\n---> 88     onboarding_data_assistant_profiler(df)\r\n     89     validation_suit_run(df)\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/commonfunctions/data_quality_testing/profile/profile.py in onboarding_data_assistant_profiler(df)\r\n     42             return data_assistant_result\r\n     43 \r\n---> 44         data_assistant_result: DataAssistantResult = run_onboarding_data_assistant(\r\n     45             data_context=data_context,\r\n     46             validator=validator,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/commonfunctions/data_quality_testing/profile/profile.py in run_onboarding_data_assistant(data_context, validator, batch_request)\r\n     35         exclude_column_names = []\r\n     36         def run_onboarding_data_assistant(data_context, validator, batch_request) -> DataAssistantResult:\r\n---> 37             data_assistant_result: DataAssistantResult = data_context.assistants.onboarding.run(\r\n     38                 batch_request=batch_request,\r\n     39                 exclude_column_names=exclude_column_names,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/data_assistant/data_assistant_runner.py in modify_signature(*args, **kwargs)\r\n     49             augmented_kwargs: dict = copy.deepcopy(extra_kwargs)\r\n     50             augmented_kwargs.update(kwargs)\r\n---> 51             return func(*args, **augmented_kwargs)\r\n     52 \r\n     53         # Override signature.\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/data_assistant/data_assistant_runner.py in run(self, batch_request, **kwargs)\r\n    213             RuntimeEnvironmentDomainTypeDirectives\r\n    214         ] = build_domain_type_directives(**directives)\r\n--> 215         data_assistant_result: DataAssistantResult = data_assistant.run(\r\n    216             variables_directives_list=variables_directives_list,\r\n    217             domain_type_directives_list=domain_type_directives_list,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/data_assistant/data_assistant.py in run(self, variables, rules, variables_directives_list, domain_type_directives_list)\r\n    466             usage_statistics_handler=usage_statistics_handler,\r\n    467         )\r\n--> 468         run_profiler_on_data(\r\n    469             data_assistant=self,\r\n    470             data_assistant_result=data_assistant_result,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/util.py in compute_delta_t(*args, **kwargs)\r\n    170             time_begin: float = time.perf_counter()\r\n    171             try:\r\n--> 172                 return func(*args, **kwargs)\r\n    173             finally:\r\n    174                 time_end: float = time.perf_counter()\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/data_assistant/data_assistant.py in run_profiler_on_data(data_assistant, data_assistant_result, profiler, variables, rules, batch_list, batch_request, variables_directives_list, domain_type_directives_list)\r\n    652 configuration included.\r\n    653 \"\"\"\r\n--> 654     rule_based_profiler_result: RuleBasedProfilerResult = profiler.run(\r\n    655         variables=variables,\r\n    656         rules=rules_configs,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/core/usage_statistics/usage_statistics.py in usage_statistics_wrapped_method(*args, **kwargs)\r\n    292                     nested_update(event_payload, args_payload_fn(*args, **kwargs))\r\n    293 \r\n--> 294                 result = func(*args, **kwargs)\r\n    295                 message[\"success\"] = True\r\n    296             except Exception:\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/rule_based_profiler.py in run(self, variables, rules, batch_list, batch_request, recompute_existing_parameter_values, reconciliation_directives, variables_directives_list, domain_type_directives_list, comment)\r\n    318             parameter_values_for_fully_qualified_parameter_names_by_domain=self.get_parameter_values_for_fully_qualified_parameter_names_by_domain(),\r\n    319             expectation_configurations=list(\r\n--> 320                 filter(None, self.get_expectation_configurations())\r\n    321             ),\r\n    322             citation={\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/rule_based_profiler.py in get_expectation_configurations(self)\r\n    356             rule_output = RuleOutput(rule_state=rule_state)\r\n    357             expectation_configurations.extend(\r\n--> 358                 rule_output.get_expectation_configurations()\r\n    359             )\r\n    360 \r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/rule/rule_output.py in get_expectation_configurations(self)\r\n     45             ) in self.rule_state.rule.expectation_configuration_builders:\r\n     46                 expectation_configurations.append(\r\n---> 47                     expectation_configuration_builder.build_expectation_configuration(\r\n     48                         domain=domain,\r\n     49                         variables=self.rule_state.variables,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/expectation_configuration_builder/expectation_configuration_builder.py in build_expectation_configuration(self, domain, variables, parameters, batch_list, batch_request)\r\n     94         )\r\n     95 \r\n---> 96         return self._build_expectation_configuration(\r\n     97             domain=domain, variables=variables, parameters=parameters\r\n     98         )\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/expectation_configuration_builder/default_expectation_configuration_builder.py in _build_expectation_configuration(self, domain, variables, parameters)\r\n    362         if self._condition:\r\n    363             parsed_condition: ParseResults = self._parse_condition()\r\n--> 364             condition: bool = self._evaluate_condition(\r\n    365                 parsed_condition=parsed_condition,\r\n    366                 domain=domain,\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/expectation_configuration_builder/default_expectation_configuration_builder.py in _evaluate_condition(self, parsed_condition, domain, variables, parameters)\r\n    326         )\r\n    327 \r\n--> 328         binary_list: ParseResults = self._build_binary_list(\r\n    329             substituted_term_list=substituted_term_list\r\n    330         )\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/expectation_configuration_builder/default_expectation_configuration_builder.py in _build_binary_list(self, substituted_term_list)\r\n    265                 token\r\n    266             ) > 1:\r\n--> 267                 substituted_term_list[idx] = eval(\"\".join([str(t) for t in token]))\r\n    268             elif isinstance(token, ParseResults):\r\n    269                 self._build_binary_list(substituted_term_list=token)\r\n\r\n/local_disk0/.ephemeral_nfs/envs/pythonEnv-45e6bb99-5f4f-4aeb-9422-a546f9a56508/lib/python3.9/site-packages/great_expectations/rule_based_profiler/expectation_configuration_builder/default_expectation_configuration_builder.py in <module>\r\n\r\nTypeError: '<=' not supported between instances of 'NoneType' and 'int'\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5788/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5788/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5777", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5777/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5777/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5777/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5777", "id": 1341431175, "node_id": "I_kwDOBiS_IM5P9J2H", "number": 5777, "title": "Repeating expectations for the same domain with different parameters", "user": {"login": "roseblyth", "id": 60149673, "node_id": "MDQ6VXNlcjYwMTQ5Njcz", "avatar_url": "https://avatars.githubusercontent.com/u/60149673?v=4", "gravatar_id": "", "url": "https://api.github.com/users/roseblyth", "html_url": "https://github.com/roseblyth", "followers_url": "https://api.github.com/users/roseblyth/followers", "following_url": "https://api.github.com/users/roseblyth/following{/other_user}", "gists_url": "https://api.github.com/users/roseblyth/gists{/gist_id}", "starred_url": "https://api.github.com/users/roseblyth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/roseblyth/subscriptions", "organizations_url": "https://api.github.com/users/roseblyth/orgs", "repos_url": "https://api.github.com/users/roseblyth/repos", "events_url": "https://api.github.com/users/roseblyth/events{/privacy}", "received_events_url": "https://api.github.com/users/roseblyth/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-08-17T09:11:44Z", "updated_at": "2024-08-22T23:54:50Z", "closed_at": "2024-08-22T23:54:50Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nFor Column Expectations and Column Aggregate Expectations, it is only possible to include each expectation once for a given column. If I try to create several of the same expectation for a given column but with different parameters, then only one of them appears in the expectation suite.\r\n\r\n(For example, say we have the custom expectation expect_proportion_of_value_in_column_to_be_between, which takes inputs column, value, min_proportion, max_proportion. This is to expect for the proportion of a particular value occurring in a categorical column. We may want to create this expectation several times for the same column, just changing the value parameter. But this is not possible.)\r\n\r\nAlso, for Table Expectations, it is only possible to include each expectation once in the whole suite, regardless of what parameters are changed. This is still the case even if the Table Expectation takes one or two column names as input parameters, and acts on those columns (it still only appears once in the suite, even if I was changing the column parameters).\r\n\r\nI have been informed that if I use the use the ExpectationSuite.add_expectation method, then there is an overwrite_existing flag which can solve this problem. However, I would ideally like to use the validator method, and apparently it is not possible to pass overwrite_existing to validator.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behaviour:\r\n1. Make a Jupyter notebook to produce an expectation suite, and add eg two column expectations of the same type for the same column, with different choices for some parameter\r\n2. Run the script to produce the suite\r\n3. Look on the data_docs html file: only one of the expectations you wrote appears in it\r\n\r\n**Expected behavior**\r\nI would like every expectation I write in the Jupyter notebook to be added to the expectation suite I produce.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.15.15\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5777/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5777/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5755", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5755/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5755/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5755/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5755", "id": 1337596167, "node_id": "I_kwDOBiS_IM5PuhkH", "number": 5755, "title": "Documentation issue with GCP Secret Manager YAML Examples", "user": {"login": "cah-jamey-weyenberg", "id": 108900874, "node_id": "U_kgDOBn2yCg", "avatar_url": "https://avatars.githubusercontent.com/u/108900874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cah-jamey-weyenberg", "html_url": "https://github.com/cah-jamey-weyenberg", "followers_url": "https://api.github.com/users/cah-jamey-weyenberg/followers", "following_url": "https://api.github.com/users/cah-jamey-weyenberg/following{/other_user}", "gists_url": "https://api.github.com/users/cah-jamey-weyenberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/cah-jamey-weyenberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cah-jamey-weyenberg/subscriptions", "organizations_url": "https://api.github.com/users/cah-jamey-weyenberg/orgs", "repos_url": "https://api.github.com/users/cah-jamey-weyenberg/repos", "events_url": "https://api.github.com/users/cah-jamey-weyenberg/events{/privacy}", "received_events_url": "https://api.github.com/users/cah-jamey-weyenberg/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-08-12T18:46:36Z", "updated_at": "2025-01-23T14:20:13Z", "closed_at": "2023-03-10T15:03:15Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "There's an issue with the documentation for the GCp Secret Manager documentation. The Jupyter notebooks actually set this up properly, but the documentation on the website has the `credentials:` section in the wrong place, and occasionally uses the wrong class name of SqlAlchemyDatasource when it should be Datasource. ", "closed_by": {"login": "rdodev", "id": 1234335, "node_id": "MDQ6VXNlcjEyMzQzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1234335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdodev", "html_url": "https://github.com/rdodev", "followers_url": "https://api.github.com/users/rdodev/followers", "following_url": "https://api.github.com/users/rdodev/following{/other_user}", "gists_url": "https://api.github.com/users/rdodev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdodev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdodev/subscriptions", "organizations_url": "https://api.github.com/users/rdodev/orgs", "repos_url": "https://api.github.com/users/rdodev/repos", "events_url": "https://api.github.com/users/rdodev/events{/privacy}", "received_events_url": "https://api.github.com/users/rdodev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5755/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5755/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5686", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5686/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5686/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5686/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5686", "id": 1329607711, "node_id": "I_kwDOBiS_IM5PQDQf", "number": 5686, "title": "Memory leak when using GE within a docker container", "user": {"login": "saadkh225", "id": 7899518, "node_id": "MDQ6VXNlcjc4OTk1MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/7899518?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saadkh225", "html_url": "https://github.com/saadkh225", "followers_url": "https://api.github.com/users/saadkh225/followers", "following_url": "https://api.github.com/users/saadkh225/following{/other_user}", "gists_url": "https://api.github.com/users/saadkh225/gists{/gist_id}", "starred_url": "https://api.github.com/users/saadkh225/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saadkh225/subscriptions", "organizations_url": "https://api.github.com/users/saadkh225/orgs", "repos_url": "https://api.github.com/users/saadkh225/repos", "events_url": "https://api.github.com/users/saadkh225/events{/privacy}", "received_events_url": "https://api.github.com/users/saadkh225/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205982396, "node_id": "MDU6TGFiZWwzMjA1OTgyMzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-engineering-queue", "name": "core-engineering-queue", "color": "474051", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-08-05T08:15:38Z", "updated_at": "2024-08-22T23:55:01Z", "closed_at": "2024-08-22T23:55:01Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am using GE inside a container with API requests triggering checkpoints.\r\nEvery time I run a checkpoint, there is a permanent increase in the memory usage of the container, GE does not release some memory.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Setup GE to run in a dedicated container.\r\n2. Setup an API model using Flask. The API call triggers a checkpoint.\r\n3. GE configuration:\r\n    1. Postgres backend for expectation and validation stores\r\n    2.  Use `RuntimeDataConnector` with data access via file path or pass in memory dataframe\r\n    3. Datasource setup:      \r\n        ```\r\n        datasources:\r\n          common:\r\n            module_name: great_expectations.datasource\r\n            class_name: Datasource\r\n            data_connectors:\r\n              default_runtime_data_connector_name:\r\n                module_name: great_expectations.datasource.data_connector\r\n                batch_identifiers:\r\n                  - default_identifier_name\r\n                class_name: RuntimeDataConnector\r\n            execution_engine:\r\n              class_name: PandasExecutionEngine\r\n              module_name: great_expectations.execution_engine\r\n        ```\r\n\r\n4. Make multiple requests\r\n5. Observe container memory stats (I used Portainer)\r\n6. Memory usage goes up with every request but never comes back to the same level (GE does not release some memory)\r\n\r\n**Expected behavior**\r\nMemory usage should go up during the processing and then memory should be released \r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 20.04.2 LTS (GNU/Linux 5.4.0-96-generic x86_64)\r\n - Great Expectations Version: 0.15.16\r\n - Flask version: 2.1.3\r\n - Docker version: 5.0.3\r\n\r\n**Additional context**\r\n\r\n*Memory profiling*\r\nI have also done memory profiling on my code and ensured that the memory issue does not arise from my code. I have added the profiling results from the concerned function, the only increment happens during `run_checkpoint` and its not released completely.  \r\n```\r\nMem usage    \tIncrement  \tOccurrences   \t\tLine Contents\r\n===========================================================\r\n...\r\n342.8359 MiB   0.0000 MiB           1               validations = self.create_validations_list(files)\r\n465.6328 MiB 122.7969 MiB           2               results = context.run_checkpoint(\r\n342.8359 MiB   0.0000 MiB           1                   checkpoint_name=\"\",\r\n342.8359 MiB   0.0000 MiB           1                   run_name_template=\"\",\r\n342.8359 MiB   0.0000 MiB           1                   validations=validations\r\n...\r\n``` \r\n*Portainer screenshot*\r\nThe memory usage climbs up by 20-30 mb on every request made.\r\n![image](https://user-images.githubusercontent.com/7899518/183017014-9556754b-c9e3-4e75-b819-058858781783.png)\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5686/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5686/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5627", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5627/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5627/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5627/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5627", "id": 1321813636, "node_id": "I_kwDOBiS_IM5OyUaE", "number": 5627, "title": "Include_unexpected_rows for not null check", "user": {"login": "Vijayitsme", "id": 108982357, "node_id": "U_kgDOBn7wVQ", "avatar_url": "https://avatars.githubusercontent.com/u/108982357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vijayitsme", "html_url": "https://github.com/Vijayitsme", "followers_url": "https://api.github.com/users/Vijayitsme/followers", "following_url": "https://api.github.com/users/Vijayitsme/following{/other_user}", "gists_url": "https://api.github.com/users/Vijayitsme/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vijayitsme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vijayitsme/subscriptions", "organizations_url": "https://api.github.com/users/Vijayitsme/orgs", "repos_url": "https://api.github.com/users/Vijayitsme/repos", "events_url": "https://api.github.com/users/Vijayitsme/events{/privacy}", "received_events_url": "https://api.github.com/users/Vijayitsme/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721237, "node_id": "MDU6TGFiZWw2ODg3MjEyMzc=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/good%20first%20issue", "name": "good first issue", "color": "7057ff", "default": true, "description": "Good issues for new contributors. Join #contributors-contributing in our Slack for help!"}, {"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": {"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2022-07-29T06:23:08Z", "updated_at": "2024-03-22T15:33:01Z", "closed_at": "2022-08-03T17:24:53Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am working on a project where in the data pipeline validation has to be carried out frequently to validate the data once arrived. In that case, while performing a GE validation \"**expect_column_values_to_not_be_null**\" with result format as **COMPLETE** and **include_unexpected_rows = True**. I expect to get the failed validation records as unexpected rows. **But all I get is unexpected rows =  null**. This is required so as to move the null records as a whole to exception zone and process is separately in the pipeline. \r\nI am working with **SPARK DATAFRAME**\r\n\r\n**Expected Solution:**\r\nExpect the display of **unexpected_rows** with all the failed records. [Even when the output may become clumsy at times] for ease in further analysis.\r\n\r\n**Tried with:**\r\nI have tried to get the unexpected records through custom validation for null checks/through regex/columns in set etc but all those methods are treating the null values as missing count and not providing the output as unexpected row.\r\n\r\n**Other than not null all the other validations display the unexpected records when it is set to true**\r\n\r\n\r\n", "closed_by": {"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5627/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5627/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5596", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5596/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5596/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5596/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5596", "id": 1317754997, "node_id": "I_kwDOBiS_IM5Oi1h1", "number": 5596, "title": "renderer crashes when try to render checkpoint result", "user": {"login": "uglypod", "id": 411476, "node_id": "MDQ6VXNlcjQxMTQ3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/411476?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uglypod", "html_url": "https://github.com/uglypod", "followers_url": "https://api.github.com/users/uglypod/followers", "following_url": "https://api.github.com/users/uglypod/following{/other_user}", "gists_url": "https://api.github.com/users/uglypod/gists{/gist_id}", "starred_url": "https://api.github.com/users/uglypod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uglypod/subscriptions", "organizations_url": "https://api.github.com/users/uglypod/orgs", "repos_url": "https://api.github.com/users/uglypod/repos", "events_url": "https://api.github.com/users/uglypod/events{/privacy}", "received_events_url": "https://api.github.com/users/uglypod/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205982396, "node_id": "MDU6TGFiZWwzMjA1OTgyMzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-engineering-queue", "name": "core-engineering-queue", "color": "474051", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2022-07-26T06:21:56Z", "updated_at": "2024-05-06T20:00:20Z", "closed_at": "2024-05-06T20:00:20Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen i add \r\n**expect_column_values_to_match_like_pattern** expectation to my suite, everything going fine, until \r\n**build_data_docs** after checkpoint run\r\n\r\n\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Add expect_column_values_to_match_like_pattern to suite\r\n2. Run checkpoint\r\n3. Rebuild data_docs\r\n\r\n**Expected behavior**\r\n\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows 11\r\n - Great Expectations Version: 0.15.5 \r\n\r\n**Additional context**\r\n```\r\nAn unexpected Exception occurred during data docs rendering.  Because of this error, certain parts of data docs will not be rendered properly and/or may not appear altogether.  Please use the trace, included in this message, to diagnose and repair the underlying issue.  Detailed information follows:\r\n        TypeError: \"unsupported operand type(s) for +=: 'NoneType' and 'list'\".  Traceback: \"Traceback (most recent call last):\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 99, in _render_list\r\n    result = content_block_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 195, in row_generator_fn\r\n    expectation_string_cell += unexpected_statement\r\nTypeError: unsupported operand type(s) for +=: 'NoneType' and 'list'\r\n\".\r\nc:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py:223: DeprecationWarning: V2 API style custom rendering is deprecated as of v0.13.28 and is not fully supported anymore; As it will be removed in v0.16, please transition to V3 API and associated rendering style\r\n  warnings.warn(\r\nAn unexpected Exception occurred during data docs rendering.  Because of this error, certain parts of data docs will not be rendered properly and/or may not appear altogether.  Please use the trace, included in this message, to diagnose and repair the underlying issue.  Detailed information follows:\r\n                AttributeError: \"'NoneType' object has no attribute 'expectation_type'\".  Traceback: \"Traceback (most recent call last):\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 99, in _render_list\r\n    result = content_block_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 195, in row_generator_fn\r\n    expectation_string_cell += unexpected_statement\r\nTypeError: unsupported operand type(s) for +=: 'NoneType' and 'list'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\site_builder.py\", line 464, in build\r\n    rendered_content = self.renderer_class.render(resource)\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\page_renderer.py\", line 124, in render\r\n    sections = self._collect_rendered_document_content_sections(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\page_renderer.py\", line 265, in _collect_rendered_document_content_sections\r\n    sections += [\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\page_renderer.py\", line 266, in <listcomp>\r\n    self._column_section_renderer.render(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\column_section_renderer.py\", line 485, in render\r\n    remaining_evrs, content_block = self._render_table(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\column_section_renderer.py\", line 473, in _render_table\r\n    new_block = self._table_renderer.render(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 63, in render\r\n    result = render_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 124, in _render_list\r\n    result = content_block_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 114, in row_generator_fn\r\n    expectation_string_cell = expectation_string_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 236, in expectation_string_fn_with_legacy_translation\r\n    return legacy_expectation_string_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\expectation_string.py\", line 25, in _missing_content_block_fn\r\n    \"expectation_type\": configuration.expectation_type,\r\nAttributeError: 'NoneType' object has no attribute 'expectation_type'\r\n\".\r\nAn unexpected Exception occurred during data docs rendering.  Because of this error, certain parts of data docs will not be rendered properly and/or may not appear altogether.  Please use the trace, included in this message, to diagnose and repair the underlying issue.  Detailed information follows:\r\n        TypeError: \"unsupported operand type(s) for +=: 'NoneType' and 'list'\".  Traceback: \"Traceback (most recent call last):\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 99, in _render_list\r\n    result = content_block_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 195, in row_generator_fn\r\n    expectation_string_cell += unexpected_statement\r\nTypeError: unsupported operand type(s) for +=: 'NoneType' and 'list'\r\n\".\r\nAn unexpected Exception occurred during data docs rendering.  Because of this error, certain parts of data docs will not be rendered properly and/or may not appear altogether.  Please use the trace, included in this message, to diagnose and repair the underlying issue.  Detailed information follows:\r\n                AttributeError: \"'NoneType' object has no attribute 'expectation_type'\".  Traceback: \"Traceback (most recent call last):\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 99, in _render_list\r\n    result = content_block_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 195, in row_generator_fn\r\n    expectation_string_cell += unexpected_statement\r\nTypeError: unsupported operand type(s) for +=: 'NoneType' and 'list'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\site_builder.py\", line 464, in build\r\n    rendered_content = self.renderer_class.render(resource)\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\page_renderer.py\", line 124, in render\r\n    sections = self._collect_rendered_document_content_sections(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\page_renderer.py\", line 265, in _collect_rendered_document_content_sections\r\n    sections += [\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\page_renderer.py\", line 266, in <listcomp>\r\n    self._column_section_renderer.render(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\column_section_renderer.py\", line 485, in render\r\n    remaining_evrs, content_block = self._render_table(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\column_section_renderer.py\", line 473, in _render_table\r\n    new_block = self._table_renderer.render(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 63, in render\r\n    result = render_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\content_block.py\", line 124, in _render_list\r\n    result = content_block_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 114, in row_generator_fn\r\n    expectation_string_cell = expectation_string_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\validation_results_table_content_block.py\", line 236, in expectation_string_fn_with_legacy_translation\r\n    return legacy_expectation_string_fn(\r\n  File \"c:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\great_expectations\\render\\renderer\\content_block\\expectation_string.py\", line 25, in _missing_content_block_fn\r\n    \"expectation_type\": configuration.expectation_type,\r\nAttributeError: 'NoneType' object has no attribute 'expectation_type'\r\n\".\r\n\r\n\".\r\n```\r\n", "closed_by": {"login": "jcampbell", "id": 332575, "node_id": "MDQ6VXNlcjMzMjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/332575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jcampbell", "html_url": "https://github.com/jcampbell", "followers_url": "https://api.github.com/users/jcampbell/followers", "following_url": "https://api.github.com/users/jcampbell/following{/other_user}", "gists_url": "https://api.github.com/users/jcampbell/gists{/gist_id}", "starred_url": "https://api.github.com/users/jcampbell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jcampbell/subscriptions", "organizations_url": "https://api.github.com/users/jcampbell/orgs", "repos_url": "https://api.github.com/users/jcampbell/repos", "events_url": "https://api.github.com/users/jcampbell/events{/privacy}", "received_events_url": "https://api.github.com/users/jcampbell/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5596/reactions", "total_count": 2, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 2}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5596/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5565", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5565/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5565/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5565/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5565", "id": 1314993438, "node_id": "I_kwDOBiS_IM5OYTUe", "number": 5565, "title": "expect_column_values_to_of_type does not work ", "user": {"login": "syrineMH", "id": 75311155, "node_id": "MDQ6VXNlcjc1MzExMTU1", "avatar_url": "https://avatars.githubusercontent.com/u/75311155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syrineMH", "html_url": "https://github.com/syrineMH", "followers_url": "https://api.github.com/users/syrineMH/followers", "following_url": "https://api.github.com/users/syrineMH/following{/other_user}", "gists_url": "https://api.github.com/users/syrineMH/gists{/gist_id}", "starred_url": "https://api.github.com/users/syrineMH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syrineMH/subscriptions", "organizations_url": "https://api.github.com/users/syrineMH/orgs", "repos_url": "https://api.github.com/users/syrineMH/repos", "events_url": "https://api.github.com/users/syrineMH/events{/privacy}", "received_events_url": "https://api.github.com/users/syrineMH/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": {"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2022-07-22T13:13:24Z", "updated_at": "2024-03-14T23:43:18Z", "closed_at": "2023-07-10T16:10:07Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI am trying to use [expect_column_values_to_be_of_type](https://greatexpectations.io/expectations/expect_column_values_to_be_of_type) to verify the type of my datasource (from big query tables) using this expectation from the gallery .https://greatexpectations.io/expectations/expect_column_values_to_be_of_type          \r\n\r\n```\r\nmy syntaxe     {\r\n      \"expectation_type\": \"expect_column_values_to_be_of_type\",\r\n      \"kwargs\": {\r\n        \"column\": \"date_debut\",\r\n        \"type_\": \"DATE\",\r\n\t\"mostly\": 1.0\r\n      },\r\n      \"meta\": {}\r\n    },\r\n```\r\n\r\nI tried with different type but always got the same error below \r\n\r\n```\r\nexpect_column_values_to_be_of_type raised an exception:\r\n'type'[Show exception traceback...](https://ofr-bdf-lab-great-expect-prd.ey.r.appspot.com/validations/etask_otomate_189_expectation/20220722-115505-etask-otomate-189/20220722T115505.005936Z/03fd1fdc4deef8a2a0d630010f56b127.html#section-6-content-block-2-cell-1-2-content-2-collapse-body-0297dd0d-f50c-4184-acb4-6bcf350923e9)\r\nTraceback (most recent call last):\r\nFile \"C:\\Applications\\Python\\venv\\lib\\site-packages\\great_expectations\\validator\\validator.py\", line 979, in graph_validate\r\nresult = configuration.metrics_validate(\r\nFile \"C:\\Applications\\Python\\venv\\lib\\site-packages\\great_expectations\\core\\expectation_configuration.py\", line 1371, in metrics_validate\r\nreturn expectation_impl(self).metrics_validate(\r\nFile \"C:\\Applications\\Python\\venv\\lib\\site-packages\\great_expectations\\expectations\\expectation.py\", line 706, in metrics_validate\r\n] = self._validate(\r\nFile \"C:\\Applications\\Python\\venv\\lib\\site-packages\\great_expectations\\expectations\\core\\expect_column_values_to_be_of_type.py\", line 522, in _validate\r\nactual_column_type = [\r\nFile \"C:\\Applications\\Python\\venv\\lib\\site-packages\\great_expectations\\expectations\\core\\expect_column_values_to_be_of_type.py\", line 523, in\r\ntype_dict[\"type\"]\r\nKeyError: 'type'\r\n```\r\n\r\n**Expected behavior**\r\nI expect it to verify the type of my column\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: [Windows]\r\n - Great Expectations Version: [0.15.9]\r\n\r\n", "closed_by": {"login": "josectobar", "id": 21246524, "node_id": "MDQ6VXNlcjIxMjQ2NTI0", "avatar_url": "https://avatars.githubusercontent.com/u/21246524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josectobar", "html_url": "https://github.com/josectobar", "followers_url": "https://api.github.com/users/josectobar/followers", "following_url": "https://api.github.com/users/josectobar/following{/other_user}", "gists_url": "https://api.github.com/users/josectobar/gists{/gist_id}", "starred_url": "https://api.github.com/users/josectobar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josectobar/subscriptions", "organizations_url": "https://api.github.com/users/josectobar/orgs", "repos_url": "https://api.github.com/users/josectobar/repos", "events_url": "https://api.github.com/users/josectobar/events{/privacy}", "received_events_url": "https://api.github.com/users/josectobar/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5565/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5565/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5280", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5280/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5280/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5280/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5280", "id": 1266348442, "node_id": "I_kwDOBiS_IM5LevGa", "number": 5280, "title": "Transient failures related to checkpoint config parsing by ruamel.yaml", "user": {"login": "gray-sat", "id": 97984511, "node_id": "U_kgDOBdcf_w", "avatar_url": "https://avatars.githubusercontent.com/u/97984511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gray-sat", "html_url": "https://github.com/gray-sat", "followers_url": "https://api.github.com/users/gray-sat/followers", "following_url": "https://api.github.com/users/gray-sat/following{/other_user}", "gists_url": "https://api.github.com/users/gray-sat/gists{/gist_id}", "starred_url": "https://api.github.com/users/gray-sat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gray-sat/subscriptions", "organizations_url": "https://api.github.com/users/gray-sat/orgs", "repos_url": "https://api.github.com/users/gray-sat/repos", "events_url": "https://api.github.com/users/gray-sat/events{/privacy}", "received_events_url": "https://api.github.com/users/gray-sat/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-06-09T15:52:41Z", "updated_at": "2024-08-22T23:44:03Z", "closed_at": "2024-08-22T23:44:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI'm implementing some simple expectations within a foreachBatch of a spark structured streaming application. BaseDataContext is instantiated once, along with its datasource and checkpoint config, and checkpoint validations are added at runtime via the validations kwarg.\r\n\r\nI keep getting errors related to parsing the checkpoint configuration at some point after a number of batches & expectations have been successfully run for each checkpoint. I'm seeing various different errors occurring in run_checkpoint > get_checkpoint > get > deserialize > load related to ruamel yaml parsing depending on the retry.\r\n\r\n**To Reproduce**\r\nRun code like the following in a foreachBatch call during a Spark Structured Streaming application.\r\n```\r\ndef init_context(self):\r\n    if not self.context:\r\n        data_context_config = DataContextConfig(\r\n            store_backend_defaults=S3StoreBackendDefaults(default_bucket_name=\"fuse-expectations\")\r\n        )\r\n        context = BaseDataContext(project_config=data_context_config)\r\n\r\n        datasource_config = {\r\n            \"name\": f\"{self.suite_name}_datasource\",\r\n            \"class_name\": self.datasource_class,\r\n            \"execution_engine\": {\"class_name\": self.engine_class},\r\n            \"data_connectors\": {\r\n                f\"{self.suite_name}_batch_connector\": {\r\n                    \"module_name\": \"great_expectations.datasource.data_connector\",\r\n                    \"class_name\": self.connector_class,\r\n                    \"batch_identifiers\": self.batch_identifiers,\r\n                }\r\n            }\r\n        }\r\n        context.test_yaml_config(yaml.dump(datasource_config))\r\n        context.add_datasource(**datasource_config)\r\n\r\n        checkpoint_config = {\r\n            \"name\": self.checkpoint_name,\r\n            \"config_version\": 1,\r\n            \"class_name\": \"SimpleCheckpoint\",\r\n            \"run_name_template\": f\"%Y%m%d-%H%M%S-{self.suite_name}-checkpoint\",\r\n            \"runtime_configuration\": {\r\n                \"result_format\": {\r\n                    \"result_format\": \"COMPLETE\",\r\n                    \"include_unexpected_rows\": True\r\n                }\r\n            }\r\n        }\r\n        context.test_yaml_config(yaml.dump(checkpoint_config))\r\n        context.add_checkpoint(**checkpoint_config)\r\n        self.context = context\r\n...\r\n\r\ndef run_checkpoint(...): \r\n    self.init_context()\r\n    # batch_request normally returned elsewhere with same code\r\n    batch_request = RuntimeBatchRequest(\r\n        datasource_name=f\"{self.suite_name}_datasource\",\r\n        data_connector_name=f\"{self.suite_name}_batch_connector\",\r\n        data_asset_name=f\"{self.suite_name}\",\r\n        batch_identifiers={\r\n            \"environment\": os.environ.get(\"FUSE_ENV\") or 'dev',\r\n            \"epoch_id\": epoch_id\r\n        },\r\n        runtime_parameters={\"batch_data\": df}\r\n    )\r\n    checkpoint_validations = [{\"batch_request\": batch_request, \"expectation_suite_name\": self.suite_name}]\r\n    ...\r\n    return self.context.run_checkpoint(\r\n        checkpoint_name=self.checkpoint_name,\r\n        validations=checkpoint_validations\r\n    )\r\n```\r\n\r\nA subset of exceptions I have encountered are attached along with the checkpoint config as stored in the S3 backend immediately following the failures. **Interestingly, when downloaded, the checkpoint config is stored as JSON locally, though it is marked as yml in S3 for both suffix and type.**\r\n\r\n**Expected behavior**\r\nStructured streaming batches should be processed as normal without failing after a number of successful batches and therefore successful parsing of the checkpoint configuration.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 20.04.4 LTS\r\n  Java: Zulu 8.56.0.21-CA-linux64\r\n  Scala: 2.12.10\r\n  Python: 3.8.10\r\n  Delta Lake: 1.0.0\r\n\r\n - Great Expectations Version: 0.15.8\r\n\r\n**Additional context**\r\nRuntimes vary before failure. The longest I've seen is 59 minutes which amounts to approx. 20 batches. Sometimes it fails during the initial batch. Sometimes after just a few. TL;DR the time before exception is highly variable.\r\n\r\n[checkpoint-configs.zip](https://github.com/great-expectations/great_expectations/files/8871914/checkpoint-configs.zip)\r\n[exception_1.txt](https://github.com/great-expectations/great_expectations/files/8871925/exception_1.txt)\r\n[exception_2.txt](https://github.com/great-expectations/great_expectations/files/8871924/exception_2.txt)\r\n[exception_3.txt](https://github.com/great-expectations/great_expectations/files/8872219/exception_3.txt)\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5280/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5280/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5221", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5221/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5221/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5221/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/5221", "id": 1252886404, "node_id": "I_kwDOBiS_IM5KrYeE", "number": 5221, "title": "`TableExpectation.validate_metric_value_between_configuration` throws exception when comparting dicts", "user": {"login": "cbuffett", "id": 40184804, "node_id": "MDQ6VXNlcjQwMTg0ODA0", "avatar_url": "https://avatars.githubusercontent.com/u/40184804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbuffett", "html_url": "https://github.com/cbuffett", "followers_url": "https://api.github.com/users/cbuffett/followers", "following_url": "https://api.github.com/users/cbuffett/following{/other_user}", "gists_url": "https://api.github.com/users/cbuffett/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbuffett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbuffett/subscriptions", "organizations_url": "https://api.github.com/users/cbuffett/orgs", "repos_url": "https://api.github.com/users/cbuffett/repos", "events_url": "https://api.github.com/users/cbuffett/events{/privacy}", "received_events_url": "https://api.github.com/users/cbuffett/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-05-30T15:26:36Z", "updated_at": "2024-08-22T23:43:49Z", "closed_at": "2024-08-22T23:43:48Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe static method `validate_metric_value_between_configuration` has checks in place to validate that if the passed in min/max values are dictionaries, that they contain the `$PARAMETER` keyword, but then immediately attempts to compare said dictionaries using the `>` inequality operator, resulting in an exception:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nInput In [15], in <module>\r\n     98 print(eval_param_urn_min)\r\n     99 print(eval_param_urn_max)\r\n--> 100 validator_target.expect_column_min_to_be_between(col_name, min_value={'$PARAMETER': eval_param_urn_min}, max_value={'$PARAMETER': eval_param_urn_min})\r\n    101 validator_target.expect_column_max_to_be_between(col_name, min_value={'$PARAMETER': eval_param_urn_max}, max_value={'$PARAMETER': eval_param_urn_max})\r\n\r\nFile ~/.virtualenvs/great_expectations/lib/python3.8/site-packages/great_expectations/validator/validator.py:383, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    377         validation_result = ExpectationValidationResult(\r\n    378             success=False,\r\n    379             exception_info=exception_info,\r\n    380             expectation_config=configuration,\r\n    381         )\r\n    382     else:\r\n--> 383         raise err\r\n    384 return validation_result\r\n\r\nFile ~/.virtualenvs/great_expectations/lib/python3.8/site-packages/great_expectations/validator/validator.py:334, in Validator.validate_expectation.<locals>.inst_expectation(*args, **kwargs)\r\n    327     configuration.process_evaluation_parameters(\r\n    328         self._expectation_suite.evaluation_parameters,\r\n    329         True,\r\n    330         self._data_context,\r\n    331     )\r\n    333 try:\r\n--> 334     expectation = expectation_impl(configuration)\r\n    335     \"\"\"Given an implementation and a configuration for any Expectation, returns its validation result\"\"\"\r\n    337     if not self.interactive_evaluation and not self._active_validation:\r\n\r\nFile ~/.virtualenvs/great_expectations/lib/python3.8/site-packages/great_expectations/expectations/expectation.py:172, in Expectation.__init__(self, configuration)\r\n    168 def __init__(\r\n    169     self, configuration: Optional[ExpectationConfiguration] = None\r\n    170 ) -> None:\r\n    171     if configuration is not None:\r\n--> 172         self.validate_configuration(configuration)\r\n    173     self._configuration = configuration\r\n\r\nFile ~/.virtualenvs/great_expectations/lib/python3.8/site-packages/great_expectations/expectations/core/expect_column_min_to_be_between.py:213, in ExpectColumnMinToBeBetween.validate_configuration(self, configuration)\r\n    202 \"\"\"\r\n    203 Validates that a configuration has been set, and sets a configuration if it has yet to be set. Ensures that\r\n    204 necessary configuration arguments have been provided for the validation of the expectation.\r\n   (...)\r\n    210     None. Raises InvalidExpectationConfigurationError if the config is not validated successfully\r\n    211 \"\"\"\r\n    212 super().validate_configuration(configuration=configuration)\r\n--> 213 self.validate_metric_value_between_configuration(configuration=configuration)\r\n\r\nFile ~/.virtualenvs/great_expectations/lib/python3.8/site-packages/great_expectations/expectations/expectation.py:1613, in TableExpectation.validate_metric_value_between_configuration(configuration)\r\n   1610 except AssertionError as e:\r\n   1611     raise InvalidExpectationConfigurationError(str(e))\r\n-> 1613 if min_val is not None and max_val is not None and min_val > max_val:\r\n   1614     raise InvalidExpectationConfigurationError(\r\n   1615         \"Minimum Threshold cannot be larger than Maximum Threshold\"\r\n   1616     )\r\n   1618 return True\r\n\r\nTypeError: '>' not supported between instances of 'dict' and 'dict'\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nAttempt to use the expect_column_min_to_be_between expectation with evaluation parameters\r\n\r\n**Expected behavior**\r\nEvaluation parameters should be substituted prior to inequality check or dictionaries should be handled separately.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Ubuntu 20 (Windows WSL2)\r\n - Great Expectations Version: 0.15.4\r\n\r\n**Additional context**\r\nIn this case, interactive evaluation was disabled.\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5221/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/5221/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4965", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4965/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4965/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4965/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4965", "id": 1216441977, "node_id": "I_kwDOBiS_IM5IgW55", "number": 4965, "title": "Testing YAML config takes significant amount of time when partitioning large table", "user": {"login": "cbuffett", "id": 40184804, "node_id": "MDQ6VXNlcjQwMTg0ODA0", "avatar_url": "https://avatars.githubusercontent.com/u/40184804?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbuffett", "html_url": "https://github.com/cbuffett", "followers_url": "https://api.github.com/users/cbuffett/followers", "following_url": "https://api.github.com/users/cbuffett/following{/other_user}", "gists_url": "https://api.github.com/users/cbuffett/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbuffett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbuffett/subscriptions", "organizations_url": "https://api.github.com/users/cbuffett/orgs", "repos_url": "https://api.github.com/users/cbuffett/repos", "events_url": "https://api.github.com/users/cbuffett/events{/privacy}", "received_events_url": "https://api.github.com/users/cbuffett/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2022-04-26T20:27:50Z", "updated_at": "2024-08-22T23:43:19Z", "closed_at": "2024-08-22T23:43:19Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen testing a YAML config that defines a table partition, Great Expectations executes a `SELECT DISTINCT <partition columns> FROM <table>` query. For a large table (nearly half a trillion rows), that takes a significant amount of time (on the order of hours). This also appears to happen when fetching the validator, even if the batch_request specifies a single partition. It appears this is the result of `ConfiguredAssetSqlDataConnector.get_batch_definition_list_from_batch_request()` refreshing its data reference cache, which attempts to fetch all partitions.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Define a datasource YAML config with a `tables` section that partitions a very large table on multiple columns (e.g., date, hour, project_id).\r\n```\r\ndatasource_yaml = f\"\"\"\r\nname: {datasource_name}\r\nclass_name: SimpleSqlalchemyDatasource\r\ncredentials:\r\n  host: {snowflake_host}\r\n  username: {snowflake_user}\r\n  password: {snowflake_password}\r\n  database: {snowflake_db}\r\n  query:\r\n    schema: {snowflake_schema}\r\n    warehouse: {snowflake_warehouse}\r\n    role: {snowflake_role}\r\n  connect_args:\r\n    authenticator: {snowflake_authenticator}\r\n  drivername: snowflake\r\n      \r\ntables:  # Each key in the \"tables\" section is a table_name (key name \"tables\" in \"SimpleSqlalchemyDatasource\" configuration is reserved).\r\n  project:\r\n    partitioners:\r\n      project_by_date_and_hour:\r\n        include_schema_name: true\r\n        schema_name: {snowflake_schema}\r\n        data_asset_name_suffix: _project_id\r\n        splitter_method: _split_on_multi_column_values\r\n        splitter_kwargs:\r\n          column_names: [date, hour, project_id]\r\n\"\"\"\r\n```\r\n2. Validate the YAML config using `context.test_yaml_config` or attempt to fetch a validator using a batch request that specifies a single partition via `batch_filter_parameters`\r\n3. Generated query to populate reference cache will attempt to fetch all partitions, even in the case that a single partition is specified, which can take a significant amount of time for large tables with high cardinality across the partition columns\r\n\r\n**Expected behavior**\r\nOptions to limit/disable cache refreshing or otherwise improve performance\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Linux\r\n - Great Expectations Version: 0.15.2\r\n - DB: Snowflake\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4965/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4965/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4850", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4850/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4850/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4850/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4850", "id": 1202107098, "node_id": "I_kwDOBiS_IM5HprLa", "number": 4850, "title": "[DOCS] Update Athena docs to include `create_temp_table: True` in `batch_request_passthrough`", "user": {"login": "rdodev", "id": 1234335, "node_id": "MDQ6VXNlcjEyMzQzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1234335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdodev", "html_url": "https://github.com/rdodev", "followers_url": "https://api.github.com/users/rdodev/followers", "following_url": "https://api.github.com/users/rdodev/following{/other_user}", "gists_url": "https://api.github.com/users/rdodev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdodev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdodev/subscriptions", "organizations_url": "https://api.github.com/users/rdodev/orgs", "repos_url": "https://api.github.com/users/rdodev/repos", "events_url": "https://api.github.com/users/rdodev/events{/privacy}", "received_events_url": "https://api.github.com/users/rdodev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2022-04-12T16:44:58Z", "updated_at": "2025-01-23T14:20:27Z", "closed_at": "2022-09-23T16:25:18Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nRecently we've added the ability to our Athena to pass a flag to create temp tables, which can be passed to the batch request. However, this change hasn't made its way to the Athena documentation.\r\n", "closed_by": {"login": "rdodev", "id": 1234335, "node_id": "MDQ6VXNlcjEyMzQzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1234335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdodev", "html_url": "https://github.com/rdodev", "followers_url": "https://api.github.com/users/rdodev/followers", "following_url": "https://api.github.com/users/rdodev/following{/other_user}", "gists_url": "https://api.github.com/users/rdodev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdodev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdodev/subscriptions", "organizations_url": "https://api.github.com/users/rdodev/orgs", "repos_url": "https://api.github.com/users/rdodev/repos", "events_url": "https://api.github.com/users/rdodev/events{/privacy}", "received_events_url": "https://api.github.com/users/rdodev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4850/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4850/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4847", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4847/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4847/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4847/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4847", "id": 1201941995, "node_id": "I_kwDOBiS_IM5HpC3r", "number": 4847, "title": "Checking date ranges since current method will be deprecated", "user": {"login": "ejohnson-amerilife", "id": 91281177, "node_id": "MDQ6VXNlcjkxMjgxMTc3", "avatar_url": "https://avatars.githubusercontent.com/u/91281177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ejohnson-amerilife", "html_url": "https://github.com/ejohnson-amerilife", "followers_url": "https://api.github.com/users/ejohnson-amerilife/followers", "following_url": "https://api.github.com/users/ejohnson-amerilife/following{/other_user}", "gists_url": "https://api.github.com/users/ejohnson-amerilife/gists{/gist_id}", "starred_url": "https://api.github.com/users/ejohnson-amerilife/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ejohnson-amerilife/subscriptions", "organizations_url": "https://api.github.com/users/ejohnson-amerilife/orgs", "repos_url": "https://api.github.com/users/ejohnson-amerilife/repos", "events_url": "https://api.github.com/users/ejohnson-amerilife/events{/privacy}", "received_events_url": "https://api.github.com/users/ejohnson-amerilife/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2022-04-12T14:32:14Z", "updated_at": "2024-03-24T09:17:51Z", "closed_at": "2023-03-08T15:28:40Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nI would like to check that a datetime column is within a range dates since it looks like this functionality will be deprecated in a future release (see below).\r\n\r\n**Describe the solution you'd like**\r\nI would like to have an expectation, or an adaptation to an existing expectation that allows me to check that a datetime column is within a range of dates.\r\n\r\n**Describe alternatives you've considered**\r\nCurrently i am using the expectation `expect_column_values_to_be_between` with the parameter `parse_strings_as_datetimes=True`, however this will be deprecated soon as indicated by the message:\r\n`The parameter \"parse_strings_as_datetimes\" is no longer supported and will be deprecated in a future release.  Please update code accordingly.`\r\n", "closed_by": {"login": "rdodev", "id": 1234335, "node_id": "MDQ6VXNlcjEyMzQzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1234335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdodev", "html_url": "https://github.com/rdodev", "followers_url": "https://api.github.com/users/rdodev/followers", "following_url": "https://api.github.com/users/rdodev/following{/other_user}", "gists_url": "https://api.github.com/users/rdodev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdodev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdodev/subscriptions", "organizations_url": "https://api.github.com/users/rdodev/orgs", "repos_url": "https://api.github.com/users/rdodev/repos", "events_url": "https://api.github.com/users/rdodev/events{/privacy}", "received_events_url": "https://api.github.com/users/rdodev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4847/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4847/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4692", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4692/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4692/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4692/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4692", "id": 1193391494, "node_id": "I_kwDOBiS_IM5HIbWG", "number": 4692, "title": "Validator validates only the last batch from the batch list in a batch request", "user": {"login": "ishitarakshit", "id": 15930225, "node_id": "MDQ6VXNlcjE1OTMwMjI1", "avatar_url": "https://avatars.githubusercontent.com/u/15930225?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ishitarakshit", "html_url": "https://github.com/ishitarakshit", "followers_url": "https://api.github.com/users/ishitarakshit/followers", "following_url": "https://api.github.com/users/ishitarakshit/following{/other_user}", "gists_url": "https://api.github.com/users/ishitarakshit/gists{/gist_id}", "starred_url": "https://api.github.com/users/ishitarakshit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ishitarakshit/subscriptions", "organizations_url": "https://api.github.com/users/ishitarakshit/orgs", "repos_url": "https://api.github.com/users/ishitarakshit/repos", "events_url": "https://api.github.com/users/ishitarakshit/events{/privacy}", "received_events_url": "https://api.github.com/users/ishitarakshit/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205982396, "node_id": "MDU6TGFiZWwzMjA1OTgyMzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-engineering-queue", "name": "core-engineering-queue", "color": "474051", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-04-05T15:55:59Z", "updated_at": "2024-08-22T23:42:44Z", "closed_at": "2024-08-22T23:42:44Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "Validator is expected to run the expectation suite against all the batches in the batch_request. But it runs the expectations through the last batch only and returns the result for that batch.\r\n\r\n### Explanation with example: \r\nInput files : \r\n    Titanic1.csv: has 1313 lines\r\n    Titanic2.csv: has 813 lines\r\nyaml:\r\n```\r\nexample_yaml = f\"\"\"\r\nname: {datasource_name}\r\nclass_name: Datasource\r\nexecution_engine:\r\n  class_name: SparkDFExecutionEngine\r\ndata_connectors:\r\n  titanic_data_connector:\r\n    class_name: InferredAssetFilesystemDataConnector\r\n    base_directory: <path to directory containing files>\r\n    default_regex:\r\n      group_names: \r\n        - data_asset_name\r\n        - number\r\n      pattern: (.*)_(.*)\\.csv\r\n  default_runtime_data_connector_name:\r\n    class_name: RuntimeDataConnector\r\n    batch_identifiers:\r\n      - default_identifier_name\r\n\"\"\"\r\n```\r\n\r\nAvailable data assets:\r\n\r\n```\r\nExecutionEngine class name: SparkDFExecutionEngine\r\nData Connectors:\r\n    default_runtime_data_connector_name:RuntimeDataConnector\r\n\r\n    Available data_asset_names (0 of 0):\r\n        Note : RuntimeDataConnector will not have data_asset_names until they are passed in through RuntimeBatchRequest\r\n\r\n    Unmatched data_references (0 of 0): []\r\n\r\n    titanic_data_connector : InferredAssetFilesystemDataConnector\r\n\r\n    Available data_asset_names (1 of 1):\r\n        Titanic (2 of 2): ['Titanic_1.csv', 'Titanic_2.csv']\r\n\r\n    Unmatched data_references (0 of 0):[]\r\n```\r\nBatch request with 2 batches:\r\n\r\n```\r\nfrom great_expectations.core.batch import Batch, BatchRequest, RuntimeBatchRequest\r\nfrom typing import List\r\n\r\nbatch_request = BatchRequest(\r\n    datasource_name=\"titanic_datasource\",\r\n    data_connector_name=\"titanic_data_connector\",\r\n    data_asset_name=\"Titanic\",\r\n    batch_spec_passthrough={\"reader_method\": \"csv\",\"reader_options\": {\"header\": True}},\r\n)\r\n\r\nbatch_list: List[Batch] = context.get_batch_list(batch_request=batch_request)\r\nprint(len(batch_list)) -- prints 2\r\n```\r\nExpectation suite has just 1 expectation checking row count to be equal to 813 (number of lines in 2nd csv file)\r\n```\r\ntitanic_suite=\"titanic_expectation_suite\"\r\ncontext.get_expectation_suite(\r\n    expectation_suite_name=titanic_suite\r\n)\r\n\r\n{\r\n  \"ge_cloud_id\": null,\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.14.9\"\r\n  },\r\n  \"expectation_suite_name\": \"titanic_expectation_suite\",\r\n  \"expectations\": [\r\n    {\r\n      \"meta\": {},\r\n      \"kwargs\": {\r\n        \"value\": 813\r\n      },\r\n      \"expectation_type\": \"expect_table_row_count_to_equal\"\r\n    }\r\n  ],\r\n  \"data_asset_type\": null\r\n}\r\n```\r\nValidator validates only the active batch which is always the last batch and returns success: true and success_percent: 100.0\r\n```\r\nvalidator = context.get_validator(\r\n    batch_request=batch_request, expectation_suite_name=titanic_suite\r\n)\r\nvalidator.validate(data_context=context)\r\n\r\nCalculating Metrics: 100%\r\n2/2 [00:00<00:00, 10.07it/s]\r\n{\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.14.9\",\r\n    \"expectation_suite_name\": \"titanic_expectation_suite\",\r\n    \"run_id\": {\r\n      \"run_time\": \"2022-04-04T19:40:25.798767+00:00\",\r\n      \"run_name\": null\r\n    },\r\n    \"batch_spec\": {\r\n      \"path\": \"<path to directory>/Titanic_2.csv\",\r\n      \"reader_method\": \"csv\",\r\n      \"reader_options\": {\r\n        \"header\": true\r\n      }\r\n    },\r\n    \"batch_markers\": {\r\n      \"ge_load_time\": \"20220404T194021.724769Z\"\r\n    },\r\n    \"active_batch_definition\": {\r\n      \"datasource_name\": \"titanic_datasource\",\r\n      \"data_connector_name\": \"titanic_data_connector\",\r\n      \"data_asset_name\": \"Titanic\",\r\n      \"batch_identifiers\": {\r\n        \"number\": \"2\"\r\n      }\r\n    },\r\n    \"validation_time\": \"20220404T194025.798673Z\"\r\n  },\r\n  \"results\": [\r\n    {\r\n      \"meta\": {},\r\n      \"exception_info\": {\r\n        \"raised_exception\": false,\r\n        \"exception_traceback\": null,\r\n        \"exception_message\": null\r\n      },\r\n      \"success\": true,\r\n      \"expectation_config\": {\r\n        \"meta\": {},\r\n        \"kwargs\": {\r\n          \"value\": 813,\r\n          \"batch_id\": \"2dc991c03fcc121deb085ac0a7fdf412\"\r\n        },\r\n        \"expectation_type\": \"expect_table_row_count_to_equal\"\r\n      },\r\n      \"result\": {\r\n        \"observed_value\": 813\r\n      }\r\n    }\r\n  ],\r\n  \"evaluation_parameters\": {},\r\n  \"success\": true,\r\n  \"statistics\": {\r\n    \"evaluated_expectations\": 1,\r\n    \"successful_expectations\": 1,\r\n    \"unsuccessful_expectations\": 0,\r\n    \"success_percent\": 100.0\r\n  }\r\n}\r\n```\r\nExpected: Validate results should display values for both batches -\r\n    success: false for 1 batch \r\n    success: true for 1 batch\r\n    success_percent: 50.0\r\n\r\n### In current code:\r\nIn validator code:\r\n\r\nAll the expectations are added once regardless of number of batches:\r\nhttps://github.com/great-expectations/great_expectations/blob/01cc5afc5acfe0ff434e36ef63ddd19dd84d6aa9/great_expectations/validator/validator.py#L1803\r\n\r\nThe active_batch_id is set here:\r\nhttps://github.com/great-expectations/great_expectations/blob/01cc5afc5acfe0ff434e36ef63ddd19dd84d6aa9/great_expectations/validator/validator.py#L890\r\n\r\n### Probable solution:\r\nExpectations should be added per batch to track the status for each batch\r\n\r\n```\r\nconfigurations_with_batch_ids = []\r\n\r\n        for i in range(len(self.loaded_batch_ids)):\r\n            for config in configurations:\r\n                new_config = copy.deepcopy(config)\r\n                new_config.kwargs[\"batch_id\"]=self.loaded_batch_ids[i]\r\n                configurations_with_batch_ids.append(new_config)\r\n```\r\nupdated graph_validate() including above code snippet:\r\n\r\n```\r\ndef graph_validate(\r\n        self,\r\n        configurations: List[ExpectationConfiguration],\r\n        metrics: Optional[Dict[Tuple[str, str, str], Any]] = None,\r\n        runtime_configuration: Optional[dict] = None,\r\n    ) -> List[ExpectationValidationResult]:\r\n        \"\"\"Obtains validation dependencies for each metric using the implementation of their associated expectation,\r\n        then proceeds to add these dependencies to the validation graph, supply readily available metric implementations\r\n        to fulfill current metric requirements, and validate these metrics.\r\n\r\n                Args:\r\n                    configurations(List[ExpectationConfiguration]): A list of needed Expectation Configurations that\r\n                    will be used to supply domain and values for metrics.\r\n                    metrics (dict): A list of currently registered metrics in the registry\r\n                    runtime_configuration (dict): A dictionary of runtime keyword arguments, controlling semantics\r\n                    such as the result_format.\r\n\r\n                Returns:\r\n                    A list of Validations, validating that all necessary metrics are available.\r\n        \"\"\"\r\n        if runtime_configuration is None:\r\n            runtime_configuration = {}\r\n\r\n        if runtime_configuration.get(\"catch_exceptions\", True):\r\n            catch_exceptions = True\r\n        else:\r\n            catch_exceptions = False\r\n\r\n        configurations_with_batch_ids = []\r\n\r\n        for i in range(len(self.loaded_batch_ids)):\r\n            for config in configurations:\r\n                new_config = copy.deepcopy(config)\r\n                new_config.kwargs[\"batch_id\"]=self.loaded_batch_ids[i]\r\n                configurations_with_batch_ids.append(new_config)\r\n\r\n        evrs: List[ExpectationValidationResult]\r\n\r\n        expectation_validation_graphs: List[ExpectationValidationGraph] = []\r\n\r\n        processed_configurations: List[ExpectationConfiguration] = []\r\n        (\r\n            evrs,\r\n            processed_configurations,\r\n        ) = self._generate_metric_dependency_subgraphs_for_each_expectation_configuration(\r\n            expectation_configurations=configurations_with_batch_ids,\r\n            expectation_validation_graphs=expectation_validation_graphs,\r\n            processed_configurations=processed_configurations,\r\n            catch_exceptions=catch_exceptions,\r\n            runtime_configuration=runtime_configuration,\r\n        )\r\n\r\n        if metrics is None:\r\n            metrics = {}\r\n\r\n        graph: ValidationGraph = (\r\n            self._generate_suite_level_graph_from_expectation_level_sub_graphs(\r\n                expectation_validation_graphs=expectation_validation_graphs\r\n            )\r\n        )\r\n\r\n        try:\r\n            (\r\n                evrs,\r\n                processed_configurations,\r\n            ) = self._resolve_suite_level_graph_and_process_metric_evaluation_errors(\r\n                validation_graph=graph,\r\n                metrics=metrics,\r\n                runtime_configuration=runtime_configuration,\r\n                expectation_validation_graphs=expectation_validation_graphs,\r\n                evrs=evrs,\r\n                processed_configurations=processed_configurations,\r\n            )\r\n        except Exception as err:\r\n            # If a general Exception occurs during the execution of \"Validator.resolve_validation_graph()\", then all\r\n            # expectations in the suite are impacted, because it is impossible to attribute the failure to a metric.\r\n            if catch_exceptions:\r\n                exception_traceback: str = traceback.format_exc()\r\n                evrs = self._catch_exceptions_in_failing_expectation_validations(\r\n                    exception_traceback=exception_traceback,\r\n                    exception=err,\r\n                    failing_expectation_configurations=processed_configurations,\r\n                    evrs=evrs,\r\n                )\r\n                return evrs\r\n            else:\r\n                raise err\r\n\r\n        configuration: ExpectationConfiguration\r\n        result: ExpectationValidationResult\r\n        for configuration in processed_configurations:\r\n            try:\r\n                result = configuration.metrics_validate(\r\n                    metrics,\r\n                    execution_engine=self._execution_engine,\r\n                    runtime_configuration=runtime_configuration,\r\n                )\r\n                evrs.append(result)\r\n            except Exception as err:\r\n                if catch_exceptions:\r\n                    exception_traceback: str = traceback.format_exc()\r\n                    evrs = self._catch_exceptions_in_failing_expectation_validations(\r\n                        exception_traceback=exception_traceback,\r\n                        exception=err,\r\n                        failing_expectation_configurations=[configuration],\r\n                        evrs=evrs,\r\n                    )\r\n                else:\r\n                    raise err\r\n\r\n        return evrs\r\n```\r\n### New results:\r\n\r\nvalidator.validate(data_context=context)\r\n```\r\nCalculating Metrics: 100%\r\n4/4 [00:00<00:00, 7.51it/s]\r\n{\r\n  \"results\": [\r\n    {\r\n      \"result\": {\r\n        \"observed_value\": 1313\r\n      },\r\n      \"expectation_config\": {\r\n        \"kwargs\": {\r\n          \"value\": 813,\r\n          \"batch_id\": \"3b93886569d08c88c34ba31a08be83e4\"\r\n        },\r\n        \"expectation_type\": \"expect_table_row_count_to_equal\",\r\n        \"meta\": {}\r\n      },\r\n      \"exception_info\": {\r\n        \"raised_exception\": false,\r\n        \"exception_traceback\": null,\r\n        \"exception_message\": null\r\n      },\r\n      \"success\": false,\r\n      \"meta\": {}\r\n    },\r\n    {\r\n      \"result\": {\r\n        \"observed_value\": 813\r\n      },\r\n      \"expectation_config\": {\r\n        \"kwargs\": {\r\n          \"value\": 813,\r\n          \"batch_id\": \"2dc991c03fcc121deb085ac0a7fdf412\"\r\n        },\r\n        \"expectation_type\": \"expect_table_row_count_to_equal\",\r\n        \"meta\": {}\r\n      },\r\n      \"exception_info\": {\r\n        \"raised_exception\": false,\r\n        \"exception_traceback\": null,\r\n        \"exception_message\": null\r\n      },\r\n      \"success\": true,\r\n      \"meta\": {}\r\n    }\r\n  ],\r\n  \"statistics\": {\r\n    \"evaluated_expectations\": 2,\r\n    \"successful_expectations\": 1,\r\n    \"unsuccessful_expectations\": 1,\r\n    \"success_percent\": 50.0\r\n  },\r\n  \"evaluation_parameters\": {},\r\n  \"success\": false,\r\n  \"meta\": {\r\n    \"great_expectations_version\": \"0.14.12+29.g01cc5afc5.dirty\",\r\n    \"expectation_suite_name\": \"titanic_expectation_suite\",\r\n    \"run_id\": {\r\n      \"run_time\": \"2022-04-04T19:38:23.062930+00:00\",\r\n      \"run_name\": null\r\n    },\r\n    \"batch_spec\": {\r\n      \"path\": \"<path to directory>/Titanic_2.csv\",\r\n      \"reader_method\": \"csv\",\r\n      \"reader_options\": {\r\n        \"header\": true\r\n      }\r\n    },\r\n    \"batch_markers\": {\r\n      \"ge_load_time\": \"20220404T193817.580029Z\"\r\n    },\r\n    \"active_batch_definition\": {\r\n      \"datasource_name\": \"titanic_datasource\",\r\n      \"data_connector_name\": \"titanic_data_connector\",\r\n      \"data_asset_name\": \"Titanic\",\r\n      \"batch_identifiers\": {\r\n        \"number\": \"2\"\r\n      }\r\n    },\r\n    \"validation_time\": \"20220404T193823.062810Z\"\r\n  }\r\n}\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4692/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4692/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4305", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4305/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4305/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4305/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4305", "id": 1155457671, "node_id": "I_kwDOBiS_IM5E3uKH", "number": 4305, "title": "Misleading exception catching", "user": {"login": "akerone", "id": 3759202, "node_id": "MDQ6VXNlcjM3NTkyMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3759202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akerone", "html_url": "https://github.com/akerone", "followers_url": "https://api.github.com/users/akerone/followers", "following_url": "https://api.github.com/users/akerone/following{/other_user}", "gists_url": "https://api.github.com/users/akerone/gists{/gist_id}", "starred_url": "https://api.github.com/users/akerone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akerone/subscriptions", "organizations_url": "https://api.github.com/users/akerone/orgs", "repos_url": "https://api.github.com/users/akerone/repos", "events_url": "https://api.github.com/users/akerone/events{/privacy}", "received_events_url": "https://api.github.com/users/akerone/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2022-03-01T15:11:16Z", "updated_at": "2024-08-22T23:38:49Z", "closed_at": "2024-08-22T23:38:49Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nIn great_expectations/data_context/store/store_backend.py, _at least_ from versions 0.14.0 to 0.14.8, line 103. \r\n\r\nThis exception tells us that there is something wrong in great_expectations.yaml, when in reality it could be anything. In our case, it was a missing requirement to the `google-cloud-storage` library from pip. Without a proper stack trace, it took us too much time to trace down.\r\n \r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Create a new venv\r\n2. Install great expectations\r\n3. Configure a Store to read from GCS (with `google-cloud-storage` not installed)\r\n4. Try following the notebook after `great_expectations datasource new`\r\n\r\n**Expected behavior**\r\nPrinting the full stack trace of the error that occurred, rather than just a simple warning text.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows 10\r\n - Great Expectations Version: 0.14.0 to 0.14.8 (ad minimum)\r\n\r\n**Additional context**\r\n![image (1)](https://user-images.githubusercontent.com/3759202/156194449-1fa7c75c-853e-4c9d-bea6-dd924a8e0ea8.png)\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4305/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4305/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4225", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4225/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4225/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4225/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4225", "id": 1140791857, "node_id": "I_kwDOBiS_IM5D_xox", "number": 4225, "title": "Instantiate class from config raise error when instantiate class: Checkpoint with config ", "user": {"login": "viplazylmht", "id": 20496271, "node_id": "MDQ6VXNlcjIwNDk2Mjcx", "avatar_url": "https://avatars.githubusercontent.com/u/20496271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/viplazylmht", "html_url": "https://github.com/viplazylmht", "followers_url": "https://api.github.com/users/viplazylmht/followers", "following_url": "https://api.github.com/users/viplazylmht/following{/other_user}", "gists_url": "https://api.github.com/users/viplazylmht/gists{/gist_id}", "starred_url": "https://api.github.com/users/viplazylmht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/viplazylmht/subscriptions", "organizations_url": "https://api.github.com/users/viplazylmht/orgs", "repos_url": "https://api.github.com/users/viplazylmht/repos", "events_url": "https://api.github.com/users/viplazylmht/events{/privacy}", "received_events_url": "https://api.github.com/users/viplazylmht/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-17T02:23:28Z", "updated_at": "2024-08-22T23:42:33Z", "closed_at": "2024-08-22T23:42:33Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nI'm running GE on Airflow by using GreatExpectationOperator. Things work well until I upgrade GE to v 0.14.6, then I can't instantiate a runtime BaseDataContext with context Config and checkpoint Config. \r\n\r\nI debug and found the problem is caused by instantiate_class_from_config `__init__()`.\r\nI moved the hole code back to local Linux environment for testing but the bug still exist.\r\n\r\n\r\n**To Reproduce**\r\n1. Instance a runtime data_context via config\r\n```python\r\nfrom great_expectations.data_context import BaseDataContext\r\ncontext = BaseDataContext(project_config=data_context_config)\r\n\r\ntype(context)\r\n# great_expectations.data_context.data_context.BaseDataContext\r\n```  \r\n2. Create checkpoint (the code is nearly same as the part of [GE Operator](https://github.com/great-expectations/airflow-provider-great-expectations/blob/cd66bf63bd406be2af973e8ebac0925dc60f347a/great_expectations_provider/operators/great_expectations.py#L35)\r\n```python\r\ntype(cpoint)\r\n# great_expectations.data_context.types.base.CheckpointConfig\r\n\r\nfrom great_expectations.data_context.util import instantiate_class_from_config\r\ncpj = cpoint.to_json_dict()\r\n\r\ncheckpoint = instantiate_class_from_config(\r\n          config=cpj,\r\n          runtime_environment={\"data_context\": context},\r\n          config_defaults={\"module_name\": \"great_expectations.checkpoint\"},\r\n      )\r\n\r\n# TypeError: Couldn't instantiate class: Checkpoint with config:\r\n# ...\r\n# TypeError: __init__() got an unexpected keyword argument 'site_names'\r\n```\r\nYes, I found a outstanding move here: Why we need convert `cpoint` from `CheckpointConfig` back to `json`, then pass to init `Checkpoint`?   \r\n \r\n**Expected behavior**\r\nInstantiate successfully Checkpoint via config (expected via `CheckpointConfig` instead of `json`).\r\n\r\n**Temporary fix**\r\nI removed 4 keys in `json_dict` that make the error before instantiate_class_from_config:\r\n```python\r\ndel cpj['notify_with']\r\ndel cpj['slack_webhook']\r\ndel cpj['notify_on']\r\ndel cpj['site_names']\r\n\r\ncheckpoint = instantiate_class_from_config( ... )\r\n\r\ntype(checkpoint)\r\n# great_expectations.checkpoint.checkpoint.Checkpoint\r\n```\r\nI call it *temporary fix* because I don't use these configs which make the error now, but maybe I will use it in the future.  \r\n\r\n**Environment:**\r\n - Operating System: Linux, Airflow\r\n - Great Expectations Version: 0.14.6\r\n\r\n**Additional context**\r\nI use `RuntimeDataConnector` to connect to a BigQuery data source.\r\n\r\nStack trace:\r\n```python\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\nFile ~/.local/lib/python3.8/site-packages/great_expectations/data_context/util.py:115, in instantiate_class_from_config(config, runtime_environment, config_defaults)\r\n    114 try:\r\n--> 115     class_instance = class_(**config_with_defaults)\r\n    116 except TypeError as e:\r\n\r\nTypeError: __init__() got an unexpected keyword argument 'site_names'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTypeError                                 Traceback (most recent call last)\r\nInput In [19], in <module>\r\n----> 1 checkpoint = instantiate_class_from_config(\r\n      2           config=cpj,\r\n      3           runtime_environment={\"data_context\": context},\r\n      4           config_defaults={\"module_name\": \"great_expectations.checkpoint\"},\r\n      5       )\r\n\r\nFile ~/.local/lib/python3.8/site-packages/great_expectations/data_context/util.py:117, in instantiate_class_from_config(config, runtime_environment, config_defaults)\r\n    115     class_instance = class_(**config_with_defaults)\r\n    116 except TypeError as e:\r\n--> 117     raise TypeError(\r\n    118         \"Couldn't instantiate class: {} with config: \\n\\t{}\\n \\n\".format(\r\n    119             class_name, format_dict_for_error_message(config_with_defaults)\r\n    120         )\r\n    121         + str(e)\r\n    122     )\r\n    124 return class_instance\r\n\r\nTypeError: Couldn't instantiate class: Checkpoint with config: \r\n```  ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4225/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4225/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4188", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4188/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4188/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4188/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4188", "id": 1132902467, "node_id": "I_kwDOBiS_IM5DhrhD", "number": 4188, "title": "No \"next\" button in tutorial intro", "user": {"login": "masonhopkins", "id": 77858111, "node_id": "MDQ6VXNlcjc3ODU4MTEx", "avatar_url": "https://avatars.githubusercontent.com/u/77858111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masonhopkins", "html_url": "https://github.com/masonhopkins", "followers_url": "https://api.github.com/users/masonhopkins/followers", "following_url": "https://api.github.com/users/masonhopkins/following{/other_user}", "gists_url": "https://api.github.com/users/masonhopkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/masonhopkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masonhopkins/subscriptions", "organizations_url": "https://api.github.com/users/masonhopkins/orgs", "repos_url": "https://api.github.com/users/masonhopkins/repos", "events_url": "https://api.github.com/users/masonhopkins/events{/privacy}", "received_events_url": "https://api.github.com/users/masonhopkins/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2022-02-11T17:39:50Z", "updated_at": "2025-01-23T14:20:43Z", "closed_at": "2022-03-09T21:06:17Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nUsers cannot proceed through the [getting started tutorial](https://docs.greatexpectations.io/docs/tutorials/getting_started/intro) due to the \"Next\" button missing.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to https://docs.greatexpectations.io/docs/tutorials/getting_started/intro\r\n2. See that there is a \"Next\" button mentioned, but nothing found and no ability to proceed in the tutorial.\r\n\r\n**Expected behavior**\r\nA next button to proceed through the tutorial.\r\n\r\n**Environment (please complete the following information):**\r\nGoogle Chrome Version 95.0.4638.54 (Official Build) (x86_64)\r\n\r\n**Additional context**\r\nN/A\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4188/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4188/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4152", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4152/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4152/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4152/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4152", "id": 1128225670, "node_id": "I_kwDOBiS_IM5DP1uG", "number": 4152, "title": "Documentation using deprecated function of ruamel.yaml", "user": {"login": "AvdN", "id": 1210650, "node_id": "MDQ6VXNlcjEyMTA2NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1210650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AvdN", "html_url": "https://github.com/AvdN", "followers_url": "https://api.github.com/users/AvdN/followers", "following_url": "https://api.github.com/users/AvdN/following{/other_user}", "gists_url": "https://api.github.com/users/AvdN/gists{/gist_id}", "starred_url": "https://api.github.com/users/AvdN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AvdN/subscriptions", "organizations_url": "https://api.github.com/users/AvdN/orgs", "repos_url": "https://api.github.com/users/AvdN/repos", "events_url": "https://api.github.com/users/AvdN/events{/privacy}", "received_events_url": "https://api.github.com/users/AvdN/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}, {"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 3815245640, "node_id": "LA_kwDOBiS_IM7jaAdI", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/maintenance", "name": "maintenance", "color": "AE61B8", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2022-02-09T08:48:42Z", "updated_at": "2024-08-22T23:42:23Z", "closed_at": "2024-08-22T23:42:23Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "https://github.com/great-expectations/great_expectations/blob/341a9a5f238dc2c05be7c2b3c3cc4e42440230c5/tests/integration/docusaurus/connecting_to_your_data/database/snowflake_python_example.py#L42\r\n\r\nI came across the line above, through a question on stack-overflow ( https://stackoverflow.com/questions/71029745/unable-to-initialize-snowflake-data-source/71045925#71045925 ) which was tagged with ruamel.yaml ( I am the author of that package).\r\nThe line uses the function `ruamel.yaml.yaml` and that is deprecated, the correct thing to do would be to method `.dump()` on a `ruamel.yaml.YAML()` instance together with the `transform` parameter:\r\n```\r\nfrom ruamel.yaml import YAML\r\n\r\nyaml = YAML()\r\nyaml.dump(datasource_config, sys.stdout, transform=context.test_yaml_config)\r\n```\r\n\r\nAfter answering that question I looked at the source code for great_expectations and noticed `YAML()` is used in the source code, but that there are many entries doing `from ruamel import yaml` in the docusaurus subdirs. \r\n\r\nFortunately you pin ruamel.yaml ( `>=0.16,<0.17.18`) but IMO you should update the documentation ASAP so people will no longer create new usage of deprecation. \r\n\r\nI am willing to make a PR fixing all these, but I am not sure how to test the documentation, so I would need some assistance if that is required. I rather not make a PR for ~75  files and get it rejected.\r\n\r\n\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4152/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4152/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4119", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4119/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4119/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4119/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4119", "id": 1123334689, "node_id": "I_kwDOBiS_IM5C9Loh", "number": 4119, "title": "Please don't turn on DeprecationWarnings", "user": {"login": "jobevers", "id": 2380127, "node_id": "MDQ6VXNlcjIzODAxMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/2380127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jobevers", "html_url": "https://github.com/jobevers", "followers_url": "https://api.github.com/users/jobevers/followers", "following_url": "https://api.github.com/users/jobevers/following{/other_user}", "gists_url": "https://api.github.com/users/jobevers/gists{/gist_id}", "starred_url": "https://api.github.com/users/jobevers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jobevers/subscriptions", "organizations_url": "https://api.github.com/users/jobevers/orgs", "repos_url": "https://api.github.com/users/jobevers/repos", "events_url": "https://api.github.com/users/jobevers/events{/privacy}", "received_events_url": "https://api.github.com/users/jobevers/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2022-02-03T17:00:55Z", "updated_at": "2024-08-22T23:42:01Z", "closed_at": "2024-08-22T23:42:01Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "https://github.com/great-expectations/great_expectations/blob/develop/great_expectations/expectations/metrics/meta_metric_provider.py#L27\r\n\r\nTurning on DeprecationWarnings like this overrides any settings we already have.\r\n\r\nOur current workaround is:\r\n```\r\nimport warnings\r\nfilters = list(warnings.filters)\r\n\r\nfrom great_expectations.data_context.types.base import DataContextConfig\r\nfrom great_expectations.data_context import BaseDataContext\r\nfrom great_expectations.core.batch import RuntimeBatchRequest\r\n\r\nwarnings.filters = filters\r\n```", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4119/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4119/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4115", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4115/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4115/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4115/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/4115", "id": 1122235037, "node_id": "I_kwDOBiS_IM5C4_Kd", "number": 4115, "title": "Performance degradation using GE v3 API with PySpark on Cluster EMR", "user": {"login": "davideromano", "id": 16883845, "node_id": "MDQ6VXNlcjE2ODgzODQ1", "avatar_url": "https://avatars.githubusercontent.com/u/16883845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davideromano", "html_url": "https://github.com/davideromano", "followers_url": "https://api.github.com/users/davideromano/followers", "following_url": "https://api.github.com/users/davideromano/following{/other_user}", "gists_url": "https://api.github.com/users/davideromano/gists{/gist_id}", "starred_url": "https://api.github.com/users/davideromano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davideromano/subscriptions", "organizations_url": "https://api.github.com/users/davideromano/orgs", "repos_url": "https://api.github.com/users/davideromano/repos", "events_url": "https://api.github.com/users/davideromano/events{/privacy}", "received_events_url": "https://api.github.com/users/davideromano/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2843992198, "node_id": "MDU6TGFiZWwyODQzOTkyMTk4", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/troubleshooting", "name": "troubleshooting", "color": "0B42D0", "default": false, "description": ""}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-02-02T18:04:38Z", "updated_at": "2024-08-22T23:41:41Z", "closed_at": "2024-08-22T23:41:41Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\n\r\nPassing from GE v2 API to GE v3 API, called with SparkEngine and run on Cluster EMR, I noticed performance degradation.\r\n\r\nWith GE v2 API I executed the command `context.run_validation_operator()`  and with GE v3 API I execute the command `context.run_checkpoint()`.\r\nI am still using Spark Engine, but with GE v3 I started to use `RuntimeBatchRequest` .\r\n**The same suite, on the same dataset, on GE v3 API took between 10% and 20% more time than run it with GE v2 API.**\r\n\r\nUnfortunately I did not find specific documentation (and examples) on how to use GE v3 API with pySpark on Cluster EMR, so I replicated what I did with GE v2.\r\nWith GE v2 I didn't have any problem. But when I use GE v3, even if I increase the number of instances of the cluster, the computation time doesn\u2019t change too much.\r\n\r\n**To Reproduce**\r\n\r\n**_GE V2 API validation code_**\r\n\r\n``` python\r\n# Context\r\ndata_context_config = DataContextConfig(\r\n    plugins_directory=None,\r\n    config_variables_file_path=None,\r\n    datasources={\r\n        \"spark_ds\": {\r\n            \"data_asset_type\": {\r\n                \"class_name\": \"SparkDFDataset\",\r\n                \"module_name\": \"great_expectations.dataset\",\r\n            },\r\n            \"class_name\": \"SparkDFDatasource\",\r\n            \"module_name\": \"great_expectations.datasource\",\r\n            \"batch_kwargs_generators\": {},\r\n        }\r\n    },\r\n    stores={\r\n        \"expectations_store\": {\r\n            \"class_name\": \"ExpectationsStore\",\r\n            \"store_backend\": {\r\n                \"class_name\": \"TupleFilesystemStoreBackend\",\r\n                \"base_directory\": \"/home/jovyan/work/expectation_suites\",\r\n            }\r\n        },\r\n        \"validations_store\": {\r\n            \"class_name\": \"ValidationsStore\",\r\n            \"store_backend\": {\r\n                \"class_name\": \"TupleFilesystemStoreBackend\",\r\n                \"base_directory\": \"/home/jovyan/work/validations\",\r\n            },\r\n        },\r\n        \"evaluation_parameter_store\": {\"class_name\": \"EvaluationParameterStore\"},\r\n    },\r\n    expectations_store_name=\"expectations_store\",\r\n    validations_store_name=\"validations_store\",\r\n    evaluation_parameter_store_name=\"evaluation_parameter_store\",\r\n    data_docs_sites={\r\n        \"site\": {\r\n            \"class_name\": \"SiteBuilder\",\r\n            \"store_backend\": {\r\n                \"class_name\": \"TupleFilesystemStoreBackend\",\r\n                \"base_directory\": \"/home/jovyan/work/site\",\r\n            },\r\n            \"site_index_builder\": {\r\n                \"class_name\": \"DefaultSiteIndexBuilder\",\r\n                \"show_cta_footer\": False,\r\n                \"show_how_to_buttons\": False,\r\n            },\r\n        }\r\n    },\r\n    validation_operators={\r\n        \"action_list_operator\": {\r\n            \"class_name\": \"ActionListValidationOperator\",\r\n            \"action_list\": [\r\n                {\r\n                    \"name\": \"store_validation_result\",\r\n                    \"action\": {\"class_name\": \"StoreValidationResultAction\"},\r\n                },\r\n                {\r\n                    \"name\": \"store_evaluation_params\",\r\n                    \"action\": {\"class_name\": \"StoreEvaluationParametersAction\"},\r\n                },\r\n                {\r\n                    \"name\": \"update_data_docs\",\r\n                    \"action\": {\"class_name\": \"UpdateDataDocsAction\"},\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    anonymous_usage_statistics={\r\n      \"enabled\": False\r\n    }\r\n)\r\n\r\ncontext = BaseDataContext(project_config=data_context_config)\r\n\r\n# Validation\r\nbatch_kwargs = {'dataset': df,  # SparkDF\r\n                'datasource': datasource_name,\r\n                'data_asset_name': data_asset_name\r\n}\r\nbatch = context.get_batch(batch_kwargs, expectation_suite_name)\r\n\r\nresults = context.run_validation_operator(\r\n    \"action_list_operator\",\r\n    assets_to_validate=[batch],\r\n    run_id=run_id\r\n)\r\n```\r\n\r\n**_GE V3 API validation code_**\r\n\r\n``` python\r\n# Context\r\ndata_context_config_test = DataContextConfig(\r\n    plugins_directory=\"/home/jovyan/work/data_quality/plugins\",\r\n    config_variables_file_path=None,\r\n    datasources={\r\n        \"my_filesystem_datasource\": {\r\n            \"class_name\": \"Datasource\",\r\n            \"module_name\": \"great_expectations.datasource\",\r\n            'execution_engine': {\r\n                'module_name': 'great_expectations.execution_engine',\r\n                'class_name': 'SparkDFExecutionEngine'\r\n            },\r\n            \"data_connectors\": {\r\n            \"default_runtime_data_connector_name\": {\r\n                \"class_name\": \"RuntimeDataConnector\",\r\n                \"batch_identifiers\": [\"batch_id\"],\r\n            },\r\n        },\r\n        }\r\n    },\r\n    stores={\r\n        \"expectations_store\": {\r\n        \"class_name\": \"ExpectationsStore\",\r\n        \"store_backend\": {\r\n            \"class_name\": \"TupleFilesystemStoreBackend\",\r\n            \"base_directory\": \"/home/jovyan/work/expectation_suites\",\r\n        }\r\n    },\r\n        \"validations_S3_store\": {\r\n            \"class_name\": \"ValidationsStore\",\r\n            \"store_backend\": {\r\n                \"class_name\": \"TupleFilesystemStoreBackend\",\r\n                \"base_directory\": \"/home/jovyan/work/validations\",\r\n            },\r\n        },\r\n        \"evaluation_parameter_store\": {\"class_name\": \"EvaluationParameterStore\"},\r\n    },\r\n    expectations_store_name=\"expectations_store\",\r\n    validations_store_name=\"validations_S3_store\",\r\n    evaluation_parameter_store_name=\"evaluation_parameter_store\",\r\n    data_docs_sites={\r\n        \"s3_site\": {\r\n            \"class_name\": \"SiteBuilder\",\r\n            \"store_backend\": {\r\n                \"class_name\": \"TupleFilesystemStoreBackend\",\r\n                \"base_directory\": \"/home/jovyan/work/site\",\r\n            },\r\n            \"site_index_builder\": {\r\n                \"class_name\": \"DefaultSiteIndexBuilder\",\r\n                \"show_cta_footer\": False,\r\n            },\r\n        }\r\n    },\r\n    anonymous_usage_statistics={\r\n      \"enabled\": False\r\n    }\r\n)\r\n\r\ncontext = BaseDataContext(project_config=data_context_config_test)\r\n\r\n\r\n# Validation\r\nbatch_request = {\r\n    \"datasource_name\":\"datasource\",\r\n    \"data_connector_name\": \"data_connector_name\",\r\n    \"data_asset_name\":\"data_asset_name\",\r\n    \"runtime_parameters\": {\"batch_data\": df},  # SparkDF\r\n    \"batch_identifiers\":{\"batch_id\": \"batch_id\"}\r\n}\r\n\r\nvalidations = []\r\nvalidations.append(\r\n    {\r\n        \"batch_request\": batch_request,\r\n        \"expectation_suite_name\": expectation_suite_name\r\n    }\r\n)\r\n\r\ncheckpoint = SimpleCheckpoint(\r\n    name=\"checkpoint\",\r\n    data_context=context,\r\n    class_name=\"Checkpoint\",\r\n    validations=validations   \r\n)\r\n\r\ncheckpoint_result = checkpoint.run(\r\n    run_id=run_id,\r\n    run_name_template=\"%Y%m%d_%H%M%S\",\r\n    \r\n)\r\n```\r\n\r\n**Expected behavior**\r\n\r\nIf you run those 2 validations on a cluster EMR, using the same dataset and the same expectation suite, GE v3 API will take more time to complete the validation run.\r\n\r\n**Environment (please complete the following information):**\r\n- EMR version emr-5.28.0\r\n - Great Expectations Version: 0.14.0\r\n\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4115/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/4115/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3979", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3979/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3979/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3979/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3979", "id": 1099239970, "node_id": "I_kwDOBiS_IM5BhRIi", "number": 3979, "title": "File-level expectations for files on S3 (v3 API)", "user": {"login": "SSchotten", "id": 16923510, "node_id": "MDQ6VXNlcjE2OTIzNTEw", "avatar_url": "https://avatars.githubusercontent.com/u/16923510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SSchotten", "html_url": "https://github.com/SSchotten", "followers_url": "https://api.github.com/users/SSchotten/followers", "following_url": "https://api.github.com/users/SSchotten/following{/other_user}", "gists_url": "https://api.github.com/users/SSchotten/gists{/gist_id}", "starred_url": "https://api.github.com/users/SSchotten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SSchotten/subscriptions", "organizations_url": "https://api.github.com/users/SSchotten/orgs", "repos_url": "https://api.github.com/users/SSchotten/repos", "events_url": "https://api.github.com/users/SSchotten/events{/privacy}", "received_events_url": "https://api.github.com/users/SSchotten/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1901311827, "node_id": "MDU6TGFiZWwxOTAxMzExODI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stale", "name": "stale", "color": "f9c8a7", "default": false, "description": "Stale issues and PRs"}, {"id": 2303268925, "node_id": "MDU6TGFiZWwyMzAzMjY4OTI1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/triage", "name": "triage", "color": "ffd942", "default": false, "description": "Used by the GE core team to flag issues that were not yet triaged"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2022-01-11T14:36:43Z", "updated_at": "2024-08-22T23:34:02Z", "closed_at": "2024-08-22T23:34:02Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nUsing the v3 API, I would like to be able to create and use file-level expectations - similar to the ones defined for the v2 API as specified [here](https://legacy.docs.greatexpectations.io/en/latest/reference/glossary_of_expectations.html#filedataasset).  \r\n\r\nIn particular, I would like to be able to create/validate expectations about whether certain filenames are amongst a daily data delivery to a few S3 (actually, Minio) staging buckets, using something like v2's `expect_file_to_exist`: [click](https://legacy.docs.greatexpectations.io/en/latest/autoapi/great_expectations/data_asset/file_data_asset/index.html#great_expectations.data_asset.file_data_asset.FileDataAsset.expect_file_to_exist). Some files are expected to *always* land in these buckets, and some of them only once in a while. If detected properly, I would want to not execute any processing steps downstream of our staging layer if any of these expected files are missing. \r\n\r\n**Describe the solution you'd like**\r\nThe ideal outcome would be for `expect_file_to_exist` and other file-level expectations to be evaluated the same way table/column-level expectations can now be evaluated. I have only recently started looking into using GE v3 on S3, after playing with v2 locally for a bit in 2020 - so I find it hard to formulate a more detailed solution. \r\n\r\n**Describe alternatives you've considered**\r\nMy current approach is to perform a daily match of all files found in the S3 staging buckets against a set of expected filenames and raise an exception on the occurrences of missing files - outside of GE. ", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3979/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3979/timeline", "performed_via_github_app": null, "state_reason": "not_planned"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3975", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3975/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3975/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3975/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3975", "id": 1098289067, "node_id": "I_kwDOBiS_IM5Bdo-r", "number": 3975, "title": "Nested data support", "user": {"login": "DCastile", "id": 19615191, "node_id": "MDQ6VXNlcjE5NjE1MTkx", "avatar_url": "https://avatars.githubusercontent.com/u/19615191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DCastile", "html_url": "https://github.com/DCastile", "followers_url": "https://api.github.com/users/DCastile/followers", "following_url": "https://api.github.com/users/DCastile/following{/other_user}", "gists_url": "https://api.github.com/users/DCastile/gists{/gist_id}", "starred_url": "https://api.github.com/users/DCastile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DCastile/subscriptions", "organizations_url": "https://api.github.com/users/DCastile/orgs", "repos_url": "https://api.github.com/users/DCastile/repos", "events_url": "https://api.github.com/users/DCastile/events{/privacy}", "received_events_url": "https://api.github.com/users/DCastile/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1901311827, "node_id": "MDU6TGFiZWwxOTAxMzExODI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stale", "name": "stale", "color": "f9c8a7", "default": false, "description": "Stale issues and PRs"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 13, "created_at": "2022-01-10T19:30:48Z", "updated_at": "2025-10-17T20:20:29Z", "closed_at": "2023-03-07T19:07:15Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nCurrently in GE there is no support for nested data inside a cell of a dataset. However many datasets contain nested/hierarchal data in these cells and these values must be quality checked. A work around is to pre-process the data prior to performing an expectation however this creates unnecessary separation between the original dataset you want to quality check and expectations, thus increasing complexity of the system greatly.\r\n\r\n**Describe the solution you'd like**\r\nIf we have nested data inside of a field that we want to place an expectation on we should be able to use dot or another notation to tell GE we are talking about a nested field.\r\n\r\nAs an example if we have input schema (below), where `name` and `residence` are top level keys. These could also be thought of as columns when displayed as tabular dataset or dataframe. Inside of each column we would have a nested map data structure with value's we'd like to create expectations for.\r\n\r\nAs an example if we'd like to ensure there are only ascii alpha characters in `name.first` we could write:\r\n`expect_column_values_to_match_regex('name.first', 'a-zA-Z')`\r\n\r\n```json\r\n{\r\n    name: {\r\n        first: john,\r\n        last: smith\r\n    },\r\n    residence: {\r\n        state: CA,\r\n        city: Pleasanton\r\n    }\r\n}\r\n```\r\n\r\nThis next part could be a reach, but it could bring some clever and graceful solutions to complex problems. This concept could be applied to nested fields that have multiplicity, notice residences is now an array. If we wanted to check every residence state we could use notation like so.\r\n`expect_table_columns_to_match_set('residences.#.state', state_codes)`\r\n```json\r\n{\r\n    name: {\r\n        first: john,\r\n        last: smith\r\n    },\r\n    residences: [\r\n        {\r\n            state: CA,\r\n            city: Pleasanton\r\n        },\r\n        {\r\n            state: AZ,\r\n            city: Phoenix\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nPre-processing the data to normalize or unnest fundamentally means you are no longer creating expectations for the target dataset, you are creating it on some other dataset and now need to maintain and understand lineage. Bad solution\r\n\r\n**Additional context**\r\n- Our organization uses exclusively nested data so we are particularly interested in this functionality.\r\n- This is a reopening of #2231 \r\n- The majority of the backends used by GE support semi-structured/nested data operations natively (snowflake, big query, redshift, postgres, spark, etc), all use some type of dot notation (snowflake uses `:` instead of `.`)\r\n", "closed_by": {"login": "rdodev", "id": 1234335, "node_id": "MDQ6VXNlcjEyMzQzMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/1234335?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rdodev", "html_url": "https://github.com/rdodev", "followers_url": "https://api.github.com/users/rdodev/followers", "following_url": "https://api.github.com/users/rdodev/following{/other_user}", "gists_url": "https://api.github.com/users/rdodev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rdodev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rdodev/subscriptions", "organizations_url": "https://api.github.com/users/rdodev/orgs", "repos_url": "https://api.github.com/users/rdodev/repos", "events_url": "https://api.github.com/users/rdodev/events{/privacy}", "received_events_url": "https://api.github.com/users/rdodev/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3975/reactions", "total_count": 28, "+1": 17, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 11, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3975/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3869", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3869/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3869/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3869/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3869", "id": 1082462577, "node_id": "I_kwDOBiS_IM5AhRFx", "number": 3869, "title": "Wrong casting for TIMESTAMP column type with BigQuery table", "user": {"login": "PaulineBeurier8", "id": 19666421, "node_id": "MDQ6VXNlcjE5NjY2NDIx", "avatar_url": "https://avatars.githubusercontent.com/u/19666421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PaulineBeurier8", "html_url": "https://github.com/PaulineBeurier8", "followers_url": "https://api.github.com/users/PaulineBeurier8/followers", "following_url": "https://api.github.com/users/PaulineBeurier8/following{/other_user}", "gists_url": "https://api.github.com/users/PaulineBeurier8/gists{/gist_id}", "starred_url": "https://api.github.com/users/PaulineBeurier8/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PaulineBeurier8/subscriptions", "organizations_url": "https://api.github.com/users/PaulineBeurier8/orgs", "repos_url": "https://api.github.com/users/PaulineBeurier8/repos", "events_url": "https://api.github.com/users/PaulineBeurier8/events{/privacy}", "received_events_url": "https://api.github.com/users/PaulineBeurier8/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1901311827, "node_id": "MDU6TGFiZWwxOTAxMzExODI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stale", "name": "stale", "color": "f9c8a7", "default": false, "description": "Stale issues and PRs"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-12-16T17:25:53Z", "updated_at": "2024-08-22T23:31:36Z", "closed_at": "2024-08-22T23:29:26Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nGeneration of expectations using historic data does not for column type TIMESTAMP using BigQuery as source.\r\n\r\nIn BigQuery there is 2 types for date: \r\n- DATETIME \r\n- TIMESTAMP\r\nThe generation of rules works properly with DATETIME type \u2705 but with TIMESTAMP it fails \u274c \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `great_expectations --v3-api suite new`\r\n2. `How would you like to create your Expectation Suite` -> `3. Automatically, using a profiler`\r\n3. `Select a datasource` -> `datasource_BigQuery_analytics`\r\n```datasources:\r\n  datasource_BigQuery_analytics:\r\n    connection_string: bigquery://my-project/my_dataset\r\n    introspection:\r\n      whole_table:\r\n        data_asset_name_suffix: __whole_table\r\n    module_name: great_expectations.datasource\r\n    class_name: SimpleSqlalchemyDatasource \r\n```\r\n4. Provide: name of the table, temporary table, name of the file\r\nDo **not** not provide schema\r\n\r\n5. Error when running the JupyterNotebook cells:\r\n`MetricResolutionError: (google.cloud.bigquery.dbapi.exceptions.DatabaseError) 400 No matching signature for operator >= for argument types: TIMESTAMP, DATETIME. Supported signature: ANY >= ANY at [3:43]\r\n`\r\n\r\nThis is due to a wrong casting of TIMESTAMP to DATETIME the column in the query, see below :\r\n\r\n```\r\n[SQL: SELECT `event_ts_utc` AS `unexpected_values` \r\nFROM `karhoo-scratch.data_team_sandbox.pb_ge1` \r\nWHERE `event_ts_utc` IS NOT NULL AND NOT (`event_ts_utc` >= %(event_ts_utc_1:DATETIME)s AND `event_ts_utc` <= %(event_ts_utc_2:DATETIME)s)\r\n LIMIT %(param_1:INT64)s]\r\n```\r\n\r\n**Expected behavior**\r\nGenerate expectations with no errors.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.13.46\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3869/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3869/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3766", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3766/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3766/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3766/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3766", "id": 1067349212, "node_id": "I_kwDOBiS_IM4_nnTc", "number": 3766, "title": "Ability to apply a row_condition to PySpark DataFrame GE checks", "user": {"login": "philgeorge999", "id": 23714917, "node_id": "MDQ6VXNlcjIzNzE0OTE3", "avatar_url": "https://avatars.githubusercontent.com/u/23714917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philgeorge999", "html_url": "https://github.com/philgeorge999", "followers_url": "https://api.github.com/users/philgeorge999/followers", "following_url": "https://api.github.com/users/philgeorge999/following{/other_user}", "gists_url": "https://api.github.com/users/philgeorge999/gists{/gist_id}", "starred_url": "https://api.github.com/users/philgeorge999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philgeorge999/subscriptions", "organizations_url": "https://api.github.com/users/philgeorge999/orgs", "repos_url": "https://api.github.com/users/philgeorge999/repos", "events_url": "https://api.github.com/users/philgeorge999/events{/privacy}", "received_events_url": "https://api.github.com/users/philgeorge999/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-11-30T15:09:51Z", "updated_at": "2024-11-07T15:23:32Z", "closed_at": "2022-06-14T15:37:10Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I am applying around 400 dq checks to a table with 30M rows of data and 250 columns, and around 25% of these checks only apply to a subset of rows.  There is too much data to use Pandas Dataframes.  I have noticed that the PySparck DataFrame GE APIs do not take a row_condition argument so I am currently having to pre-filter the dataframe in before each of these checks which means the code is really nasty.  And it also means that the percentage results in the output are incorrect as they need to be based on the full table.  Which means a lot of custom processing is required to make use of GE.\r\n\r\nIs it possible to have a form of row_condition implemented for the Spark APIs?\r\n", "closed_by": {"login": "austiezr", "id": 44794138, "node_id": "MDQ6VXNlcjQ0Nzk0MTM4", "avatar_url": "https://avatars.githubusercontent.com/u/44794138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/austiezr", "html_url": "https://github.com/austiezr", "followers_url": "https://api.github.com/users/austiezr/followers", "following_url": "https://api.github.com/users/austiezr/following{/other_user}", "gists_url": "https://api.github.com/users/austiezr/gists{/gist_id}", "starred_url": "https://api.github.com/users/austiezr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/austiezr/subscriptions", "organizations_url": "https://api.github.com/users/austiezr/orgs", "repos_url": "https://api.github.com/users/austiezr/repos", "events_url": "https://api.github.com/users/austiezr/events{/privacy}", "received_events_url": "https://api.github.com/users/austiezr/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3766/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3766/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3451", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3451/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3451/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3451/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3451", "id": 1007172895, "node_id": "I_kwDOBiS_IM48CD0f", "number": 3451, "title": "`\\n` and `,` transposed in notebook generation", "user": {"login": "mccalluc", "id": 730388, "node_id": "MDQ6VXNlcjczMDM4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/730388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mccalluc", "html_url": "https://github.com/mccalluc", "followers_url": "https://api.github.com/users/mccalluc/followers", "following_url": "https://api.github.com/users/mccalluc/following{/other_user}", "gists_url": "https://api.github.com/users/mccalluc/gists{/gist_id}", "starred_url": "https://api.github.com/users/mccalluc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mccalluc/subscriptions", "organizations_url": "https://api.github.com/users/mccalluc/orgs", "repos_url": "https://api.github.com/users/mccalluc/repos", "events_url": "https://api.github.com/users/mccalluc/events{/privacy}", "received_events_url": "https://api.github.com/users/mccalluc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-09-25T19:10:51Z", "updated_at": "2025-01-23T14:21:30Z", "closed_at": "2021-10-13T18:18:46Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nFollowing the tutorial, in the Jupyter notebook, the `ignored_columns` list has commas at the start of the line.\r\nProbably just transpose [here](https://github.com/great-expectations/great_expectations/blob/c49e533c012c275a791fce09df207d2bd7126780/great_expectations/render/renderer/v3/suite_profile_notebook_renderer.py#L74-L77) to fix:\r\n\r\n```diff\r\n-            f'    \"{column_name}\"\\n,' for column_name in self.validator.columns()\r\n+            f'    \"{column_name}\",\\n' for column_name in self.validator.columns()\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Follow the tutorial.\r\n2. In the jupyter notebook, notice the formatting for the `ignored_columns`.\r\n\r\n**Expected behavior**\r\nGenerated code in notebooks should follow normal formatting conventions.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: \r\n   - superconductive/ge_tutorials @ 5db831a92af51f77dde19723a81a2cea92e2a756\r\n   - great-expectations==0.13.35\r\n\r\n**Additional context**\r\nMentioned this when talking with Ortal on September 24: Might already be filed or handled somewhere else.\r\n\r\n", "closed_by": {"login": "NathanFarmer", "id": 19361723, "node_id": "MDQ6VXNlcjE5MzYxNzIz", "avatar_url": "https://avatars.githubusercontent.com/u/19361723?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NathanFarmer", "html_url": "https://github.com/NathanFarmer", "followers_url": "https://api.github.com/users/NathanFarmer/followers", "following_url": "https://api.github.com/users/NathanFarmer/following{/other_user}", "gists_url": "https://api.github.com/users/NathanFarmer/gists{/gist_id}", "starred_url": "https://api.github.com/users/NathanFarmer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NathanFarmer/subscriptions", "organizations_url": "https://api.github.com/users/NathanFarmer/orgs", "repos_url": "https://api.github.com/users/NathanFarmer/repos", "events_url": "https://api.github.com/users/NathanFarmer/events{/privacy}", "received_events_url": "https://api.github.com/users/NathanFarmer/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3451/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3451/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3450", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3450/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3450/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3450/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3450", "id": 1007169363, "node_id": "I_kwDOBiS_IM48CC9T", "number": 3450, "title": "Links in autogenerated data docs are either 404, or redirect to legacy.docs", "user": {"login": "mccalluc", "id": 730388, "node_id": "MDQ6VXNlcjczMDM4OA==", "avatar_url": "https://avatars.githubusercontent.com/u/730388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mccalluc", "html_url": "https://github.com/mccalluc", "followers_url": "https://api.github.com/users/mccalluc/followers", "following_url": "https://api.github.com/users/mccalluc/following{/other_user}", "gists_url": "https://api.github.com/users/mccalluc/gists{/gist_id}", "starred_url": "https://api.github.com/users/mccalluc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mccalluc/subscriptions", "organizations_url": "https://api.github.com/users/mccalluc/orgs", "repos_url": "https://api.github.com/users/mccalluc/repos", "events_url": "https://api.github.com/users/mccalluc/events{/privacy}", "received_events_url": "https://api.github.com/users/mccalluc/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-09-25T18:54:35Z", "updated_at": "2025-01-23T14:21:36Z", "closed_at": "2022-01-26T22:07:57Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nDoing the tutorial, I've generated data docs. On `file:///.../ge_tutorials/great_expectations/uncommitted/data_docs/local_site/index.html`, in the footer, I see:\r\n>  To continue exploring Great Expectations check out one of these tutorials... \r\n```\r\n<a href=\"https://docs.greatexpectations.io/en/latest/guides/how_to_guides/creating_and_editing_expectations.html\" class=\"btn btn-primary m-2\" rel=\"noopener noreferrer\" target=\"_blank\">How to Create Expectations</a>\r\n<a href=\"https://docs.greatexpectations.io/en/latest/guides/how_to_guides/validation.html\" class=\"btn btn-primary m-2\" rel=\"noopener noreferrer\" target=\"_blank\">How to Validate Data</a>\r\n<a href=\"https://docs.greatexpectations.io/en/latest/guides/how_to_guides/configuring_data_docs.html\" class=\"btn btn-primary m-2\" rel=\"noopener noreferrer\" target=\"_blank\">How to Set Up a Team Site</a>\r\n```\r\n\r\nThe first two links redirect with 301 status to legacy documentation; \r\nThe last is a 404.\r\n```\r\nhttps://legacy.docs.greatexpectations.io/en/latest/guides/how_to_guides/creating_and_editing_expectations.html\r\nhttps://legacy.docs.greatexpectations.io/en/latest/guides/how_to_guides/validation.html\r\nhttps://docs.greatexpectations.io/en/latest/guides/how_to_guides/configuring_data_docs.html\r\n```\r\n\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Follow the tutorial.\r\n2. Click on the links at the Bottom of the generated datadocs.\r\n\r\n**Expected behavior**\r\nLinks should go to current documentation?\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: \r\n   - superconductive/ge_tutorials @ 5db831a92af51f77dde19723a81a2cea92e2a756\r\n   - great-expectations==0.13.35\r\n\r\n**Additional context**\r\nMentioned this when talking with Ortal on September 24: Might already be filed or handled somewhere else.\r\n", "closed_by": {"login": "AFineDayFor", "id": 10275354, "node_id": "MDQ6VXNlcjEwMjc1MzU0", "avatar_url": "https://avatars.githubusercontent.com/u/10275354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AFineDayFor", "html_url": "https://github.com/AFineDayFor", "followers_url": "https://api.github.com/users/AFineDayFor/followers", "following_url": "https://api.github.com/users/AFineDayFor/following{/other_user}", "gists_url": "https://api.github.com/users/AFineDayFor/gists{/gist_id}", "starred_url": "https://api.github.com/users/AFineDayFor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AFineDayFor/subscriptions", "organizations_url": "https://api.github.com/users/AFineDayFor/orgs", "repos_url": "https://api.github.com/users/AFineDayFor/repos", "events_url": "https://api.github.com/users/AFineDayFor/events{/privacy}", "received_events_url": "https://api.github.com/users/AFineDayFor/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3450/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3450/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3186", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3186/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3186/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3186/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/3186", "id": 962474139, "node_id": "MDU6SXNzdWU5NjI0NzQxMzk=", "number": 3186, "title": "Can't specify schema in expect_table_row_count_to_equal_other_table", "user": {"login": "armandduijn", "id": 706385, "node_id": "MDQ6VXNlcjcwNjM4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/706385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/armandduijn", "html_url": "https://github.com/armandduijn", "followers_url": "https://api.github.com/users/armandduijn/followers", "following_url": "https://api.github.com/users/armandduijn/following{/other_user}", "gists_url": "https://api.github.com/users/armandduijn/gists{/gist_id}", "starred_url": "https://api.github.com/users/armandduijn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/armandduijn/subscriptions", "organizations_url": "https://api.github.com/users/armandduijn/orgs", "repos_url": "https://api.github.com/users/armandduijn/repos", "events_url": "https://api.github.com/users/armandduijn/events{/privacy}", "received_events_url": "https://api.github.com/users/armandduijn/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 3130189879, "node_id": "MDU6TGFiZWwzMTMwMTg5ODc5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/DevRel%20Triage", "name": "DevRel Triage", "color": "D93F0B", "default": false, "description": ""}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2021-08-06T07:23:54Z", "updated_at": "2024-08-22T23:30:30Z", "closed_at": "2024-08-22T23:28:58Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nThe expectations `expect_table_row_count_to_equal_other_table` can't find the other table I specify in the `other_table_name` parameter. I tried adding the schema name as part of the table name, but then SQLAlchemy wraps it in double quotes, causing my database (Redshift) to interpret it as an escaped table name.\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. In a database, create a schema `my_schema` and, inside that schema, create tables `my_table_1` and `my_table_2`\r\n2. Next, create or edit an existing Great Expectations test suite\r\n3. Modify your batch to load the table `my_schema.my_table_1`\r\n4. Add the expectation `batch.expect_table_row_count_to_equal_other_table(other_table_name='my_table_2')`\r\n\r\n    The expectation will throw the following error:\r\n    ```\r\n    ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"my_table_2\" does not exist\r\n    \r\n    [SQL: SELECT count(*) AS count_1 \r\n    FROM my_table_2]\r\n    (Background on this error at: http://sqlalche.me/e/14/f405)\r\n    ```  \r\n\r\n5. Change the `other_table_name` to include the schema name: `my_schema.my_table_2`\r\n\r\n    The expectation will throw the following error:\r\n  \r\n    ```\r\n    ProgrammingError: (psycopg2.errors.UndefinedTable) relation \"my_schema.my_table_2\" does not exist\r\n    \r\n    [SQL: SELECT count(*) AS count_1 \r\n    FROM \"my_schema.my_table_2\"]\r\n    (Background on this error at: http://sqlalche.me/e/14/f405)\r\n    ```\r\n\r\n**Expected behavior**\r\nI expect the expectation to be able to compare `my_table_1` with `my_table_2` in schema `my_schema`. Currently, the expectation doesn't allow me to specify the schema of the other table.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows\r\n - Great Expectations Version: 0.13.9\r\n\r\n**Additional context**\r\nLink to documentation: https://docs.greatexpectations.io/en/0.13.24/autoapi/great_expectations/expectations/core/expect_table_row_count_to_equal_other_table/index.html\r\n", "closed_by": {"login": "molliemarie", "id": 10745166, "node_id": "MDQ6VXNlcjEwNzQ1MTY2", "avatar_url": "https://avatars.githubusercontent.com/u/10745166?v=4", "gravatar_id": "", "url": "https://api.github.com/users/molliemarie", "html_url": "https://github.com/molliemarie", "followers_url": "https://api.github.com/users/molliemarie/followers", "following_url": "https://api.github.com/users/molliemarie/following{/other_user}", "gists_url": "https://api.github.com/users/molliemarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/molliemarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/molliemarie/subscriptions", "organizations_url": "https://api.github.com/users/molliemarie/orgs", "repos_url": "https://api.github.com/users/molliemarie/repos", "events_url": "https://api.github.com/users/molliemarie/events{/privacy}", "received_events_url": "https://api.github.com/users/molliemarie/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3186/reactions", "total_count": 4, "+1": 4, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/3186/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2709", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2709/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2709/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2709/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/2709", "id": 863989787, "node_id": "MDU6SXNzdWU4NjM5ODk3ODc=", "number": 2709, "title": "\"Tuple index out of range\" for running checkpoint with snowflake datasource", "user": {"login": "Kwarks85", "id": 58333892, "node_id": "MDQ6VXNlcjU4MzMzODky", "avatar_url": "https://avatars.githubusercontent.com/u/58333892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kwarks85", "html_url": "https://github.com/Kwarks85", "followers_url": "https://api.github.com/users/Kwarks85/followers", "following_url": "https://api.github.com/users/Kwarks85/following{/other_user}", "gists_url": "https://api.github.com/users/Kwarks85/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kwarks85/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kwarks85/subscriptions", "organizations_url": "https://api.github.com/users/Kwarks85/orgs", "repos_url": "https://api.github.com/users/Kwarks85/repos", "events_url": "https://api.github.com/users/Kwarks85/events{/privacy}", "received_events_url": "https://api.github.com/users/Kwarks85/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2846239327, "node_id": "MDU6TGFiZWwyODQ2MjM5MzI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/in%20investigation", "name": "in investigation", "color": "D93F0B", "default": false, "description": "We are discussing the issue with the poster in order to get more details and reproduce it."}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205989759, "node_id": "MDU6TGFiZWwzMjA1OTg5NzU5", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/devrel", "name": "devrel", "color": "A8C4C9", "default": false, "description": "This item is being addressed by the Developer Relations Team"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2021-04-21T15:05:04Z", "updated_at": "2024-07-05T16:33:14Z", "closed_at": "2022-06-17T16:17:06Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen trying to run a checkpoint with a single expectation against a snowflake datasource I receive an error running \"update_data_docs\" that says \"Tuple index out of range\" I thus cannot setup a running checkpoint for my expectations\r\n\r\n**To Reproduce**\r\nSet up datasource based on snowflake. The connection and validation works just fine. This is the code from the yml that configures the datasource\r\n\r\n```\r\nmy_snowflake_datasource_1:\r\n    class_name: SimpleSqlalchemyDatasource\r\n    credentials:\r\n      drivername: snowflake\r\n      username: GREATEXPECTATIONS\r\n      password: [redacted]\r\n      host: [account@snowflake]\r\n      database: RAW\r\n      query:\r\n        schema: EXCHANGERATES\r\n        warehouse: REPORTING\r\n        role: REPORTER\r\n    Data connectors:\r\n        whole_table : SqlDataConnector\r\n    introspection:\r\n       whole_table:\r\n            data_asset_name_suffix: __whole_table\r\n```\r\n\r\nSet up expectation suite that could connect to data source and configured a checkpoint that looks like this\r\n\r\n```\r\nname: test_checkpoint_2\r\nconfig_version: 1.0\r\ntemplate_name:\r\nmodule_name: great_expectations.checkpoint\r\nclass_name: Checkpoint\r\nrun_name_template:\r\nexpectation_suite_name:\r\nbatch_request:\r\naction_list:\r\n  - name: store_validation_result\r\n    action:\r\n      class_name: StoreValidationResultAction\r\n  - name: store_evaluation_params\r\n    action:\r\n      class_name: StoreEvaluationParametersAction\r\n  - name: update_data_docs\r\n    action:\r\n      class_name: UpdateDataDocsAction\r\n      site_names: []\r\nevaluation_parameters: {}\r\nruntime_configuration: {}\r\nvalidations:\r\n  - batch_request:\r\n      datasource_name: my_snowflake_datasource_1\r\n      data_connector_name: whole_table\r\n      data_asset_name: stg_exchangerates__whole_table\r\n      expectation_suite_name: exchangerate_v31\r\nprofilers: []\r\n```\r\n\r\nThen running `great_expectations --v3-api checkpoint run test_checkpoint_2`\r\nI receive the following error\r\n```\r\nError running action with name update_data_docs\r\nTraceback (most recent call last):\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\validation_operators\\validation_operators.py\", line 388, in _run_actions\r\n    action_result = self.actions[action[\"name\"]].run(\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\checkpoint\\actions.py\", line 58, in run\r\n    return self._run(\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\checkpoint\\actions.py\", line 935, in _run\r\n    self.data_context.build_data_docs(\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\core\\usage_statistics\\usage_statistics.py\", line 262, in usage_statistics_wrapped_method\r\n    result = func(*args, **kwargs)\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\data_context\\data_context.py\", line 2384, in build_data_docs\r\n    index_page_resource_identifier_tuple = site_builder.build(\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\render\\renderer\\site_builder.py\", line 293, in build\r\n    site_section_builder.build(resource_identifiers=resource_identifiers)\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\render\\renderer\\site_builder.py\", line 388, in build\r\n    source_store_keys = self.source_store.list_keys()\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\data_context\\store\\store.py\", line 142, in list_keys\r\n    return [self.tuple_to_key(key) for key in keys_without_store_backend_id]\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\data_context\\store\\store.py\", line 142, in <listcomp>\r\n    return [self.tuple_to_key(key) for key in keys_without_store_backend_id]\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\data_context\\store\\store.py\", line 110, in tuple_to_key\r\n    return self._key_class.from_tuple(tuple_)\r\n  File \"c:\\users\\administrator\\appdata\\local\\programs\\python\\python38\\lib\\site-packages\\great_expectations\\data_context\\types\\resource_identifiers.py\", line 164, in from_tuple\r\n    RunIdentifier.from_tuple((tuple_[-3], tuple_[-2])),\r\nIndexError: tuple index out of range\r\ntuple index out of range\r\n\r\n```\r\n**Expected behavior**\r\nExpected the checkpoint to run properly as all preview validations in test yml files worked fine except for running the actual checkpoint\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: running on a virtual machine Microsoft Windows 2019 Server datacenter hosted on AWS\r\n - Great Expectations Version:  0.13.17\r\n", "closed_by": {"login": "kenwade4", "id": 95714847, "node_id": "U_kgDOBbR-Hw", "avatar_url": "https://avatars.githubusercontent.com/u/95714847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kenwade4", "html_url": "https://github.com/kenwade4", "followers_url": "https://api.github.com/users/kenwade4/followers", "following_url": "https://api.github.com/users/kenwade4/following{/other_user}", "gists_url": "https://api.github.com/users/kenwade4/gists{/gist_id}", "starred_url": "https://api.github.com/users/kenwade4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kenwade4/subscriptions", "organizations_url": "https://api.github.com/users/kenwade4/orgs", "repos_url": "https://api.github.com/users/kenwade4/repos", "events_url": "https://api.github.com/users/kenwade4/events{/privacy}", "received_events_url": "https://api.github.com/users/kenwade4/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2709/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2709/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2671", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2671/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2671/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2671/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/2671", "id": 857063508, "node_id": "MDU6SXNzdWU4NTcwNjM1MDg=", "number": 2671, "title": "Light Weight Install", "user": {"login": "JeroenSchmidt", "id": 25979801, "node_id": "MDQ6VXNlcjI1OTc5ODAx", "avatar_url": "https://avatars.githubusercontent.com/u/25979801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeroenSchmidt", "html_url": "https://github.com/JeroenSchmidt", "followers_url": "https://api.github.com/users/JeroenSchmidt/followers", "following_url": "https://api.github.com/users/JeroenSchmidt/following{/other_user}", "gists_url": "https://api.github.com/users/JeroenSchmidt/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeroenSchmidt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeroenSchmidt/subscriptions", "organizations_url": "https://api.github.com/users/JeroenSchmidt/orgs", "repos_url": "https://api.github.com/users/JeroenSchmidt/repos", "events_url": "https://api.github.com/users/JeroenSchmidt/events{/privacy}", "received_events_url": "https://api.github.com/users/JeroenSchmidt/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 2193490196, "node_id": "MDU6TGFiZWwyMTkzNDkwMTk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/dependencies", "name": "dependencies", "color": "0366d6", "default": false, "description": "PR or issue that updates a dependency"}, {"id": 3205121967, "node_id": "MDU6TGFiZWwzMjA1MTIxOTY3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/community", "name": "community", "color": "2FF5F2", "default": false, "description": ""}, {"id": 3205982396, "node_id": "MDU6TGFiZWwzMjA1OTgyMzk2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-engineering-queue", "name": "core-engineering-queue", "color": "474051", "default": false, "description": ""}, {"id": 3723271242, "node_id": "LA_kwDOBiS_IM7d7JxK", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature", "name": "feature", "color": "6626C7", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2021-04-13T15:15:00Z", "updated_at": "2024-10-09T13:49:06Z", "closed_at": "2024-10-09T13:49:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Is your feature request related to a problem? Please describe.**\r\nIn some deployment strategies there is no need to have the Jupiter dependencies installed. \r\nHaving the Jupiter (and associated dependencies) installed ends up prolonging the deployment cycle.\r\n\r\n**Describe the solution you'd like**\r\nHave a \"lite\" whl available on pip/conda\r\n\r\n", "closed_by": {"login": "Kilo59", "id": 13108583, "node_id": "MDQ6VXNlcjEzMTA4NTgz", "avatar_url": "https://avatars.githubusercontent.com/u/13108583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kilo59", "html_url": "https://github.com/Kilo59", "followers_url": "https://api.github.com/users/Kilo59/followers", "following_url": "https://api.github.com/users/Kilo59/following{/other_user}", "gists_url": "https://api.github.com/users/Kilo59/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kilo59/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kilo59/subscriptions", "organizations_url": "https://api.github.com/users/Kilo59/orgs", "repos_url": "https://api.github.com/users/Kilo59/repos", "events_url": "https://api.github.com/users/Kilo59/events{/privacy}", "received_events_url": "https://api.github.com/users/Kilo59/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2671/reactions", "total_count": 10, "+1": 10, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2671/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2576", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2576/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2576/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2576/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/2576", "id": 837568208, "node_id": "MDU6SXNzdWU4Mzc1NjgyMDg=", "number": 2576, "title": "expect_column_values_to_be_unique does not work with PostgreSQL ", "user": {"login": "xaniasd", "id": 6271065, "node_id": "MDQ6VXNlcjYyNzEwNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/6271065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xaniasd", "html_url": "https://github.com/xaniasd", "followers_url": "https://api.github.com/users/xaniasd/followers", "following_url": "https://api.github.com/users/xaniasd/following{/other_user}", "gists_url": "https://api.github.com/users/xaniasd/gists{/gist_id}", "starred_url": "https://api.github.com/users/xaniasd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xaniasd/subscriptions", "organizations_url": "https://api.github.com/users/xaniasd/orgs", "repos_url": "https://api.github.com/users/xaniasd/repos", "events_url": "https://api.github.com/users/xaniasd/events{/privacy}", "received_events_url": "https://api.github.com/users/xaniasd/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 688721236, "node_id": "MDU6TGFiZWw2ODg3MjEyMzY=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/help%20wanted", "name": "help wanted", "color": "ae4cef", "default": true, "description": "Issues we'd love to see community contributions for. Join #contributors-contributing in our Slack!"}, {"id": 1901311827, "node_id": "MDU6TGFiZWwxOTAxMzExODI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stale", "name": "stale", "color": "f9c8a7", "default": false, "description": "Stale issues and PRs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2021-03-22T10:21:19Z", "updated_at": "2025-06-11T15:33:16Z", "closed_at": "2021-06-29T00:12:06Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nRunning an `expect_column_values_to_be_unique` validation on a PostgreSQL database table fails. Other expectations are working as expected. \r\n \r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\nRunning Great Expectations v0.13.14\r\n\r\n1. Connection/setup for postgresql database\r\n```python\r\ncontext = ge.data_context.DataContext()\r\nsuite = context.create_expectation_suite(\"my.suite\", overwrite_existing=True)\r\nbatch_request = BatchRequest(\r\n    datasource_name='my_datasource', \r\n    data_asset_name='my_table', \r\n    data_connector_name='whole_table'\r\n)\r\nbatch = context.get_batch(batch_request=batch_request)\r\nvalidator = context.get_validator(batch_request=batch_request, expectation_suite=suite)\r\n```\r\n2. Execute validation with expect_column_values_to_be_unique\r\n`validator.expect_column_values_to_be_unique(\"event_id\")`\r\n3. See error\r\n```\r\nProgrammingError                          Traceback (most recent call last)\r\n<ipython-input-10-2f38d68461ed> in <module>\r\n----> 1 validator.expect_column_values_to_be_unique(\"event_id\")\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/validator/validator.py in inst_expectation(*args, **kwargs)\r\n    262 \r\n    263                 else:\r\n--> 264                     raise err\r\n    265             return validation_result\r\n    266 \r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/validator/validator.py in inst_expectation(*args, **kwargs)\r\n    220                     )\r\n    221                 else:\r\n--> 222                     validation_result = expectation.validate(\r\n    223                         validator=self,\r\n    224                         evaluation_parameters=self._expectation_suite.evaluation_parameters,\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/expectations/expectation.py in validate(self, validator, configuration, evaluation_parameters, interactive_evaluation, data_context, runtime_configuration)\r\n    639             evaluation_parameters, interactive_evaluation, data_context\r\n    640         )\r\n--> 641         evr = validator.graph_validate(\r\n    642             configurations=[configuration],\r\n    643             runtime_configuration=runtime_configuration,\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/validator/validator.py in graph_validate(self, configurations, metrics, runtime_configuration)\r\n    464             metrics = dict()\r\n    465 \r\n--> 466         metrics = self.resolve_validation_graph(graph, metrics, runtime_configuration)\r\n    467         for configuration in processed_configurations:\r\n    468             try:\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/validator/validator.py in resolve_validation_graph(self, graph, metrics, runtime_configuration)\r\n    496             ready_metrics, needed_metrics = self._parse_validation_graph(graph, metrics)\r\n    497             metrics.update(\r\n--> 498                 self._resolve_metrics(\r\n    499                     execution_engine=self._execution_engine,\r\n    500                     metrics_to_resolve=ready_metrics,\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/validator/validator.py in _resolve_metrics(self, execution_engine, metrics_to_resolve, metrics, runtime_configuration)\r\n    538         \"\"\"A means of accessing the Execution Engine's resolve_metrics method, where missing metric configurations are\r\n    539         resolved\"\"\"\r\n--> 540         return execution_engine.resolve_metrics(\r\n    541             metrics_to_resolve, metrics, runtime_configuration\r\n    542         )\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/execution_engine/execution_engine.py in resolve_metrics(self, metrics_to_resolve, metrics, runtime_configuration)\r\n    255                 )\r\n    256             elif metric_fn_type == MetricFunctionTypes.VALUE:\r\n--> 257                 resolved_metrics[metric_to_resolve.id] = metric_fn(\r\n    258                     **metric_provider_kwargs\r\n    259                 )\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/great_expectations/expectations/metrics/map_metric.py in _sqlalchemy_map_condition_unexpected_count_value(cls, execution_engine, metric_domain_kwargs, metric_value_kwargs, metrics, **kwargs)\r\n    853                 sa.select(count_case_statement).select_from(selectable),\r\n    854             )\r\n--> 855             execution_engine.engine.execute(inner_case_query)\r\n    856 \r\n    857         unexpected_count_query: sa.Select = (\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/base.py in execute(self, statement, *multiparams, **params)\r\n   2233 \r\n   2234         connection = self._contextual_connect(close_with_result=True)\r\n-> 2235         return connection.execute(statement, *multiparams, **params)\r\n   2236 \r\n   2237     def scalar(self, statement, *multiparams, **params):\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/base.py in execute(self, object_, *multiparams, **params)\r\n   1009             )\r\n   1010         else:\r\n-> 1011             return meth(self, multiparams, params)\r\n   1012 \r\n   1013     def _execute_function(self, func, multiparams, params):\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/sql/elements.py in _execute_on_connection(self, connection, multiparams, params)\r\n    296     def _execute_on_connection(self, connection, multiparams, params):\r\n    297         if self.supports_execution:\r\n--> 298             return connection._execute_clauseelement(self, multiparams, params)\r\n    299         else:\r\n    300             raise exc.ObjectNotExecutableError(self)\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/base.py in _execute_clauseelement(self, elem, multiparams, params)\r\n   1122             )\r\n   1123 \r\n-> 1124         ret = self._execute_context(\r\n   1125             dialect,\r\n   1126             dialect.execution_ctx_cls._init_compiled,\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/base.py in _execute_context(self, dialect, constructor, statement, parameters, *args)\r\n   1314 \r\n   1315         except BaseException as e:\r\n-> 1316             self._handle_dbapi_exception(\r\n   1317                 e, statement, parameters, cursor, context\r\n   1318             )\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/base.py in _handle_dbapi_exception(self, e, statement, parameters, cursor, context)\r\n   1508                 util.raise_(newraise, with_traceback=exc_info[2], from_=e)\r\n   1509             elif should_wrap:\r\n-> 1510                 util.raise_(\r\n   1511                     sqlalchemy_exception, with_traceback=exc_info[2], from_=e\r\n   1512                 )\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/util/compat.py in raise_(***failed resolving arguments***)\r\n    180 \r\n    181         try:\r\n--> 182             raise exception\r\n    183         finally:\r\n    184             # credit to\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/base.py in _execute_context(self, dialect, constructor, statement, parameters, *args)\r\n   1274                             break\r\n   1275                 if not evt_handled:\r\n-> 1276                     self.dialect.do_execute(\r\n   1277                         cursor, statement, parameters, context\r\n   1278                     )\r\n\r\n/usr/local/Caskroom/miniconda/base/envs/test/lib/python3.8/site-packages/sqlalchemy/engine/default.py in do_execute(self, cursor, statement, parameters, context)\r\n    607 \r\n    608     def do_execute(self, cursor, statement, parameters, context=None):\r\n--> 609         cursor.execute(statement, parameters)\r\n    610 \r\n    611     def do_execute_no_params(self, cursor, statement, context=None):\r\n\r\nProgrammingError: (psycopg2.errors.UndefinedTable) relation \"ge_tmp_dec2639d\" does not exist\r\nLINE 4: FROM ge_tmp_dec2639d\r\n             ^\r\n\r\n[SQL: INSERT INTO ge_tmp_39e7dbab (condition) SELECT CASE WHEN (event_id IS NOT NULL AND event_id IN (SELECT event_id \r\nFROM ge_tmp_dec2639d GROUP BY event_id \r\nHAVING count(event_id) > %(count_1)s)) THEN %(param_1)s ELSE %(param_2)s END AS condition \r\nFROM ge_tmp_dec2639d]\r\n[parameters: {'count_1': 1, 'param_1': 1, 'param_2': 0}]\r\n(Background on this error at: http://sqlalche.me/e/13/f405)\r\n```\r\n\r\n**Expected behavior**\r\nThe validation should complete execution and report findings.\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: MacOS\r\n - Great Expectations Version: 0.13.14\r\n\r\n**Additional context**\r\nTried other expectations without any issues, same expectation works when using v2 API\r\n", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2576/reactions", "total_count": 2, "+1": 2, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2576/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2359", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2359/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2359/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2359/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/2359", "id": 798225163, "node_id": "MDU6SXNzdWU3OTgyMjUxNjM=", "number": 2359, "title": "Tutorial is broken", "user": {"login": "lucasvw", "id": 4293177, "node_id": "MDQ6VXNlcjQyOTMxNzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4293177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucasvw", "html_url": "https://github.com/lucasvw", "followers_url": "https://api.github.com/users/lucasvw/followers", "following_url": "https://api.github.com/users/lucasvw/following{/other_user}", "gists_url": "https://api.github.com/users/lucasvw/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucasvw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucasvw/subscriptions", "organizations_url": "https://api.github.com/users/lucasvw/orgs", "repos_url": "https://api.github.com/users/lucasvw/repos", "events_url": "https://api.github.com/users/lucasvw/events{/privacy}", "received_events_url": "https://api.github.com/users/lucasvw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 2367960808, "node_id": "MDU6TGFiZWwyMzY3OTYwODA4", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-team-priority", "name": "core-team-priority", "color": "a6fc6c", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-01T10:46:02Z", "updated_at": "2025-01-23T14:21:51Z", "closed_at": "2021-02-01T20:21:05Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nWhen following the \"Getting started with Great Expectations\" [tutorial](https://docs.greatexpectations.io/en/latest/guides/tutorials/getting_started.html), the step where you have to \r\n\r\n[Let\u2019s execute all the cells and wait for Great Expectations to open a browser window with Data Docs. Pause here to read on first and find out what just happened!\r\n](https://docs.greatexpectations.io/en/latest/guides/tutorials/getting_started/create_your_first_expectations.html) doesn't work and throws an error: \r\n\r\n`DataContextError: No validation operator 'action_list_operator' was found in your project. Please verify this in your great_expectations.yml`\r\n\r\nWhen looking at the [`great_expectations.yml`](https://github.com/superconductive/ge_tutorials/blob/main/ge_getting_started_tutorial/great_expectations/great_expectations.yml) in the repo, it seems to be some versioning issue with missing `validation_operators` key. The version of the config in the repo is 2.0 and the version that you create during the tutorial is version 3.0 (which doesn't have this `validation_operators` key)\r\n\r\nOnce I added that block, I received a deprecation warning in the jupyter notebook but the code ran through and the data_docs page was created and opened.\r\n", "closed_by": {"login": "eugmandel", "id": 80363, "node_id": "MDQ6VXNlcjgwMzYz", "avatar_url": "https://avatars.githubusercontent.com/u/80363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eugmandel", "html_url": "https://github.com/eugmandel", "followers_url": "https://api.github.com/users/eugmandel/followers", "following_url": "https://api.github.com/users/eugmandel/following{/other_user}", "gists_url": "https://api.github.com/users/eugmandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/eugmandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eugmandel/subscriptions", "organizations_url": "https://api.github.com/users/eugmandel/orgs", "repos_url": "https://api.github.com/users/eugmandel/repos", "events_url": "https://api.github.com/users/eugmandel/events{/privacy}", "received_events_url": "https://api.github.com/users/eugmandel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2359/reactions", "total_count": 6, "+1": 6, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2359/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2358", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2358/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2358/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2358/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/2358", "id": 798200407, "node_id": "MDU6SXNzdWU3OTgyMDA0MDc=", "number": 2358, "title": "Getting started example failing with config version 3.0", "user": {"login": "tsitsimis", "id": 6275663, "node_id": "MDQ6VXNlcjYyNzU2NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/6275663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tsitsimis", "html_url": "https://github.com/tsitsimis", "followers_url": "https://api.github.com/users/tsitsimis/followers", "following_url": "https://api.github.com/users/tsitsimis/following{/other_user}", "gists_url": "https://api.github.com/users/tsitsimis/gists{/gist_id}", "starred_url": "https://api.github.com/users/tsitsimis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tsitsimis/subscriptions", "organizations_url": "https://api.github.com/users/tsitsimis/orgs", "repos_url": "https://api.github.com/users/tsitsimis/repos", "events_url": "https://api.github.com/users/tsitsimis/events{/privacy}", "received_events_url": "https://api.github.com/users/tsitsimis/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 1675427655, "node_id": "MDU6TGFiZWwxNjc1NDI3NjU1", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/documentation", "name": "documentation", "color": "fccfb0", "default": true, "description": "Issues and PRs related to the GE documentation"}, {"id": 2367960808, "node_id": "MDU6TGFiZWwyMzY3OTYwODA4", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-team-priority", "name": "core-team-priority", "color": "a6fc6c", "default": false, "description": ""}, {"id": 2727204804, "node_id": "MDU6TGFiZWwyNzI3MjA0ODA0", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/in-progress", "name": "in-progress", "color": "E49DAF", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "spbail", "id": 1734474, "node_id": "MDQ6VXNlcjE3MzQ0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1734474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spbail", "html_url": "https://github.com/spbail", "followers_url": "https://api.github.com/users/spbail/followers", "following_url": "https://api.github.com/users/spbail/following{/other_user}", "gists_url": "https://api.github.com/users/spbail/gists{/gist_id}", "starred_url": "https://api.github.com/users/spbail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spbail/subscriptions", "organizations_url": "https://api.github.com/users/spbail/orgs", "repos_url": "https://api.github.com/users/spbail/repos", "events_url": "https://api.github.com/users/spbail/events{/privacy}", "received_events_url": "https://api.github.com/users/spbail/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "spbail", "id": 1734474, "node_id": "MDQ6VXNlcjE3MzQ0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1734474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spbail", "html_url": "https://github.com/spbail", "followers_url": "https://api.github.com/users/spbail/followers", "following_url": "https://api.github.com/users/spbail/following{/other_user}", "gists_url": "https://api.github.com/users/spbail/gists{/gist_id}", "starred_url": "https://api.github.com/users/spbail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spbail/subscriptions", "organizations_url": "https://api.github.com/users/spbail/orgs", "repos_url": "https://api.github.com/users/spbail/repos", "events_url": "https://api.github.com/users/spbail/events{/privacy}", "received_events_url": "https://api.github.com/users/spbail/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2021-02-01T10:17:48Z", "updated_at": "2025-01-23T14:21:57Z", "closed_at": "2021-02-17T16:46:39Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "**Describe the bug**\r\nHi,\r\nI made a fresh install of latest ge version (0.13.8) and followed the [getting started example](https://docs.greatexpectations.io/en/latest/guides/tutorials/getting_started/create_your_first_expectations.html). After I run the `scaffold` command and run the jupyter notebook, the last cell \"Save & review the scaffolded Expectation Suite\" throws an error at `results = context.run_validation_operator(\"action_list_operator\", assets_to_validate=[batch])`\r\n\r\n**Error message**:  \r\n`DataContextError: No validation operator `action_list_operator` was found in your project. Please verify this in your great_expectations.yml`\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Clone the tutorial `git clone https://github.com/superconductive/ge_tutorials` and start postgres container\r\n2. Initialize a new expectations project `great_expectations init` following the steps at the [tutorial docs](https://docs.greatexpectations.io/en/latest/guides/tutorials/getting_started/initialize_a_data_context.html)\r\n3. Run the `scaffold` command `great_expectations suite scaffold taxi.demo` and execute notebook cells\r\n4. See error at last cell\r\n\r\n**Environment (please complete the following information):**\r\n - Operating System: Windows, Python 3.8.0\r\n - Great Expectations Version: [0.13.8]\r\n\r\n**Additional context**\r\nIf I manually add the `action_list_operator` in `great_expectations.yml` as shown at the [Github example](https://github.com/superconductive/ge_tutorials/blob/ad93033d0ecf99d35834dafccfacf32bc9adfb9e/ge_getting_started_tutorial/great_expectations/great_expectations.yml#L40) the notebook cell is executed but then when I run a new checkpoint it shows a deprecation message: \r\n`You appear to be using a legacy capability with the latest config version (3.0).\r\n    Your data context with this configuration version uses validation_operators, which are being deprecated.  Please update your configuration to be compatible with the version number 3.`\r\n\r\nI couldn't find any similar issue. Thank you!", "closed_by": {"login": "spbail", "id": 1734474, "node_id": "MDQ6VXNlcjE3MzQ0NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1734474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spbail", "html_url": "https://github.com/spbail", "followers_url": "https://api.github.com/users/spbail/followers", "following_url": "https://api.github.com/users/spbail/following{/other_user}", "gists_url": "https://api.github.com/users/spbail/gists{/gist_id}", "starred_url": "https://api.github.com/users/spbail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spbail/subscriptions", "organizations_url": "https://api.github.com/users/spbail/orgs", "repos_url": "https://api.github.com/users/spbail/repos", "events_url": "https://api.github.com/users/spbail/events{/privacy}", "received_events_url": "https://api.github.com/users/spbail/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2358/reactions", "total_count": 3, "+1": 3, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2358/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2321", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2321/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2321/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2321/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/2321", "id": 793449563, "node_id": "MDU6SXNzdWU3OTM0NDk1NjM=", "number": 2321, "title": "How can I configure a impala /hive data source?", "user": {"login": "l00173745", "id": 41352984, "node_id": "MDQ6VXNlcjQxMzUyOTg0", "avatar_url": "https://avatars.githubusercontent.com/u/41352984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/l00173745", "html_url": "https://github.com/l00173745", "followers_url": "https://api.github.com/users/l00173745/followers", "following_url": "https://api.github.com/users/l00173745/following{/other_user}", "gists_url": "https://api.github.com/users/l00173745/gists{/gist_id}", "starred_url": "https://api.github.com/users/l00173745/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/l00173745/subscriptions", "organizations_url": "https://api.github.com/users/l00173745/orgs", "repos_url": "https://api.github.com/users/l00173745/repos", "events_url": "https://api.github.com/users/l00173745/events{/privacy}", "received_events_url": "https://api.github.com/users/l00173745/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2021-01-25T14:53:59Z", "updated_at": "2025-03-01T07:41:42Z", "closed_at": "2021-02-01T22:44:15Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "I would like to check the data which extract by impala sql and maybe can be transfer into pandas dataframe , but no idea how to use in GE.", "closed_by": {"login": "eugmandel", "id": 80363, "node_id": "MDQ6VXNlcjgwMzYz", "avatar_url": "https://avatars.githubusercontent.com/u/80363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eugmandel", "html_url": "https://github.com/eugmandel", "followers_url": "https://api.github.com/users/eugmandel/followers", "following_url": "https://api.github.com/users/eugmandel/following{/other_user}", "gists_url": "https://api.github.com/users/eugmandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/eugmandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eugmandel/subscriptions", "organizations_url": "https://api.github.com/users/eugmandel/orgs", "repos_url": "https://api.github.com/users/eugmandel/repos", "events_url": "https://api.github.com/users/eugmandel/events{/privacy}", "received_events_url": "https://api.github.com/users/eugmandel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/2321/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/1907", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/1907/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/1907/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/1907/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/1907", "id": 704001527, "node_id": "MDU6SXNzdWU3MDQwMDE1Mjc=", "number": 1907, "title": "ERROR: TypeError: Keys in TupleS3StoreBackend must be instances of <class 'tuple'>, not <class 'great_expectations.data_context.types.resource_identifiers.ValidationResultIdentifier'>", "user": {"login": "eugmandel", "id": 80363, "node_id": "MDQ6VXNlcjgwMzYz", "avatar_url": "https://avatars.githubusercontent.com/u/80363?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eugmandel", "html_url": "https://github.com/eugmandel", "followers_url": "https://api.github.com/users/eugmandel/followers", "following_url": "https://api.github.com/users/eugmandel/following{/other_user}", "gists_url": "https://api.github.com/users/eugmandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/eugmandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eugmandel/subscriptions", "organizations_url": "https://api.github.com/users/eugmandel/orgs", "repos_url": "https://api.github.com/users/eugmandel/repos", "events_url": "https://api.github.com/users/eugmandel/events{/privacy}", "received_events_url": "https://api.github.com/users/eugmandel/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721233, "node_id": "MDU6TGFiZWw2ODg3MjEyMzM=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/bug", "name": "bug", "color": "e35c30", "default": true, "description": "Bugs bugs bugs!"}, {"id": 2300538776, "node_id": "MDU6TGFiZWwyMzAwNTM4Nzc2", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/feature:data_docs", "name": "feature:data_docs", "color": "ebf7f1", "default": false, "description": "Issues and PR related to Data Docs"}, {"id": 2366193763, "node_id": "MDU6TGFiZWwyMzY2MTkzNzYz", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/blocker%20bug", "name": "blocker bug", "color": "f5050d", "default": false, "description": "A bug that blocks a user from completing a use case"}, {"id": 2367960808, "node_id": "MDU6TGFiZWwyMzY3OTYwODA4", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/core-team-priority", "name": "core-team-priority", "color": "a6fc6c", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "anthonyburdi", "id": 9903066, "node_id": "MDQ6VXNlcjk5MDMwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9903066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anthonyburdi", "html_url": "https://github.com/anthonyburdi", "followers_url": "https://api.github.com/users/anthonyburdi/followers", "following_url": "https://api.github.com/users/anthonyburdi/following{/other_user}", "gists_url": "https://api.github.com/users/anthonyburdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/anthonyburdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anthonyburdi/subscriptions", "organizations_url": "https://api.github.com/users/anthonyburdi/orgs", "repos_url": "https://api.github.com/users/anthonyburdi/repos", "events_url": "https://api.github.com/users/anthonyburdi/events{/privacy}", "received_events_url": "https://api.github.com/users/anthonyburdi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "assignees": [{"login": "anthonyburdi", "id": 9903066, "node_id": "MDQ6VXNlcjk5MDMwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9903066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anthonyburdi", "html_url": "https://github.com/anthonyburdi", "followers_url": "https://api.github.com/users/anthonyburdi/followers", "following_url": "https://api.github.com/users/anthonyburdi/following{/other_user}", "gists_url": "https://api.github.com/users/anthonyburdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/anthonyburdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anthonyburdi/subscriptions", "organizations_url": "https://api.github.com/users/anthonyburdi/orgs", "repos_url": "https://api.github.com/users/anthonyburdi/repos", "events_url": "https://api.github.com/users/anthonyburdi/events{/privacy}", "received_events_url": "https://api.github.com/users/anthonyburdi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2020-09-18T00:54:24Z", "updated_at": "2024-10-13T19:27:13Z", "closed_at": "2020-10-02T17:19:37Z", "author_association": "CONTRIBUTOR", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "A few users reported this error, but we do not have precise steps to reproduce this - in progress...\r\nTODO: fill in the details\r\n\r\n\r\n**Describe the bug**\r\nTODO\r\n\r\n**To Reproduce**\r\nTODO\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nError should not happen\r\n\r\n**Environment (please complete the following information):**\r\n - OS: [e.g. iOS]\r\n - GE Version: [e.g. 0.10.0]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n", "closed_by": {"login": "anthonyburdi", "id": 9903066, "node_id": "MDQ6VXNlcjk5MDMwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/9903066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anthonyburdi", "html_url": "https://github.com/anthonyburdi", "followers_url": "https://api.github.com/users/anthonyburdi/followers", "following_url": "https://api.github.com/users/anthonyburdi/following{/other_user}", "gists_url": "https://api.github.com/users/anthonyburdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/anthonyburdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anthonyburdi/subscriptions", "organizations_url": "https://api.github.com/users/anthonyburdi/orgs", "repos_url": "https://api.github.com/users/anthonyburdi/repos", "events_url": "https://api.github.com/users/anthonyburdi/events{/privacy}", "received_events_url": "https://api.github.com/users/anthonyburdi/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/1907/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/1907/timeline", "performed_via_github_app": null, "state_reason": "completed"}, {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/478", "repository_url": "https://api.github.com/repos/great-expectations/great_expectations", "labels_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/478/labels{/name}", "comments_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/478/comments", "events_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/478/events", "html_url": "https://github.com/great-expectations/great_expectations/issues/478", "id": 448703999, "node_id": "MDU6SXNzdWU0NDg3MDM5OTk=", "number": 478, "title": "Will Great Expectations support Dask for parallel data integrity validation?", "user": {"login": "vnnw", "id": 4979571, "node_id": "MDQ6VXNlcjQ5Nzk1NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/4979571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vnnw", "html_url": "https://github.com/vnnw", "followers_url": "https://api.github.com/users/vnnw/followers", "following_url": "https://api.github.com/users/vnnw/following{/other_user}", "gists_url": "https://api.github.com/users/vnnw/gists{/gist_id}", "starred_url": "https://api.github.com/users/vnnw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vnnw/subscriptions", "organizations_url": "https://api.github.com/users/vnnw/orgs", "repos_url": "https://api.github.com/users/vnnw/repos", "events_url": "https://api.github.com/users/vnnw/events{/privacy}", "received_events_url": "https://api.github.com/users/vnnw/received_events", "type": "User", "user_view_type": "public", "site_admin": false}, "labels": [{"id": 688721235, "node_id": "MDU6TGFiZWw2ODg3MjEyMzU=", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/enhancement", "name": "enhancement", "color": "84b6eb", "default": true, "description": null}, {"id": 1901311827, "node_id": "MDU6TGFiZWwxOTAxMzExODI3", "url": "https://api.github.com/repos/great-expectations/great_expectations/labels/stale", "name": "stale", "color": "f9c8a7", "default": false, "description": "Stale issues and PRs"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-05-27T07:21:45Z", "updated_at": "2025-08-06T13:31:13Z", "closed_at": "2020-08-04T00:39:38Z", "author_association": "NONE", "type": null, "active_lock_reason": null, "sub_issues_summary": {"total": 0, "completed": 0, "percent_completed": 0}, "issue_dependencies_summary": {"blocked_by": 0, "total_blocked_by": 0, "blocking": 0, "total_blocking": 0}, "body": "As Pandas is now using as one of the underlying workhorses for data validation, I think it is quite possible to use Dask as an parallel alternative in case when Pyspark is inconvenient  for deployment.", "closed_by": {"login": "github-actions[bot]", "id": 41898282, "node_id": "MDM6Qm90NDE4OTgyODI=", "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/github-actions%5Bbot%5D", "html_url": "https://github.com/apps/github-actions", "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers", "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos", "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events", "type": "Bot", "user_view_type": "public", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/great-expectations/great_expectations/issues/478/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/great-expectations/great_expectations/issues/478/timeline", "performed_via_github_app": null, "state_reason": "completed"}]